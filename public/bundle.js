/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={69:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageEventClass=t.MessageEvent2=void 0;var i=r(1635),n=function(e){function t(t,r){var n=void 0===r?{}:r,o=n.data,s=void 0===o?null:o,a=n.origin,c=void 0===a?"":a,l=n.lastEventId,u=void 0===l?"":l,h=n.source,d=void 0===h?null:h,f=n.ports,p=void 0===f?[]:f,_=e.call(this,t)||this;return _.data=s,_.origin="".concat(c),_.lastEventId="".concat(u),_.source=d,_.ports=i.__spreadArray([],i.__read(p),!1),_}return i.__extends(t,e),t.prototype.initMessageEvent=function(){throw Error("Deprecated method")},t}(r(9958).Event2);t.MessageEvent2=n,t.MessageEventClass="undefined"!=typeof MessageEvent?MessageEvent:n},102:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.HostTracker=void 0;var n=r(1635),o=r(2468),s=r(589),a=r(7802),c=r(8551),l=r(3608),u=r(6804),h="[HostTracker]",d=function(e){function t(){var t=e.call(this,{action:a.ACTION.LIST_HOSTS})||this;return t.trackers=[],t.openNewConnection(),t.ws&&(t.ws.binaryType="arraybuffer"),t}return n.__extends(t,e),t.start=function(){this.getInstance()},t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.onSocketClose=function(e){console.log(h,"WS closed"),this.emit("disconnected",e)},t.prototype.onSocketMessage=function(e){var t,r=this;try{t=JSON.parse(e.data)}catch(e){return console.error(h,e.message),void console.log(h,e.data)}switch(t.type){case s.MessageType.ERROR:var i=t;console.error(h,i.data),this.emit("error",i.data);break;case s.MessageType.HOSTS:(i=t).data.local&&i.data.local.forEach(function(e){var t=e.type,i="https:"===location.protocol,n=location.port?parseInt(location.port,10):i?443:80,o=location.hostname,s=location.pathname;if("android"===t||"ios"===t){var a={useProxy:!1,secure:i,port:n,hostname:o,pathname:s,type:t};r.startTracker(a)}else console.warn(h,'Unsupported host type: "'.concat(t,'"'))}),i.data.remote&&i.data.remote.forEach(function(e){return r.startTracker(e)});break;default:console.log(h,"Unknown message type: ".concat(t.type))}},t.prototype.startTracker=function(e){switch(e.type){case"android":this.trackers.push(c.DeviceTracker.start(e));break;case"ios":this.trackers.push(l.DeviceTracker.start(e));break;default:console.warn(h,'Unsupported host type: "'.concat(e.type,'"'))}},t.prototype.onSocketOpen=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.trackers.forEach(function(e){e.destroy()}),this.trackers.length=0},t.prototype.supportMultiplexing=function(){return!0},t.prototype.getChannelInitData=function(){var e=i.alloc(4);return e.write(u.ChannelCode.HSTS,"ascii"),e},t}(o.ManagerClient);t.HostTracker=d},104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.ACTION_DOWN=0,e.ACTION_UP=1,e.KEYCODE_0=7,e.KEYCODE_1=8,e.KEYCODE_11=227,e.KEYCODE_12=228,e.KEYCODE_2=9,e.KEYCODE_3=10,e.KEYCODE_3D_MODE=206,e.KEYCODE_4=11,e.KEYCODE_5=12,e.KEYCODE_6=13,e.KEYCODE_7=14,e.KEYCODE_8=15,e.KEYCODE_9=16,e.KEYCODE_A=29,e.KEYCODE_ALL_APPS=284,e.KEYCODE_ALT_LEFT=57,e.KEYCODE_ALT_RIGHT=58,e.KEYCODE_APOSTROPHE=75,e.KEYCODE_APP_SWITCH=187,e.KEYCODE_ASSIST=219,e.KEYCODE_AT=77,e.KEYCODE_AVR_INPUT=182,e.KEYCODE_AVR_POWER=181,e.KEYCODE_B=30,e.KEYCODE_BACK=4,e.KEYCODE_BACKSLASH=73,e.KEYCODE_BOOKMARK=174,e.KEYCODE_BREAK=121,e.KEYCODE_BRIGHTNESS_DOWN=220,e.KEYCODE_BRIGHTNESS_UP=221,e.KEYCODE_BUTTON_1=188,e.KEYCODE_BUTTON_10=197,e.KEYCODE_BUTTON_11=198,e.KEYCODE_BUTTON_12=199,e.KEYCODE_BUTTON_13=200,e.KEYCODE_BUTTON_14=201,e.KEYCODE_BUTTON_15=202,e.KEYCODE_BUTTON_16=203,e.KEYCODE_BUTTON_2=189,e.KEYCODE_BUTTON_3=190,e.KEYCODE_BUTTON_4=191,e.KEYCODE_BUTTON_5=192,e.KEYCODE_BUTTON_6=193,e.KEYCODE_BUTTON_7=194,e.KEYCODE_BUTTON_8=195,e.KEYCODE_BUTTON_9=196,e.KEYCODE_BUTTON_A=96,e.KEYCODE_BUTTON_B=97,e.KEYCODE_BUTTON_C=98,e.KEYCODE_BUTTON_L1=102,e.KEYCODE_BUTTON_L2=104,e.KEYCODE_BUTTON_MODE=110,e.KEYCODE_BUTTON_R1=103,e.KEYCODE_BUTTON_R2=105,e.KEYCODE_BUTTON_SELECT=109,e.KEYCODE_BUTTON_START=108,e.KEYCODE_BUTTON_THUMBL=106,e.KEYCODE_BUTTON_THUMBR=107,e.KEYCODE_BUTTON_X=99,e.KEYCODE_BUTTON_Y=100,e.KEYCODE_BUTTON_Z=101,e.KEYCODE_C=31,e.KEYCODE_CALCULATOR=210,e.KEYCODE_CALENDAR=208,e.KEYCODE_CALL=5,e.KEYCODE_CAMERA=27,e.KEYCODE_CAPS_LOCK=115,e.KEYCODE_CAPTIONS=175,e.KEYCODE_CHANNEL_DOWN=167,e.KEYCODE_CHANNEL_UP=166,e.KEYCODE_CLEAR=28,e.KEYCODE_COMMA=55,e.KEYCODE_CONTACTS=207,e.KEYCODE_COPY=278,e.KEYCODE_CTRL_LEFT=113,e.KEYCODE_CTRL_RIGHT=114,e.KEYCODE_CUT=277,e.KEYCODE_D=32,e.KEYCODE_DEL=67,e.KEYCODE_DPAD_CENTER=23,e.KEYCODE_DPAD_DOWN=20,e.KEYCODE_DPAD_DOWN_LEFT=269,e.KEYCODE_DPAD_DOWN_RIGHT=271,e.KEYCODE_DPAD_LEFT=21,e.KEYCODE_DPAD_RIGHT=22,e.KEYCODE_DPAD_UP=19,e.KEYCODE_DPAD_UP_LEFT=268,e.KEYCODE_DPAD_UP_RIGHT=270,e.KEYCODE_DVR=173,e.KEYCODE_E=33,e.KEYCODE_EISU=212,e.KEYCODE_ENDCALL=6,e.KEYCODE_ENTER=66,e.KEYCODE_ENVELOPE=65,e.KEYCODE_EQUALS=70,e.KEYCODE_ESCAPE=111,e.KEYCODE_EXPLORER=64,e.KEYCODE_F=34,e.KEYCODE_F1=131,e.KEYCODE_F10=140,e.KEYCODE_F11=141,e.KEYCODE_F12=142,e.KEYCODE_F2=132,e.KEYCODE_F3=133,e.KEYCODE_F4=134,e.KEYCODE_F5=135,e.KEYCODE_F6=136,e.KEYCODE_F7=137,e.KEYCODE_F8=138,e.KEYCODE_F9=139,e.KEYCODE_FOCUS=80,e.KEYCODE_FORWARD=125,e.KEYCODE_FORWARD_DEL=112,e.KEYCODE_FUNCTION=119,e.KEYCODE_G=35,e.KEYCODE_GRAVE=68,e.KEYCODE_GUIDE=172,e.KEYCODE_H=36,e.KEYCODE_HEADSETHOOK=79,e.KEYCODE_HELP=259,e.KEYCODE_HENKAN=214,e.KEYCODE_HOME=3,e.KEYCODE_I=37,e.KEYCODE_INFO=165,e.KEYCODE_INSERT=124,e.KEYCODE_J=38,e.KEYCODE_K=39,e.KEYCODE_KANA=218,e.KEYCODE_KATAKANA_HIRAGANA=215,e.KEYCODE_L=40,e.KEYCODE_LANGUAGE_SWITCH=204,e.KEYCODE_LAST_CHANNEL=229,e.KEYCODE_LEFT_BRACKET=71,e.KEYCODE_M=41,e.KEYCODE_MANNER_MODE=205,e.KEYCODE_MEDIA_AUDIO_TRACK=222,e.KEYCODE_MEDIA_CLOSE=128,e.KEYCODE_MEDIA_EJECT=129,e.KEYCODE_MEDIA_FAST_FORWARD=90,e.KEYCODE_MEDIA_NEXT=87,e.KEYCODE_MEDIA_PAUSE=127,e.KEYCODE_MEDIA_PLAY=126,e.KEYCODE_MEDIA_PLAY_PAUSE=85,e.KEYCODE_MEDIA_PREVIOUS=88,e.KEYCODE_MEDIA_RECORD=130,e.KEYCODE_MEDIA_REWIND=89,e.KEYCODE_MEDIA_SKIP_BACKWARD=273,e.KEYCODE_MEDIA_SKIP_FORWARD=272,e.KEYCODE_MEDIA_STEP_BACKWARD=275,e.KEYCODE_MEDIA_STEP_FORWARD=274,e.KEYCODE_MEDIA_STOP=86,e.KEYCODE_MEDIA_TOP_MENU=226,e.KEYCODE_MENU=82,e.KEYCODE_META_LEFT=117,e.KEYCODE_META_RIGHT=118,e.KEYCODE_MINUS=69,e.KEYCODE_MOVE_END=123,e.KEYCODE_MOVE_HOME=122,e.KEYCODE_MUHENKAN=213,e.KEYCODE_MUSIC=209,e.KEYCODE_MUTE=91,e.KEYCODE_N=42,e.KEYCODE_NAVIGATE_IN=262,e.KEYCODE_NAVIGATE_NEXT=261,e.KEYCODE_NAVIGATE_OUT=263,e.KEYCODE_NAVIGATE_PREVIOUS=260,e.KEYCODE_NOTIFICATION=83,e.KEYCODE_NUM=78,e.KEYCODE_NUMPAD_0=144,e.KEYCODE_NUMPAD_1=145,e.KEYCODE_NUMPAD_2=146,e.KEYCODE_NUMPAD_3=147,e.KEYCODE_NUMPAD_4=148,e.KEYCODE_NUMPAD_5=149,e.KEYCODE_NUMPAD_6=150,e.KEYCODE_NUMPAD_7=151,e.KEYCODE_NUMPAD_8=152,e.KEYCODE_NUMPAD_9=153,e.KEYCODE_NUMPAD_ADD=157,e.KEYCODE_NUMPAD_COMMA=159,e.KEYCODE_NUMPAD_DIVIDE=154,e.KEYCODE_NUMPAD_DOT=158,e.KEYCODE_NUMPAD_ENTER=160,e.KEYCODE_NUMPAD_EQUALS=161,e.KEYCODE_NUMPAD_LEFT_PAREN=162,e.KEYCODE_NUMPAD_MULTIPLY=155,e.KEYCODE_NUMPAD_RIGHT_PAREN=163,e.KEYCODE_NUMPAD_SUBTRACT=156,e.KEYCODE_NUM_LOCK=143,e.KEYCODE_O=43,e.KEYCODE_P=44,e.KEYCODE_PAGE_DOWN=93,e.KEYCODE_PAGE_UP=92,e.KEYCODE_PAIRING=225,e.KEYCODE_PASTE=279,e.KEYCODE_PERIOD=56,e.KEYCODE_PICTSYMBOLS=94,e.KEYCODE_PLUS=81,e.KEYCODE_POUND=18,e.KEYCODE_POWER=26,e.KEYCODE_PROFILE_SWITCH=288,e.KEYCODE_PROG_BLUE=186,e.KEYCODE_PROG_GREEN=184,e.KEYCODE_PROG_RED=183,e.KEYCODE_PROG_YELLOW=185,e.KEYCODE_Q=45,e.KEYCODE_R=46,e.KEYCODE_REFRESH=285,e.KEYCODE_RIGHT_BRACKET=72,e.KEYCODE_RO=217,e.KEYCODE_S=47,e.KEYCODE_SCROLL_LOCK=116,e.KEYCODE_SEARCH=84,e.KEYCODE_SEMICOLON=74,e.KEYCODE_SETTINGS=176,e.KEYCODE_SHIFT_LEFT=59,e.KEYCODE_SHIFT_RIGHT=60,e.KEYCODE_SLASH=76,e.KEYCODE_SLEEP=223,e.KEYCODE_SOFT_LEFT=1,e.KEYCODE_SOFT_RIGHT=2,e.KEYCODE_SOFT_SLEEP=276,e.KEYCODE_SPACE=62,e.KEYCODE_STAR=17,e.KEYCODE_STB_INPUT=180,e.KEYCODE_STB_POWER=179,e.KEYCODE_STEM_1=265,e.KEYCODE_STEM_2=266,e.KEYCODE_STEM_3=267,e.KEYCODE_STEM_PRIMARY=264,e.KEYCODE_SWITCH_CHARSET=95,e.KEYCODE_SYM=63,e.KEYCODE_SYSRQ=120,e.KEYCODE_SYSTEM_NAVIGATION_DOWN=281,e.KEYCODE_SYSTEM_NAVIGATION_LEFT=282,e.KEYCODE_SYSTEM_NAVIGATION_RIGHT=283,e.KEYCODE_SYSTEM_NAVIGATION_UP=280,e.KEYCODE_T=48,e.KEYCODE_TAB=61,e.KEYCODE_THUMBS_DOWN=287,e.KEYCODE_THUMBS_UP=286,e.KEYCODE_TV=170,e.KEYCODE_TV_ANTENNA_CABLE=242,e.KEYCODE_TV_AUDIO_DESCRIPTION=252,e.KEYCODE_TV_AUDIO_DESCRIPTION_MIX_DOWN=254,e.KEYCODE_TV_AUDIO_DESCRIPTION_MIX_UP=253,e.KEYCODE_TV_CONTENTS_MENU=256,e.KEYCODE_TV_DATA_SERVICE=230,e.KEYCODE_TV_INPUT=178,e.KEYCODE_TV_INPUT_COMPONENT_1=249,e.KEYCODE_TV_INPUT_COMPONENT_2=250,e.KEYCODE_TV_INPUT_COMPOSITE_1=247,e.KEYCODE_TV_INPUT_COMPOSITE_2=248,e.KEYCODE_TV_INPUT_HDMI_1=243,e.KEYCODE_TV_INPUT_HDMI_2=244,e.KEYCODE_TV_INPUT_HDMI_3=245,e.KEYCODE_TV_INPUT_HDMI_4=246,e.KEYCODE_TV_INPUT_VGA_1=251,e.KEYCODE_TV_MEDIA_CONTEXT_MENU=257,e.KEYCODE_TV_NETWORK=241,e.KEYCODE_TV_NUMBER_ENTRY=234,e.KEYCODE_TV_POWER=177,e.KEYCODE_TV_RADIO_SERVICE=232,e.KEYCODE_TV_SATELLITE=237,e.KEYCODE_TV_SATELLITE_BS=238,e.KEYCODE_TV_SATELLITE_CS=239,e.KEYCODE_TV_SATELLITE_SERVICE=240,e.KEYCODE_TV_TELETEXT=233,e.KEYCODE_TV_TERRESTRIAL_ANALOG=235,e.KEYCODE_TV_TERRESTRIAL_DIGITAL=236,e.KEYCODE_TV_TIMER_PROGRAMMING=258,e.KEYCODE_TV_ZOOM_MODE=255,e.KEYCODE_U=49,e.KEYCODE_UNKNOWN=0,e.KEYCODE_V=50,e.KEYCODE_VOICE_ASSIST=231,e.KEYCODE_VOLUME_DOWN=25,e.KEYCODE_VOLUME_MUTE=164,e.KEYCODE_VOLUME_UP=24,e.KEYCODE_W=51,e.KEYCODE_WAKEUP=224,e.KEYCODE_WINDOW=171,e.KEYCODE_X=52,e.KEYCODE_Y=53,e.KEYCODE_YEN=216,e.KEYCODE_Z=54,e.KEYCODE_ZENKAKU_HANKAKU=211,e.KEYCODE_ZOOM_IN=168,e.KEYCODE_ZOOM_OUT=169,e.META_ALT_LEFT_ON=16,e.META_ALT_MASK=50,e.META_ALT_ON=2,e.META_ALT_RIGHT_ON=32,e.META_CAPS_LOCK_ON=1048576,e.META_CTRL_LEFT_ON=8192,e.META_CTRL_MASK=28672,e.META_CTRL_ON=4096,e.META_CTRL_RIGHT_ON=16384,e.META_FUNCTION_ON=8,e.META_META_LEFT_ON=131072,e.META_META_MASK=458752,e.META_META_ON=65536,e.META_META_RIGHT_ON=262144,e.META_NUM_LOCK_ON=2097152,e.META_SCROLL_LOCK_ON=4194304,e.META_SHIFT_LEFT_ON=64,e.META_SHIFT_MASK=193,e.META_SHIFT_ON=1,e.META_SHIFT_RIGHT_ON=128,e.META_SYM_ON=4,e}();t.default=r},251:(e,t)=>{t.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?n-1:0,d=r?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=l}return(f?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,r,i,n,o){var s,a,c,l=8*o-n-1,u=(1<<l)-1,h=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*c-1)*Math.pow(2,n),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(s=s<<n|a,l+=n;l>0;e[r+f]=255&s,f+=p,s/=256,l-=8);e[r+f-p]|=128*_}},275:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.AdbkitFilePushStream=void 0;var n=r(1635),o=r(8056),s=r(5994),a=r(8461),c=n.__importDefault(r(1309)),l=n.__importStar(r(7975)),u=n.__importDefault(r(8806)),h=function(e){function t(t,r){var i=e.call(this)||this;return i.socket=t,i.fileListingClient=r,i.channels=new Map,i}return n.__extends(t,e),t.prototype.hasConnection=function(){return this.socket.readyState==this.socket.OPEN},t.prototype.isAllowedFile=function(){return!0},t.prototype.getChannel=function(e){var t=this.channels.get(e),r=a.FilePushResponseStatus.NO_ERROR;if(t||(r=a.FilePushResponseStatus.ERROR_UNKNOWN_ID),!r)return t;this.emit("response",{id:e,code:r})},t.prototype.sendEventAppend=function(e){var t=e.id,r={id:t,chunk:e.chunk,state:s.FilePushState.APPEND},i=this.getChannel(t);i&&i.send(s.CommandControlMessage.createPushFileCommand(r).toBuffer())},t.prototype.sendEventFinish=function(e){var t=e.id,r={id:t,state:s.FilePushState.FINISH},i=this.getChannel(t);i&&i.send(s.CommandControlMessage.createPushFileCommand(r).toBuffer())},t.prototype.sendEventNew=function(e){var t=this,r=e.id,n=r,o={id:r,state:s.FilePushState.NEW},l=this.socket.createChannel(i.from(c.default.SEND)),h=function(e){var r=0,o=i.from(e.data),s=o.readInt16BE(r);r+=2;var c=o.readInt8(r);c===a.FilePushResponseStatus.NEW_PUSH_ID&&(t.channels.set(s,l),n=s),t.emit("response",{id:s,code:c})},d=function(e){if(!e.wasClean){var r=4e3-e.code;t.emit("error",{id:n,error:new Error(u.default.getErrorMessage(r,e.reason))})}l.removeEventListener("message",h),l.removeEventListener("close",d)};l.addEventListener("message",h),l.addEventListener("close",d),l.send(s.CommandControlMessage.createPushFileCommand(o).toBuffer())},t.prototype.sendEventStart=function(e){var t=e.id,r=e.fileName,i=e.fileSize,n={id:t,fileName:l.join(this.fileListingClient.getPath(),r),fileSize:i,state:s.FilePushState.START},o=this.getChannel(t);o&&o.send(s.CommandControlMessage.createPushFileCommand(n).toBuffer())},t.prototype.release=function(){this.channels.forEach(function(e){e.close()})},t}(o.FilePushStream);t.AdbkitFilePushStream=h},368:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamClientScrcpy=void 0;var i,n=r(1635),o=r(8672),s=r(4735),a=r(8022),c=n.__importDefault(r(3644)),l=n.__importDefault(r(8089)),u=r(5994),h=n.__importDefault(r(2332)),d=n.__importDefault(r(8806)),f=n.__importDefault(r(5258)),p=r(3726),_=r(8824),v=r(8171),g=r(8551),y=r(1453),m=r(2178),b=r(1389),S=r(4410),E=r(102),C=r(7802),w=r(1926),A=r(1646),T="[StreamClientScrcpy]",O=function(e){function t(r,i,n,o,s,a){var l=e.call(this,r)||this;l.deviceName="",l.clientId=-1,l.clientsCount=-1,l.joinedStream=!1,l.OnDeviceMessage=function(e){l.moreBox&&l.moreBox.OnDeviceMessage(e)},l.onVideo=function(e){if(l.player){var t=_.BasePlayer.STATE;l.player.getState()===t.PAUSED&&l.player.play(),l.player.getState()===t.PLAYING&&l.player.pushFrame(new Uint8Array(e))}},l.onClientsStats=function(e){l.deviceName=e.deviceName,l.clientId=e.clientId},l.onDisplayInfo=function(e){var r;if(l.player){var i=l.player.getVideoSettings(),n=i.displayId,o=e.find(function(e){return e.displayInfo.displayId===n});if(o){l.player.getState()===_.BasePlayer.STATE.PAUSED&&l.player.play();var s=o.videoSettings,a=o.screenInfo;if(l.player.setDisplayInfo(o.displayInfo),"boolean"!=typeof l.fitToScreen&&(l.fitToScreen=l.player.getFitToScreenStatus()),l.fitToScreen){var h=l.getMaxSize();h&&(i=t.createVideoSettingsWithBounds(i,h),l.player.setVideoSettings(i,l.fitToScreen,!1))}if(!s||!a)return l.joinedStream=!0,void l.sendMessage(u.CommandControlMessage.createSetVideoSettingsCommand(i));l.clientsCount=o.connectionCount;var d=c.default.copy(s),f=l.player.getScreenInfo();if(a.equals(f)||l.player.setScreenInfo(a),s.equals(i)||l.applyNewVideoSettings(s,s.equals(l.requestedVideoSettings)),!f){var p=i.bounds,v=a.videoSize,g=0===l.clientsCount,y=p&&(p.width<v.width||p.height<v.height);(g||y)&&(d=i);var m=null===(r=i.bounds)||void 0===r?void 0:r.intersect(d.bounds);m&&!m.equals(d.bounds)&&(d=t.createVideoSettingsWithBounds(d,m))}d.equals(s)&&l.joinedStream||(l.joinedStream=!0,l.sendMessage(u.CommandControlMessage.createSetVideoSettingsCommand(d)))}}},l.onDisconnected=function(){var e,t;l.streamReceiver.off("deviceMessage",l.OnDeviceMessage),l.streamReceiver.off("video",l.onVideo),l.streamReceiver.off("clientsStats",l.onClientsStats),l.streamReceiver.off("displayInfo",l.onDisplayInfo),l.streamReceiver.off("disconnected",l.onDisconnected),null===(e=l.filePushHandler)||void 0===e||e.release(),l.filePushHandler=void 0,null===(t=l.touchHandler)||void 0===t||t.release(),l.touchHandler=void 0},console.log("!clientParams",a),l.clientParams=a,l.streamReceiver=i||new w.StreamReceiverScrcpy(l.params);var h=l.params,d=h.udid,f=h.player;return l.startStream({udid:d,player:n,playerName:f,fitToScreen:o,videoSettings:s}),l.setBodyClass("stream"),l}return n.__extends(t,e),t.registerPlayer=function(e){e.isSupported()&&this.players.set(e.playerFullName,e)},t.getPlayers=function(){return Array.from(this.players.values())},t.getPlayerClass=function(e){var r,i,o;try{for(var s=n.__values(t.players.values()),a=s.next();!a.done;a=s.next()){var c=a.value;c.playerFullName!==e&&c.playerCodeName!==e||(o=c)}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o},t.createPlayer=function(e,t,r){var i=this.getPlayerClass(e);if(i)return new i(t,r)},t.getFitToScreen=function(e,t,r){var i=this.getPlayerClass(e);return!!i&&i.getFitToScreenStatus(t,r)},t.start=function(e,r,i,n,o,s){if(r instanceof URLSearchParams){var a=t.parseParameters(r);return new t(a,i,n,o,s,e)}return new t(r,i,n,o,s,e)},t.createVideoSettingsWithBounds=function(e,t){return new c.default({crop:e.crop,bitrate:e.bitrate,bounds:t,maxFps:e.maxFps,iFrameInterval:e.iFrameInterval,sendFrameMeta:e.sendFrameMeta,lockedVideoOrientation:e.lockedVideoOrientation,displayId:e.displayId,codecOptions:e.codecOptions,encoderName:e.encoderName})},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),i=r.action;if(i!==C.ACTION.STREAM_SCRCPY)throw Error("Incorrect action");return n.__assign(n.__assign({},r),{action:i,player:h.default.parseString(t,"player",!0),udid:h.default.parseString(t,"udid",!0),ws:h.default.parseString(t,"ws",!0)})},t.prototype.startStream=function(e){var r=this,i=e.udid,n=e.player,o=e.playerName,c=e.videoSettings,l=e.fitToScreen;if(!i)throw Error('Invalid udid value: "'.concat(i,'"'));if(this.fitToScreen=l,!n){if("string"!=typeof o)throw Error("Must provide BasePlayer instance or playerName");var u=void 0;this.streamReceiver&&c&&(u=this.streamReceiver.getDisplayInfo(c.displayId));var h=t.createPlayer(o,i,u);if(!h)throw Error('Unsupported player: "'.concat(o,'"'));"boolean"!=typeof l&&(l=t.getFitToScreen(o,i,u)),n=h}this.player=n,this.setTouchListeners(n),c||(c=n.getVideoSettings());var p=document.createElement("div");p.className="device-view";var _=this.moreBox=new s.GoogMoreBox(i,n,this),v=_.getHolderElement();_.setOnStop(function(e){var t;e&&e instanceof Event&&"error"===e.type&&console.error(T,e),(t=p.parentElement)&&t.removeChild(p),(t=v.parentElement)&&t.removeChild(v),r.streamReceiver.stop(),r.player&&r.player.stop()});var g=a.GoogToolBox.createToolBox(i,n,this,v);this.controlButtons=g.getHolderElement(),p.appendChild(this.controlButtons);var y=document.createElement("div");y.className="video",p.appendChild(y),p.appendChild(v),n.setParent(y),n.pause(),document.body.appendChild(p);var m=document.createElement("div");m.className="div-move";var b=document.createElement("span"),S=document.createElement("span");b.innerHTML="«",S.innerHTML="»",m.appendChild(b),m.appendChild(S);var E=location.hash.replace(/^#!/,""),C=new URLSearchParams(E),w=C.get("number"),O=C.get("cuid"),L=null==C.get("ips")?"172.20.50.59:7000":C.get("ips"),R=null,D="",M="",x="",P="",I="",k="";console.log("number",w),console.log("udid",i),console.log("ips",L),fetch("http://"+L+"/devices").then(function(e){return e.json()}).then(function(e){R=e,console.log("devices",R),R.sort(function(e,t){return e.number<t.number?-1:e.number>t.number?1:0});for(var t=0;t<R.length;t++)R[t].number==w&&(D=t-1>=0?R[t-1].number:R[R.length-1].number,M=t+1<R.length?R[t+1].number:R[0].number,x=t-1>=0?R[t-1].serial:R[R.length-1].serial,P=t+1<R.length?R[t+1].serial:R[0].serial,I=t-1>=0?R[t-1].clusterAddress:R[R.length-1].clusterAddress,k=t+1<R.length?R[t+1].clusterAddress:R[0].clusterAddress),console.log("devices",R),console.log("prevNumber nextNumber",D,M),console.log("prevUdid nextUdid",x,P),console.log("prevServer nextServer",I,k)});var B=function(){var e="http://".concat(I,":8000/#!action=stream&cuid=").concat(O,"&ips=").concat(L,"&number=").concat(D,"&udid=").concat(x,"&player=broadway&ws=ws%3A%2F%2F").concat(I,"%3A8000%2F%3Faction%3Dproxy-adb%26remote%3Dtcp%253A8886%26udid%3D").concat(x);console.log("currentUrl1",e),location.replace(e),location.reload()},F=function(){var e="http://".concat(k,":8000/#!action=stream&cuid=").concat(O,"&ips=").concat(L,"&number=").concat(M,"&udid=").concat(P,"&player=broadway&ws=ws%3A%2F%2F").concat(k,"%3A8000%2F%3Faction%3Dproxy-adb%26remote%3Dtcp%253A8886%26udid%3D").concat(P);console.log("currentUrl1",e),setTimeout(function(){document.location.href=e},500),location.replace(e),location.reload()};if(document.addEventListener("keydown",function(e){"ArrowLeft"===e.key&&B(),"ArrowRight"===e.key&&F()}),b.addEventListener("click",function(){B()}),S.addEventListener("click",function(){F()}),document.body.appendChild(m),l){var N=this.getMaxSize();N&&(c=t.createVideoSettingsWithBounds(c,N))}this.applyNewVideoSettings(c,!1);var U=n.getTouchableElement(),H=new f.default(U);this.filePushHandler=new d.default(U,new A.ScrcpyFilePushStream(this.streamReceiver)),this.filePushHandler.addEventListener(H);var K=this.streamReceiver;K.on("deviceMessage",this.OnDeviceMessage),K.on("video",this.onVideo),K.on("clientsStats",this.onClientsStats),K.on("displayInfo",this.onDisplayInfo),K.on("disconnected",this.onDisconnected),console.log(T,n.getName(),i)},t.prototype.sendMessage=function(e){this.streamReceiver.sendEvent(e)},t.prototype.getDeviceName=function(){return this.deviceName},t.prototype.setHandleKeyboardEvents=function(e){e?p.KeyInputHandler.addEventListener(this):p.KeyInputHandler.removeEventListener(this)},t.prototype.onKeyEvent=function(e){this.sendMessage(e)},t.prototype.sendNewVideoSetting=function(e){this.requestedVideoSettings=e,this.sendMessage(u.CommandControlMessage.createSetVideoSettingsCommand(e))},t.prototype.getClientId=function(){return this.clientId},t.prototype.getClientsCount=function(){return this.clientsCount},t.prototype.getMaxSize=function(){if(this.controlButtons){var e=document.body,t=e.clientWidth-this.controlButtons.clientWidth&-16,r=-16&e.clientHeight;return new l.default(t,r)}},t.prototype.setTouchListeners=function(e){var t;this.touchHandler||(this.touchHandler=new b.FeaturedInteractionHandler(e,this),null===(t=this.touchHandler)||void 0===t||t.setClientParams(this.clientParams))},t.prototype.applyNewVideoSettings=function(e,t){var r=!1;e.bounds&&e.bounds.equals(this.getMaxSize())&&(r=!0),this.player&&this.player.setVideoSettings(e,r,t)},t.createEntryForDeviceList=function(e,t,r,o){if(-1!==e.pid){var s="configure_".concat(h.default.escapeUdid(e.udid)),a=(0,m.html)(i||(i=n.__makeTemplateObject(['<div class="stream ','">\n                <button\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    id="','"\n                    class="active action-button"\n                >\n                    Configure stream\n                </button>\n            </div>'],['<div class="stream ','">\n                <button\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    ','="','"\n                    id="','"\n                    class="active action-button"\n                >\n                    Configure stream\n                </button>\n            </div>'])),t,S.Attribute.UDID,e.udid,S.Attribute.COMMAND,y.ControlCenterCommand.CONFIGURE_STREAM,S.Attribute.FULL_NAME,r,S.Attribute.SECURE,o.secure,S.Attribute.HOSTNAME,o.hostname,S.Attribute.PORT,o.port,S.Attribute.PATHNAME,o.pathname,S.Attribute.USE_PROXY,o.useProxy,s),c=a.content.getElementById(s);return c&&(c.onclick=this.onConfigureStreamClick),a.content}},t.ACTION="stream",t.players=new Map,t.onConfigureStreamClick=function(e){var r=e.currentTarget,i=h.default.parseStringEnv(r.getAttribute(S.Attribute.UDID)||""),n=r.getAttribute(S.Attribute.FULL_NAME),o=h.default.parseBooleanEnv(r.getAttribute(S.Attribute.SECURE)||void 0)||!1,s=h.default.parseStringEnv(r.getAttribute(S.Attribute.HOSTNAME)||void 0)||"",a=h.default.parseIntEnv(r.getAttribute(S.Attribute.PORT)||void 0),c=h.default.parseStringEnv(r.getAttribute(S.Attribute.PATHNAME)||void 0)||"",l=h.default.parseBooleanEnv(r.getAttribute(S.Attribute.USE_PROXY)||void 0);if(!i)throw Error('Invalid udid value: "'.concat(i,'"'));if("number"!=typeof a)throw Error("Invalid port type: ".concat(typeof a));var u=g.DeviceTracker.getInstance({type:"android",secure:o,hostname:s,port:a,pathname:c,useProxy:l}),d=u.getDescriptorByUdid(i);if(d){e.preventDefault();var f=document.getElementsByName("".concat(g.DeviceTracker.AttributePrefixInterfaceSelectFor).concat(n));if(f&&f.length){var p=f[0],_=p.options[p.selectedIndex],y=_.getAttribute(S.Attribute.URL),m=_.getAttribute(S.Attribute.NAME);if(y&&m){var b={udid:i,ws:y,player:"",action:C.ACTION.STREAM_SCRCPY,secure:o,hostname:s,port:a,pathname:c,useProxy:l};new v.ConfigureScrcpy(u,d,b).on("closed",t.onConfigureDialogClosed)}}}},t.onConfigureDialogClosed=function(e){e.dialog.off("closed",t.onConfigureDialogClosed),e.result&&E.HostTracker.getInstance().destroy()},t}(o.BaseClient);t.StreamClientScrcpy=O},462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEmitter=void 0;var i=r(7007),n=function(){function e(){this.emitter=new i.EventEmitter}return e.prototype.addEventListener=function(e,t){this.emitter.on(e,t)},e.prototype.removeEventListener=function(e,t){this.emitter.off(e,t)},e.prototype.dispatchEvent=function(e){return this.emitter.emit(e.type,e)},e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.once=function(e,t){this.emitter.once(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e.prototype.emit=function(e,t){return this.emitter.emit(e,t)},e}();t.TypedEmitter=n},471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ARGS_STRING=t.SERVER_PROCESS_NAME=t.LOG_LEVEL=t.VIDEO_ENCODER=t.SERVER_TYPE=t.SERVER_VERSION=t.SERVER_PORT=t.SERVER_PACKAGE=void 0,t.SERVER_PACKAGE="com.genymobile.scrcpy.Server",t.SERVER_PORT=8886,t.SERVER_VERSION="1.19-ws6",t.SERVER_TYPE="web",t.VIDEO_ENCODER="video_encoder=OMX.google.h264.encoder",t.LOG_LEVEL="INFO";var r=[t.SERVER_VERSION,t.SERVER_TYPE,t.LOG_LEVEL,t.SERVER_PORT,!0,t.VIDEO_ENCODER];t.SERVER_PROCESS_NAME="app_process",t.ARGS_STRING="/ ".concat(t.SERVER_PACKAGE," ").concat(r.join(" ")," 2>&1 > /dev/null")},528:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Polling=void 0;const n=r(4689),o=r(5374),s=r(6376),a=(0,i(r(7833)).default)("engine.io-client:polling");class c extends n.Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{a("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(a("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){a("pre-pause polling complete"),--e||t()})),this.writable||(a("we are currently writing - waiting to pause"),e++,this.once("drain",function(){a("pre-pause writing complete"),--e||t()}))}else t()}_poll(){a("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){a("polling got data %s",e),(0,s.decodePayload)(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this._poll():a('ignoring poll - transport state "%s"',this.readyState))}doClose(){const e=()=>{a("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(a("transport open - closing"),e()):(a("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,s.encodePayload)(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.randomString)()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}t.Polling=c},589:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,(r=t.MessageType||(t.MessageType={})).HOSTS="hosts",r.ERROR="error"},724:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3,18h18v-2L3,16v2zM3,13h18v-2L3,11v2zM3,6v2h18L21,6L3,6z"></path></svg>'},736:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,o,s=null;function a(...e){if(!a.enabled)return;const i=a,n=Number(new Date),o=n-(r||n);i.diff=o,i.prev=r,i.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";s++;const o=t.formatters[n];if("function"==typeof o){const t=e[s];r=o.call(i,t),e.splice(s,1),s--}return r}),t.formatArgs.call(i,e),(i.log||t.log).apply(i,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlMessage=void 0;var r=function(){function e(e){this.type=e}return e.prototype.toBuffer=function(){throw Error("Not implemented")},e.prototype.toString=function(){return"ControlMessage"},e.prototype.toJSON=function(){return{type:this.type}},e.TYPE_KEYCODE=0,e.TYPE_TEXT=1,e.TYPE_TOUCH=2,e.TYPE_SCROLL=3,e.TYPE_BACK_OR_SCREEN_ON=4,e.TYPE_EXPAND_NOTIFICATION_PANEL=5,e.TYPE_EXPAND_SETTINGS_PANEL=6,e.TYPE_COLLAPSE_PANELS=7,e.TYPE_GET_CLIPBOARD=8,e.TYPE_SET_CLIPBOARD=9,e.TYPE_SET_SCREEN_POWER_MODE=10,e.TYPE_ROTATE_DEVICE=11,e.TYPE_CHANGE_STREAM_PARAMETERS=101,e.TYPE_PUSH_FILE=102,e}();t.ControlMessage=r},941:(e,t,r)=>{var i=r(2308),n=r(2122),o=r(8941),s=r(4746);function a(){}a.prototype={eql:function(e){return this.contains(e.anchor)&&this.isParallelTo(e)},dup:function(){return a.create(this.anchor,this.normal)},translate:function(e){var t=e.elements||e;return a.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.normal)},isParallelTo:function(e){var t;return e.normal?(t=this.normal.angleFrom(e.normal),Math.abs(t)<=s.precision||Math.abs(Math.PI-t)<=s.precision):e.direction?this.normal.isPerpendicularTo(e.direction):null},isPerpendicularTo:function(e){var t=this.normal.angleFrom(e.normal);return Math.abs(Math.PI/2-t)<=s.precision},distanceFrom:function(e){if(this.intersects(e)||this.contains(e))return 0;if(e.anchor){var t=this.anchor.elements,r=e.anchor.elements,i=this.normal.elements;return Math.abs((t[0]-r[0])*i[0]+(t[1]-r[1])*i[1]+(t[2]-r[2])*i[2])}var n=e.elements||e;return t=this.anchor.elements,i=this.normal.elements,Math.abs((t[0]-n[0])*i[0]+(t[1]-n[1])*i[1]+(t[2]-(n[2]||0))*i[2])},contains:function(e){if(e.normal)return null;if(e.direction)return this.contains(e.anchor)&&this.contains(e.anchor.add(e.direction));var t=e.elements||e,r=this.anchor.elements,i=this.normal.elements;return Math.abs(i[0]*(r[0]-t[0])+i[1]*(r[1]-t[1])+i[2]*(r[2]-(t[2]||0)))<=s.precision},intersects:function(e){return void 0===e.direction&&void 0===e.normal?null:!this.isParallelTo(e)},intersectionWith:function(e){if(!this.intersects(e))return null;if(e.direction){var t=e.anchor.elements,r=e.direction.elements,s=this.anchor.elements,a=((l=this.normal.elements)[0]*(s[0]-t[0])+l[1]*(s[1]-t[1])+l[2]*(s[2]-t[2]))/(l[0]*r[0]+l[1]*r[1]+l[2]*r[2]);return i.create([t[0]+r[0]*a,t[1]+r[1]*a,t[2]+r[2]*a])}if(e.normal){for(var c=this.normal.cross(e.normal).toUnitVector(),l=this.normal.elements,u=(t=this.anchor.elements,e.normal.elements),h=e.anchor.elements,d=n.Zero(2,2),f=0;d.isSingular();)f++,d=n.create([[l[f%3],l[(f+1)%3]],[u[f%3],u[(f+1)%3]]]);for(var p=d.inverse().elements,_=l[0]*t[0]+l[1]*t[1]+l[2]*t[2],v=u[0]*h[0]+u[1]*h[1]+u[2]*h[2],g=[p[0][0]*_+p[0][1]*v,p[1][0]*_+p[1][1]*v],y=[],m=1;m<=3;m++)y.push(f==m?0:g[(m+(5-f)%3)%3]);return o.create(y,c)}},pointClosestTo:function(e){var t=e.elements||e,r=this.anchor.elements,n=this.normal.elements,o=(r[0]-t[0])*n[0]+(r[1]-t[1])*n[1]+(r[2]-(t[2]||0))*n[2];return i.create([t[0]+n[0]*o,t[1]+n[1]*o,(t[2]||0)+n[2]*o])},rotate:function(e,t){var r=e.determinant?e.elements:n.Rotation(e,t.direction).elements,i=t.pointClosestTo(this.anchor).elements,o=this.anchor.elements,s=this.normal.elements,c=i[0],l=i[1],u=i[2],h=o[0]-c,d=o[1]-l,f=o[2]-u;return a.create([c+r[0][0]*h+r[0][1]*d+r[0][2]*f,l+r[1][0]*h+r[1][1]*d+r[1][2]*f,u+r[2][0]*h+r[2][1]*d+r[2][2]*f],[r[0][0]*s[0]+r[0][1]*s[1]+r[0][2]*s[2],r[1][0]*s[0]+r[1][1]*s[1]+r[1][2]*s[2],r[2][0]*s[0]+r[2][1]*s[1]+r[2][2]*s[2]])},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,r=this.normal.elements,i=t[0],n=t[1],o=t[2],s=r[0],c=r[1],l=r[2],u=this.anchor.reflectionIn(e).elements,h=i+s,d=n+c,f=o+l,p=e.pointClosestTo([h,d,f]).elements,_=[p[0]+(p[0]-h)-u[0],p[1]+(p[1]-d)-u[1],p[2]+(p[2]-f)-u[2]];return a.create(u,_)}if(e.direction)return this.rotate(Math.PI,e);var v=e.elements||e;return a.create(this.anchor.reflectionIn([v[0],v[1],v[2]||0]),this.normal)},setVectors:function(e,t,r){if(null===(e=(e=i.create(e)).to3D()))return null;if(null===(t=(t=i.create(t)).to3D()))return null;if(void 0===r)r=null;else if(null===(r=(r=i.create(r)).to3D()))return null;var n,o,s=e.elements[0],a=e.elements[1],c=e.elements[2],l=t.elements[0],u=t.elements[1],h=t.elements[2];if(null!==r){var d=r.elements[0],f=r.elements[1],p=r.elements[2];if(0===(o=(n=i.create([(u-a)*(p-c)-(h-c)*(f-a),(h-c)*(d-s)-(l-s)*(p-c),(l-s)*(f-a)-(u-a)*(d-s)])).modulus()))return null;n=i.create([n.elements[0]/o,n.elements[1]/o,n.elements[2]/o])}else{if(0===(o=Math.sqrt(l*l+u*u+h*h)))return null;n=i.create([t.elements[0]/o,t.elements[1]/o,t.elements[2]/o])}return this.anchor=e,this.normal=n,this}},a.create=function(e,t,r){return(new a).setVectors(e,t,r)},a.XY=a.create(i.Zero(3),i.k),a.YZ=a.create(i.Zero(3),i.i),a.ZX=a.create(i.Zero(3),i.j),a.YX=a.XY,a.ZY=a.YZ,a.XZ=a.ZX,a.fromPoints=function(e){var t,r,n,o,c,l,u,h,d,f,p=e.length,_=[],v=i.Zero(3);for(t=0;t<p;t++){if(null===(r=i.create(e[t]).to3D()))return null;if(_.push(r),(n=_.length)>2){if(c=_[n-1].elements,l=_[n-2].elements,u=_[n-3].elements,o=i.create([(c[1]-l[1])*(u[2]-l[2])-(c[2]-l[2])*(u[1]-l[1]),(c[2]-l[2])*(u[0]-l[0])-(c[0]-l[0])*(u[2]-l[2]),(c[0]-l[0])*(u[1]-l[1])-(c[1]-l[1])*(u[0]-l[0])]).toUnitVector(),n>3&&null!==(d=o.angleFrom(f))&&!(Math.abs(d)<=s.precision||Math.abs(d-Math.PI)<=s.precision))return null;v=v.add(o),f=o}}return c=_[1].elements,l=_[0].elements,u=_[n-1].elements,h=_[n-2].elements,v=v.add(i.create([(c[1]-l[1])*(u[2]-l[2])-(c[2]-l[2])*(u[1]-l[1]),(c[2]-l[2])*(u[0]-l[0])-(c[0]-l[0])*(u[2]-l[2]),(c[0]-l[0])*(u[1]-l[1])-(c[1]-l[1])*(u[0]-l[0])]).toUnitVector()).add(i.create([(l[1]-u[1])*(h[2]-u[2])-(l[2]-u[2])*(h[1]-u[1]),(l[2]-u[2])*(h[0]-u[0])-(l[0]-u[0])*(h[2]-u[2]),(l[0]-u[0])*(h[1]-u[1])-(l[1]-u[1])*(h[0]-u[0])]).toUnitVector()),a.create(_[0],v)},e.exports=a},1015:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let s=r.exec(e||""),a={},c=14;for(;c--;)a[i[c]]=s[c]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,a.path),a.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,i){t&&(r[t]=i)}),r}(0,a.query),a};const r=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]},1018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635).__importDefault(r(4900)),n=function(){function e(e){this.gl=e,this.program=this.gl.createProgram()}return e.prototype.attach=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));if(!e.shader)throw Error("Shader type is ".concat(typeof e.shader));this.gl.attachShader(this.program,e.shader)},e.prototype.link=function(){if(!this.program)throw Error("Program type is ".concat(typeof this.program));this.gl.linkProgram(this.program),(0,i.default)(this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS),"Unable to initialize the shader program.")},e.prototype.use=function(){this.gl.useProgram(this.program)},e.prototype.getAttributeLocation=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));return this.gl.getAttribLocation(this.program,e)},e.prototype.setMatrixUniform=function(e,t){if(!this.program)throw Error("Program type is ".concat(typeof this.program));var r=this.gl.getUniformLocation(this.program,e);this.gl.uniformMatrix4fv(r,!1,t)},e}();t.default=n},1130:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"1279f368b5bb729ca7b35990042f9928.png"},1161:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.setLogger=function(e,t){r=e,i=null!=t?t:e},t.isEnable=function(){return null!=r},t.log=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(t))},t.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];i&&i.apply(void 0,[e].concat(t))}},1232:e=>{e.exports='<svg viewBox="0 0 28.867456 24.303799" version="1.1" id="svg1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs1"></defs><g id="layer1" transform="translate(-85.173357,-140.34472)"><path style="fill:#000000" d="m 106.22562,164.27972 c 0.45166,-0.19661 1.1065,-0.7575 1.45521,-1.24642 0.63315,-0.88773 0.63411,-0.90038 0.70684,-9.3556 0.0672,-7.80929 0.0348,-8.53857 -0.41645,-9.39271 -0.66011,-1.24936 -2.38149,-2.11667 -4.20105,-2.11667 -1.11664,0 -1.44522,-0.10348 -1.67157,-0.52643 -0.91567,-1.71093 -4.8948,-1.73579 -5.80435,-0.0363 -0.20434,0.3818 -0.66801,0.51919 -2.09748,0.62146 -3.2905,0.23544 -4.270464,1.43324 -4.270464,5.21977 v 2.39439 h -1.45104 c -1.22901,0 -1.58324,0.11805 -2.3151,0.77149 l -0.86407,0.77149 -0.0909,2.98426 c -0.0789,2.59075 -0.0305,3.02843 0.36728,3.3193 0.32191,0.23538 0.60473,0.25662 0.95082,0.0714 0.42921,-0.22971 0.49262,-0.59884 0.49262,-2.86777 0,-1.89632 0.0996,-2.68682 0.36657,-2.90836 0.24933,-0.20692 1.62449,-0.28075 4.299484,-0.23083 l 3.93291,0.0734 0.072,5.12525 c 0.0507,3.60995 -0.0192,5.23514 -0.23652,5.49696 -0.24455,0.29466 -1.10954,0.35658 -4.17302,0.29871 l -3.864514,-0.073 -0.37848,-0.8599 c -0.26905,-0.61126 -0.55447,-0.85989 -0.98715,-0.85989 -1.40385,0 -0.8538,2.50163 0.73014,3.32072 0.66363,0.34318 1.57918,0.40401 5.044954,0.33521 l 4.23418,-0.0841 0.7714,-0.86407 0.7714,-0.86407 v -5.43293 c 0,-7.16685 -0.18863,-7.52331 -3.98119,-7.52331 h -1.83963 v -2.19008 c 0,-2.33513 0.32341,-3.18145 1.31482,-3.44071 0.49288,-0.12889 0.5376,-0.0169 0.54132,1.35608 0.002,0.82312 0.10018,1.64806 0.21768,1.83319 0.16356,0.25771 1.41844,0.31973 5.35375,0.26459 l 5.14013,-0.072 0.0782,-1.78594 c 0.043,-0.98227 0.14016,-1.78594 0.21584,-1.78594 0.31045,0 1.31506,0.64378 1.61574,1.03541 0.23659,0.30814 0.32456,2.55185 0.33073,8.43547 l 0.008,8.01568 -0.64943,0.64943 c -0.60226,0.60225 -0.84015,0.64943 -3.2749,0.64943 -2.90138,0 -3.51754,0.2715 -2.96389,1.306 0.2666,0.49815 0.52946,0.54517 2.99492,0.53573 1.66623,-0.006 3.01759,-0.14745 3.52387,-0.36784 z M 95.53374,145.02946 c -0.0794,-0.9549 -0.0601,-0.97706 0.92383,-1.05834 0.75985,-0.0628 1.02856,-0.21206 1.10177,-0.61217 0.16255,-0.88845 0.58723,-1.19063 1.67327,-1.19063 0.93784,0 1.07726,0.0905 1.42636,0.92604 0.31975,0.76526 0.52413,0.92605 1.17713,0.92605 0.74646,0 0.7902,0.059 0.7902,1.06601 v 1.06601 l -3.50573,-0.0738 -3.50572,-0.0738 z m -1.88486,13.38856 c 0.25238,-0.3041 0.2715,-0.53998 0.0697,-0.8599 -0.2212,-0.35066 -0.70517,-0.44084 -2.36591,-0.44084 -1.999314,0 -2.091624,0.0268 -2.177134,0.63154 -0.12303,0.87013 0.33501,1.0795 2.372014,1.0842 1.2809,0.003 1.84728,-0.1089 2.10132,-0.415 z m -0.009,-3.42919 c 0.64644,-0.77892 -0.009,-1.30129 -1.74594,-1.39213 -2.266064,-0.11848 -2.813404,0.0733 -2.712304,0.95012 0.0811,0.70328 0.12505,0.71999 2.092334,0.79492 1.59683,0.0608 2.08269,-0.0117 2.36591,-0.35291 z" id="path1-6"></path><path style="fill:#000000;stroke-width:0.443785" d="m 112.09231,154.84716 c 1.90681,-1.90753 1.9485,-1.95458 1.9485,-2.19876 0,-0.24421 -0.0414,-0.29095 -1.95018,-2.19896 l -1.95018,-1.94944 -0.52831,0.53108 -0.52832,0.53107 1.08992,1.09125 1.08992,1.09126 h -4.63088 -4.63088 v 0.87329 0.87329 h 4.58476 c 2.52162,0 4.58477,0.0208 4.58477,0.0461 0,0.0254 -0.47733,0.52406 -1.06075,1.10818 l -1.06074,1.06205 0.54693,0.5444 0.54693,0.5444 z" id="path2-7"></path></g></svg>'},1233:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceState=void 0,(r=t.DeviceState||(t.DeviceState={})).DEVICE="device",r.DISCONNECTED="disconnected",r.CONNECTED="Connected"},1284:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"></path><path d="M26 6h-4v20h4V6zm9.67 4.33l-2.83 2.83C35.98 15.73 38 19.62 38 24c0 7.73-6.27 14-14 14s-14-6.27-14-14c0-4.38 2.02-8.27 5.16-10.84l-2.83-2.83C8.47 13.63 6 18.52 6 24c0 9.94 8.06 18 18 18s18-8.06 18-18c0-5.48-2.47-10.37-6.33-13.67z" fill="var(--svg-button-fill)" stroke="var(--svg-button-fill)"></path></svg>'},1309:(e,t,r)=>{"use strict";var i=r(8287).Buffer,n=function(){function e(){}return e.decodeLength=function(e){return parseInt(e,16)},e.encodeLength=function(e){return("0000"+e.toString(16)).slice(-4).toUpperCase()},e.encodeData=function(t){return i.isBuffer(t)||(t=new i(t)),i.concat([new i(e.encodeLength(t.length)),t])},e.OKAY="OKAY",e.FAIL="FAIL",e.STAT="STAT",e.LIST="LIST",e.DENT="DENT",e.RECV="RECV",e.DATA="DATA",e.DONE="DONE",e.SEND="SEND",e.QUIT="QUIT",e}();e.exports=n},1389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturedInteractionHandler=void 0;var i=r(1635),n=r(4091),o=i.__importDefault(r(4504)),s=r(3762),a=function(e){function t(r,i){var s=e.call(this,r,t.touchEventsNames,t.keyEventsNames)||this;return s.listener=i,s.storedFromMouseEvent=new Map,s.storedFromTouchEvent=new Map,s.onMouseEnter=function(){s.over=!0},s.onMouseLeave=function(){s.lastPosition=void 0,s.over=!1,s.storedFromMouseEvent.forEach(function(e){s.listener.sendMessage(n.InteractionHandler.createEmulatedMessage(o.default.ACTION_UP,e))}),s.storedFromMouseEvent.clear(),s.clearCanvas()},s.tag.addEventListener("mouseleave",s.onMouseLeave),s.tag.addEventListener("mouseenter",s.onMouseEnter),s}return i.__extends(t,e),t.prototype.setClientParams=function(e){this.clientParams=e},t.prototype.buildScrollEvent=function(e,r){var i=[],o=n.InteractionHandler.buildTouchOnClient(e,r);if(o){var a=e.deltaX>0?-1:e.deltaX<-0?1:0,c=e.deltaY>0?-1:e.deltaY<-0?1:0,l=Date.now();(!this.lastScrollEvent||l-this.lastScrollEvent.time>t.SCROLL_EVENT_THROTTLING_TIME||this.lastScrollEvent.vScroll!==c||this.lastScrollEvent.hScroll!==a)&&(this.lastScrollEvent={time:l,hScroll:a,vScroll:c},i.push(new s.ScrollControlMessage(o.touch.position,a,c)))}return i},t.prototype.onInteraction=function(e){var t=this,r=this.player.getScreenInfo();if(r){var i,n;if(e instanceof MouseEvent){if(e.target!==this.tag)return;window.WheelEvent&&e instanceof WheelEvent?i=this.buildScrollEvent(e,r):(n=this.storedFromMouseEvent,i=this.buildTouchEvent(e,r,n)),this.over&&(this.lastPosition=e)}else{if(!(window.TouchEvent&&e instanceof TouchEvent))return void console.error("[FeaturedTouchHandler]","Unsupported event",e);if(e.target!==this.tag)return;n=this.storedFromTouchEvent,i=this.formatTouchEvent(e,r,n)}e.cancelable&&e.preventDefault(),e.stopPropagation(),i.forEach(function(e){null!=t.clientParams&&t.clientParams.socket.emit("remote.message",{clientUuid:t.clientParams.clientUuid,parentUid:t.clientParams.parentUid,uuid:t.clientParams.uuid,message:e.toBuffer()}),t.listener.sendMessage(e)})}},t.prototype.onKey=function(e){if(this.lastPosition){var t=this.player.getScreenInfo();if(t){var r=e.ctrlKey,i=e.shiftKey,o=this.lastPosition,s=o.target,a=o.button,c=o.buttons,l=o.clientY,u=o.clientX,h={ctrlKey:r,shiftKey:i,type:n.InteractionHandler.SIMULATE_MULTI_TOUCH,target:s,button:a,buttons:c,clientX:u,clientY:l};this.buildTouchEvent(h,t,new Map)}}},t.prototype.release=function(){e.prototype.release.call(this),this.tag.removeEventListener("mouseleave",this.onMouseLeave),this.tag.removeEventListener("mouseenter",this.onMouseEnter),this.storedFromMouseEvent.clear()},t.touchEventsNames=["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","wheel"],t.keyEventsNames=["keydown","keyup"],t.SCROLL_EVENT_THROTTLING_TIME=30,t}(n.InteractionHandler);t.FeaturedInteractionHandler=a},1432:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="var(--svg-button-fill)"><circle cx="24" cy="24" r="6.4"></circle><path d="M18 4l-3.66 4H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4h-6.34L30 4H18zm6 30c-5.52 0-10-4.48-10-10s4.48-10 10-10 10 4.48 10 10-4.48 10-10 10z"></path><path d="M0 0h48v48H0z" fill="none"></path></svg>'},1453:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlCenterCommand=void 0;var r=function(){function e(){this.id=-1,this.type="",this.pid=0,this.udid="",this.method=""}return e.fromJSON=function(t){var r=JSON.parse(t);if(!r)throw new Error("Invalid input");var i=new e,n=i.data=r.data;switch(i.id=r.id,i.type=r.type,"string"==typeof n.udid&&(i.udid=n.udid),r.type){case this.KILL_SERVER:if("number"!=typeof n.pid&&n.pid<=0)throw new Error('Invalid "pid" value');return i.pid=n.pid,i;case this.REQUEST_WDA:if("string"!=typeof n.method)throw new Error('Invalid "method" value');return i.method=n.method,i.args=n.args,i;case this.START_SERVER:case this.UPDATE_INTERFACES:case this.CONFIGURE_STREAM:case this.RUN_WDA:return i;default:throw new Error('Unknown command "'.concat(r.command,'"'))}},e.prototype.getType=function(){return this.type},e.prototype.getPid=function(){return this.pid},e.prototype.getUdid=function(){return this.udid},e.prototype.getId=function(){return this.id},e.prototype.getMethod=function(){return this.method},e.prototype.getData=function(){return this.data},e.prototype.getArgs=function(){return this.args},e.KILL_SERVER="kill_server",e.START_SERVER="start_server",e.UPDATE_INTERFACES="update_interfaces",e.CONFIGURE_STREAM="configure_stream",e.RUN_WDA="run-wda",e.REQUEST_WDA="request-wda",e}();t.ControlCenterCommand=r},1555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCanvasBasedPlayer=void 0;var i=r(1635),n=r(8824),o=function(e){function t(r,i,n,o,s){void 0===n&&(n="Canvas"),void 0===o&&(o="DummyCanvas"),void 0===s&&(s=t.createElement());var a=e.call(this,r,i,n,o,s)||this;return a.tag=s,a.framesList=[],a.decodedFrames=[],a.videoStats=[],a.drawDecoded=function(){if(a.canvas){if(a.receivedFirstFrame){var e=a.decodedFrames.shift();if(e){var t=e.frame,r=e.width,i=e.height;a.canvas.decode(t,r,i)}}a.decodedFrames.length?a.animationFrameId=requestAnimationFrame(a.drawDecoded):a.animationFrameId=void 0}},a}return i.__extends(t,e),t.hasWebGLSupport=function(){for(var e=document.createElement("canvas"),t=["webgl","experimental-webgl","moz-webgl","webkit-3d"],r=0,i=null;!i&&r++<t.length;)try{i=e.getContext(t[r])}catch(e){i=null}return!!i},t.createElement=function(e){var t=document.createElement("canvas");return"string"==typeof e&&(t.id=e),t.className="video-layer",t},t.prototype.onFrameDecoded=function(e,t,r){if(this.receivedFirstFrame){for(var i=0,n=this.videoSettings.maxFps/10;this.decodedFrames.length>n;){var o=this.decodedFrames.shift();o&&(this.dropFrame(o.frame),i++)}this.decodedFrames.push({width:e,height:t,frame:r}),this.videoStats.push({decodedFrames:1,droppedFrames:i,inputBytes:0,inputFrames:0,timestamp:Date.now()}),this.animationFrameId||(this.animationFrameId=requestAnimationFrame(this.drawDecoded))}},t.prototype.dropFrame=function(e){},t.prototype.shiftFrame=function(){if(this.getState()===n.BasePlayer.STATE.PLAYING){var e=this.framesList.shift();e&&this.decode(e)}},t.prototype.calculateMomentumStats=function(){for(var e=Date.now(),t=e-1e3;this.videoStats.length&&this.videoStats[0].timestamp<t;)this.videoStats.shift();for(;this.inputBytes.length&&this.inputBytes[0].timestamp<t;)this.inputBytes.shift();var r=0,i=0,n=0;this.videoStats.forEach(function(e){r+=e.decodedFrames,i+=e.droppedFrames}),this.inputBytes.forEach(function(e){n+=e.bytes}),this.momentumQualityStats={decodedFrames:r,droppedFrames:i,inputFrames:this.inputBytes.length,inputBytes:n,timestamp:e}},t.prototype.resetStats=function(){e.prototype.resetStats.call(this),this.videoStats=[]},t.prototype.getImageDataURL=function(){return this.tag.toDataURL()},t.prototype.initCanvas=function(e,r){var i=this;if(this.canvas){var n=this.tag.parentNode;if(n){var o=t.createElement(this.tag.id);o.className=this.tag.className,n.replaceChild(o,this.tag),n.appendChild(this.touchableCanvas),this.tag=o}}this.tag.onerror=function(e){console.error("[".concat(i.name,"]"),e)},this.tag.oncontextmenu=function(e){e.preventDefault()},this.tag.width=Math.round(e),this.tag.height=Math.round(r)},t.prototype.play=function(){if(e.prototype.play.call(this),this.getState()===n.BasePlayer.STATE.PLAYING&&this.screenInfo){if(!this.canvas){var t=this.screenInfo.videoSize,r=t.width,i=t.height;this.initCanvas(r,i),this.resetStats()}this.shiftFrame()}},t.prototype.stop=function(){e.prototype.stop.call(this),this.clearState()},t.prototype.setScreenInfo=function(t){e.prototype.setScreenInfo.call(this,t),this.clearState();var r=t.videoSize,i=r.width,n=r.height;this.initCanvas(i,n),this.framesList=[],this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0)},t.prototype.pushFrame=function(t){if(e.prototype.pushFrame.call(this,t),n.BasePlayer.isIFrame(t)&&this.videoSettings){var r=this.videoSettings.maxFps;if(this.framesList.length>r/2){var i=this.framesList.length;this.framesList=[],this.videoStats.push({decodedFrames:0,droppedFrames:i,inputBytes:0,inputFrames:0,timestamp:Date.now()})}}this.framesList.push(t),this.shiftFrame()},t.prototype.clearState=function(){this.framesList=[]},t}(n.BasePlayer);t.BaseCanvasBasedPlayer=o},1635:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>I,__assign:()=>o,__asyncDelegator:()=>A,__asyncGenerator:()=>w,__asyncValues:()=>T,__await:()=>C,__awaiter:()=>p,__classPrivateFieldGet:()=>M,__classPrivateFieldIn:()=>P,__classPrivateFieldSet:()=>x,__createBinding:()=>v,__decorate:()=>a,__disposeResources:()=>B,__esDecorate:()=>l,__exportStar:()=>g,__extends:()=>n,__generator:()=>_,__importDefault:()=>D,__importStar:()=>R,__makeTemplateObject:()=>O,__metadata:()=>f,__param:()=>c,__propKey:()=>h,__read:()=>m,__rest:()=>s,__runInitializers:()=>u,__setFunctionName:()=>d,__spread:()=>b,__spreadArray:()=>E,__spreadArrays:()=>S,__values:()=>y,default:()=>F});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};function s(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}function a(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,i){t(r,i,e)}}function l(e,t,r,i,n,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=i.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?i.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),d=!1,f=r.length-1;f>=0;f--){var p={};for(var _ in i)p[_]="access"===_?{}:i[_];for(var _ in i.access)p.access[_]=i.access[_];p.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var v=(0,r[f])("accessor"===c?{get:h.get,set:h.set}:h[l],p);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(a=s(v.get))&&(h.get=a),(a=s(v.set))&&(h.set=a),(a=s(v.init))&&n.unshift(a)}else(a=s(v))&&("field"===c?n.unshift(a):h[l]=a)}u&&Object.defineProperty(u,i.name,h),d=!0}function u(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0}function h(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((i=i.apply(e,t||[])).next())})}function _(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var v=Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function g(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||v(t,e,r)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function S(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function E(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function C(e){return this instanceof C?(this.v=e,this):new C(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){o.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{(r=n[e](t)).value instanceof C?Promise.resolve(r.value.v).then(c,l):u(o[0][2],r)}catch(e){u(o[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function A(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:C(e[i](t)),done:!1}:n?n(t):t}:n}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function O(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var L=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&v(t,e,r);return L(t,e),t}function D(e){return e&&e.__esModule?e:{default:e}}function M(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function x(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}function P(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function I(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if("function"!=typeof i)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var k="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function B(e){function t(t){e.error=e.hasError?new k(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var i=e.stack.pop();try{var n=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(n).then(r,function(e){return t(e),r()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}const F={__extends:n,__assign:o,__rest:s,__decorate:a,__param:c,__metadata:f,__awaiter:p,__generator:_,__createBinding:v,__exportStar:g,__values:y,__read:m,__spread:b,__spreadArrays:S,__spreadArray:E,__await:C,__asyncGenerator:w,__asyncDelegator:A,__asyncValues:T,__makeTemplateObject:O,__importStar:R,__importDefault:D,__classPrivateFieldGet:M,__classPrivateFieldSet:x,__classPrivateFieldIn:P,__addDisposableResource:I,__disposeResources:B}},1646:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrcpyFilePushStream=void 0;var i=r(1635),n=r(8056),o=i.__importDefault(r(5444)),s=r(5994),a=["application/vnd.android.package-archive"],c=/\.apk$/i,l=function(e){function t(t){var r=e.call(this)||this;return r.streamReceiver=t,r.onDeviceMessage=function(e){if(e.type===o.default.TYPE_PUSH_RESPONSE){var t=e.getPushStats();r.emit("response",t)}},t.on("deviceMessage",r.onDeviceMessage),r}return i.__extends(t,e),t.prototype.hasConnection=function(){return this.streamReceiver.hasConnection()},t.prototype.isAllowedFile=function(e){var t=e.type,r=e.name;return t&&a.includes(t)||!t&&c.test(r)},t.prototype.sendEventAppend=function(e){var t={id:e.id,chunk:e.chunk,state:s.FilePushState.APPEND};this.streamReceiver.sendEvent(s.CommandControlMessage.createPushFileCommand(t))},t.prototype.sendEventFinish=function(e){var t={id:e.id,state:s.FilePushState.FINISH};this.streamReceiver.sendEvent(s.CommandControlMessage.createPushFileCommand(t))},t.prototype.sendEventNew=function(e){var t={id:e.id,state:s.FilePushState.NEW};this.streamReceiver.sendEvent(s.CommandControlMessage.createPushFileCommand(t))},t.prototype.sendEventStart=function(e){var t={id:e.id,fileName:e.fileName,fileSize:e.fileSize,state:s.FilePushState.START};this.streamReceiver.sendEvent(s.CommandControlMessage.createPushFileCommand(t))},t.prototype.release=function(){this.streamReceiver.off("deviceMessage",this.onDeviceMessage)},t}(n.FilePushStream);t.ScrcpyFilePushStream=l},1709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(7958),n=r(1161),o=r(8794),s=function(){function e(e){this.remuxer=e,this.track=e.mp4track}return e.prototype.parseSEI=function(t){for(var r=0,i=e.readSEI(t);r<i.length;r++)switch(i[r].type){case 0:this.track.seiBuffering=!0;break;case 5:return!0}return!1},e.prototype.parseSPS=function(t){var r=e.readSPS(t);this.track.width=r.width,this.track.height=r.height,this.track.sps=[t],this.track.codec="avc1.";for(var i=new DataView(t.buffer,t.byteOffset+1,4),n=0;n<3;++n){var o=i.getUint8(n).toString(16);o.length<2&&(o="0"+o),this.track.codec+=o}},e.prototype.parsePPS=function(e){this.track.pps=[e]},e.prototype.parseNAL=function(e){if(!e)return!1;var t=!1;switch(e.type()){case o.default.NDR:case o.default.IDR:t=!0;break;case o.default.SEI:t=this.parseSEI(e.getData().subarray(4));break;case o.default.SPS:this.parseSPS(e.getData().subarray(4)),n.log(" Found SPS type NALU frame."),!this.remuxer.readyToDecode&&this.track.pps.length>0&&this.track.sps.length>0&&(this.remuxer.readyToDecode=!0);break;case o.default.PPS:this.parsePPS(e.getData().subarray(4)),n.log(" Found PPS type NALU frame."),!this.remuxer.readyToDecode&&this.track.pps.length>0&&this.track.sps.length>0&&(this.remuxer.readyToDecode=!0);break;default:n.log(" Found Unknown type NALU frame. type="+e.type())}return t},e.skipScalingList=function(e,t){for(var r=8,i=8,n=0;n<t;n++)0!==i&&(i=(r+e.readEG()+256)%256),r=0===i?r:i},e.readSPS=function(e){var t=this.parseSPS(e),r=t.pic_width_in_mbs_minus1,i=t.frame_crop_left_offset,n=t.frame_crop_right_offset,o=t.frame_mbs_only_flag,s=t.pic_height_in_map_units_minus1,a=t.frame_crop_top_offset,c=t.frame_crop_bottom_offset,l=t.sar,u=l[0]/l[1];return{width:Math.ceil((16*(r+1)-2*i-2*n)*u),height:(2-o)*(s+1)*16-(o?2:4)*(a+c)}},e.parseSPS=function(t){var r=new i.default(t),o=0,s=0,a=0,c=0;r.readUByte();var l=r.readUByte(),u=r.readUByte(),h=r.readBits(8),d=r.readUEG();if(100===l||110===l||122===l||244===l||44===l||83===l||86===l||118===l||128===l||138===l||139===l||134===l){var f=r.readUEG();if(3===f&&r.skipBits(1),r.skipUEG(),r.skipUEG(),r.skipBits(1),r.readBoolean())for(var p=3!==f?8:12,_=0;_<p;++_)r.readBoolean()&&(_<6?e.skipScalingList(r,16):e.skipScalingList(r,64))}r.skipUEG();var v=r.readUEG();if(0===v)r.readUEG();else if(1===v){r.skipBits(1),r.skipEG(),r.skipEG();var g=r.readUEG();for(_=0;_<g;++_)r.skipEG()}r.skipUEG(),r.skipBits(1);var y=r.readUEG(),m=r.readUEG(),b=r.readBits(1);0===b&&r.skipBits(1),r.skipBits(1),r.readBoolean()&&(o=r.readUEG(),s=r.readUEG(),a=r.readUEG(),c=r.readUEG());var S=[1,1];if(r.readBoolean()){if(r.readBoolean()){var E=r.readUByte();switch(E){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[r.readUByte()<<8|r.readUByte(),r.readUByte()<<8|r.readUByte()];break;default:n.error("  H264: Unknown aspectRatioIdc="+E)}}if(r.readBoolean()&&r.skipBits(1),r.readBoolean()&&(r.skipBits(4),r.readBoolean()&&r.skipBits(24)),r.readBoolean()&&(r.skipUEG(),r.skipUEG()),r.readBoolean())if(r.bitsAvailable>64){var C=r.readUInt(),w=r.readUInt(),A=r.readBoolean(),T=w/(2*C);n.log("timescale: "+w+"; unitsInTick: "+C+"; fixedFramerate: "+A+"; avgFrameDuration: "+T)}else n.log("Truncated VUI ("+r.bitsAvailable+")")}return{profile_idc:l,constraint_set_flags:u,level_idc:h,seq_parameter_set_id:d,pic_width_in_mbs_minus1:y,pic_height_in_map_units_minus1:m,frame_mbs_only_flag:b,frame_crop_left_offset:o,frame_crop_right_offset:s,frame_crop_top_offset:a,frame_crop_bottom_offset:c,sar:S}},e.readSEI=function(e){var t=new i.default(e);t.skipBits(8);for(var r=[];t.bitsAvailable>24;)r.push(this.readSEIMessage(t));return r},e.readSEIMessage=function(e){function t(){for(var t=0;;){var r=e.readUByte();if(t+=r,255!==r)break}return t}var r=t(),i=t();return this.readSEIPayload(e,r,i)},e.readSEIPayload=function(e,t,r){var i;return i={type:t},e.skipBits(8*r),e.skipBits(e.bitsAvailable%8),i},e}();t.default=s},1792:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentYUV=t.vertexQuad=void 0,t.vertexQuad={type:"x-shader/x-vertex",source:"\n  precision mediump float;\n\n  uniform mat4 u_projection;\n  attribute vec2 a_position;\n  attribute vec2 a_texCoord;\n  varying vec2 v_texCoord;\n  void main(){\n      v_texCoord = a_texCoord;\n      gl_Position = u_projection * vec4(a_position, 0.0, 1.0);\n  }\n"},t.fragmentYUV={type:"x-shader/x-fragment",source:"\n  precision lowp float;\n  \n  varying vec2 v_texCoord;\n  \n  uniform sampler2D yTexture;\n  uniform sampler2D uTexture;\n  uniform sampler2D vTexture;\n    \n  const mat4 conversion = mat4(\n    1.0,     0.0,     1.402,  -0.701,\n    1.0,    -0.344,  -0.714,   0.529,\n    1.0,     1.772,   0.0,    -0.886,\n    0.0,     0.0,     0.0,     0.0\n  );\n\n  void main(void) {\n    float yChannel = texture2D(yTexture, v_texCoord).x;\n    float uChannel = texture2D(uTexture, v_texCoord).x;\n    float vChannel = texture2D(vTexture, v_texCoord).x;\n    vec4 channels = vec4(yChannel, uChannel, vChannel, 1.0);\n    vec3 rgb = (channels * conversion).xyz;\n    gl_FragColor = vec4(rgb, 1.0);\n  }\n"}},1926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReceiverScrcpy=void 0;var i=r(1635),n=r(4003),o=r(7802),s=i.__importDefault(r(2332)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.parseParameters=function(t){var r=e.parseParameters.call(this,t),n=r.action;if(n!==o.ACTION.STREAM_SCRCPY)throw Error("Incorrect action");return i.__assign(i.__assign({},r),{action:n,udid:s.default.parseString(t,"udid",!0),ws:s.default.parseString(t,"ws",!0),player:s.default.parseString(t,"player",!0)})},t.prototype.buildDirectWebSocketUrl=function(){return new URL(this.params.ws)},t}(n.StreamReceiver);t.StreamReceiverScrcpy=a},1945:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Entry=void 0;var i=r(1635),n=function(e){function t(t,r,i,n){var o=e.call(this,r,i,n)||this;return o.name=t,o}return i.__extends(t,e),t.prototype.toString=function(){return this.name},t}(r(7142).Stats);t.Entry=n},2046:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_PACKET=t.PACKET_TYPES_REVERSE=t.PACKET_TYPES=void 0;const r=Object.create(null);t.PACKET_TYPES=r,r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";const i=Object.create(null);t.PACKET_TYPES_REVERSE=i,Object.keys(r).forEach(e=>{i[r[e]]=e}),t.ERROR_PACKET={type:"error",data:"parser error"}},2071:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.XHR=t.Request=t.BaseXHR=void 0;const n=r(528),o=r(4454),s=r(5374),a=r(4624),c=r(4110),l=(0,i(r(7833)).default)("engine.io-client:polling");function u(){}class h extends n.Polling{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){l("xhr poll");const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}t.BaseXHR=h;class d extends o.Emitter{constructor(e,t,r){super(),this.createRequest=e,(0,s.installTimerFunctions)(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;const t=(0,s.pick)(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{l("xhr open %s: %s",this._method,this._uri),r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{r.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},l("xhr data %s",this._data),r.send(this._data)}catch(e){return void this.setTimeoutFn(()=>{this._onError(e)},0)}"undefined"!=typeof document&&(this._index=d.requestsCount++,d.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=u,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(t.Request=d,d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",f);else if("function"==typeof addEventListener){const e="onpagehide"in a.globalThisShim?"pagehide":"unload";addEventListener(e,f,!1)}function f(){for(let e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}const p=function(){const e=_({xdomain:!1});return e&&null!==e.responseType}();function _(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||c.hasCORS))return new XMLHttpRequest}catch(e){}if(!t)try{return new(a.globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}t.XHR=class extends h{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=p&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new d(_,this.uri(),e)}}},2122:(e,t,r)=>{var n=r(4746);function o(e,t,r,i){for(var n=e.elements,o=i-1;o--;){for(var s=[],a=0;a<r;a++)s.push(a==o?1:0);n.unshift(s)}for(o=i-1;o<t;o++)for(;n[o].length<r;)n[o].unshift(0);return $M(n)}function s(){for(var e=this,t=c.I(e.rows()),r=e.transpose(),i=c.I(e.cols()),n=Number.MAX_VALUE,o=0;n>22737e-17&&o<100;){var s=r.transpose().qrJs();r=s.R,t=t.x(s.Q),s=r.transpose().qrJs(),i=i.x(s.Q);var a=(r=s.R).triu(1).unroll().norm(),l=r.diagonal().norm();0==l&&(l=1),n=a/l,o++}var u=r.diagonal(),h=[];for(o=1;o<=u.cols();o++){var d=u.e(o);if(h.push(Math.abs(d)),d<0)for(var f=0;f<i.rows();f++)t.elements[f][o-1]=-t.elements[f][o-1]}return{U:i,S:$V(h).toDiagonalMatrix(),V:t}}function a(){for(var e=this.rows(),t=this.cols(),r=c.I(e),i=this,n=1;n<Math.min(e,t);n++){for(var s=i.slice(n,0,n,n).col(1),a=[1];a.length<=e-n;)a.push(0);a=$V(a);var l=s.add(a.x(s.norm()*Math.sign(s.e(1)))),u=$M(l),h=o(c.I(e-n+1).subtract(u.x(2).x(u.transpose()).div(u.transpose().x(u).e(1,1))),e,t,n);i=h.x(i),r=r.x(h)}return{Q:r,R:i}}function c(){}function l(){for(var e=this.dup(),t=c.I(e.rows()),r=c.I(e.rows()),i=c.Zeros(e.rows(),e.cols()),n=1,o=1;o<=Math.min(e.cols(),e.rows());o++){r=e.partialPivot(o,n,r,e,t);for(var s=o+1;s<=e.rows();s++){var a=e.e(s,n)/e.e(o,n);t.elements[s-1][o-1]=a;for(var l=o+1;l<=e.cols();l++)e.elements[s-1][l-1]-=e.e(o,l)*a}for(l=o;l<=e.cols();l++)i.elements[o-1][l-1]=e.e(o,l);n<e.cols()&&n++}return{L:t,U:i,P:r}}r(2308),c.prototype={solve:function(e){var t=this.lu();e=t.P.x(e);var r=t.L.forwardSubstitute(e),i=t.U.backSubstitute(r);return t.P.x(i)},pcaProject:function(e,t){var r,i,n=(t=t||(r=this,i=r.transpose().x(r).x(1/r.rows()).svd(),{U:i.U,S:i.S}).U).slice(1,t.rows(),1,e);return{Z:this.x(n),U:t}},pcaRecover:function(e){var t=this.cols(),r=e.slice(1,e.rows(),1,t);return this.x(r.transpose())},triu:function(e){return e||(e=0),this.map(function(t,r,i){return i-r>=e?t:0})},unroll:function(){for(var e=[],t=1;t<=this.cols();t++)for(var r=1;r<=this.rows();r++)e.push(this.e(r,t));return $V(e)},slice:function(e,t,r,n){var o=[];for(0==t&&(t=this.rows()),0==n&&(n=this.cols()),i=e;i<=t;i++){var s=[];for(j=r;j<=n;j++)s.push(this.e(i,j));o.push(s)}return $M(o)},e:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]},row:function(e){return e>this.elements.length?null:$V(this.elements[e-1])},col:function(e){if(e>this.elements[0].length)return null;for(var t=[],r=this.elements.length,i=0;i<r;i++)t.push(this.elements[i][e-1]);return $V(t)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},approxEql:function(e){return this.eql(e,n.approxPrecision)},eql:function(e,t){var r=e.elements||e;if(void 0===r[0][0]&&(r=c.create(r).elements),this.elements.length!=r.length||this.elements[0].length!=r[0].length)return!1;for(var i,o=this.elements.length,s=this.elements[0].length;o--;)for(i=s;i--;)if(Math.abs(this.elements[o][i]-r[o][i])>(t||n.precision))return!1;return!0},dup:function(){return c.create(this.elements)},map:function(e){for(var t,r=[],i=this.elements.length,n=this.elements[0].length;i--;)for(t=n,r[i]=[];t--;)r[i][t]=e(this.elements[i][t],i+1,t+1);return c.create(r)},isSameSizeAs:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=c.create(t).elements),this.elements.length==t.length&&this.elements[0].length==t[0].length},add:function(e){if("number"==typeof e)return this.map(function(t,r,i){return t+e});var t=e.elements||e;return void 0===t[0][0]&&(t=c.create(t).elements),this.isSameSizeAs(t)?this.map(function(e,r,i){return e+t[r-1][i-1]}):null},subtract:function(e){if("number"==typeof e)return this.map(function(t,r,i){return t-e});var t=e.elements||e;return void 0===t[0][0]&&(t=c.create(t).elements),this.isSameSizeAs(t)?this.map(function(e,r,i){return e-t[r-1][i-1]}):null},canMultiplyFromLeft:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=c.create(t).elements),this.elements[0].length==t.length},mulOp:function(e,t){if(!e.elements)return this.map(function(r){return t(r,e)});var r=!!e.modulus;if(void 0===(_=e.elements||e)[0][0]&&(_=c.create(_).elements),!this.canMultiplyFromLeft(_))return null;for(var i,n,o,s,a,l=this.elements,u=[],h=l.length,d=_[0].length,f=l[0].length,p=h;p--;){for(n=[],i=l[p],s=d;s--;){for(o=0,a=f;a--;)o+=t(i[a],_[a][s]);n[s]=o}u[p]=n}var _=c.create(u);return r?_.col(1):_},div:function(e){return this.mulOp(e,function(e,t){return e/t})},multiply:function(e){return this.mulOp(e,function(e,t){return e*t})},x:function(e){return this.multiply(e)},elementMultiply:function(e){return this.map(function(t,r,i){return e.e(r,i)*t})},sum:function(){var e=0;return this.map(function(t){e+=t}),e},mean:function(){for(var e=this.dimensions(),t=[],r=1;r<=e.cols;r++)t.push(this.col(r).sum()/e.rows);return $V(t)},column:function(e){return this.col(e)},log:function(){return this.map(function(e){return Math.log(e)})},minor:function(e,t,r,i){for(var n,o,s,a=[],l=r,u=this.elements.length,h=this.elements[0].length;l--;)for(a[n=r-l-1]=[],o=i;o--;)s=i-o-1,a[n][s]=this.elements[(e+n-1)%u][(t+s-1)%h];return c.create(a)},transpose:function(){for(var e,t=this.elements.length,r=[],i=this.elements[0].length;i--;)for(e=t,r[i]=[];e--;)r[i][e]=this.elements[e][i];return c.create(r)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){for(var e,t=0,r=this.elements.length,i=this.elements[0].length;r--;)for(e=i;e--;)Math.abs(this.elements[r][e])>Math.abs(t)&&(t=this.elements[r][e]);return t},indexOf:function(e){var t,r,i=this.elements.length,n=this.elements[0].length;for(t=0;t<i;t++)for(r=0;r<n;r++)if(this.elements[t][r]==e)return{i:t+1,j:r+1};return null},diagonal:function(){if(!this.isSquare)return null;for(var e=[],t=this.elements.length,r=0;r<t;r++)e.push(this.elements[r][r]);return $V(e)},toRightTriangular:function(){var e,t,r,i,n=this.dup(),o=this.elements.length,s=this.elements[0].length;for(t=0;t<o;t++){if(0==n.elements[t][t])for(r=t+1;r<o;r++)if(0!=n.elements[r][t]){for(e=[],i=0;i<s;i++)e.push(n.elements[t][i]+n.elements[r][i]);n.elements[t]=e;break}if(0!=n.elements[t][t])for(r=t+1;r<o;r++){var a=n.elements[r][t]/n.elements[t][t];for(e=[],i=0;i<s;i++)e.push(i<=t?0:n.elements[r][i]-n.elements[t][i]*a);n.elements[r]=e}}return n},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare())return null;if(1==this.cols&&1==this.rows)return this.row(1);if(0==this.cols&&0==this.rows)return 1;for(var e=this.toRightTriangular(),t=e.elements[0][0],r=e.elements.length,i=1;i<r;i++)t*=e.elements[i][i];return t},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&0===this.determinant()},trace:function(){if(!this.isSquare())return null;for(var e=this.elements[0][0],t=this.elements.length,r=1;r<t;r++)e+=this.elements[r][r];return e},tr:function(){return this.trace()},rank:function(){for(var e,t=this.toRightTriangular(),r=0,i=this.elements.length,o=this.elements[0].length;i--;)for(e=o;e--;)if(Math.abs(t.elements[i][e])>n.precision){r++;break}return r},rk:function(){return this.rank()},augment:function(e){var t=e.elements||e;void 0===t[0][0]&&(t=c.create(t).elements);var r,i=this.dup(),n=i.elements[0].length,o=i.elements.length,s=t[0].length;if(o!=t.length)return null;for(;o--;)for(r=s;r--;)i.elements[o][n+r]=t[o][r];return i},inverse:function(){if(!this.isSquare()||this.isSingular())return null;for(var e,t,r,i,n,o=this.elements.length,s=o,a=this.augment(c.I(o)).toRightTriangular(),l=a.elements[0].length,u=[];s--;){for(r=[],u[s]=[],i=a.elements[s][s],t=0;t<l;t++)n=a.elements[s][t]/i,r.push(n),t>=o&&u[s].push(n);for(a.elements[s]=r,e=s;e--;){for(r=[],t=0;t<l;t++)r.push(a.elements[e][t]-a.elements[s][t]*a.elements[e][s]);a.elements[e]=r}}return c.create(u)},inv:function(){return this.inverse()},round:function(){return this.map(function(e){return Math.round(e)})},snapTo:function(e){return this.map(function(t){return Math.abs(t-e)<=n.precision?e:t})},inspect:function(){for(var e=[],t=this.elements.length,r=0;r<t;r++)e.push($V(this.elements[r]).inspect());return e.join("\n")},toArray:function(){for(var e=[],t=this.elements.length,r=0;r<t;r++)e.push(this.elements[r]);return e},setElements:function(e){var t,r,i=e.elements||e;if(void 0!==i[0][0]){for(t=i.length,this.elements=[];t--;)for(r=i[t].length,this.elements[t]=[];r--;)this.elements[t][r]=i[t][r];return this}var n=i.length;for(this.elements=[],t=0;t<n;t++)this.elements.push([i[t]]);return this},maxColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,i=-1,n=1;n<=this.cols();n++)(null===r||this.e(t,n)>r)&&(r=this.e(t,n),i=n);e.push(i)}return $V(e)},maxColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,i=1;i<=this.cols();i++)(null===r||this.e(t,i)>r)&&(r=this.e(t,i));e.push(r)}return $V(e)},minColumnIndexes:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,i=-1,n=1;n<=this.cols();n++)(null===r||this.e(t,n)<r)&&(r=this.e(t,n),i=n);e.push(i)}return $V(e)},minColumns:function(){for(var e=[],t=1;t<=this.rows();t++){for(var r=null,i=1;i<=this.cols();i++)(null===r||this.e(t,i)<r)&&(r=this.e(t,i));e.push(r)}return $V(e)},partialPivot:function(e,t,r,i,n){for(var o=0,s=0,a=e;a<=i.rows();a++)Math.abs(i.e(a,t))>s&&(s=Math.abs(i.e(e,t)),o=a);if(o!=e){var c=i.elements[e-1];i.elements[e-1]=i.elements[o-1],i.elements[o-1]=c,r.elements[e-1][e-1]=0,r.elements[e-1][o-1]=1,r.elements[o-1][o-1]=0,r.elements[o-1][e-1]=1}return r},forwardSubstitute:function(e){for(var t=[],r=1;r<=this.rows();r++){for(var i=0,n=1;n<r;n++)i+=this.e(r,n)*t[n-1];t.push((e.e(r)-i)/this.e(r,r))}return $V(t)},backSubstitute:function(e){for(var t=[],r=this.rows();r>0;r--){for(var i=0,n=this.cols();n>r;n--)i+=this.e(r,n)*t[this.rows()-n];t.push((e.e(r)-i)/this.e(r,r))}return $V(t.reverse())},luJs:l,svdJs:s,qrJs:a},c.prototype.svd=s,c.prototype.qr=a,c.prototype.lu=l,c.create=function(e){return(new c).setElements(e)},c.I=function(e){for(var t,r=[],i=e;i--;)for(t=e,r[i]=[];t--;)r[i][t]=i==t?1:0;return c.create(r)},c.loadFile=function(e){for(var t=[],i=r(4968).readFileSync(e,"utf-8").split("\n"),n=0;n<i.length;n++){var o=i[n].split(",");o.length>1&&t.push(o)}return(new c).setElements(t)},c.Diagonal=function(e){for(var t=e.length,r=c.I(t);t--;)r.elements[t][t]=e[t];return r},c.Rotation=function(e,t){if(!t)return c.create([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var r=t.dup();if(3!=r.elements.length)return null;var i=r.modulus(),n=r.elements[0]/i,o=r.elements[1]/i,s=r.elements[2]/i,a=Math.sin(e),l=Math.cos(e),u=1-l;return c.create([[u*n*n+l,u*n*o-a*s,u*n*s+a*o],[u*n*o+a*s,u*o*o+l,u*o*s-a*n],[u*n*s-a*o,u*o*s+a*n,u*s*s+l]])},c.RotationX=function(e){var t=Math.cos(e),r=Math.sin(e);return c.create([[1,0,0],[0,t,-r],[0,r,t]])},c.RotationY=function(e){var t=Math.cos(e),r=Math.sin(e);return c.create([[t,0,r],[0,1,0],[-r,0,t]])},c.RotationZ=function(e){var t=Math.cos(e),r=Math.sin(e);return c.create([[t,-r,0],[r,t,0],[0,0,1]])},c.Random=function(e,t){return 1===arguments.length&&(t=e),c.Zero(e,t).map(function(){return Math.random()})},c.Fill=function(e,t,r){2===arguments.length&&(r=t,t=e);for(var i,n=[],o=e;o--;)for(i=t,n[o]=[];i--;)n[o][i]=r;return c.create(n)},c.Zero=function(e,t){return c.Fill(e,t,0)},c.Zeros=function(e,t){return c.Zero(e,t)},c.One=function(e,t){return c.Fill(e,t,1)},c.Ones=function(e,t){return c.One(e,t)},e.exports=c},2178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.html=void 0,t.html=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=document.createElement("template");return i.innerHTML=t.reduce(function(t,r,i){return t+function(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(void 0===e)return"undefined";if(null===e)return"null";var t=document.createElement("dummy");return t.innerText=e.toString(),t.innerHTML}(r)+e[i+1]},e[0]).toString(),i}},2185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){this.canvas=e}},2308:(e,t,r)=>{var i=r(4746),n=r(2122);function o(){}o.prototype={norm:function(){for(var e=this.elements.length,t=0;e--;)t+=Math.pow(this.elements[e],2);return Math.sqrt(t)},e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},dimensions:function(){return{rows:1,cols:this.elements.length}},rows:function(){return 1},cols:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(e){var t=this.elements.length,r=e.elements||e;if(t!=r.length)return!1;for(;t--;)if(Math.abs(this.elements[t]-r[t])>i.precision)return!1;return!0},dup:function(){return o.create(this.elements)},map:function(e){var t=[];return this.each(function(r,i){t.push(e(r,i))}),o.create(t)},each:function(e){for(var t=this.elements.length,r=0;r<t;r++)e(this.elements[r],r+1)},toUnitVector:function(){var e=this.modulus();return 0===e?this.dup():this.map(function(t){return t/e})},angleFrom:function(e){var t=e.elements||e;if(this.elements.length!=t.length)return null;var r=0,i=0,n=0;if(this.each(function(e,o){r+=e*t[o-1],i+=e*e,n+=t[o-1]*t[o-1]}),i=Math.sqrt(i),n=Math.sqrt(n),i*n===0)return null;var o=r/(i*n);return o<-1&&(o=-1),o>1&&(o=1),Math.acos(o)},isParallelTo:function(e){var t=this.angleFrom(e);return null===t?null:t<=i.precision},isAntiparallelTo:function(e){var t=this.angleFrom(e);return null===t?null:Math.abs(t-Math.PI)<=i.precision},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=i.precision},add:function(e){var t=e.elements||e;return this.elements.length!=t.length?this.map(function(t){return t+e}):this.map(function(e,r){return e+t[r-1]})},subtract:function(e){if("number"==typeof e)return this.map(function(t){return t-e});var t=e.elements||e;return this.elements.length!=t.length?null:this.map(function(e,r){return e-t[r-1]})},multiply:function(e){return this.map(function(t){return t*e})},elementMultiply:function(e){return this.map(function(t,r){return e.e(r)*t})},sum:function(){var e=0;return this.map(function(t){e+=t}),e},chomp:function(e){for(var t=[],r=e;r<this.elements.length;r++)t.push(this.elements[r]);return o.create(t)},top:function(e){for(var t=[],r=0;r<e;r++)t.push(this.elements[r]);return o.create(t)},augment:function(e){for(var t=this.elements,r=0;r<e.length;r++)t.push(e[r]);return o.create(t)},x:function(e){return this.multiply(e)},log:function(){return o.log(this)},elementDivide:function(e){return this.map(function(t,r){return t/e.e(r)})},product:function(){var e=1;return this.map(function(t){e*=t}),e},dot:function(e){var t=e.elements||e,r=0,i=this.elements.length;if(i!=t.length)return null;for(;i--;)r+=this.elements[i]*t[i];return r},cross:function(e){var t=e.elements||e;if(3!=this.elements.length||3!=t.length)return null;var r=this.elements;return o.create([r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]])},max:function(){for(var e=0,t=this.elements.length;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);return e},maxIndex:function(){for(var e=0,t=this.elements.length,r=-1;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t],r=t+1);return r},indexOf:function(e){for(var t=null,r=this.elements.length,i=0;i<r;i++)null===t&&this.elements[i]==e&&(t=i+1);return t},toDiagonalMatrix:function(){return n.Diagonal(this.elements)},round:function(){return this.map(function(e){return Math.round(e)})},transpose:function(){for(var e=this.elements.length,t=[],r=0;r<e;r++)t.push([this.elements[r]]);return n.create(t)},snapTo:function(e){return this.map(function(t){return Math.abs(t-e)<=i.precision?e:t})},distanceFrom:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var t=e.elements||e;if(t.length!=this.elements.length)return null;var r,i=0;return this.each(function(e,n){r=e-t[n-1],i+=r*r}),Math.sqrt(i)},liesOn:function(e){return e.contains(this)},liesIn:function(e){return e.contains(this)},rotate:function(e,t){var r,i,s,a,c=null;switch(e.determinant&&(c=e.elements),this.elements.length){case 2:return 2!=(r=t.elements||t).length?null:(c||(c=n.Rotation(e).elements),i=this.elements[0]-r[0],s=this.elements[1]-r[1],o.create([r[0]+c[0][0]*i+c[0][1]*s,r[1]+c[1][0]*i+c[1][1]*s]));case 3:if(!t.direction)return null;var l=t.pointClosestTo(this).elements;return c||(c=n.Rotation(e,t.direction).elements),i=this.elements[0]-l[0],s=this.elements[1]-l[1],a=this.elements[2]-l[2],o.create([l[0]+c[0][0]*i+c[0][1]*s+c[0][2]*a,l[1]+c[1][0]*i+c[1][1]*s+c[1][2]*a,l[2]+c[2][0]*i+c[2][1]*s+c[2][2]*a]);default:return null}},reflectionIn:function(e){if(e.anchor){var t=this.elements.slice(),r=e.pointClosestTo(t).elements;return o.create([r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1]),r[2]+(r[2]-(t[2]||0))])}var i=e.elements||e;return this.elements.length!=i.length?null:this.map(function(e,t){return i[t-1]+(i[t-1]-e)})},to3D:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(e){return this.elements=(e.elements||e).slice(),this}},o.create=function(e){return(new o).setElements(e)},o.i=o.create([1,0,0]),o.j=o.create([0,1,0]),o.k=o.create([0,0,1]),o.Random=function(e){for(var t=[];e--;)t.push(Math.random());return o.create(t)},o.Fill=function(e,t){for(var r=[];e--;)r.push(t);return o.create(r)},o.Zero=function(e){return o.Fill(e,0)},o.One=function(e){return o.Fill(e,1)},o.log=function(e){return e.map(function(e){return Math.log(e)})},e.exports=o},2332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.filterTrailingZeroes=function(e){var t=0;return e.reverse().filter(function(e){return t||(t=e)}).reverse()},e.prettyBytes=function(t){for(var r=0;t>=512;)r++,t/=1024;return"".concat(t.toFixed(r?1:0)).concat(e.SUFFIX[r])},e.escapeUdid=function(e){return"udid_"+e.replace(/[. :]/g,"_")},e.parse=function(e,t,r){var i=e.get(t);if(r&&null===i)throw TypeError('Missing required parameter "'.concat(t,'"'));return i},e.parseString=function(e,t,r){var i=e.get(t);if(r&&null===i)throw TypeError('Missing required parameter "'.concat(t,'"'));return i||""},e.parseBoolean=function(e,t,r){var i=this.parse(e,t,r);return"1"===i||!!i&&"true"===i.toString()},e.parseInt=function(e,t,r){var i=this.parse(e,t,r);if(null===i)return 0;var n=parseInt(i,10);return isNaN(n)?0:n},e.parseBooleanEnv=function(e){return"boolean"==typeof e?e:null!=e?(Array.isArray(e)&&(e=e[e.length-1]),"1"===e||"true"===e.toLowerCase()):void 0},e.parseStringEnv=function(e){if(null!=e)return Array.isArray(e)&&(e=e[e.length-1]),e},e.parseIntEnv=function(e){if("number"==typeof e)return e;if(null!=e){Array.isArray(e)&&(e=e[e.length-1]);var t=parseInt(e,10);if(!isNaN(t))return t}},e.utf8ByteArrayToString=function(e){for(var t=[],r=0,i=0;r<e.length;){var n=e[r++];if(n<128)t[i++]=String.fromCharCode(n);else if(n>191&&n<224){var o=e[r++];t[i++]=String.fromCharCode((31&n)<<6|63&o)}else if(n>239&&n<365){var s=((7&n)<<18|(63&(o=e[r++]))<<12|(63&(a=e[r++]))<<6|63&e[r++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{o=e[r++];var a=e[r++];t[i++]=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a)}}return t.join("")},e.supportsPassive=function(){if("boolean"==typeof e.supportsPassiveValue)return e.supportsPassiveValue;var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}catch(e){}return e.supportsPassiveValue=t},e.setImmediate=function(e){Promise.resolve().then(e)},e.SUFFIX={0:"B",1:"KiB",2:"MiB",3:"GiB",4:"TiB"},e.stringToUtf8ByteArray=function(e){for(var t=[],r=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128)}return Uint8Array.from(t)},e}();t.default=r},2468:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ManagerClient=void 0;var n=r(1635),o=r(8672),s=r(7802),a=n.__importDefault(r(2332)),c=r(7305),l=function(e){function t(t){var r=e.call(this,t)||this;return r.destroyed=!1,r.action=a.default.parseStringEnv(t.action),r.url=r.buildWebSocketUrl(),r}return n.__extends(t,e),t.start=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw Error("Not implemented")},t.prototype.hasConnection=function(){return!(!this.ws||this.ws.readyState!==this.ws.OPEN)},t.prototype.openNewConnection=function(){this.ws&&this.ws.readyState===this.ws.OPEN&&(this.ws.close(),delete this.ws);var e=this.url.toString();if(this.supportMultiplexing()){var r=t.sockets.get(e);if(!r){var i=new WebSocket(e);i.addEventListener("close",function(){t.sockets.delete(e)});var n=c.Multiplexer.wrap(i);n.on("empty",function(){n.close()}),t.sockets.set(e,n),r=n}(o=r.createChannel(this.getChannelInitData())).addEventListener("open",this.onSocketOpen.bind(this)),o.addEventListener("message",this.onSocketMessage.bind(this)),o.addEventListener("close",this.onSocketClose.bind(this)),this.ws=o}else{var o;(o=new WebSocket(e)).addEventListener("open",this.onSocketOpen.bind(this)),o.addEventListener("message",this.onSocketMessage.bind(this)),o.addEventListener("close",this.onSocketClose.bind(this)),this.ws=o}return this.ws},t.prototype.destroy=function(){this.destroyed?console.error(new Error("Already disposed")):(this.destroyed=!0,this.ws&&this.ws.readyState===this.ws.OPEN&&this.ws.close())},t.prototype.buildWebSocketUrl=function(){var e=this.buildDirectWebSocketUrl();return this.params.useProxy&&!this.supportMultiplexing()?this.wrapInProxy(e):e},t.prototype.buildDirectWebSocketUrl=function(){var e,t,r=this.params,i=r.hostname,n=r.port,o=r.secure,a=r.action,c=null!==(e=this.params.pathname)&&void 0!==e?e:location.pathname;if("string"==typeof i&&"number"==typeof n)t="".concat(l=o?"wss:":"ws:","//").concat(i,":").concat(n).concat(c);else{var l="https:"===location.protocol?"wss:":"ws:";t="".concat(l).concat(location.host).concat(c)}var u=new URL(t);return this.supportMultiplexing()?u.searchParams.set("action",s.ACTION.MULTIPLEX):a&&u.searchParams.set("action",a),u},t.prototype.wrapInProxy=function(e){var t="https:"===location.protocol?"wss:":"ws:",r=new URL("".concat(t,"//").concat(location.host));return r.searchParams.set("action",s.ACTION.PROXY_WS),r.searchParams.set("ws",e.toString()),r},t.prototype.supportMultiplexing=function(){return!1},t.prototype.getChannelInitData=function(){return i.from(t.CODE)},t.ACTION="unknown",t.CODE="NONE",t.sockets=new Map,t}(o.BaseClient);t.ManagerClient=l},2506:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gl=e,this.program=this.gl.createProgram()}return e.prototype.attach=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));this.gl.attachShader(this.program,e)},e.prototype.link=function(){if(!this.program)throw Error("Program type is ".concat(typeof this.program));this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||console.error("Unable to initialize the shader program.")},e.prototype.use=function(){this.gl.useProgram(this.program)},e.prototype.getAttributeLocation=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));return this.gl.getAttribLocation(this.program,e)},e.prototype.getUniformLocation=function(e){if(!this.program)throw Error("Program type is ".concat(typeof this.program));return this.gl.getUniformLocation(this.program,e)},e.prototype.setUniformM4=function(e,t){this.gl.uniformMatrix4fv(e,!1,t)},e}();t.default=r},2662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePacket=void 0;const i=r(2046),n=r(2745),o="function"==typeof ArrayBuffer;t.decodePacket=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const r=e.charAt(0);return"b"===r?{type:"message",data:s(e.substring(1),t)}:i.PACKET_TYPES_REVERSE[r]?e.length>1?{type:i.PACKET_TYPES_REVERSE[r],data:e.substring(1)}:{type:i.PACKET_TYPES_REVERSE[r]}:i.ERROR_PACKET};const s=(e,t)=>{if(o){const r=(0,n.decode)(e);return a(r,t)}return{base64:!0,data:e}},a=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer},2686:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodePacket=void 0,t.encodePacketToBinary=function(e,t){return n&&e.data instanceof Blob?e.data.arrayBuffer().then(l).then(t):o&&(e.data instanceof ArrayBuffer||s(e.data))?t(l(e.data)):void a(e,!1,e=>{u||(u=new TextEncoder),t(u.encode(e))})};const i=r(2046),n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,s=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,a=({type:e,data:t},r,a)=>n&&t instanceof Blob?r?a(t):c(t,a):o&&(t instanceof ArrayBuffer||s(t))?r?a(t):c(new Blob([t]),a):a(i.PACKET_TYPES[e]+(t||""));t.encodePacket=a;const c=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function l(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let u},2701:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,(r=t.MessageType||(t.MessageType={}))[r.CreateChannel=4]="CreateChannel",r[r.CloseChannel=8]="CloseChannel",r[r.RawBinaryData=16]="RawBinaryData",r[r.RawStringData=32]="RawStringData",r[r.Data=64]="Data"},2745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)i[r.charCodeAt(e)]=e;t.encode=e=>{let t,i=new Uint8Array(e),n=i.length,o="";for(t=0;t<n;t+=3)o+=r[i[t]>>2],o+=r[(3&i[t])<<4|i[t+1]>>4],o+=r[(15&i[t+1])<<2|i[t+2]>>6],o+=r[63&i[t+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=e=>{let t,r,n,o,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const u=new ArrayBuffer(a),h=new Uint8Array(u);for(t=0;t<c;t+=4)r=i[e.charCodeAt(t)],n=i[e.charCodeAt(t+1)],o=i[e.charCodeAt(t+2)],s=i[e.charCodeAt(t+3)],h[l++]=r<<2|n>>4,h[l++]=(15&n)<<4|o>>2,h[l++]=(3&o)<<6|63&s;return u}},2857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBoxButton=void 0;var i=r(1635),n=r(3109),o=i.__importDefault(r(6178)),s=function(e){function t(t,r,i){var n=e.call(this,t,i)||this,s=document.createElement("button");return s.classList.add("control-button"),s.title=t,s.appendChild(o.default.create(r)),n.btn=s,n}return i.__extends(t,e),t.prototype.getElement=function(){return this.btn},t.prototype.getAllElements=function(){return[this.btn]},t}(n.ToolBoxElement);t.ToolBoxButton=s},2870:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,2.02c-5.51,0 -9.98,4.47 -9.98,9.98s4.47,9.98 9.98,9.98 9.98,-4.47 9.98,-9.98S17.51,2.02 12,2.02zM12,19.98c-4.4,0 -7.98,-3.58 -7.98,-7.98S7.6,4.02 12,4.02 19.98,7.6 19.98,12 16.4,19.98 12,19.98zM12.75,5l-4.5,8.5h3.14L11.39,19l4.36,-8.5h-3z"></path></svg>'},2887:e=>{e.exports='<svg viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>System_Overview</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="System_Overview" sketch:type="MSArtboardGroup"><g id="Rectangle-120-+-recent-12-Copy-11" sketch:type="MSLayerGroup"><rect id="Rectangle-120" sketch:type="MSShapeGroup" x="0" y="0" width="48" height="48"></rect><path d="M12.7921429,12.8 L12.7921429,12.8 C12.7959945,12.8 12.8,12.7959954 12.8,12.7921429 L12.8,35.2078571 C12.8,35.2040055 12.7959954,35.2 12.7921429,35.2 L35.2078571,35.2 C35.2040055,35.2 35.2,35.2040046 35.2,35.2078571 L35.2,12.7921429 C35.2,12.7959945 35.2040046,12.8 35.2078571,12.8 L12.7921429,12.8 Z M12.7921429,9.6 L12.7921429,9.6 L35.2078571,9.6 C36.9718035,9.6 38.4,11.029171 38.4,12.7921429 L38.4,35.2078571 C38.4,36.9718035 36.970829,38.4 35.2078571,38.4 L12.7921429,38.4 C11.0281965,38.4 9.6,36.970829 9.6,35.2078571 L9.6,12.7921429 C9.6,11.0281965 11.029171,9.6 12.7921429,9.6 L12.7921429,9.6 Z" id="Shape" fill="var(--svg-button-fill)" sketch:type="MSShapeGroup"></path></g></g></g></svg>'},2898:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z" fill="var(--svg-button-fill)" stroke="var(--svg-button-fill)"></path><path d="M0 0h48v48H0z" fill="none"></path></svg>'},2975:e=>{self,e.exports=(()=>{"use strict";var e={4567:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var o=r(9042),s=r(6114),a=r(9924),c=r(3656),l=r(844),u=r(5596),h=r(9631),d=function(e){function t(t,r){var i=e.call(this)||this;i._terminal=t,i._renderService=r,i._liveRegionLineCount=0,i._charsToConsume=[],i._charsToAnnounce="",i._accessibilityTreeRoot=document.createElement("div"),i._accessibilityTreeRoot.classList.add("xterm-accessibility"),i._accessibilityTreeRoot.tabIndex=0,i._rowContainer=document.createElement("div"),i._rowContainer.setAttribute("role","list"),i._rowContainer.classList.add("xterm-accessibility-tree"),i._rowElements=[];for(var n=0;n<i._terminal.rows;n++)i._rowElements[n]=i._createAccessibilityTreeNode(),i._rowContainer.appendChild(i._rowElements[n]);if(i._topBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,0)},i._bottomBoundaryFocusListener=function(e){return i._onBoundaryFocus(e,1)},i._rowElements[0].addEventListener("focus",i._topBoundaryFocusListener),i._rowElements[i._rowElements.length-1].addEventListener("focus",i._bottomBoundaryFocusListener),i._refreshRowsDimensions(),i._accessibilityTreeRoot.appendChild(i._rowContainer),i._renderRowsDebouncer=new a.TimeBasedDebouncer(i._renderRows.bind(i)),i._refreshRows(),i._liveRegion=document.createElement("div"),i._liveRegion.classList.add("live-region"),i._liveRegion.setAttribute("aria-live","assertive"),i._accessibilityTreeRoot.appendChild(i._liveRegion),!i._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return i._terminal.element.insertAdjacentElement("afterbegin",i._accessibilityTreeRoot),i.register(i._renderRowsDebouncer),i.register(i._terminal.onResize(function(e){return i._onResize(e.rows)})),i.register(i._terminal.onRender(function(e){return i._refreshRows(e.start,e.end)})),i.register(i._terminal.onScroll(function(){return i._refreshRows()})),i.register(i._terminal.onA11yChar(function(e){return i._onChar(e)})),i.register(i._terminal.onLineFeed(function(){return i._onChar("\n")})),i.register(i._terminal.onA11yTab(function(e){return i._onTab(e)})),i.register(i._terminal.onKey(function(e){return i._onKey(e.key)})),i.register(i._terminal.onBlur(function(){return i._clearLiveRegion()})),i.register(i._renderService.onDimensionsChange(function(){return i._refreshRowsDimensions()})),i._screenDprMonitor=new u.ScreenDprMonitor,i.register(i._screenDprMonitor),i._screenDprMonitor.setListener(function(){return i._refreshRowsDimensions()}),i.register((0,c.addDisposableDomListener)(window,"resize",function(){return i._refreshRowsDimensions()})),i}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),(0,h.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(e,t){var r=e.target,i=this._rowElements[0===t?1:this._rowElements.length-2];if(r.getAttribute("aria-posinset")!==(0===t?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===i){var n,o;if(0===t?(n=r,o=this._rowElements.pop(),this._rowContainer.removeChild(o)):(n=this._rowElements.shift(),o=r,this._rowContainer.removeChild(n)),n.removeEventListener("focus",this._topBoundaryFocusListener),o.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){var s=this._createAccessibilityTreeNode();this._rowElements.unshift(s),this._rowContainer.insertAdjacentElement("afterbegin",s)}else s=this._createAccessibilityTreeNode(),this._rowElements.push(s),this._rowContainer.appendChild(s);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},t.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},t.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(" ")},t.prototype._onChar=function(e){var t=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=o.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)},0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&(0,h.removeElementFromParent)(this._liveRegion)},t.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},t.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t,this._terminal.rows)},t.prototype._renderRows=function(e,t){for(var r=this._terminal.buffer,i=r.lines.length.toString(),n=e;n<=t;n++){var o=r.translateBufferLineToString(r.ydisp+n,!0),s=(r.ydisp+n+1).toString(),a=this._rowElements[n];a&&(0===o.length?a.innerText=" ":a.textContent=o,a.setAttribute("aria-posinset",s),a.setAttribute("aria-setsize",i))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},t.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(l.Disposable);t.AccessibilityManager=d},3614:(e,t)=>{function r(e){return e.replace(/\r?\n/g,"\r")}function i(e,t){return t?"[200~"+e+"[201~":e}function n(e,t,n){e=i(e=r(e),n.decPrivateModes.bracketedPasteMode),n.triggerDataEvent(e,!0),t.value=""}function o(e,t,r){var i=r.getBoundingClientRect(),n=e.clientX-i.left-10,o=e.clientY-i.top-10;t.style.width="20px",t.style.height="20px",t.style.left=n+"px",t.style.top=o+"px",t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=r,t.bracketTextForPaste=i,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,r){e.stopPropagation(),e.clipboardData&&n(e.clipboardData.getData("text/plain"),t,r)},t.paste=n,t.moveTextAreaUnderMouseCursor=o,t.rightClickHandler=function(e,t,r,i,n){o(e,t,r),n&&i.rightClickSelect(e),t.value=i.selectionText,t.select()}},7239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var r=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(e,t,r){this._rgba[e]||(this._rgba[e]={}),this._rgba[e][t]=r},e.prototype.getCss=function(e,t){return this._rgba[e]?this._rgba[e][t]:void 0},e.prototype.setColor=function(e,t,r){this._color[e]||(this._color[e]={}),this._color[e][t]=r},e.prototype.getColor=function(e,t){return this._color[e]?this._color[e][t]:void 0},e}();t.ColorContrastCache=r},5680:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var n=r(8055),o=r(7239),s=n.css.toColor("#ffffff"),a=n.css.toColor("#000000"),c=n.css.toColor("#ffffff"),l=n.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var e=[n.css.toColor("#2e3436"),n.css.toColor("#cc0000"),n.css.toColor("#4e9a06"),n.css.toColor("#c4a000"),n.css.toColor("#3465a4"),n.css.toColor("#75507b"),n.css.toColor("#06989a"),n.css.toColor("#d3d7cf"),n.css.toColor("#555753"),n.css.toColor("#ef2929"),n.css.toColor("#8ae234"),n.css.toColor("#fce94f"),n.css.toColor("#729fcf"),n.css.toColor("#ad7fa8"),n.css.toColor("#34e2e2"),n.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],r=0;r<216;r++){var i=t[r/36%6|0],o=t[r/6%6|0],s=t[r%6];e.push({css:n.channels.toCss(i,o,s),rgba:n.channels.toRgba(i,o,s)})}for(r=0;r<24;r++){var a=8+10*r;e.push({css:n.channels.toCss(a,a,a),rgba:n.channels.toRgba(a,a,a)})}return e}());var h=function(){function e(e,r){this.allowTransparency=r;var i=e.createElement("canvas");i.width=1,i.height=1;var h=i.getContext("2d");if(!h)throw new Error("Could not get rendering context");this._ctx=h,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new o.ColorContrastCache,this.colors={foreground:s,background:a,cursor:c,cursorAccent:l,selectionTransparent:u,selectionOpaque:n.color.blend(a,u),selectionForeground:void 0,ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return e.prototype.onOptionsChange=function(e){"minimumContrastRatio"===e&&this._contrastCache.clear()},e.prototype.setTheme=function(e){void 0===e&&(e={}),this.colors.foreground=this._parseColor(e.foreground,s),this.colors.background=this._parseColor(e.background,a),this.colors.cursor=this._parseColor(e.cursor,c,!0),this.colors.cursorAccent=this._parseColor(e.cursorAccent,l,!0),this.colors.selectionTransparent=this._parseColor(e.selection,u,!0),this.colors.selectionOpaque=n.color.blend(this.colors.background,this.colors.selectionTransparent);var r={css:"",rgba:0};this.colors.selectionForeground=e.selectionForeground?this._parseColor(e.selectionForeground,r):void 0,this.colors.selectionForeground===r&&(this.colors.selectionForeground=void 0),n.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=n.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(e.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(e.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(e.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(e.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(e.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(e.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(e.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(e.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},e.prototype.restoreColor=function(e){if(void 0!==e)switch(e){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[e]=this._restoreColors.ansi[e]}else for(var t=0;t<this._restoreColors.ansi.length;++t)this.colors.ansi[t]=this._restoreColors.ansi[t]},e.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},e.prototype._parseColor=function(e,t,r){if(void 0===r&&(r=this.allowTransparency),void 0===e)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=e,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+e+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var o=this._ctx.getImageData(0,0,1,1).data;if(255!==o[3]){if(!r)return console.warn("Color: "+e+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var s=i(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(e){return Number(e)}),4),a=s[0],c=s[1],l=s[2],u=s[3],h=Math.round(255*u);return{rgba:n.channels.toRgba(a,c,l,h),css:e}}return{css:this._ctx.fillStyle,rgba:n.channels.toRgba(o[0],o[1],o[2],o[3])}},e}();t.ColorManager=h},9631:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var e,t,i,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var s=r(n),a=s.next();!a.done;a=s.next()){var c=a.value;null===(i=null==c?void 0:c.parentElement)||void 0===i||i.removeChild(c)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,r,i){e.addEventListener(t,r,i);var n=!1;return{dispose:function(){n||(n=!0,e.removeEventListener(t,r,i))}}}},3551:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var o=r(8460),s=r(2585),a=function(){function e(e,t,r){this._bufferService=e,this._logService=t,this._unicodeService=r,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new o.EventEmitter,this._onHideLinkUnderline=new o.EventEmitter,this._onLinkTooltip=new o.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(e,t){this._element=e,this._mouseZoneManager=t},e.prototype.linkifyRows=function(t,r){var i=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=r):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,t),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,r)),this._mouseZoneManager.clearAll(t,r),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return i._linkifyRows()},e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var e=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var t=e.ydisp+this._rowsToLinkify.start;if(!(t>=e.lines.length)){for(var r=e.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,i=Math.ceil(2e3/this._bufferService.cols),n=this._bufferService.buffer.iterator(!1,t,r,i,i);n.hasNext();)for(var o=n.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(o.range.first,o.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(e,t,r){if(void 0===r&&(r={}),!t)throw new Error("handler must be defined");var i={id:this._nextLinkMatcherId++,regex:e,handler:t,matchIndex:r.matchIndex,validationCallback:r.validationCallback,hoverTooltipCallback:r.tooltipCallback,hoverLeaveCallback:r.leaveCallback,willLinkActivate:r.willLinkActivate,priority:r.priority||0};return this._addLinkMatcherToList(i),i.id},e.prototype._addLinkMatcherToList=function(e){if(0!==this._linkMatchers.length){for(var t=this._linkMatchers.length-1;t>=0;t--)if(e.priority<=this._linkMatchers[t].priority)return void this._linkMatchers.splice(t+1,0,e);this._linkMatchers.splice(0,0,e)}else this._linkMatchers.push(e)},e.prototype.deregisterLinkMatcher=function(e){for(var t=0;t<this._linkMatchers.length;t++)if(this._linkMatchers[t].id===e)return this._linkMatchers.splice(t,1),!0;return!1},e.prototype._doLinkifyRow=function(e,t,r){for(var i,n=this,o=new RegExp(r.regex.source,(r.regex.flags||"")+"g"),s=-1,a=function(){var a=i["number"!=typeof r.matchIndex?0:r.matchIndex];if(!a)return c._logService.debug("match found without corresponding matchIndex",i,r),"break";if(s=t.indexOf(a,s+1),o.lastIndex=s+a.length,s<0)return"break";var l=c._bufferService.buffer.stringIndexToBufferIndex(e,s);if(l[0]<0)return"break";var u=c._bufferService.buffer.lines.get(l[0]);if(!u)return"break";var h=u.getFg(l[1]),d=h?h>>9&511:void 0;r.validationCallback?r.validationCallback(a,function(e){n._rowsTimeoutId||e&&n._addLink(l[1],l[0]-n._bufferService.buffer.ydisp,a,r,d)}):c._addLink(l[1],l[0]-c._bufferService.buffer.ydisp,a,r,d)},c=this;null!==(i=o.exec(t))&&"break"!==a(););},e.prototype._addLink=function(e,t,r,i,n){var o=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(r),a=e%this._bufferService.cols,l=t+Math.floor(e/this._bufferService.cols),u=(a+s)%this._bufferService.cols,h=l+Math.floor((a+s)/this._bufferService.cols);0===u&&(u=this._bufferService.cols,h--),this._mouseZoneManager.add(new c(a+1,l+1,u+1,h+1,function(e){if(i.handler)return i.handler(e,r);var t=window.open();t?(t.opener=null,t.location.href=r):console.warn("Opening link blocked as opener could not be cleared")},function(){o._onShowLinkUnderline.fire(o._createLinkHoverEvent(a,l,u,h,n)),o._element.classList.add("xterm-cursor-pointer")},function(e){o._onLinkTooltip.fire(o._createLinkHoverEvent(a,l,u,h,n)),i.hoverTooltipCallback&&i.hoverTooltipCallback(e,r,{start:{x:a,y:l},end:{x:u,y:h}})},function(){o._onHideLinkUnderline.fire(o._createLinkHoverEvent(a,l,u,h,n)),o._element.classList.remove("xterm-cursor-pointer"),i.hoverLeaveCallback&&i.hoverLeaveCallback()},function(e){return!i.willLinkActivate||i.willLinkActivate(e,r)}))}},e.prototype._createLinkHoverEvent=function(e,t,r,i,n){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:n}},e._timeBeforeLatency=200,e=i([n(0,s.IBufferService),n(1,s.ILogService),n(2,s.IUnicodeService)],e)}();t.Linkifier=a;var c=function(e,t,r,i,n,o,s,a,c){this.x1=e,this.y1=t,this.x2=r,this.y2=i,this.clickCallback=n,this.hoverCallback=o,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=c};t.MouseZone=c},6465:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var l=r(2585),u=r(8460),h=r(844),d=r(3656),f=function(e){function t(t){var r=e.call(this)||this;return r._bufferService=t,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new u.EventEmitter),r._onHideLinkUnderline=r.register(new u.EventEmitter),r.register((0,h.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return n(t,e),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var t=this;return this._linkProviders.push(e),{dispose:function(){var r=t._linkProviders.indexOf(e);-1!==r&&t._linkProviders.splice(r,1)}}},t.prototype.attachToDom=function(e,t,r){var i=this;this._element=e,this._mouseService=t,this._renderService=r,this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",function(){i._isMouseOut=!0,i._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(t){this._isMouseOut=!1;for(var r=e.composedPath(),i=0;i<r.length;i++){var n=r[i];if(n.classList.contains("xterm"))break;if(n.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._onHover(t),this._lastBufferCell=t)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,t){var r,i,n,o,s=this;this._activeProviderReplies&&t||(null===(n=this._activeProviderReplies)||void 0===n||n.forEach(function(e){null==e||e.forEach(function(e){e.link.dispose&&e.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var l=!1,u=function(r,i){t?(null===(o=h._activeProviderReplies)||void 0===o?void 0:o.get(r))&&(l=h._checkLinkProviderResult(r,e,l)):i.provideLinks(e.y,function(t){var i,n;if(!s._isMouseOut){var o=null==t?void 0:t.map(function(e){return{link:e}});null===(i=s._activeProviderReplies)||void 0===i||i.set(r,o),l=s._checkLinkProviderResult(r,e,l),(null===(n=s._activeProviderReplies)||void 0===n?void 0:n.size)===s._linkProviders.length&&s._removeIntersectingLinks(e.y,s._activeProviderReplies)}})},h=this;try{for(var d=a(this._linkProviders.entries()),f=d.next();!f.done;f=d.next()){var p=c(f.value,2);u(p[0],p[1])}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}},t.prototype._removeIntersectingLinks=function(e,t){for(var r=new Set,i=0;i<t.size;i++){var n=t.get(i);if(n)for(var o=0;o<n.length;o++)for(var s=n[o],a=s.link.range.start.y<e?0:s.link.range.start.x,c=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x,l=a;l<=c;l++){if(r.has(l)){n.splice(o--,1);break}r.add(l)}}},t.prototype._checkLinkProviderResult=function(e,t,r){var i,n=this;if(!this._activeProviderReplies)return r;for(var o=this._activeProviderReplies.get(e),s=!1,a=0;a<e;a++)this._activeProviderReplies.has(a)&&!this._activeProviderReplies.get(a)||(s=!0);if(!s&&o){var c=o.find(function(e){return n._linkAtPosition(e.link,t)});c&&(r=!0,this._handleNewLink(c))}if(this._activeProviderReplies.size===this._linkProviders.length&&!r)for(a=0;a<this._activeProviderReplies.size;a++){var l=null===(i=this._activeProviderReplies.get(a))||void 0===i?void 0:i.find(function(e){return n._linkAtPosition(e.link,t)});if(l){r=!0,this._handleNewLink(l);break}}return r},t.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},t.prototype._handleMouseUp=function(e){if(this._element&&this._mouseService&&this._currentLink){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var t=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(e.link,r)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var e,r;return null===(r=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.pointerCursor},set:function(e){var r,i;(null===(r=t._currentLink)||void 0===r?void 0:r.state)&&t._currentLink.state.decorations.pointerCursor!==e&&(t._currentLink.state.decorations.pointerCursor=e,t._currentLink.state.isHovered&&(null===(i=t._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:function(){var e,r;return null===(r=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===r?void 0:r.decorations.underline},set:function(r){var i,n,o;(null===(i=t._currentLink)||void 0===i?void 0:i.state)&&(null===(o=null===(n=t._currentLink)||void 0===n?void 0:n.state)||void 0===o?void 0:o.decorations.underline)!==r&&(t._currentLink.state.decorations.underline=r,t._currentLink.state.isHovered&&t._fireUnderlineEvent(e.link,r))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(function(e){var r=0===e.start?0:e.start+1+t._bufferService.buffer.ydisp;t._clearCurrentLink(r,e.end+1+t._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(r,t.text)},t.prototype._fireUnderlineEvent=function(e,t){var r=e.range,i=this._bufferService.buffer.ydisp,n=this._createLinkUnderlineEvent(r.start.x-1,r.start.y-i-1,r.end.x,r.end.y-i-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(n)},t.prototype._linkLeave=function(e,t,r){var i;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(r,t.text)},t.prototype._linkAtPosition=function(e,t){var r=e.range.start.y===e.range.end.y,i=e.range.start.y<t.y,n=e.range.end.y>t.y;return(r&&e.range.start.x<=t.x&&e.range.end.x>=t.x||i&&e.range.end.x>=t.x||n&&e.range.start.x<=t.x||i&&n)&&e.range.start.y<=t.y&&e.range.end.y>=t.y},t.prototype._positionFromMouseEvent=function(e,t,r){var i=r.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(i)return{x:i[0],y:i[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,t,r,i,n){return{x1:e,y1:t,x2:r,y2:i,cols:this._bufferService.cols,fg:n}},o([s(0,l.IBufferService)],t)}(h.Disposable);t.Linkifier2=f},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var a=r(844),c=r(3656),l=r(4725),u=r(2585),h=function(e){function t(t,r,i,n,o,s){var a=e.call(this)||this;return a._element=t,a._screenElement=r,a._bufferService=i,a._mouseService=n,a._selectionService=o,a._optionsService=s,a._zones=[],a._areZonesActive=!1,a._lastHoverCoords=[void 0,void 0],a._initialSelectionLength=0,a.register((0,c.addDisposableDomListener)(a._element,"mousedown",function(e){return a._onMouseDown(e)})),a._mouseMoveListener=function(e){return a._onMouseMove(e)},a._mouseLeaveListener=function(e){return a._onMouseLeave(e)},a._clickListener=function(e){return a._onClick(e)},a}return n(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,t){if(0!==this._zones.length){e&&t||(e=0,t=this._bufferService.rows-1);for(var r=0;r<this._zones.length;r++){var i=this._zones[r];(i.y1>e&&i.y1<=t+1||i.y2>e&&i.y2<=t+1||i.y1<e&&i.y2>t+1)&&(this._currentZone&&this._currentZone===i&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(r--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var t=this,r=this._findZoneEventAt(e);r!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),r&&(this._currentZone=r,r.hoverCallback&&r.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return t._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);null==t||t.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);(null==t?void 0:t.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var t=this._findZoneEventAt(e),r=this._getSelectionLength();t&&r===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var r=t[0],i=t[1],n=0;n<this._zones.length;n++){var o=this._zones[n];if(o.y1===o.y2){if(i===o.y1&&r>=o.x1&&r<o.x2)return o}else if(i===o.y1&&r>=o.x1||i===o.y2&&r<o.x2||i>o.y1&&i<o.y2)return o}},o([s(2,u.IBufferService),s(3,l.IMouseService),s(4,l.ISelectionService),s(5,u.IOptionsService)],t)}(a.Disposable);t.MouseZoneManager=h},6193:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var i=function(){function e(e){this._renderCallback=e,this._refreshCallbacks=[]}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.addRefreshCallback=function(e){var t=this;return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return t._innerRefresh()})),this._animationFrame},e.prototype.refresh=function(e,t,r){var i=this;this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return i._innerRefresh()}))},e.prototype._innerRefresh=function(){if(this._animationFrame=void 0,void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},e.prototype._runRefreshCallbacks=function(){var e,t;try{for(var i=r(this._refreshCallbacks),n=i.next();!n.done;n=i.next())(0,n.value)(0)}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._refreshCallbacks=[]},e}();t.RenderDebouncer=i},5596:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentDevicePixelRatio=window.devicePixelRatio,t}return n(t,e),t.prototype.setListener=function(e){var t=this;this._listener&&this.clearListener(),this._listener=e,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(r(844).Disposable);t.ScreenDprMonitor=o},3236:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var c=r(2950),l=r(1680),u=r(3614),h=r(2584),d=r(5435),f=r(3525),p=r(3551),_=r(9312),v=r(6114),g=r(3656),y=r(9042),m=r(357),b=r(6954),S=r(4567),E=r(1296),C=r(7399),w=r(8460),A=r(8437),T=r(5680),O=r(3230),L=r(4725),R=r(428),D=r(8934),M=r(6465),x=r(5114),P=r(8969),I=r(8055),k=r(4269),B=r(5941),F=r(3107),N=r(5744),U=r(9074),H=r(2585),K="undefined"!=typeof window?window.document:null,j=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r.browser=v,r._keyDownHandled=!1,r._keyDownSeen=!1,r._keyPressHandled=!1,r._unprocessedDeadKey=!1,r._onCursorMove=new w.EventEmitter,r._onKey=new w.EventEmitter,r._onRender=new w.EventEmitter,r._onSelectionChange=new w.EventEmitter,r._onTitleChange=new w.EventEmitter,r._onBell=new w.EventEmitter,r._onFocus=new w.EventEmitter,r._onBlur=new w.EventEmitter,r._onA11yCharEmitter=new w.EventEmitter,r._onA11yTabEmitter=new w.EventEmitter,r._setup(),r.linkifier=r._instantiationService.createInstance(p.Linkifier),r.linkifier2=r.register(r._instantiationService.createInstance(M.Linkifier2)),r._decorationService=r._instantiationService.createInstance(U.DecorationService),r._instantiationService.setService(H.IDecorationService,r._decorationService),r.register(r._inputHandler.onRequestBell(function(){return r.bell()})),r.register(r._inputHandler.onRequestRefreshRows(function(e,t){return r.refresh(e,t)})),r.register(r._inputHandler.onRequestSendFocus(function(){return r._reportFocus()})),r.register(r._inputHandler.onRequestReset(function(){return r.reset()})),r.register(r._inputHandler.onRequestWindowsOptionsReport(function(e){return r._reportWindowsOptions(e)})),r.register(r._inputHandler.onColor(function(e){return r._handleColorEvent(e)})),r.register((0,w.forwardEvent)(r._inputHandler.onCursorMove,r._onCursorMove)),r.register((0,w.forwardEvent)(r._inputHandler.onTitleChange,r._onTitleChange)),r.register((0,w.forwardEvent)(r._inputHandler.onA11yChar,r._onA11yCharEmitter)),r.register((0,w.forwardEvent)(r._inputHandler.onA11yTab,r._onA11yTabEmitter)),r.register(r._bufferService.onResize(function(e){return r._afterResize(e.cols,e.rows)})),r}return n(t,e),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),t.prototype._handleColorEvent=function(e){var t,r,i,n;if(this._colorManager){try{for(var c=o(e),l=c.next();!l.done;l=c.next()){var u=l.value,d=void 0,f="";switch(u.index){case 256:d="foreground",f="10";break;case 257:d="background",f="11";break;case 258:d="cursor",f="12";break;default:d="ansi",f="4;"+u.index}if(d)switch(u.type){case 0:var p=I.color.toColorRGB("ansi"===d?this._colorManager.colors.ansi[u.index]:this._colorManager.colors[d]);this.coreService.triggerDataEvent(h.C0.ESC+"]"+f+";"+(0,B.toRgbString)(p)+h.C1_ESCAPED.ST);break;case 1:"ansi"===d?this._colorManager.colors.ansi[u.index]=I.rgba.toColor.apply(I.rgba,a([],s(u.color),!1)):this._colorManager.colors[d]=I.rgba.toColor.apply(I.rgba,a([],s(u.color),!1));break;case 2:this._colorManager.restoreColor(u.index)}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}null===(i=this._renderService)||void 0===i||i.setColors(this._colorManager.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this._colorManager.colors)}},t.prototype.dispose=function(){var t,r,i;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._renderService)||void 0===t||t.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(i=null===(r=this.element)||void 0===r?void 0:r.parentNode)||void 0===i||i.removeChild(this.element))},t.prototype._setup=function(){e.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._updateOptions=function(t){var r,i,n,o;switch(e.prototype._updateOptions.call(this,t),t){case"fontFamily":case"fontSize":null===(r=this._renderService)||void 0===r||r.clear(),null===(i=this._charSizeService)||void 0===i||i.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(n=this.viewport)||void 0===n||n.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)):(null===(o=this._accessibilityManager)||void 0===o||o.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},t.prototype._onTextAreaFocus=function(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(h.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},t.prototype.blur=function(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(h.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(t){var r=Math.min(this.buffer.x,this.cols-1),i=this._renderService.dimensions.actualCellHeight,n=t.getWidth(r),o=this._renderService.dimensions.actualCellWidth*n,s=this.buffer.y*this._renderService.dimensions.actualCellHeight,a=r*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=a+"px",this.textarea.style.top=s+"px",this.textarea.style.width=o+"px",this.textarea.style.height=i+"px",this.textarea.style.lineHeight=i+"px",this.textarea.style.zIndex="-5"}}},t.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register((0,g.addDisposableDomListener)(this.element,"copy",function(t){e.hasSelection()&&(0,u.copyHandler)(t,e._selectionService)}));var t=function(t){return(0,u.handlePasteEvent)(t,e.textarea,e.coreService)};this.register((0,g.addDisposableDomListener)(this.textarea,"paste",t)),this.register((0,g.addDisposableDomListener)(this.element,"paste",t)),v.isFirefox?this.register((0,g.addDisposableDomListener)(this.element,"mousedown",function(t){2===t.button&&(0,u.rightClickHandler)(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)})):this.register((0,g.addDisposableDomListener)(this.element,"contextmenu",function(t){(0,u.rightClickHandler)(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)})),v.isLinux&&this.register((0,g.addDisposableDomListener)(this.element,"auxclick",function(t){1===t.button&&(0,u.moveTextAreaUnderMouseCursor)(t,e.textarea,e.screenElement)}))},t.prototype._bindKeys=function(){var e=this;this.register((0,g.addDisposableDomListener)(this.textarea,"keyup",function(t){return e._keyUp(t)},!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keydown",function(t){return e._keyDown(t)},!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"keypress",function(t){return e._keyPress(t)},!0)),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionstart",function(){return e._compositionHelper.compositionstart()})),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionupdate",function(t){return e._compositionHelper.compositionupdate(t)})),this.register((0,g.addDisposableDomListener)(this.textarea,"compositionend",function(){return e._compositionHelper.compositionend()})),this.register((0,g.addDisposableDomListener)(this.textarea,"input",function(t){return e._inputEvent(t)},!0)),this.register(this.onRender(function(){return e._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(t){return e._queueLinkification(t.start,t.end)}))},t.prototype.open=function(e){var t=this;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),e.appendChild(this.element);var r=K.createDocumentFragment();this._viewportElement=K.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),r.appendChild(this._viewportElement),this._viewportScrollArea=K.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=K.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=K.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),r.appendChild(this.screenElement),this.textarea=K.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,g.addDisposableDomListener)(this.textarea,"focus",function(e){return t._onTextAreaFocus(e)})),this.register((0,g.addDisposableDomListener)(this.textarea,"blur",function(){return t._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var i=this._instantiationService.createInstance(x.CoreBrowserService,this.textarea);this._instantiationService.setService(L.ICoreBrowserService,i),this._charSizeService=this._instantiationService.createInstance(R.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new T.ColorManager(K,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(e){return t._colorManager.onOptionsChange(e)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(k.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService);var n=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(O.RenderService,n,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(function(e){return t._onRender.fire(e)})),this.onResize(function(e){return t._renderService.resize(e.cols,e.rows)}),this._compositionView=K.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(r),this._soundService=this._instantiationService.createInstance(m.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(D.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,function(e){return t.scrollLines(e,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return t.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){t._renderService.onCursorMove(),t._syncTextArea()})),this.register(this.onResize(function(){return t._renderService.onResize(t.cols,t.rows)})),this.register(this.onBlur(function(){return t._renderService.onBlur()})),this.register(this.onFocus(function(){return t._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return t.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(e){return t.scrollLines(e.amount,e.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return t._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(e){return t._renderService.onSelectionChanged(e.start,e.end,e.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()})),this.register(this._onScroll.event(function(e){t.viewport.syncScrollArea(),t._selectionService.refresh()})),this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",function(){return t._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(b.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return t._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(F.BufferDecorationRenderer,this.screenElement)),this.register((0,g.addDisposableDomListener)(this.element,"mousedown",function(e){return t._selectionService.onMouseDown(e)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(N.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange(function(){!t._overviewRulerRenderer&&t.options.overviewRulerWidth&&t._viewportElement&&t.screenElement&&(t._overviewRulerRenderer=t._instantiationService.createInstance(N.OverviewRulerRenderer,t._viewportElement,t.screenElement))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(f.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(E.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(e){var t,r,i;this._theme=e,null===(t=this._colorManager)||void 0===t||t.setTheme(e),null===(r=this._renderService)||void 0===r||r.setColors(this._colorManager.colors),null===(i=this.viewport)||void 0===i||i.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var e=this,t=this,r=this.element;function i(e){var r,i,n=t._mouseService.getRawByteCoords(e,t.screenElement,t.cols,t.rows);if(!n)return!1;switch(e.overrideType||e.type){case"mousemove":i=32,void 0===e.buttons?(r=3,void 0!==e.button&&(r=e.button<3?e.button:3)):r=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3;break;case"mouseup":i=0,r=e.button<3?e.button:3;break;case"mousedown":i=1,r=e.button<3?e.button:3;break;case"wheel":if(0===t.viewport.getLinesScrolled(e))return!1;i=e.deltaY<0?0:1,r=4;break;default:return!1}return!(void 0===i||void 0===r||r>4)&&t.coreMouseService.triggerMouseEvent({col:n.x-33,row:n.y-33,button:r,action:i,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey})}var n={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o=function(t){return i(t),t.buttons||(e._document.removeEventListener("mouseup",n.mouseup),n.mousedrag&&e._document.removeEventListener("mousemove",n.mousedrag)),e.cancel(t)},s=function(t){return i(t),e.cancel(t,!0)},a=function(e){e.buttons&&i(e)},c=function(e){e.buttons||i(e)};this.register(this.coreMouseService.onProtocolChange(function(t){t?("debug"===e.optionsService.rawOptions.logLevel&&e._logService.debug("Binding to mouse events:",e.coreMouseService.explainEvents(t)),e.element.classList.add("enable-mouse-events"),e._selectionService.disable()):(e._logService.debug("Unbinding from mouse events."),e.element.classList.remove("enable-mouse-events"),e._selectionService.enable()),8&t?n.mousemove||(r.addEventListener("mousemove",c),n.mousemove=c):(r.removeEventListener("mousemove",n.mousemove),n.mousemove=null),16&t?n.wheel||(r.addEventListener("wheel",s,{passive:!1}),n.wheel=s):(r.removeEventListener("wheel",n.wheel),n.wheel=null),2&t?n.mouseup||(n.mouseup=o):(e._document.removeEventListener("mouseup",n.mouseup),n.mouseup=null),4&t?n.mousedrag||(n.mousedrag=a):(e._document.removeEventListener("mousemove",n.mousedrag),n.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,g.addDisposableDomListener)(r,"mousedown",function(t){if(t.preventDefault(),e.focus(),e.coreMouseService.areMouseEventsActive&&!e._selectionService.shouldForceSelection(t))return i(t),n.mouseup&&e._document.addEventListener("mouseup",n.mouseup),n.mousedrag&&e._document.addEventListener("mousemove",n.mousedrag),e.cancel(t)})),this.register((0,g.addDisposableDomListener)(r,"wheel",function(t){if(!n.wheel){if(!e.buffer.hasScrollback){var r=e.viewport.getLinesScrolled(t);if(0===r)return;for(var i=h.C0.ESC+(e.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(t.deltaY<0?"A":"B"),o="",s=0;s<Math.abs(r);s++)o+=i;return e.coreService.triggerDataEvent(o,!0),e.cancel(t,!0)}return e.viewport.onWheel(t)?e.cancel(t):void 0}},{passive:!1})),this.register((0,g.addDisposableDomListener)(r,"touchstart",function(t){if(!e.coreMouseService.areMouseEventsActive)return e.viewport.onTouchStart(t),e.cancel(t)},{passive:!0})),this.register((0,g.addDisposableDomListener)(r,"touchmove",function(t){if(!e.coreMouseService.areMouseEventsActive)return e.viewport.onTouchMove(t)?void 0:e.cancel(t)},{passive:!1}))},t.prototype.refresh=function(e,t){var r;null===(r=this._renderService)||void 0===r||r.refreshRows(e,t)},t.prototype._queueLinkification=function(e,t){var r;null===(r=this.linkifier)||void 0===r||r.linkifyRows(e,t)},t.prototype.updateCursorStyle=function(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scrollLines=function(t,r,i){void 0===i&&(i=0),e.prototype.scrollLines.call(this,t,r,i),this.refresh(0,this.rows-1)},t.prototype.paste=function(e){(0,u.paste)(e,this.textarea,this.coreService)},t.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},t.prototype.registerLinkMatcher=function(e,t,r){var i=this.linkifier.registerLinkMatcher(e,t,r);return this.refresh(0,this.rows-1),i},t.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(e){return this.linkifier2.registerLinkProvider(e)},t.prototype.registerCharacterJoiner=function(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t},t.prototype.deregisterCharacterJoiner=function(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),t.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},t.prototype.registerDecoration=function(e){return this._decorationService.registerDecoration(e)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(e,t,r){this._selectionService.setSelection(e,t,r)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()},t.prototype.selectAll=function(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()},t.prototype.selectLines=function(e,t){var r;null===(r=this._selectionService)||void 0===r||r.selectLines(e,t)},t.prototype._keyDown=function(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;var t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);var r=(0,C.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===r.type||2===r.type){var i=this.rows-1;return this.scrollLines(2===r.type?-i:i),this.cancel(e,!0)}return 1===r.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(r.cancel&&this.cancel(e,!0),!r.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(r.key!==h.C0.ETX&&r.key!==h.C0.CR||(this.textarea.value=""),this._onKey.fire({key:r.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(r.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(e,!0))))},t.prototype._isThirdLevelShift=function(e,t){var r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?r:r&&(!t.keyCode||t.keyCode>47)},t.prototype._keyUp=function(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)},t.prototype._keyPress=function(e){var t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},t.prototype._inputEvent=function(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1},t.prototype.bell=function(){var e;this._soundBell()&&(null===(e=this._soundService)||void 0===e||e.playBellSound()),this._onBell.fire()},t.prototype.resize=function(t,r){t!==this.cols||r!==this.rows?e.prototype.resize.call(this,t,r):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},t.prototype._afterResize=function(e,t){var r,i;null===(r=this._charSizeService)||void 0===r||r.measure(),null===(i=this.viewport)||void 0===i||i.syncScrollArea(!0)},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(A.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},t.prototype.reset=function(){var t,r;this.options.rows=this.rows,this.options.cols=this.cols;var i=this._customKeyEventHandler;this._setup(),e.prototype.reset.call(this),null===(t=this._selectionService)||void 0===t||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1),null===(r=this.viewport)||void 0===r||r.syncScrollArea()},t.prototype.clearTextureAtlas=function(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()},t.prototype._reportFocus=function(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(h.C0.ESC+"[I"):this.coreService.triggerDataEvent(h.C0.ESC+"[O")},t.prototype._reportWindowsOptions=function(e){if(this._renderService)switch(e){case d.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var t=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),r=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(h.C0.ESC+"[4;"+r+";"+t+"t");break;case d.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var i=this._renderService.dimensions.scaledCellWidth.toFixed(0),n=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(h.C0.ESC+"[6;"+n+";"+i+"t")}},t.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t}(P.CoreTerminal);t.Terminal=j},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0;var r=function(){function e(e,t){void 0===t&&(t=1e3),this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return e.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},e.prototype.refresh=function(e,t,r){var i=this;this._rowCount=r,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;var n=Date.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=n-this._lastRefreshMs,s=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){i._lastRefreshMs=Date.now(),i._innerRefresh(),i._additionalRefreshRequested=!1,i._refreshTimeoutID=void 0},s)}},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},e}();t.TimeBasedDebouncer=r},1680:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var a=r(844),c=r(3656),l=r(4725),u=r(2585),h=function(e){function t(t,r,i,n,o,s,a,l){var u=e.call(this)||this;return u._scrollLines=t,u._viewportElement=r,u._scrollArea=i,u._element=n,u._bufferService=o,u._optionsService=s,u._charSizeService=a,u._renderService=l,u.scrollBarWidth=0,u._currentRowHeight=0,u._currentScaledCellHeight=0,u._lastRecordedBufferLength=0,u._lastRecordedViewportHeight=0,u._lastRecordedBufferHeight=0,u._lastTouchY=0,u._lastScrollTop=0,u._wheelPartialScroll=0,u._refreshAnimationFrame=null,u._ignoreNextScrollEvent=!1,u.scrollBarWidth=u._viewportElement.offsetWidth-u._scrollArea.offsetWidth||15,u.register((0,c.addDisposableDomListener)(u._viewportElement,"scroll",u._onScroll.bind(u))),u._activeBuffer=u._bufferService.buffer,u.register(u._bufferService.buffers.onBufferActivate(function(e){return u._activeBuffer=e.activeBuffer})),u._renderDimensions=u._renderService.dimensions,u.register(u._renderService.onDimensionsChange(function(e){return u._renderDimensions=e})),setTimeout(function(){return u.syncScrollArea()},0),u}return n(t,e),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return t._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},t.prototype._bubbleScroll=function(e,t){var r=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&r<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return 0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},t.prototype._applyScrollModifier=function(e,t){var r=this._optionsService.rawOptions.fastScrollModifier;return"alt"===r&&t.altKey||"ctrl"===r&&t.ctrlKey||"shift"===r&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},o([s(4,u.IBufferService),s(5,u.IOptionsService),s(6,l.ICharSizeService),s(7,l.IRenderService)],t)}(a.Disposable);t.Viewport=h},3107:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;var c=r(3656),l=r(4725),u=r(844),h=r(2585),d=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o._screenElement=t,o._bufferService=r,o._decorationService=i,o._renderService=n,o._decorationElements=new Map,o._altBufferIsActive=!1,o._dimensionsChanged=!1,o._container=document.createElement("div"),o._container.classList.add("xterm-decoration-container"),o._screenElement.appendChild(o._container),o.register(o._renderService.onRenderedViewportChange(function(){return o._queueRefresh()})),o.register(o._renderService.onDimensionsChange(function(){o._dimensionsChanged=!0,o._queueRefresh()})),o.register((0,c.addDisposableDomListener)(window,"resize",function(){return o._queueRefresh()})),o.register(o._bufferService.buffers.onBufferActivate(function(){o._altBufferIsActive=o._bufferService.buffer===o._bufferService.buffers.alt})),o.register(o._decorationService.onDecorationRegistered(function(){return o._queueRefresh()})),o.register(o._decorationService.onDecorationRemoved(function(e){return o._removeDecoration(e)})),o}return n(t,e),t.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),e.prototype.dispose.call(this)},t.prototype._queueRefresh=function(){var e=this;void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(function(){e.refreshDecorations(),e._animationFrame=void 0}))},t.prototype.refreshDecorations=function(){var e,t;try{for(var r=a(this._decorationService.decorations),i=r.next();!i.done;i=r.next()){var n=i.value;this._renderDecoration(n)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._dimensionsChanged=!1},t.prototype._renderDecoration=function(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)},t.prototype._createElement=function(e){var t,r=document.createElement("div");r.classList.add("xterm-decoration"),r.style.width=Math.round((e.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",r.style.height=(e.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",r.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",r.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var i=null!==(t=e.options.x)&&void 0!==t?t:0;return i&&i>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(e,r),r},t.prototype._refreshStyle=function(e){var t=this,r=e.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{var i=this._decorationElements.get(e);i||(e.onDispose(function(){return t._removeDecoration(e)}),i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i)),i.style.top=r*this._renderService.dimensions.actualCellHeight+"px",i.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(i)}},t.prototype._refreshXPosition=function(e,t){var r;if(void 0===t&&(t=e.element),t){var i=null!==(r=e.options.x)&&void 0!==r?r:0;"right"===(e.options.anchor||"left")?t.style.right=i?i*this._renderService.dimensions.actualCellWidth+"px":"":t.style.left=i?i*this._renderService.dimensions.actualCellWidth+"px":""}},t.prototype._removeDecoration=function(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e)},o([s(1,h.IBufferService),s(2,h.IDecorationService),s(3,l.IRenderService)],t)}(u.Disposable);t.BufferDecorationRenderer=d},5871:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0;var i=function(){function e(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(e.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},e.prototype.addDecoration=function(e){var t,i;if(e.options.overviewRulerOptions){try{for(var n=r(this._zones),o=n.next();!o.done;o=n.next()){var s=o.value;if(s.color===e.options.overviewRulerOptions.color&&s.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,e.marker.line))return;if(this._lineAdjacentToZone(s,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(s,e.marker.line)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},e.prototype.setPadding=function(e){this._linePadding=e},e.prototype._lineIntersectsZone=function(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine},e.prototype._lineAdjacentToZone=function(e,t,r){return t>=e.startBufferLine-this._linePadding[r||"full"]&&t<=e.endBufferLine+this._linePadding[r||"full"]},e.prototype._addLineToZone=function(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)},e}();t.ColorZoneStore=i},5744:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;var c=r(5871),l=r(3656),u=r(4725),h=r(844),d=r(2585),f={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},v=function(e){function t(t,r,i,n,o,s){var a,l=e.call(this)||this;l._viewportElement=t,l._screenElement=r,l._bufferService=i,l._decorationService=n,l._renderService=o,l._optionsService=s,l._colorZoneStore=new c.ColorZoneStore,l._shouldUpdateDimensions=!0,l._shouldUpdateAnchor=!0,l._lastKnownBufferLength=0,l._canvas=document.createElement("canvas"),l._canvas.classList.add("xterm-decoration-overview-ruler"),l._refreshCanvasDimensions(),null===(a=l._viewportElement.parentElement)||void 0===a||a.insertBefore(l._canvas,l._viewportElement);var u=l._canvas.getContext("2d");if(!u)throw new Error("Ctx cannot be null");return l._ctx=u,l._registerDecorationListeners(),l._registerBufferChangeListeners(),l._registerDimensionChangeListeners(),l}return n(t,e),Object.defineProperty(t.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),t.prototype._registerDecorationListeners=function(){var e=this;this.register(this._decorationService.onDecorationRegistered(function(){return e._queueRefresh(void 0,!0)})),this.register(this._decorationService.onDecorationRemoved(function(){return e._queueRefresh(void 0,!0)}))},t.prototype._registerBufferChangeListeners=function(){var e=this;this.register(this._renderService.onRenderedViewportChange(function(){return e._queueRefresh()})),this.register(this._bufferService.buffers.onBufferActivate(function(){e._canvas.style.display=e._bufferService.buffer===e._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(function(){e._lastKnownBufferLength!==e._bufferService.buffers.normal.lines.length&&(e._refreshDrawHeightConstants(),e._refreshColorZonePadding())}))},t.prototype._registerDimensionChangeListeners=function(){var e=this;this.register(this._renderService.onRender(function(){e._containerHeight&&e._containerHeight===e._screenElement.clientHeight||(e._queueRefresh(!0),e._containerHeight=e._screenElement.clientHeight)})),this.register(this._optionsService.onOptionChange(function(t){"overviewRulerWidth"===t&&e._queueRefresh(!0)})),this.register((0,l.addDisposableDomListener)(window,"resize",function(){e._queueRefresh(!0)})),this._queueRefresh(!0)},t.prototype.dispose=function(){var t;null===(t=this._canvas)||void 0===t||t.remove(),e.prototype.dispose.call(this)},t.prototype._refreshDrawConstants=function(){var e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);p.full=this._canvas.width,p.left=e,p.center=t,p.right=e,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=p.left,_.right=p.left+p.center},t.prototype._refreshDrawHeightConstants=function(){f.full=Math.round(2*window.devicePixelRatio);var e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*window.devicePixelRatio);f.left=t,f.center=t,f.right=t},t.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},t.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},t.prototype._refreshDecorations=function(){var e,t,r,i,n,o;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var s=a(this._decorationService.decorations),c=s.next();!c.done;c=s.next()){var l=c.value;this._colorZoneStore.addDecoration(l)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}this._ctx.lineWidth=1;var u=this._colorZoneStore.zones;try{for(var h=a(u),d=h.next();!d.done;d=h.next())"full"!==(_=d.value).position&&this._renderColorZone(_)}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}try{for(var f=a(u),p=f.next();!p.done;p=f.next()){var _;"full"===(_=p.value).position&&this._renderColorZone(_)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},t.prototype._renderColorZone=function(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(_[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-f[e.position||"full"]/2),p[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+f[e.position||"full"]))},t.prototype._queueRefresh=function(e,t){var r=this;this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=window.requestAnimationFrame(function(){r._refreshDecorations(),r._animationFrame=void 0}))},o([s(2,d.IBufferService),s(3,d.IDecorationService),s(4,u.IRenderService),s(5,d.IOptionsService)],t)}(h.Disposable);t.OverviewRulerRenderer=v},2950:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var o=r(4725),s=r(2585),a=function(){function e(e,t,r,i,n,o){this._textarea=e,this._compositionView=t,this._bufferService=r,this._optionsService=i,this._coreService=n,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(e.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(e){var t=this;this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(function(){t._compositionPosition.end=t._textarea.value.length},0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(e){var t=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){var r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var e;t._isSendingComposition&&(t._isSendingComposition=!1,r.start+=t._dataAlreadySent.length,(e=t._isComposing?t._textarea.value.substring(r.start,r.end):t._textarea.value.substring(r.start)).length>0&&t._coreService.triggerDataEvent(e,!0))},0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},e.prototype._handleAnyTextareaChanges=function(){var e=this,t=this._textarea.value;setTimeout(function(){if(!e._isComposing){var r=e._textarea.value.replace(t,"");r.length>0&&(e._dataAlreadySent=r,e._coreService.triggerDataEvent(r,!0))}},0)},e.prototype.updateCompositionElements=function(e){var t=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.actualCellHeight,n=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=r*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var s=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}e||setTimeout(function(){return t.updateCompositionElements(!0)},0)}},i([n(2,s.IBufferService),n(3,s.IOptionsService),n(4,s.ICoreService),n(5,o.IRenderService)],e)}();t.CompositionHelper=a},9806:(e,t)=>{function r(e,t,r){var i=r.getBoundingClientRect(),n=e.getComputedStyle(r),o=parseInt(n.getPropertyValue("padding-left")),s=parseInt(n.getPropertyValue("padding-top"));return[t.clientX-i.left-o,t.clientY-i.top-s]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=r,t.getCoords=function(e,t,i,n,o,s,a,c,l){if(s){var u=r(e,t,i);if(u)return u[0]=Math.ceil((u[0]+(l?a/2:0))/a),u[1]=Math.ceil(u[1]/c),u[0]=Math.min(Math.max(u[0],1),n+(l?1:0)),u[1]=Math.min(Math.max(u[1],1),o),u}},t.getRawByteCoords=function(e){if(e)return{x:e[0]+32,y:e[1]+32}}},9504:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var i=r(2584);function n(e,t,r,i){var n=e-o(r,e),a=t-o(r,t),u=Math.abs(n-a)-function(e,t,r){for(var i=0,n=e-o(r,e),a=t-o(r,t),c=0;c<Math.abs(n-a);c++){var l="A"===s(e,t)?-1:1,u=r.buffer.lines.get(n+l*c);(null==u?void 0:u.isWrapped)&&i++}return i}(e,t,r);return l(u,c(s(e,t),i))}function o(e,t){for(var r=0,i=e.buffer.lines.get(t),n=null==i?void 0:i.isWrapped;n&&t>=0&&t<e.rows;)r++,n=null==(i=e.buffer.lines.get(--t))?void 0:i.isWrapped;return r}function s(e,t){return e>t?"A":"B"}function a(e,t,r,i,n,o){for(var s=e,a=t,c="";s!==r||a!==i;)s+=n?1:-1,n&&s>o.cols-1?(c+=o.buffer.translateBufferLineToString(a,!1,e,s),s=0,e=0,a++):!n&&s<0&&(c+=o.buffer.translateBufferLineToString(a,!1,0,e+1),e=s=o.cols-1,a--);return c+o.buffer.translateBufferLineToString(a,!1,e,s)}function c(e,t){var r=t?"O":"[";return i.C0.ESC+r+e}function l(e,t){e=Math.floor(e);for(var r="",i=0;i<e;i++)r+=t;return r}t.moveToCellSequence=function(e,t,r,i){var s,u=r.buffer.x,h=r.buffer.y;if(!r.buffer.hasScrollback)return function(e,t,r,i,s,u){return 0===n(t,i,s,u).length?"":l(a(e,t,e,t-o(s,t),!1,s).length,c("D",u))}(u,h,0,t,r,i)+n(h,t,r,i)+function(e,t,r,i,s,u){var h;h=n(t,i,s,u).length>0?i-o(s,i):t;var d=i,f=function(e,t,r,i,s,a){var c;return c=n(r,i,s,a).length>0?i-o(s,i):t,e<r&&c<=i||e>=r&&c<i?"C":"D"}(e,t,r,i,s,u);return l(a(e,h,r,d,"C"===f,s).length,c(f,u))}(u,h,e,t,r,i);if(h===t)return s=u>e?"D":"C",l(Math.abs(u-e),c(s,i));s=h>t?"D":"C";var d=Math.abs(h-t);return l(function(e,t){return t.cols-e}(h>t?e:u,r)+(d-1)*r.cols+1+((h>t?u:e)-1),c(s,i))}},4389:function(e,t,r){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var o=r(3236),s=r(9042),a=r(7975),c=r(7090),l=r(5741),u=r(8285),h=["cols","rows"],d=function(){function e(e){var t=this;this._core=new o.Terminal(e),this._addonManager=new l.AddonManager,this._publicOptions=i({},this._core.options);var r=function(e){return t._core.options[e]},n=function(e,r){t._checkReadonlyOptions(e),t._core.options[e]=r};for(var s in this._core.options){var a={get:r.bind(this,s),set:n.bind(this,s)};Object.defineProperty(this._publicOptions,s,a)}}return e.prototype._checkReadonlyOptions=function(e){if(h.includes(e))throw new Error('Option "'+e+'" can only be set in the constructor')},e.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new a.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new c.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new u.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modes",{get:function(){var e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._publicOptions},set:function(e){for(var t in e)this._publicOptions[t]=e[t]},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,r){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,r)},e.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},e.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},e.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},e.prototype.registerMarker=function(e){return void 0===e&&(e=0),this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},e.prototype.registerDecoration=function(e){var t,r,i;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(r=e.width)&&void 0!==r?r:0,null!==(i=e.height)&&void 0!==i?i:0),this._core.registerDecoration(e)},e.prototype.addMarker=function(e){return this.registerMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(e,t,r){this._verifyIntegers(e,t,r),this._core.select(e,t,r)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e,t){this._core.write(e,t)},e.prototype.writeUtf8=function(e,t){this._core.write(e,t)},e.prototype.writeln=function(e,t){this._core.write(e),this._core.write("\r\n",t)},e.prototype.paste=function(e){this._core.paste(e)},e.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},e.prototype.setOption=function(e,t){this._checkReadonlyOptions(e),this._core.optionsService.setOption(e,t)},e.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},e.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(e,"strings",{get:function(){return s},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var o=n(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype._verifyPositiveIntegers=function(){for(var e,t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];try{for(var o=n(r),s=o.next();!s.done;s=o.next()){var a=s.value;if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e}();t.Terminal=d},1546:function(e,t,r){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var n=r(643),o=r(8803),s=r(1420),a=r(3734),c=r(1752),l=r(8055),u=r(9631),h=r(8978),d=function(){function e(e,t,r,i,n,o,s,a,c){this._container=e,this._alpha=i,this._colors=n,this._rendererId=o,this._bufferService=s,this._optionsService=a,this._decorationService=c,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var e;(0,u.removeElementFromParent)(this._canvas),null===(e=this._charAtlas)||void 0===e||e.dispose()},e.prototype._initCanvas=function(){this._ctx=(0,c.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(e,t){},e.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1),this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r},e.prototype.setColors=function(e){this._refreshCharAtlas(e)},e.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,s.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype.clearTextureAtlas=function(){var e;null===(e=this._charAtlas)||void 0===e||e.clear()},e.prototype._fillCells=function(e,t,r,i){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight)},e.prototype._fillMiddleLineAtCells=function(e,t,r){void 0===r&&(r=1);var i=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-i-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillBottomLineAtCells=function(e,t,r){void 0===r&&(r=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(e,t,r){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(e,t,r,i){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,i*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(e,t,r,i){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,r*this._scaledCellWidth,i*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(e,t,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=o.TEXT_BASELINE,this._clipRow(r);var i=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(i=(0,h.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),i||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},e.prototype._drawChars=function(e,t,r){var s,a,c,l=this._getContrastColor(e,t,r);if(l||e.isFgRGB()||e.isBgRGB())this._drawUncachedChars(e,t,r,l);else{var u,h;e.isInverse()?(u=e.isBgDefault()?o.INVERTED_DEFAULT_COLOR:e.getBgColor(),h=e.isFgDefault()?o.INVERTED_DEFAULT_COLOR:e.getFgColor()):(h=e.isBgDefault()?n.DEFAULT_COLOR:e.getBgColor(),u=e.isFgDefault()?n.DEFAULT_COLOR:e.getFgColor()),u+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&u<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||n.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||n.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=h,this._currentGlyphIdentifier.fg=u,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic();var d=!1;try{for(var f=i(this._decorationService.getDecorationsAtCell(t,r)),p=f.next();!p.done;p=f.next()){var _=p.value;if(_.backgroundColorRGB||_.foregroundColorRGB){d=!0;break}}}catch(e){s={error:e}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}!d&&(null===(c=this._charAtlas)||void 0===c?void 0:c.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(e,t,r)}},e.prototype._drawUncachedChars=function(e,t,r,i){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=o.TEXT_BASELINE,e.isInverse())if(i)this._ctx.fillStyle=i.css;else if(e.isBgDefault())this._ctx.fillStyle=l.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var n=e.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&n<8&&(n+=8),this._ctx.fillStyle=this._colors.ansi[n].css}else if(i)this._ctx.fillStyle=i.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var s=e.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}this._clipRow(r),e.isDim()&&(this._ctx.globalAlpha=o.DIM_OPACITY);var c=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(c=(0,h.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},e.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},e.prototype._getContrastColor=function(e,t,r){var n,o,s,a,u=!1;try{for(var h=i(this._decorationService.getDecorationsAtCell(t,r)),d=h.next();!d.done;d=h.next()){var f=d.value;"top"!==f.options.layer&&u||(f.backgroundColorRGB&&(s=f.backgroundColorRGB.rgba),f.foregroundColorRGB&&(a=f.foregroundColorRGB.rgba),u="top"===f.options.layer)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}if(u||this._colors.selectionForeground&&this._isCellInSelection(t,r)&&(a=this._colors.selectionForeground.rgba),s||a||1!==this._optionsService.rawOptions.minimumContrastRatio&&!(0,c.excludeFromContrastRatioDemands)(e.getCode())){if(!s&&!a){var p=this._colors.contrastCache.getColor(e.bg,e.fg);if(void 0!==p)return p||void 0}var _=e.getFgColor(),v=e.getFgColorMode(),g=e.getBgColor(),y=e.getBgColorMode(),m=!!e.isInverse(),b=!!e.isInverse();if(m){var S=_;_=g,g=S;var E=v;v=y,y=E}var C=this._resolveBackgroundRgba(void 0!==s?50331648:y,null!=s?s:g,m),w=this._resolveForegroundRgba(v,_,m,b),A=l.rgba.ensureContrastRatio(null!=s?s:C,null!=a?a:w,this._optionsService.rawOptions.minimumContrastRatio);if(!A){if(!a)return void this._colors.contrastCache.setColor(e.bg,e.fg,null);A=a}var T={css:l.channels.toCss(A>>24&255,A>>16&255,A>>8&255),rgba:A};return s||a||this._colors.contrastCache.setColor(e.bg,e.fg,T),T}},e.prototype._resolveBackgroundRgba=function(e,t,r){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(e,t,r,i){switch(e){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&i&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},e.prototype._isCellInSelection=function(e,t){var r=this._selectionStart,i=this._selectionEnd;return!(!r||!i)&&(this._columnSelectMode?e>=r[0]&&t>=r[1]&&e<i[0]&&t<i[1]:t>r[1]&&t<i[1]||r[1]===i[1]&&t===r[1]&&e>=r[0]&&e<i[0]||r[1]<i[1]&&t===i[1]&&e<i[0]||r[1]<i[1]&&t===r[1]&&e>=r[0])},e}();t.BaseRenderLayer=d},2512:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var a=r(1546),c=r(511),l=r(2585),u=r(4725),h=600,d=function(e){function t(t,r,i,n,o,s,a,l,u,h){var d=e.call(this,t,"cursor",r,!0,i,n,s,a,h)||this;return d._onRequestRedraw=o,d._coreService=l,d._coreBrowserService=u,d._cell=new c.CellData,d._state={x:0,y:0,isFocused:!1,style:"",width:0},d._cursorRenderers={bar:d._renderBarCursor.bind(d),block:d._renderBlockCursor.bind(d),underline:d._renderUnderlineCursor.bind(d)},d}return n(t,e),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){var e;this._clearCursor(),null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation(),this.onOptionsChanged()},t.prototype.onBlur=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var e,t=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new f(this._coreBrowserService.isFocused,function(){t._render(!0)})):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation()},t.prototype.onGridChanged=function(e,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(e){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,r=t-this._bufferService.buffer.ydisp;if(r<0||r>=this._bufferService.rows)this._clearCursor();else{var i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(i,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var n=this._optionsService.rawOptions.cursorStyle;return n&&"block"!==n?this._cursorRenderers[n](i,r,this._cell):this._renderBlurCursor(i,r,this._cell),this._ctx.restore(),this._state.x=i,this._state.y=r,this._state.isFocused=!1,this._state.style=n,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===i&&this._state.y===r&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](i,r,this._cell),this._ctx.restore(),this._state.x=i,this._state.y=r,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,t,r.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(r,e,t),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(e,t,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()},t.prototype._renderBlurCursor=function(e,t,r){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,t,r.getWidth(),1),this._ctx.restore()},o([s(5,l.IBufferService),s(6,l.IOptionsService),s(7,l.ICoreService),s(8,u.ICoreBrowserService),s(9,l.IDecorationService)],t)}(a.BaseRenderLayer);t.CursorRenderLayer=d;var f=function(){function e(e,t){this._renderCallback=t,this.isCursorVisible=!0,e&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=void 0})))},e.prototype._restartInterval=function(e){var t=this;void 0===e&&(e=h),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(t._animationTimeRestarted){var e=h-(Date.now()-t._animationTimeRestarted);if(t._animationTimeRestarted=void 0,e>0)return void t._restartInterval(e)}t.isCursorVisible=!1,t._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0}),t._blinkInterval=window.setInterval(function(){if(t._animationTimeRestarted){var e=h-(Date.now()-t._animationTimeRestarted);return t._animationTimeRestarted=void 0,void t._restartInterval(e)}t.isCursorVisible=!t.isCursorVisible,t._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0})},h)},e)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(e,t,r){var i,n,o,s,a,c,l,u,h,d,f,p,_,v,g,y,m,b,S,E,C,w,A,T,O,L,R,D,M,x,P,I,k,B,F,N,U,H,K,j,Y,W,V,q,z,G,X,J,Z,Q,$,ee,te,re,ie,ne,oe,se,ae,ce,le,ue,he,de,fe,pe,_e,ve,ge,ye,me,be,Se,Ee,Ce,we,Ae,Te,Oe,Le,Re,De,Me,xe,Pe,Ie,ke,Be,Fe,Ne,Ue,He,Ke,je,Ye,We,Ve,qe,ze,Ge,Xe,Je,Ze,Qe,$e,et,tt,rt,it,nt,ot,st,at,ct,lt,ut,ht,dt,ft,pt,_t,vt,gt,yt,mt,bt,St,Et,Ct=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},wt=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var At=r(1752);t.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:9,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Tt={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"─":(i={},i[1]="M0,.5 L1,.5",i),"━":(n={},n[3]="M0,.5 L1,.5",n),"│":(o={},o[1]="M.5,0 L.5,1",o),"┃":(s={},s[3]="M.5,0 L.5,1",s),"┌":(a={},a[1]="M0.5,1 L.5,.5 L1,.5",a),"┏":(c={},c[3]="M0.5,1 L.5,.5 L1,.5",c),"┐":(l={},l[1]="M0,.5 L.5,.5 L.5,1",l),"┓":(u={},u[3]="M0,.5 L.5,.5 L.5,1",u),"└":(h={},h[1]="M.5,0 L.5,.5 L1,.5",h),"┗":(d={},d[3]="M.5,0 L.5,.5 L1,.5",d),"┘":(f={},f[1]="M.5,0 L.5,.5 L0,.5",f),"┛":(p={},p[3]="M.5,0 L.5,.5 L0,.5",p),"├":(_={},_[1]="M.5,0 L.5,1 M.5,.5 L1,.5",_),"┣":(v={},v[3]="M.5,0 L.5,1 M.5,.5 L1,.5",v),"┤":(g={},g[1]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"┫":(y={},y[3]="M.5,0 L.5,1 M.5,.5 L0,.5",y),"┬":(m={},m[1]="M0,.5 L1,.5 M.5,.5 L.5,1",m),"┳":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"┴":(S={},S[1]="M0,.5 L1,.5 M.5,.5 L.5,0",S),"┻":(E={},E[3]="M0,.5 L1,.5 M.5,.5 L.5,0",E),"┼":(C={},C[1]="M0,.5 L1,.5 M.5,0 L.5,1",C),"╋":(w={},w[3]="M0,.5 L1,.5 M.5,0 L.5,1",w),"╴":(A={},A[1]="M.5,.5 L0,.5",A),"╸":(T={},T[3]="M.5,.5 L0,.5",T),"╵":(O={},O[1]="M.5,.5 L.5,0",O),"╹":(L={},L[3]="M.5,.5 L.5,0",L),"╶":(R={},R[1]="M.5,.5 L1,.5",R),"╺":(D={},D[3]="M.5,.5 L1,.5",D),"╷":(M={},M[1]="M.5,.5 L.5,1",M),"╻":(x={},x[3]="M.5,.5 L.5,1",x),"═":(P={},P[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},P),"║":(I={},I[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},I),"╒":(k={},k[1]=function(e,t){return"M.5,1 L.5,"+(.5-t)+" L1,"+(.5-t)+" M.5,"+(.5+t)+" L1,"+(.5+t)},k),"╓":(B={},B[1]=function(e,t){return"M"+(.5-e)+",1 L"+(.5-e)+",.5 L1,.5 M"+(.5+e)+",.5 L"+(.5+e)+",1"},B),"╔":(F={},F[1]=function(e,t){return"M1,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1"},F),"╕":(N={},N[1]=function(e,t){return"M0,"+(.5-t)+" L.5,"+(.5-t)+" L.5,1 M0,"+(.5+t)+" L.5,"+(.5+t)},N),"╖":(U={},U[1]=function(e,t){return"M"+(.5+e)+",1 L"+(.5+e)+",.5 L0,.5 M"+(.5-e)+",.5 L"+(.5-e)+",1"},U),"╗":(H={},H[1]=function(e,t){return"M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M0,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",1"},H),"╘":(K={},K[1]=function(e,t){return"M.5,0 L.5,"+(.5+t)+" L1,"+(.5+t)+" M.5,"+(.5-t)+" L1,"+(.5-t)},K),"╙":(j={},j[1]=function(e,t){return"M1,.5 L"+(.5-e)+",.5 L"+(.5-e)+",0 M"+(.5+e)+",.5 L"+(.5+e)+",0"},j),"╚":(Y={},Y[1]=function(e,t){return"M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0 M1,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",0"},Y),"╛":(W={},W[1]=function(e,t){return"M0,"+(.5+t)+" L.5,"+(.5+t)+" L.5,0 M0,"+(.5-t)+" L.5,"+(.5-t)},W),"╜":(V={},V[1]=function(e,t){return"M0,.5 L"+(.5+e)+",.5 L"+(.5+e)+",0 M"+(.5-e)+",.5 L"+(.5-e)+",0"},V),"╝":(q={},q[1]=function(e,t){return"M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M0,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",0"},q),"╞":(z={},z[1]=function(e,t){return"M.5,0 L.5,1 M.5,"+(.5-t)+" L1,"+(.5-t)+" M.5,"+(.5+t)+" L1,"+(.5+t)},z),"╟":(G={},G[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1 M"+(.5+e)+",.5 L1,.5"},G),"╠":(X={},X[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},X),"╡":(J={},J[1]=function(e,t){return"M.5,0 L.5,1 M0,"+(.5-t)+" L.5,"+(.5-t)+" M0,"+(.5+t)+" L.5,"+(.5+t)},J),"╢":(Z={},Z[1]=function(e,t){return"M0,.5 L"+(.5-e)+",.5 M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},Z),"╣":(Q={},Q[1]=function(e,t){return"M"+(.5+e)+",0 L"+(.5+e)+",1 M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0"},Q),"╤":($={},$[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)+" M.5,"+(.5+t)+" L.5,1"},$),"╥":(ee={},ee[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",.5 L"+(.5-e)+",1 M"+(.5+e)+",.5 L"+(.5+e)+",1"},ee),"╦":(te={},te[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1"},te),"╧":(re={},re[1]=function(e,t){return"M.5,0 L.5,"+(.5-t)+" M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},re),"╨":(ie={},ie[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",.5 L"+(.5-e)+",0 M"+(.5+e)+",.5 L"+(.5+e)+",0"},ie),"╩":(ne={},ne[1]=function(e,t){return"M0,"+(.5+t)+" L1,"+(.5+t)+" M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},ne),"╪":(oe={},oe[1]=function(e,t){return"M.5,0 L.5,1 M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},oe),"╫":(se={},se[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},se),"╬":(ae={},ae[1]=function(e,t){return"M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1 M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},ae),"╱":(ce={},ce[1]="M1,0 L0,1",ce),"╲":(le={},le[1]="M0,0 L1,1",le),"╳":(ue={},ue[1]="M1,0 L0,1 M0,0 L1,1",ue),"╼":(he={},he[1]="M.5,.5 L0,.5",he[3]="M.5,.5 L1,.5",he),"╽":(de={},de[1]="M.5,.5 L.5,0",de[3]="M.5,.5 L.5,1",de),"╾":(fe={},fe[1]="M.5,.5 L1,.5",fe[3]="M.5,.5 L0,.5",fe),"╿":(pe={},pe[1]="M.5,.5 L.5,1",pe[3]="M.5,.5 L.5,0",pe),"┍":(_e={},_e[1]="M.5,.5 L.5,1",_e[3]="M.5,.5 L1,.5",_e),"┎":(ve={},ve[1]="M.5,.5 L1,.5",ve[3]="M.5,.5 L.5,1",ve),"┑":(ge={},ge[1]="M.5,.5 L.5,1",ge[3]="M.5,.5 L0,.5",ge),"┒":(ye={},ye[1]="M.5,.5 L0,.5",ye[3]="M.5,.5 L.5,1",ye),"┕":(me={},me[1]="M.5,.5 L.5,0",me[3]="M.5,.5 L1,.5",me),"┖":(be={},be[1]="M.5,.5 L1,.5",be[3]="M.5,.5 L.5,0",be),"┙":(Se={},Se[1]="M.5,.5 L.5,0",Se[3]="M.5,.5 L0,.5",Se),"┚":(Ee={},Ee[1]="M.5,.5 L0,.5",Ee[3]="M.5,.5 L.5,0",Ee),"┝":(Ce={},Ce[1]="M.5,0 L.5,1",Ce[3]="M.5,.5 L1,.5",Ce),"┞":(we={},we[1]="M0.5,1 L.5,.5 L1,.5",we[3]="M.5,.5 L.5,0",we),"┟":(Ae={},Ae[1]="M.5,0 L.5,.5 L1,.5",Ae[3]="M.5,.5 L.5,1",Ae),"┠":(Te={},Te[1]="M.5,.5 L1,.5",Te[3]="M.5,0 L.5,1",Te),"┡":(Oe={},Oe[1]="M.5,.5 L.5,1",Oe[3]="M.5,0 L.5,.5 L1,.5",Oe),"┢":(Le={},Le[1]="M.5,.5 L.5,0",Le[3]="M0.5,1 L.5,.5 L1,.5",Le),"┥":(Re={},Re[1]="M.5,0 L.5,1",Re[3]="M.5,.5 L0,.5",Re),"┦":(De={},De[1]="M0,.5 L.5,.5 L.5,1",De[3]="M.5,.5 L.5,0",De),"┧":(Me={},Me[1]="M.5,0 L.5,.5 L0,.5",Me[3]="M.5,.5 L.5,1",Me),"┨":(xe={},xe[1]="M.5,.5 L0,.5",xe[3]="M.5,0 L.5,1",xe),"┩":(Pe={},Pe[1]="M.5,.5 L.5,1",Pe[3]="M.5,0 L.5,.5 L0,.5",Pe),"┪":(Ie={},Ie[1]="M.5,.5 L.5,0",Ie[3]="M0,.5 L.5,.5 L.5,1",Ie),"┭":(ke={},ke[1]="M0.5,1 L.5,.5 L1,.5",ke[3]="M.5,.5 L0,.5",ke),"┮":(Be={},Be[1]="M0,.5 L.5,.5 L.5,1",Be[3]="M.5,.5 L1,.5",Be),"┯":(Fe={},Fe[1]="M.5,.5 L.5,1",Fe[3]="M0,.5 L1,.5",Fe),"┰":(Ne={},Ne[1]="M0,.5 L1,.5",Ne[3]="M.5,.5 L.5,1",Ne),"┱":(Ue={},Ue[1]="M.5,.5 L1,.5",Ue[3]="M0,.5 L.5,.5 L.5,1",Ue),"┲":(He={},He[1]="M.5,.5 L0,.5",He[3]="M0.5,1 L.5,.5 L1,.5",He),"┵":(Ke={},Ke[1]="M.5,0 L.5,.5 L1,.5",Ke[3]="M.5,.5 L0,.5",Ke),"┶":(je={},je[1]="M.5,0 L.5,.5 L0,.5",je[3]="M.5,.5 L1,.5",je),"┷":(Ye={},Ye[1]="M.5,.5 L.5,0",Ye[3]="M0,.5 L1,.5",Ye),"┸":(We={},We[1]="M0,.5 L1,.5",We[3]="M.5,.5 L.5,0",We),"┹":(Ve={},Ve[1]="M.5,.5 L1,.5",Ve[3]="M.5,0 L.5,.5 L0,.5",Ve),"┺":(qe={},qe[1]="M.5,.5 L0,.5",qe[3]="M.5,0 L.5,.5 L1,.5",qe),"┽":(ze={},ze[1]="M.5,0 L.5,1 M.5,.5 L1,.5",ze[3]="M.5,.5 L0,.5",ze),"┾":(Ge={},Ge[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ge[3]="M.5,.5 L1,.5",Ge),"┿":(Xe={},Xe[1]="M.5,0 L.5,1",Xe[3]="M0,.5 L1,.5",Xe),"╀":(Je={},Je[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Je[3]="M.5,.5 L.5,0",Je),"╁":(Ze={},Ze[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ze[3]="M.5,.5 L.5,1",Ze),"╂":(Qe={},Qe[1]="M0,.5 L1,.5",Qe[3]="M.5,0 L.5,1",Qe),"╃":($e={},$e[1]="M0.5,1 L.5,.5 L1,.5",$e[3]="M.5,0 L.5,.5 L0,.5",$e),"╄":(et={},et[1]="M0,.5 L.5,.5 L.5,1",et[3]="M.5,0 L.5,.5 L1,.5",et),"╅":(tt={},tt[1]="M.5,0 L.5,.5 L1,.5",tt[3]="M0,.5 L.5,.5 L.5,1",tt),"╆":(rt={},rt[1]="M.5,0 L.5,.5 L0,.5",rt[3]="M0.5,1 L.5,.5 L1,.5",rt),"╇":(it={},it[1]="M.5,.5 L.5,1",it[3]="M.5,.5 L.5,0 M0,.5 L1,.5",it),"╈":(nt={},nt[1]="M.5,.5 L.5,0",nt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",nt),"╉":(ot={},ot[1]="M.5,.5 L1,.5",ot[3]="M.5,0 L.5,1 M.5,.5 L0,.5",ot),"╊":(st={},st[1]="M.5,.5 L0,.5",st[3]="M.5,0 L.5,1 M.5,.5 L1,.5",st),"╌":(at={},at[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",at),"╍":(ct={},ct[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ct),"┄":(lt={},lt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",lt),"┅":(ut={},ut[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ut),"┈":(ht={},ht[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ht),"┉":(dt={},dt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",dt),"╎":(ft={},ft[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ft),"╏":(pt={},pt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",pt),"┆":(_t={},_t[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",_t),"┇":(vt={},vt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",vt),"┊":(gt={},gt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",gt),"┋":(yt={},yt[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",yt),"╭":(mt={},mt[1]="C.5,1,.5,.5,1,.5",mt),"╮":(bt={},bt[1]="C.5,1,.5,.5,0,.5",bt),"╯":(St={},St[1]="C.5,0,.5,.5,0,.5",St),"╰":(Et={},Et[1]="C.5,0,.5,.5,1,.5",Et)},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},t.tryDrawCustomChar=function(e,r,i,n,o,s){var a=t.blockElementDefinitions[r];if(a)return function(e,t,r,i,n,o){for(var s=0;s<t.length;s++){var a=t[s],c=n/8,l=o/8;e.fillRect(r+a.x*c,i+a.y*l,a.w*c,a.h*l)}}(e,a,i,n,o,s),!0;var c=Tt[r];if(c)return function(e,t,r,i,n,o){var s,a=Ot.get(t);a||(a=new Map,Ot.set(t,a));var c=e.fillStyle;if("string"!=typeof c)throw new Error('Unexpected fillStyle type "'+c+'"');var l=a.get(c);if(!l){var u=t[0].length,h=t.length,d=document.createElement("canvas");d.width=u,d.height=h;var f=(0,At.throwIfFalsy)(d.getContext("2d")),p=new ImageData(u,h),_=void 0,v=void 0,g=void 0,y=void 0;if(c.startsWith("#"))_=parseInt(c.slice(1,3),16),v=parseInt(c.slice(3,5),16),g=parseInt(c.slice(5,7),16),y=c.length>7&&parseInt(c.slice(7,9),16)||1;else{if(!c.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+c+'" when drawing pattern glyph');_=(s=Ct(c.substring(5,c.length-1).split(",").map(function(e){return parseFloat(e)}),4))[0],v=s[1],g=s[2],y=s[3]}for(var m=0;m<h;m++)for(var b=0;b<u;b++)p.data[4*(m*u+b)]=_,p.data[4*(m*u+b)+1]=v,p.data[4*(m*u+b)+2]=g,p.data[4*(m*u+b)+3]=t[m][b]*(255*y);f.putImageData(p,0,0),l=(0,At.throwIfFalsy)(e.createPattern(d,null)),a.set(c,l)}e.fillStyle=l,e.fillRect(r,i,n,o)}(e,c,i,n,o,s),!0;var l=t.boxDrawingDefinitions[r];if(l)return function(e,t,r,i,n,o){var s,a,c,l;e.strokeStyle=e.fillStyle;try{for(var u=wt(Object.entries(t)),h=u.next();!h.done;h=u.next()){var d=Ct(h.value,2),f=d[0],p=d[1];e.beginPath(),e.lineWidth=window.devicePixelRatio*Number.parseInt(f);var _=void 0;_="function"==typeof p?p(.15,.15/o*n):p;try{for(var v=(c=void 0,wt(_.split(" "))),g=v.next();!g.done;g=v.next()){var y=g.value,m=y[0],b=Rt[m];if(b){var S=y.substring(1).split(",");S[0]&&S[1]&&b(e,Dt(S,n,o,r,i))}else console.error('Could not find drawing instructions for "'+m+'"')}}catch(e){c={error:e}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(c)throw c.error}}e.stroke(),e.closePath()}}catch(e){s={error:e}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}}(e,l,i,n,o,s),!0;var u=t.powerlineDefinitions[r];return!!u&&(function(e,t,r,i,n,o){var s,a;e.beginPath(),e.lineWidth=window.devicePixelRatio;try{for(var c=wt(t.d.split(" ")),l=c.next();!l.done;l=c.next()){var u=l.value,h=u[0],d=Rt[h];if(d){var f=u.substring(1).split(",");f[0]&&f[1]&&d(e,Dt(f,n,o,r,i,t.horizontalPadding))}else console.error('Could not find drawing instructions for "'+h+'"')}}catch(e){s={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,u,i,n,o,s),!0)};var Ot=new Map;function Lt(e,t,r){return void 0===r&&(r=0),Math.max(Math.min(e,t),r)}var Rt={C:function(e,t){return e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},L:function(e,t){return e.lineTo(t[0],t[1])},M:function(e,t){return e.moveTo(t[0],t[1])}};function Dt(e,t,r,i,n,o){void 0===o&&(o=0);var s=e.map(function(e){return parseFloat(e)||parseInt(e)});if(s.length<2)throw new Error("Too few arguments for instruction");for(var a=0;a<s.length;a+=2)s[a]*=t-2*o*window.devicePixelRatio,0!==s[a]&&(s[a]=Lt(Math.round(s[a]+.5)-.5,t,0)),s[a]+=i+o*window.devicePixelRatio;for(var c=1;c<s.length;c+=2)s[c]*=r,0!==s[c]&&(s[c]=Lt(Math.round(s[c]+.5)-.5,r,0)),s[c]+=n;return s}},3700:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var r=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var r=0;r<e;r++){this.cache.length<=r&&this.cache.push([]);for(var i=this.cache[r].length;i<t;i++)this.cache[r].push(void 0);this.cache[r].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0},e}();t.GridCache=r},5098:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var a=r(1546),c=r(8803),l=r(2040),u=r(2585),h=function(e){function t(t,r,i,n,o,s,a,c,l){var u=e.call(this,t,"link",r,!0,i,n,a,c,l)||this;return o.onShowLinkUnderline(function(e){return u._onShowLinkUnderline(e)}),o.onHideLinkUnderline(function(e){return u._onHideLinkUnderline(e)}),s.onShowLinkUnderline(function(e){return u._onShowLinkUnderline(e)}),s.onHideLinkUnderline(function(e){return u._onHideLinkUnderline(e)}),u}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===c.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,l.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},o([s(6,u.IBufferService),s(7,u.IOptionsService),s(8,u.IDecorationService)],t)}(a.BaseRenderLayer);t.LinkRenderLayer=h},3525:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var c=r(9596),l=r(4149),u=r(2512),h=r(5098),d=r(844),f=r(4725),p=r(2585),_=r(1420),v=r(8460),g=1,y=function(e){function t(t,r,i,n,o,s,a,d){var f=e.call(this)||this;f._colors=t,f._screenElement=r,f._bufferService=s,f._charSizeService=a,f._optionsService=d,f._id=g++,f._onRequestRedraw=new v.EventEmitter;var p=f._optionsService.rawOptions.allowTransparency;return f._renderLayers=[o.createInstance(c.TextRenderLayer,f._screenElement,0,f._colors,p,f._id),o.createInstance(l.SelectionRenderLayer,f._screenElement,1,f._colors,f._id),o.createInstance(h.LinkRenderLayer,f._screenElement,2,f._colors,f._id,i,n),o.createInstance(u.CursorRenderLayer,f._screenElement,3,f._colors,f._id,f._onRequestRedraw)],f.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},f._devicePixelRatio=window.devicePixelRatio,f._updateDimensions(),f.onOptionsChanged(),f}return n(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t,r;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}e.prototype.dispose.call(this),(0,_.removeTerminalFromCache)(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(e){var t,r;this._colors=e;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next()){var o=n.value;o.setColors(this._colors),o.reset()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.onResize=function(e,t){var r,i;this._updateDimensions();try{for(var n=a(this._renderLayers),o=n.next();!o.done;o=n.next())o.value.resize(this.dimensions)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation(function(e){return e.onBlur()})},t.prototype.onFocus=function(){this._runOperation(function(e){return e.onFocus()})},t.prototype.onSelectionChanged=function(e,t,r){void 0===r&&(r=!1),this._runOperation(function(i){return i.onSelectionChanged(e,t,r)}),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},t.prototype.onCursorMove=function(){this._runOperation(function(e){return e.onCursorMove()})},t.prototype.onOptionsChanged=function(){this._runOperation(function(e){return e.onOptionsChanged()})},t.prototype.clear=function(){this._runOperation(function(e){return e.reset()})},t.prototype._runOperation=function(e){var t,r;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next())e(n.value)}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.renderRows=function(e,t){var r,i;try{for(var n=a(this._renderLayers),o=n.next();!o.done;o=n.next())o.value.onGridChanged(e,t)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}},t.prototype.clearTextureAtlas=function(){var e,t;try{for(var r=a(this._renderLayers),i=r.next();!i.done;i=r.next())i.value.clearTextureAtlas()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},o([s(4,p.IInstantiationService),s(5,p.IBufferService),s(6,f.ICharSizeService),s(7,p.IOptionsService)],t)}(d.Disposable);t.Renderer=y},1752:(e,t)=>{function r(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.excludeFromContrastRatioDemands=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=r,t.excludeFromContrastRatioDemands=function(e){return r(e)||function(e){return 9472<=e&&e<=9631}(e)}},4149:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var a=r(1546),c=r(2585),l=function(e){function t(t,r,i,n,o,s,a){var c=e.call(this,t,"selection",r,!0,i,n,o,s,a)||this;return c._clearState(),c}return n(t,e),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(t,r,i){if(e.prototype.onSelectionChanged.call(this,t,r,i),this._didStateChange(t,r,i,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&r){var n=t[1]-this._bufferService.buffer.ydisp,o=r[1]-this._bufferService.buffer.ydisp,s=Math.max(n,0),a=Math.min(o,this._bufferService.rows-1);if(s>=this._bufferService.rows||a<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,i){var c=t[0],l=r[0]-c,u=a-s+1;this._fillCells(c,s,l,u)}else{c=n===s?t[0]:0;var h=s===o?r[0]:this._bufferService.cols;this._fillCells(c,s,h-c,1);var d=Math.max(a-s-1,0);if(this._fillCells(0,s+1,this._bufferService.cols,d),s!==a){var f=o===a?r[0]:this._bufferService.cols;this._fillCells(0,a,f,1)}}this._state.start=[t[0],t[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(e,t,r,i){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||r!==this._state.columnSelectMode||i!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]},o([s(4,c.IBufferService),s(5,c.IOptionsService),s(6,c.IDecorationService)],t)}(a.BaseRenderLayer);t.SelectionRenderLayer=l},9596:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var c=r(3700),l=r(1546),u=r(3734),h=r(643),d=r(511),f=r(2585),p=r(4725),_=r(4269),v=function(e){function t(t,r,i,n,o,s,a,l,u){var h=e.call(this,t,"text",r,n,i,o,s,a,u)||this;return h._characterJoinerService=l,h._characterWidth=0,h._characterFont="",h._characterOverlapCache={},h._workCell=new d.CellData,h._state=new c.GridCache,h}return n(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t);var r=this._getFont(!1,!1);this._characterWidth===t.scaledCharWidth&&this._characterFont===r||(this._characterWidth=t.scaledCharWidth,this._characterFont=r,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(e,t,r){for(var i=e;i<=t;i++)for(var n=i+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.lines.get(n),s=this._characterJoinerService.getJoinedCharacters(n),a=0;a<this._bufferService.cols;a++){o.loadCell(a,this._workCell);var c=this._workCell,l=!1,u=a;if(0!==c.getWidth()){if(s.length>0&&a===s[0][0]){l=!0;var d=s.shift();c=new _.JoinedCellData(this._workCell,o.translateToString(!0,d[0],d[1]),d[1]-d[0]),u=d[1]-1}!l&&this._isOverlapping(c)&&u<o.length-1&&o.getCodePoint(u+1)===h.NULL_CELL_CODE&&(c.content&=-12582913,c.content|=2<<22),r(c,a,i),a=u}}},t.prototype._drawBackground=function(e,t){var r=this,i=this._ctx,n=this._bufferService.cols,o=0,s=0,c=null;i.save(),this._forEachCell(e,t,function(e,t,l){var h,d,f=null;e.isInverse()?f=e.isFgDefault()?r._colors.foreground.css:e.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(e.getFgColor()).join(",")+")":r._colors.ansi[e.getFgColor()].css:e.isBgRGB()?f="rgb("+u.AttributeData.toColorRGB(e.getBgColor()).join(",")+")":e.isBgPalette()&&(f=r._colors.ansi[e.getBgColor()].css);var p=!1;try{for(var _=a(r._decorationService.getDecorationsAtCell(t,r._bufferService.buffer.ydisp+l)),v=_.next();!v.done;v=_.next()){var g=v.value;"top"!==g.options.layer&&p||(g.backgroundColorRGB&&(f=g.backgroundColorRGB.css),p="top"===g.options.layer)}}catch(e){h={error:e}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(h)throw h.error}}null===c&&(o=t,s=l),l!==s?(i.fillStyle=c||"",r._fillCells(o,s,n-o,1),o=t,s=l):c!==f&&(i.fillStyle=c||"",r._fillCells(o,s,t-o,1),o=t,s=l),c=f}),null!==c&&(i.fillStyle=c,this._fillCells(o,s,n-o,1)),i.restore()},t.prototype._drawForeground=function(e,t){var r=this;this._forEachCell(e,t,function(e,t,i){if(!e.isInvisible()&&(r._drawChars(e,t,i),e.isUnderline()||e.isStrikethrough())){if(r._ctx.save(),e.isInverse())if(e.isBgDefault())r._ctx.fillStyle=r._colors.background.css;else if(e.isBgRGB())r._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var n=e.getBgColor();r._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&n<8&&(n+=8),r._ctx.fillStyle=r._colors.ansi[n].css}else if(e.isFgDefault())r._ctx.fillStyle=r._colors.foreground.css;else if(e.isFgRGB())r._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var o=e.getFgColor();r._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&o<8&&(o+=8),r._ctx.fillStyle=r._colors.ansi[o].css}e.isStrikethrough()&&r._fillMiddleLineAtCells(t,i,e.getWidth()),e.isUnderline()&&r._fillBottomLineAtCells(t,i,e.getWidth()),r._ctx.restore()}})},t.prototype.onGridChanged=function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},t.prototype._isOverlapping=function(e){if(1!==e.getWidth())return!1;if(e.getCode()<256)return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var r=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=r,r},o([s(5,f.IBufferService),s(6,f.IOptionsService),s(7,p.ICharacterJoinerService),s(8,f.IDecorationService)],t)}(l.BaseRenderLayer);t.TextRenderLayer=v},9616:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var r=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.clear=function(){},e.prototype.beginFrame=function(){},e}();t.BaseCharAtlas=r},1420:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var i=r(2040),n=r(1906),o=[];t.acquireCharAtlas=function(e,t,r,s,a){for(var c=(0,i.generateConfig)(s,a,e,r),l=0;l<o.length;l++){var u=(h=o[l]).ownedBy.indexOf(t);if(u>=0){if((0,i.configEquals)(h.config,c))return h.atlas;1===h.ownedBy.length?(h.atlas.dispose(),o.splice(l,1)):h.ownedBy.splice(u,1);break}}for(l=0;l<o.length;l++){var h=o[l];if((0,i.configEquals)(h.config,c))return h.ownedBy.push(t),h.atlas}var d={atlas:new n.DynamicCharAtlas(document,c),config:c,ownedBy:[t]};return o.push(d),d.atlas},t.removeTerminalFromCache=function(e){for(var t=0;t<o.length;t++){var r=o[t].ownedBy.indexOf(e);if(-1!==r){1===o[t].ownedBy.length?(o[t].atlas.dispose(),o.splice(t,1)):o[t].ownedBy.splice(r,1);break}}}},2040:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var i=r(643);t.generateConfig=function(e,t,r,i){var n={foreground:i.foreground,background:i.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:i.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:e,scaledCharHeight:t,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontWeightBold:r.fontWeightBold,allowTransparency:r.allowTransparency,colors:n}},t.configEquals=function(e,t){for(var r=0;r<e.colors.ansi.length;r++)if(e.colors.ansi[r].rgba!==t.colors.ansi[r].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.scaledCharWidth===t.scaledCharWidth&&e.scaledCharHeight===t.scaledCharHeight&&e.colors.foreground===t.colors.foreground&&e.colors.background===t.colors.background},t.is256Color=function(e){return e<i.DEFAULT_COLOR}},8803:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;var i=r(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=i.isFirefox||i.isLegacyEdge?"bottom":"ideographic",t.CHAR_ATLAS_CELL_SPACING=1},1906:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var o=r(8803),s=r(9616),a=r(5680),c=r(7001),l=r(6114),u=r(1752),h=r(8055),d=1024,f=1024,p={css:"rgba(0, 0, 0, 0)",rgba:0};function _(e){return e.code<<21|e.bg<<12|e.fg<<3|(e.bold?0:4)+(e.dim?0:2)+(e.italic?0:1)}t.getGlyphCacheKey=_;var v=function(e){function t(t,r){var i=e.call(this)||this;i._config=r,i._drawToCacheCount=0,i._glyphsWaitingOnBitmap=[],i._bitmapCommitTimeout=null,i._bitmap=null,i._cacheCanvas=t.createElement("canvas"),i._cacheCanvas.width=d,i._cacheCanvas.height=f,i._cacheCtx=(0,u.throwIfFalsy)(i._cacheCanvas.getContext("2d",{alpha:!0}));var n=t.createElement("canvas");n.width=i._config.scaledCharWidth,n.height=i._config.scaledCharHeight,i._tmpCtx=(0,u.throwIfFalsy)(n.getContext("2d",{alpha:i._config.allowTransparency})),i._width=Math.floor(d/i._config.scaledCharWidth),i._height=Math.floor(f/i._config.scaledCharHeight);var o=i._width*i._height;return i._cacheMap=new c.LRUMap(o),i._cacheMap.prealloc(o),i}return n(t,e),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.clear=function(){if(this._cacheMap.size>0){var e=this._width*this._height;this._cacheMap=new c.LRUMap(e),this._cacheMap.prealloc(e)}this._cacheCtx.clearRect(0,0,d,f),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},t.prototype.draw=function(e,t,r,i){if(32===t.code)return!0;if(!this._canCache(t))return!1;var n=_(t),o=this._cacheMap.get(n);if(null!=o)return this._drawFromCache(e,o,r,i),!0;if(this._drawToCacheCount<100){var s;s=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var a=this._drawToCache(t,s);return this._cacheMap.set(n,a),this._drawFromCache(e,a,r,i),!0}return!1},t.prototype._canCache=function(e){return e.code<256},t.prototype._toCoordinateX=function(e){return e%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(e){return Math.floor(e/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(e,t,r,i){if(!t.isEmpty){var n=this._toCoordinateX(t.index),o=this._toCoordinateY(t.index);e.drawImage(t.inBitmap?this._bitmap:this._cacheCanvas,n,o,this._config.scaledCharWidth,this._config.scaledCharHeight,r,i,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(e){return e<this._config.colors.ansi.length?this._config.colors.ansi[e]:a.DEFAULT_ANSI_COLORS[e]},t.prototype._getBackgroundColor=function(e){return this._config.allowTransparency?p:e.bg===o.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:e.bg<256?this._getColorFromAnsiIndex(e.bg):this._config.colors.background},t.prototype._getForegroundColor=function(e){return e.fg===o.INVERTED_DEFAULT_COLOR?h.color.opaque(this._config.colors.background):e.fg<256?this._getColorFromAnsiIndex(e.fg):this._config.colors.foreground},t.prototype._drawToCache=function(e,t){this._drawToCacheCount++,this._tmpCtx.save();var r=this._getBackgroundColor(e);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=r.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var i=e.bold?this._config.fontWeightBold:this._config.fontWeight,n=e.italic?"italic":"";this._tmpCtx.font=n+" "+i+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=o.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(e).css,e.dim&&(this._tmpCtx.globalAlpha=o.DIM_OPACITY),this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight);var s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),a=!1;if(this._config.allowTransparency||(a=y(s,r)),a&&"_"===e.chars&&!this._config.allowTransparency)for(var c=1;c<=5&&(this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight-c),a=y(s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),r));c++);this._tmpCtx.restore();var l=this._toCoordinateX(t),u=this._toCoordinateY(t);this._cacheCtx.putImageData(s,l,u);var h={index:t,isEmpty:a,inBitmap:!1};return this._addGlyphToBitmap(h),h},t.prototype._addGlyphToBitmap=function(e){var t=this;!("createImageBitmap"in window)||l.isFirefox||l.isSafari||(this._glyphsWaitingOnBitmap.push(e),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return t._generateBitmap()},100)))},t.prototype._generateBitmap=function(){var e=this,t=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(r){e._bitmap=r;for(var i=0;i<t.length;i++)t[i].inBitmap=!0}),this._bitmapCommitTimeout=null},t}(s.BaseCharAtlas);t.DynamicCharAtlas=v;var g=function(e){function t(t,r){return e.call(this)||this}return n(t,e),t.prototype.draw=function(e,t,r,i){return!1},t}(s.BaseCharAtlas);function y(e,t){for(var r=!0,i=t.rgba>>>24,n=t.rgba>>>16&255,o=t.rgba>>>8&255,s=0;s<e.data.length;s+=4)e.data[s]===i&&e.data[s+1]===n&&e.data[s+2]===o?e.data[s+3]=0:r=!1;return r}t.NoneCharAtlas=g},7001:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var r=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,r=e.next;e===this._head&&(this._head=r),e===this._tail&&(this._tail=t),null!==t&&(t.next=r),null!==r&&(r.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,r=0;r<e;r++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0!==t?(this._unlinkNode(t),this._appendNode(t),t.value):null},e.prototype.peekValue=function(e){var t=this._map[e];return void 0!==t?t.value:null},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var r=this._map[e];if(void 0!==r)r=this._map[e],this._unlinkNode(r),r.value=t;else if(this.size>=this.capacity)r=this._head,this._unlinkNode(r),delete this._map[r.key],r.key=e,r.value=t,this._map[e]=r;else{var i=this._nodePool;i.length>0?((r=i.pop()).key=e,r.value=t):r={prev:null,next:null,key:e,value:t},this._map[e]=r,this.size++}this._appendNode(r)},e}();t.LRUMap=r},1296:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var c=r(3787),l=r(8803),u=r(844),h=r(4725),d=r(2585),f=r(8460),p=r(8055),_=r(9631),v="xterm-dom-renderer-owner-",g="xterm-fg-",y="xterm-bg-",m="xterm-focus",b=1,S=function(e){function t(t,r,i,n,o,s,a,l,u,h){var d=e.call(this)||this;return d._colors=t,d._element=r,d._screenElement=i,d._viewportElement=n,d._linkifier=o,d._linkifier2=s,d._charSizeService=l,d._optionsService=u,d._bufferService=h,d._terminalClass=b++,d._rowElements=[],d._rowContainer=document.createElement("div"),d._rowContainer.classList.add("xterm-rows"),d._rowContainer.style.lineHeight="normal",d._rowContainer.setAttribute("aria-hidden","true"),d._refreshRowElements(d._bufferService.cols,d._bufferService.rows),d._selectionContainer=document.createElement("div"),d._selectionContainer.classList.add("xterm-selection"),d._selectionContainer.setAttribute("aria-hidden","true"),d.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},d._updateDimensions(),d._injectCss(),d._rowFactory=a.createInstance(c.DomRendererRowFactory,document,d._colors),d._element.classList.add(v+d._terminalClass),d._screenElement.appendChild(d._rowContainer),d._screenElement.appendChild(d._selectionContainer),d.register(d._linkifier.onShowLinkUnderline(function(e){return d._onLinkHover(e)})),d.register(d._linkifier.onHideLinkUnderline(function(e){return d._onLinkLeave(e)})),d.register(d._linkifier2.onShowLinkUnderline(function(e){return d._onLinkHover(e)})),d.register(d._linkifier2.onHideLinkUnderline(function(e){return d._onLinkLeave(e)})),d}return n(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new f.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove(v+this._terminalClass),(0,_.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),e.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var e,t;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var r=a(this._rowElements),i=r.next();!i.done;i=r.next()){var n=i.value;n.style.width=this.dimensions.canvasWidth+"px",n.style.height=this.dimensions.actualCellHeight+"px",n.style.lineHeight=this.dimensions.actualCellHeight+"px",n.style.overflow="hidden"}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var o=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=o,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(e){this._colors=e,this._injectCss()},t.prototype._injectCss=function(){var e=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var t=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";t+=this._terminalSelector+" span:not(."+c.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+c.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+c.ITALIC_CLASS+" { font-style: italic;}",t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",t+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+c.CURSOR_CLASS+"."+c.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+c.CURSOR_CLASS+"."+c.CURSOR_BLINK_CLASS+":not(."+c.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+c.CURSOR_CLASS+"."+c.CURSOR_BLINK_CLASS+"."+c.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+c.CURSOR_CLASS+"."+c.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+c.CURSOR_CLASS+"."+c.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+c.CURSOR_CLASS+"."+c.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",t+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach(function(r,i){t+=e._terminalSelector+" ."+g+i+" { color: "+r.css+"; }"+e._terminalSelector+" ."+y+i+" { background-color: "+r.css+"; }"}),t+=this._terminalSelector+" ."+g+l.INVERTED_DEFAULT_COLOR+" { color: "+p.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+y+l.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=t},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(e,t){for(var r=this._rowElements.length;r<=t;r++){var i=document.createElement("div");this._rowContainer.appendChild(i),this._rowElements.push(i)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove(m)},t.prototype.onFocus=function(){this._rowContainer.classList.add(m)},t.prototype.onSelectionChanged=function(e,t,r){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(e,t,r),this.renderRows(0,this._bufferService.rows-1),e&&t){var i=e[1]-this._bufferService.buffer.ydisp,n=t[1]-this._bufferService.buffer.ydisp,o=Math.max(i,0),s=Math.min(n,this._bufferService.rows-1);if(!(o>=this._bufferService.rows||s<0)){var a=document.createDocumentFragment();if(r){var c=e[0]>t[0];a.appendChild(this._createSelectionElement(o,c?t[0]:e[0],c?e[0]:t[0],s-o+1))}else{var l=i===o?e[0]:0,u=o===n?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,l,u));var h=s-o-1;if(a.appendChild(this._createSelectionElement(o+1,0,this._bufferService.cols,h)),o!==s){var d=n===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(s,0,d))}}this._selectionContainer.appendChild(a)}}},t.prototype._createSelectionElement=function(e,t,r,i){void 0===i&&(i=1);var n=document.createElement("div");return n.style.height=i*this.dimensions.actualCellHeight+"px",n.style.top=e*this.dimensions.actualCellHeight+"px",n.style.left=t*this.dimensions.actualCellWidth+"px",n.style.width=this.dimensions.actualCellWidth*(r-t)+"px",n},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){var e,t;try{for(var r=a(this._rowElements),i=r.next();!i.done;i=r.next())i.value.innerText=""}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.renderRows=function(e,t){for(var r=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=e;o<=t;o++){var s=this._rowElements[o];s.innerText="";var a=o+this._bufferService.buffer.ydisp,c=this._bufferService.buffer.lines.get(a),l=this._optionsService.rawOptions.cursorStyle;s.appendChild(this._rowFactory.createRow(c,a,a===r,l,i,n,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return"."+v+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},t.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},t.prototype._setCellUnderline=function(e,t,r,i,n,o){for(;e!==t||r!==i;){var s=this._rowElements[r];if(!s)return;var a=s.children[e];a&&(a.style.textDecoration=o?"underline":"none"),++e>=n&&(e=0,r++)}},o([s(6,d.IInstantiationService),s(7,h.ICharSizeService),s(8,d.IOptionsService),s(9,d.IBufferService)],t)}(u.Disposable);t.DomRenderer=S},3787:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.STRIKETHROUGH_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var s=r(8803),a=r(643),c=r(511),l=r(2585),u=r(8055),h=r(4725),d=r(4269),f=r(1752);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.STRIKETHROUGH_CLASS="xterm-strikethrough",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var p=function(){function e(e,t,r,i,n,o){this._document=e,this._colors=t,this._characterJoinerService=r,this._optionsService=i,this._coreService=n,this._decorationService=o,this._workCell=new c.CellData,this._columnSelectMode=!1}return e.prototype.setColors=function(e){this._colors=e},e.prototype.onSelectionChanged=function(e,t,r){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=r},e.prototype.createRow=function(e,r,i,n,c,l,h,f){for(var p,v,g=this._document.createDocumentFragment(),y=this._characterJoinerService.getJoinedCharacters(r),m=0,b=Math.min(e.length,f)-1;b>=0;b--)if(e.loadCell(b,this._workCell).getCode()!==a.NULL_CELL_CODE||i&&b===c){m=b+1;break}for(b=0;b<m;b++){e.loadCell(b,this._workCell);var S=this._workCell.getWidth();if(0!==S){var E=!1,C=b,w=this._workCell;if(y.length>0&&b===y[0][0]){E=!0;var A=y.shift();w=new d.JoinedCellData(this._workCell,e.translateToString(!0,A[0],A[1]),A[1]-A[0]),C=A[1]-1,S=w.getWidth()}var T=this._document.createElement("span");if(S>1&&(T.style.width=h*S+"px"),E&&(T.style.display="inline",c>=b&&c<=C&&(c=b)),!this._coreService.isCursorHidden&&i&&b===c)switch(T.classList.add(t.CURSOR_CLASS),l&&T.classList.add(t.CURSOR_BLINK_CLASS),n){case"bar":T.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":T.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:T.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}w.isBold()&&T.classList.add(t.BOLD_CLASS),w.isItalic()&&T.classList.add(t.ITALIC_CLASS),w.isDim()&&T.classList.add(t.DIM_CLASS),w.isUnderline()&&T.classList.add(t.UNDERLINE_CLASS),w.isInvisible()?T.textContent=a.WHITESPACE_CELL_CHAR:T.textContent=w.getChars()||a.WHITESPACE_CELL_CHAR,w.isStrikethrough()&&T.classList.add(t.STRIKETHROUGH_CLASS);var O=w.getFgColor(),L=w.getFgColorMode(),R=w.getBgColor(),D=w.getBgColorMode(),M=!!w.isInverse();if(M){var x=O;O=R,R=x;var P=L;L=D,D=P}var I=void 0,k=void 0,B=!1;try{for(var F=(p=void 0,o(this._decorationService.getDecorationsAtCell(b,r))),N=F.next();!N.done;N=F.next()){var U=N.value;"top"!==U.options.layer&&B||(U.backgroundColorRGB&&(D=50331648,R=U.backgroundColorRGB.rgba>>8&16777215,I=U.backgroundColorRGB),U.foregroundColorRGB&&(L=50331648,O=U.foregroundColorRGB.rgba>>8&16777215,k=U.foregroundColorRGB),B="top"===U.options.layer)}}catch(e){p={error:e}}finally{try{N&&!N.done&&(v=F.return)&&v.call(F)}finally{if(p)throw p.error}}var H=this._isCellInSelection(b,r);B||this._colors.selectionForeground&&H&&(L=50331648,O=this._colors.selectionForeground.rgba>>8&16777215,k=this._colors.selectionForeground),H&&(I=this._colors.selectionOpaque,B=!0),B&&T.classList.add("xterm-decoration-top");var K=void 0;switch(D){case 16777216:case 33554432:K=this._colors.ansi[R],T.classList.add("xterm-bg-"+R);break;case 50331648:K=u.rgba.toColor(R>>16,R>>8&255,255&R),this._addStyle(T,"background-color:#"+_((R>>>0).toString(16),"0",6));break;default:M?(K=this._colors.foreground,T.classList.add("xterm-bg-"+s.INVERTED_DEFAULT_COLOR)):K=this._colors.background}switch(L){case 16777216:case 33554432:w.isBold()&&O<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(O+=8),this._applyMinimumContrast(T,K,this._colors.ansi[O],w,I,void 0)||T.classList.add("xterm-fg-"+O);break;case 50331648:var j=u.rgba.toColor(O>>16&255,O>>8&255,255&O);this._applyMinimumContrast(T,K,j,w,I,k)||this._addStyle(T,"color:#"+_(O.toString(16),"0",6));break;default:this._applyMinimumContrast(T,K,this._colors.foreground,w,I,void 0)||M&&T.classList.add("xterm-fg-"+s.INVERTED_DEFAULT_COLOR)}g.appendChild(T),b=C}}return g},e.prototype._applyMinimumContrast=function(e,t,r,i,n,o){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,f.excludeFromContrastRatioDemands)(i.getCode()))return!1;var s=void 0;return n||o||(s=this._colors.contrastCache.getColor(t.rgba,r.rgba)),void 0===s&&(s=u.color.ensureContrastRatio(n||t,o||r,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((n||t).rgba,(o||r).rgba,null!=s?s:null)),!!s&&(this._addStyle(e,"color:"+s.css),!0)},e.prototype._addStyle=function(e,t){e.setAttribute("style",""+(e.getAttribute("style")||"")+t+";")},e.prototype._isCellInSelection=function(e,t){var r=this._selectionStart,i=this._selectionEnd;return!(!r||!i)&&(this._columnSelectMode?r[0]<=i[0]?e>=r[0]&&t>=r[1]&&e<i[0]&&t<=i[1]:e<r[0]&&t>=r[1]&&e>=i[0]&&t<=i[1]:t>r[1]&&t<i[1]||r[1]===i[1]&&t===r[1]&&e>=r[0]&&e<i[0]||r[1]<i[1]&&t===i[1]&&e<i[0]||r[1]<i[1]&&t===r[1]&&e>=r[0])},i([n(2,h.ICharacterJoinerService),n(3,l.IOptionsService),n(4,l.ICoreService),n(5,l.IDecorationService)],e)}();function _(e,t,r){for(;e.length<r;)e=t+e;return e}t.DomRendererRowFactory=p},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var r=function(){function e(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(e=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(e=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var e},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])},e.prototype.onTrim=function(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();t.SelectionModel=r},428:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var o=r(2585),s=r(8460),a=function(){function e(e,t,r){this._optionsService=r,this.width=0,this.height=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new c(e,t,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())},i([n(2,o.IOptionsService)],e)}();t.CharSizeService=a;var c=function(){function e(e,t,r){this._document=e,this._parentElement=t,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var e=this._measureElement.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this._result.width=e.width,this._result.height=Math.ceil(e.height)),this._result},e}()},4269:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var a=r(3734),c=r(643),l=r(511),u=r(2585),h=function(e){function t(t,r,i){var n=e.call(this)||this;return n.content=0,n.combinedData="",n.fg=t.fg,n.bg=t.bg,n.combinedData=r,n._width=i,n}return n(t,e),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(e){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.JoinedCellData=h;var d=function(){function e(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new l.CellData}return e.prototype.register=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},e.prototype.deregister=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var r=[],i=t.translateToString(!0),n=0,o=0,s=0,a=t.getFg(0),l=t.getBg(0),u=0;u<t.getTrimmedLength();u++)if(t.loadCell(u,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==a||this._workCell.bg!==l){if(u-n>1)for(var h=this._getJoinedRanges(i,s,o,t,n),d=0;d<h.length;d++)r.push(h[d]);n=u,s=o,a=this._workCell.fg,l=this._workCell.bg}o+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-n>1)for(h=this._getJoinedRanges(i,s,o,t,n),d=0;d<h.length;d++)r.push(h[d]);return r},e.prototype._getJoinedRanges=function(t,r,i,n,o){var s=t.substring(r,i),a=[];try{a=this._characterJoiners[0].handler(s)}catch(e){console.error(e)}for(var c=1;c<this._characterJoiners.length;c++)try{for(var l=this._characterJoiners[c].handler(s),u=0;u<l.length;u++)e._mergeRanges(a,l[u])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,n,o),a},e.prototype._stringRangesToCellRanges=function(e,t,r){var i=0,n=!1,o=0,s=e[i];if(s){for(var a=r;a<this._bufferService.cols;a++){var l=t.getWidth(a),u=t.getString(a).length||c.WHITESPACE_CELL_CHAR.length;if(0!==l){if(!n&&s[0]<=o&&(s[0]=a,n=!0),s[1]<=o){if(s[1]=a,!(s=e[++i]))break;s[0]<=o?(s[0]=a,n=!0):n=!1}o+=u}}s&&(s[1]=this._bufferService.cols)}},e._mergeRanges=function(e,t){for(var r=!1,i=0;i<e.length;i++){var n=e[i];if(r){if(t[1]<=n[0])return e[i-1][1]=t[1],e;if(t[1]<=n[1])return e[i-1][1]=Math.max(t[1],n[1]),e.splice(i,1),e;e.splice(i,1),i--}else{if(t[1]<=n[0])return e.splice(i,0,t),e;if(t[1]<=n[1])return n[0]=Math.min(t[0],n[0]),e;t[0]<n[1]&&(n[0]=Math.min(t[0],n[0]),r=!0)}}return r?e[e.length-1][1]=t[1]:e.push(t),e},e=o([s(0,u.IBufferService)],e)}();t.CharacterJoinerService=d},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var r=function(){function e(e){this._textarea=e}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();t.CoreBrowserService=r},8934:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var o=r(4725),s=r(9806),a=function(){function e(e,t){this._renderService=e,this._charSizeService=t}return e.prototype.getCoords=function(e,t,r,i,n){return(0,s.getCoords)(window,e,t,r,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,n)},e.prototype.getRawByteCoords=function(e,t,r,i){var n=this.getCoords(e,t,r,i);return(0,s.getRawByteCoords)(n)},i([n(0,o.IRenderService),n(1,o.ICharSizeService)],e)}();t.MouseService=a},3230:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var a=r(6193),c=r(8460),l=r(844),u=r(5596),h=r(3656),d=r(2585),f=r(4725),p=function(e){function t(t,r,i,n,o,s,l){var d=e.call(this)||this;if(d._renderer=t,d._rowCount=r,d._charSizeService=o,d._isPaused=!1,d._needsFullRefresh=!1,d._isNextRenderRedrawOnly=!0,d._needsSelectionRefresh=!1,d._canvasWidth=0,d._canvasHeight=0,d._selectionState={start:void 0,end:void 0,columnSelectMode:!1},d._onDimensionsChange=new c.EventEmitter,d._onRenderedViewportChange=new c.EventEmitter,d._onRender=new c.EventEmitter,d._onRefreshRequest=new c.EventEmitter,d.register({dispose:function(){return d._renderer.dispose()}}),d._renderDebouncer=new a.RenderDebouncer(function(e,t){return d._renderRows(e,t)}),d.register(d._renderDebouncer),d._screenDprMonitor=new u.ScreenDprMonitor,d._screenDprMonitor.setListener(function(){return d.onDevicePixelRatioChange()}),d.register(d._screenDprMonitor),d.register(l.onResize(function(){return d._fullRefresh()})),d.register(l.buffers.onBufferActivate(function(){var e;return null===(e=d._renderer)||void 0===e?void 0:e.clear()})),d.register(n.onOptionChange(function(){return d._handleOptionsChanged()})),d.register(d._charSizeService.onCharSizeChange(function(){return d.onCharSizeChanged()})),d.register(s.onDecorationRegistered(function(){return d._fullRefresh()})),d.register(s.onDecorationRemoved(function(){return d._fullRefresh()})),d._renderer.onRequestRedraw(function(e){return d.refreshRows(e.start,e.end,!0)}),d.register((0,h.addDisposableDomListener)(window,"resize",function(){return d.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var f=new IntersectionObserver(function(e){return d._onIntersectionChange(e[e.length-1])},{threshold:0});f.observe(i),d.register({dispose:function(){return f.disconnect()}})}return d}return n(t,e),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(e,t,r){void 0===r&&(r=!1),this._isPaused?this._needsFullRefresh=!0:(r||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))},t.prototype._renderRows=function(e,t){this._renderer.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(e,t){this._rowCount=t,this._fireOnCanvasResize()},t.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.setRenderer=function(e){var t=this;this._renderer.dispose(),this._renderer=e,this._renderer.onRequestRedraw(function(e){return t.refreshRows(e.start,e.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype.addRefreshCallback=function(e){return this._renderDebouncer.addRefreshCallback(e)},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.clearTextureAtlas=function(){var e,t;null===(t=null===(e=this._renderer)||void 0===e?void 0:e.clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh()},t.prototype.setColors=function(e){this._renderer.setColors(e),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(e,t){this._renderer.onResize(e,t),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(e,t,r){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=r,this._renderer.onSelectionChanged(e,t,r)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},o([s(3,d.IOptionsService),s(4,f.ICharSizeService),s(5,d.IDecorationService),s(6,d.IBufferService)],t)}(l.Disposable);t.RenderService=p},9312:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var a=r(6114),c=r(456),l=r(511),u=r(8460),h=r(4725),d=r(2585),f=r(9806),p=r(9504),_=r(844),v=r(4841),g=String.fromCharCode(160),y=new RegExp(g,"g"),m=function(e){function t(t,r,i,n,o,s,a,h){var d=e.call(this)||this;return d._element=t,d._screenElement=r,d._linkifier=i,d._bufferService=n,d._coreService=o,d._mouseService=s,d._optionsService=a,d._renderService=h,d._dragScrollAmount=0,d._enabled=!0,d._workCell=new l.CellData,d._mouseDownTimeStamp=0,d._oldHasSelection=!1,d._oldSelectionStart=void 0,d._oldSelectionEnd=void 0,d._onLinuxMouseSelection=d.register(new u.EventEmitter),d._onRedrawRequest=d.register(new u.EventEmitter),d._onSelectionChange=d.register(new u.EventEmitter),d._onRequestScrollLines=d.register(new u.EventEmitter),d._mouseMoveListener=function(e){return d._onMouseMove(e)},d._mouseUpListener=function(e){return d._onMouseUp(e)},d._coreService.onUserInput(function(){d.hasSelection&&d.clearSelection()}),d._trimListener=d._bufferService.buffer.lines.onTrim(function(e){return d._onTrim(e)}),d.register(d._bufferService.buffers.onBufferActivate(function(e){return d._onBufferActivate(e)})),d.enable(),d._model=new c.SelectionModel(d._bufferService),d._activeSelectionMode=0,d}return n(t,e),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";var r=this._bufferService.buffer,i=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";for(var n=e[0]<t[0]?e[0]:t[0],o=e[0]<t[0]?t[0]:e[0],s=e[1];s<=t[1];s++){var c=r.translateBufferLineToString(s,!0,n,o);i.push(c)}}else{var l=e[1]===t[1]?t[0]:void 0;for(i.push(r.translateBufferLineToString(e[1],!0,e[0],l)),s=e[1]+1;s<=t[1]-1;s++){var u=r.lines.get(s);c=r.translateBufferLineToString(s,!0),(null==u?void 0:u.isWrapped)?i[i.length-1]+=c:i.push(c)}e[1]!==t[1]&&(u=r.lines.get(t[1]),c=r.translateBufferLineToString(t[1],!0,0,t[0]),u&&u.isWrapped?i[i.length-1]+=c:i.push(c))}return i.map(function(e){return e.replace(y," ")}).join(a.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(e){var t=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return t._refresh()})),a.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype._isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!!(r&&i&&t)&&this._areCoordsInSelection(t,r,i)},t.prototype.isCellInSelection=function(e,t){var r=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!(!r||!i)&&this._areCoordsInSelection([e,t],r,i)},t.prototype._areCoordsInSelection=function(e,t,r){return e[1]>t[1]&&e[1]<r[1]||t[1]===r[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<r[0]||t[1]<r[1]&&e[1]===r[1]&&e[0]<r[0]||t[1]<r[1]&&e[1]===t[1]&&e[0]>=t[0]},t.prototype._selectWordAtCursor=function(e,t){var r,i,n=null===(i=null===(r=this._linkifier.currentLink)||void 0===r?void 0:r.link)||void 0===i?void 0:i.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var o=this._getMouseBufferCoords(e);return!!o&&(this._selectWordAt(o,t),this._model.selectionEnd=void 0,!0)},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},t.prototype._getMouseBufferCoords=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},t.prototype._getMouseEventScrollAmount=function(e){var t=(0,f.getCoordsRelativeToElement)(window,e,this._screenElement)[1],r=this._renderService.dimensions.canvasHeight;return t>=0&&t<=r?0:(t>r&&(t-=r),t=Math.min(Math.max(t,-50),50),(t/=50)/Math.abs(t)+Math.round(14*t))},t.prototype.shouldForceSelection=function(e){return a.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey},t.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var e=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return e._dragScroll()},50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},t.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=void 0;var t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)},t.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},t.prototype.shouldColumnSelect=function(e){return e.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(e){if(e.stopImmediatePropagation(),this._model.selectionStart){var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var r=this._bufferService.buffer;if(this._model.selectionEnd[1]<r.lines.length){var i=r.lines.get(this._model.selectionEnd[1]);i&&0===i.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}},t.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var r=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(r&&void 0!==r[0]&&void 0!==r[1]){var i=(0,p.moveToCellSequence)(r[0]-1,r[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(i,!0)}}}else this._fireEventIfSelectionChanged()},t.prototype._fireEventIfSelectionChanged=function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,r=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);r?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,r)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,r)},t.prototype._fireOnSelectionChange=function(e,t,r){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=r,this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(e){var t=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(function(e){return t._onTrim(e)})},t.prototype._convertViewportColToCharacterIndex=function(e,t){for(var r=t[0],i=0;t[0]>=i;i++){var n=e.loadCell(i,this._workCell).getChars().length;0===this._workCell.getWidth()?r--:n>1&&t[0]!==i&&(r+=n-1)}return r},t.prototype.setSelection=function(e,t,r){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=r,this.refresh(),this._fireEventIfSelectionChanged()},t.prototype.rightClickSelect=function(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},t.prototype._getWordAt=function(e,t,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),!(e[0]>=this._bufferService.cols)){var n=this._bufferService.buffer,o=n.lines.get(e[1]);if(o){var s=n.translateBufferLineToString(e[1],!1),a=this._convertViewportColToCharacterIndex(o,e),c=a,l=e[0]-a,u=0,h=0,d=0,f=0;if(" "===s.charAt(a)){for(;a>0&&" "===s.charAt(a-1);)a--;for(;c<s.length&&" "===s.charAt(c+1);)c++}else{var p=e[0],_=e[0];0===o.getWidth(p)&&(u++,p--),2===o.getWidth(_)&&(h++,_++);var v=o.getString(_).length;for(v>1&&(f+=v-1,c+=v-1);p>0&&a>0&&!this._isCharWordSeparator(o.loadCell(p-1,this._workCell));){o.loadCell(p-1,this._workCell);var g=this._workCell.getChars().length;0===this._workCell.getWidth()?(u++,p--):g>1&&(d+=g-1,a-=g-1),a--,p--}for(;_<o.length&&c+1<s.length&&!this._isCharWordSeparator(o.loadCell(_+1,this._workCell));){o.loadCell(_+1,this._workCell);var y=this._workCell.getChars().length;2===this._workCell.getWidth()?(h++,_++):y>1&&(f+=y-1,c+=y-1),c++,_++}}c++;var m=a+l-u+d,b=Math.min(this._bufferService.cols,c-a+u+h-d-f);if(t||""!==s.slice(a,c).trim()){if(r&&0===m&&32!==o.getCodePoint(0)){var S=n.lines.get(e[1]-1);if(S&&o.isWrapped&&32!==S.getCodePoint(this._bufferService.cols-1)){var E=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(E){var C=this._bufferService.cols-E.start;m-=C,b+=C}}}if(i&&m+b===this._bufferService.cols&&32!==o.getCodePoint(this._bufferService.cols-1)){var w=n.lines.get(e[1]+1);if((null==w?void 0:w.isWrapped)&&32!==w.getCodePoint(0)){var A=this._getWordAt([0,e[1]+1],!1,!1,!0);A&&(b+=A.length)}}return{start:m,length:b}}}}},t.prototype._selectWordAt=function(e,t){var r=this._getWordAt(e,t);if(r){for(;r.start<0;)r.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[r.start,e[1]],this._model.selectionStartLength=r.length}},t.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var r=e[1];t.start<0;)t.start+=this._bufferService.cols,r--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,r++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,r]}},t.prototype._isCharWordSeparator=function(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0},t.prototype._selectLineAt=function(e){var t=this._bufferService.buffer.getWrappedRangeForLine(e),r={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(r,this._bufferService.cols)},o([s(3,d.IBufferService),s(4,d.ICoreService),s(5,h.IMouseService),s(6,d.IOptionsService),s(7,h.IRenderService)],t)}(_.Disposable);t.SelectionService=m},4725:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICharacterJoinerService=t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var i=r(8343);t.ICharSizeService=(0,i.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,i.createDecorator)("CoreBrowserService"),t.IMouseService=(0,i.createDecorator)("MouseService"),t.IRenderService=(0,i.createDecorator)("RenderService"),t.ISelectionService=(0,i.createDecorator)("SelectionService"),t.ISoundService=(0,i.createDecorator)("SoundService"),t.ICharacterJoinerService=(0,i.createDecorator)("CharacterJoinerService")},357:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var o=r(2585),s=function(){function e(e){this._optionsService=e}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var t=window.AudioContext||window.webkitAudioContext;if(!t)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new t}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var t=e.audioContext;if(t){var r=t.createBufferSource();t.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(e){r.buffer=e,r.connect(t.destination),r.start(0)})}},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i.buffer},e.prototype._removeMimeType=function(e){return e.split(",")[1]},e=i([n(0,o.IOptionsService)],e)}();t.SoundService=s},6349:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var i=r(8460),n=function(){function e(e){this._maxLength=e,this.onDeleteEmitter=new i.EventEmitter,this.onInsertEmitter=new i.EventEmitter,this.onTrimEmitter=new i.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var t=new Array(e),r=0;r<Math.min(e,this.length);r++)t[r]=this._array[this._getCyclicIndex(r)];this._array=t,this._maxLength=e,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)for(var t=this._length;t<e;t++)this._array[t]=void 0;this._length=e},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]},e.prototype.set=function(e,t){this._array[this._getCyclicIndex(e)]=t},e.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t){for(var n=e;n<this._length-t;n++)this._array[this._getCyclicIndex(n)]=this._array[this._getCyclicIndex(n+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(n=this._length-1;n>=e;n--)this._array[this._getCyclicIndex(n+r.length)]=this._array[this._getCyclicIndex(n)];for(n=0;n<r.length;n++)this._array[this._getCyclicIndex(e+n)]=r[n];if(r.length&&this.onInsertEmitter.fire({index:e,amount:r.length}),this._length+r.length>this._maxLength){var o=this._length+r.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=r.length},e.prototype.trimStart=function(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)},e.prototype.shiftElements=function(e,t,r){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+r<0)throw new Error("Cannot shift elements in list beyond index 0");if(r>0){for(var i=t-1;i>=0;i--)this.set(e+i+r,this.get(e+i));var n=e+t+r-this._length;if(n>0)for(this._length+=n;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(i=0;i<t;i++)this.set(e+i+r,this.get(e+i))}},e.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this._maxLength},e}();t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,r){if(void 0===r&&(r=5),"object"!=typeof t)return t;var i=Array.isArray(t)?[]:{};for(var n in t)i[n]=r<=1?t[n]:t[n]&&e(t[n],r-1);return i}},8055:function(e,t){var r,i,n,o,s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};function a(e){var t=e.toString(16);return t.length<2?"0"+t:t}function c(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(e){e.toCss=function(e,t,r,i){return void 0!==i?"#"+a(e)+a(t)+a(r)+a(i):"#"+a(e)+a(t)+a(r)},e.toRgba=function(e,t,r,i){return void 0===i&&(i=255),(e<<24|t<<16|r<<8|i)>>>0}}(r=t.channels||(t.channels={})),(i=t.color||(t.color={})).blend=function(e,t){var i=(255&t.rgba)/255;if(1===i)return{css:t.css,rgba:t.rgba};var n=t.rgba>>24&255,o=t.rgba>>16&255,s=t.rgba>>8&255,a=e.rgba>>24&255,c=e.rgba>>16&255,l=e.rgba>>8&255,u=a+Math.round((n-a)*i),h=c+Math.round((o-c)*i),d=l+Math.round((s-l)*i);return{css:r.toCss(u,h,d),rgba:r.toRgba(u,h,d)}},i.isOpaque=function(e){return!(255&~e.rgba)},i.ensureContrastRatio=function(e,t,r){var i=o.ensureContrastRatio(e.rgba,t.rgba,r);if(i)return o.toColor(i>>24&255,i>>16&255,i>>8&255)},i.opaque=function(e){var t=(255|e.rgba)>>>0,i=s(o.toChannels(t),3),n=i[0],a=i[1],c=i[2];return{css:r.toCss(n,a,c),rgba:t}},i.opacity=function(e,t){var i=Math.round(255*t),n=s(o.toChannels(e.rgba),3),a=n[0],c=n[1],l=n[2];return{css:r.toCss(a,c,l,i),rgba:r.toRgba(a,c,l,i)}},i.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]},(t.css||(t.css={})).toColor=function(e){if(e.match(/#[0-9a-f]{3,8}/i))switch(e.length){case 4:var t=parseInt(e.slice(1,2).repeat(2),16),r=parseInt(e.slice(2,3).repeat(2),16),i=parseInt(e.slice(3,4).repeat(2),16);return o.toColor(t,r,i);case 5:t=parseInt(e.slice(1,2).repeat(2),16),r=parseInt(e.slice(2,3).repeat(2),16),i=parseInt(e.slice(3,4).repeat(2),16);var n=parseInt(e.slice(4,5).repeat(2),16);return o.toColor(t,r,i,n);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}var s=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return t=parseInt(s[1]),r=parseInt(s[2]),i=parseInt(s[3]),n=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),o.toColor(t,r,i,n);throw new Error("css.toColor: Unsupported css format")},function(e){function t(e,t,r){var i=e/255,n=t/255,o=r/255;return.2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(n=t.rgb||(t.rgb={})),function(e){function t(e,t,r){for(var i=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,l=t>>16&255,u=t>>8&255,h=c(n.relativeLuminance2(a,l,u),n.relativeLuminance2(i,o,s));h<r&&(a>0||l>0||u>0);)a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),u-=Math.max(0,Math.ceil(.1*u)),h=c(n.relativeLuminance2(a,l,u),n.relativeLuminance2(i,o,s));return(a<<24|l<<16|u<<8|255)>>>0}function i(e,t,r){for(var i=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,l=t>>16&255,u=t>>8&255,h=c(n.relativeLuminance2(a,l,u),n.relativeLuminance2(i,o,s));h<r&&(a<255||l<255||u<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),u=Math.min(255,u+Math.ceil(.1*(255-u))),h=c(n.relativeLuminance2(a,l,u),n.relativeLuminance2(i,o,s));return(a<<24|l<<16|u<<8|255)>>>0}e.ensureContrastRatio=function(e,r,o){var s=n.relativeLuminance(e>>8),a=n.relativeLuminance(r>>8);if(c(s,a)<o){if(a<s){var l=t(e,r,o),u=c(s,n.relativeLuminance(l>>8));if(u<o){var h=i(e,e,o);return u>c(s,n.relativeLuminance(h>>8))?l:h}return l}var d=i(e,r,o),f=c(s,n.relativeLuminance(d>>8));return f<o?(h=t(e,e,o),f>c(s,n.relativeLuminance(h>>8))?d:h):d}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,n){return{css:r.toCss(e,t,i,n),rgba:r.toRgba(e,t,i,n)}}}(o=t.rgba||(t.rgba={})),t.toPaddedHex=a,t.contrastRatio=c},8969:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var s=r(844),a=r(2585),c=r(4348),l=r(7866),u=r(744),h=r(7302),d=r(6975),f=r(8460),p=r(1753),_=r(3730),v=r(1480),g=r(7994),y=r(9282),m=r(5435),b=r(5981),S=!1,E=function(e){function t(t){var r=e.call(this)||this;return r._onBinary=new f.EventEmitter,r._onData=new f.EventEmitter,r._onLineFeed=new f.EventEmitter,r._onResize=new f.EventEmitter,r._onScroll=new f.EventEmitter,r._onWriteParsed=new f.EventEmitter,r._instantiationService=new c.InstantiationService,r.optionsService=new h.OptionsService(t),r._instantiationService.setService(a.IOptionsService,r.optionsService),r._bufferService=r.register(r._instantiationService.createInstance(u.BufferService)),r._instantiationService.setService(a.IBufferService,r._bufferService),r._logService=r._instantiationService.createInstance(l.LogService),r._instantiationService.setService(a.ILogService,r._logService),r.coreService=r.register(r._instantiationService.createInstance(d.CoreService,function(){return r.scrollToBottom()})),r._instantiationService.setService(a.ICoreService,r.coreService),r.coreMouseService=r._instantiationService.createInstance(p.CoreMouseService),r._instantiationService.setService(a.ICoreMouseService,r.coreMouseService),r._dirtyRowService=r._instantiationService.createInstance(_.DirtyRowService),r._instantiationService.setService(a.IDirtyRowService,r._dirtyRowService),r.unicodeService=r._instantiationService.createInstance(v.UnicodeService),r._instantiationService.setService(a.IUnicodeService,r.unicodeService),r._charsetService=r._instantiationService.createInstance(g.CharsetService),r._instantiationService.setService(a.ICharsetService,r._charsetService),r._inputHandler=new m.InputHandler(r._bufferService,r._charsetService,r.coreService,r._dirtyRowService,r._logService,r.optionsService,r.coreMouseService,r.unicodeService),r.register((0,f.forwardEvent)(r._inputHandler.onLineFeed,r._onLineFeed)),r.register(r._inputHandler),r.register((0,f.forwardEvent)(r._bufferService.onResize,r._onResize)),r.register((0,f.forwardEvent)(r.coreService.onData,r._onData)),r.register((0,f.forwardEvent)(r.coreService.onBinary,r._onBinary)),r.register(r.optionsService.onOptionChange(function(e){return r._updateOptions(e)})),r.register(r._bufferService.onScroll(function(e){r._onScroll.fire({position:r._bufferService.buffer.ydisp,source:0}),r._dirtyRowService.markRangeDirty(r._bufferService.buffer.scrollTop,r._bufferService.buffer.scrollBottom)})),r.register(r._inputHandler.onScroll(function(e){r._onScroll.fire({position:r._bufferService.buffer.ydisp,source:0}),r._dirtyRowService.markRangeDirty(r._bufferService.buffer.scrollTop,r._bufferService.buffer.scrollBottom)})),r._writeBuffer=new b.WriteBuffer(function(e,t){return r._inputHandler.parse(e,t)}),r.register((0,f.forwardEvent)(r._writeBuffer.onWriteParsed,r._onWriteParsed)),r}return n(t,e),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){var e=this;return this._onScrollApi||(this._onScrollApi=new f.EventEmitter,this.register(this._onScroll.event(function(t){var r;null===(r=e._onScrollApi)||void 0===r||r.fire(t.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},set:function(e){for(var t in e)this.optionsService.options[t]=e[t]},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)},t.prototype.write=function(e,t){this._writeBuffer.write(e,t)},t.prototype.writeSync=function(e,t){this._logService.logLevel<=a.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(e,t)},t.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,u.MINIMUM_COLS),t=Math.max(t,u.MINIMUM_ROWS),this._bufferService.resize(e,t))},t.prototype.scroll=function(e,t){void 0===t&&(t=!1),this._bufferService.scroll(e,t)},t.prototype.scrollLines=function(e,t,r){this._bufferService.scrollLines(e,t,r)},t.prototype.scrollPages=function(e){this._bufferService.scrollPages(e)},t.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},t.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},t.prototype.scrollToLine=function(e){this._bufferService.scrollToLine(e)},t.prototype.registerEscHandler=function(e,t){return this._inputHandler.registerEscHandler(e,t)},t.prototype.registerDcsHandler=function(e,t){return this._inputHandler.registerDcsHandler(e,t)},t.prototype.registerCsiHandler=function(e,t){return this._inputHandler.registerCsiHandler(e,t)},t.prototype.registerOscHandler=function(e,t){return this._inputHandler.registerOscHandler(e,t)},t.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},t.prototype._updateOptions=function(e){var t;switch(e){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():(null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)}},t.prototype._enableWindowsMode=function(){var e=this;if(!this._windowsMode){var t=[];t.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},function(){return(0,y.updateWindowsModeWrappedState)(e._bufferService),!1})),this._windowsMode={dispose:function(){var e,r;try{for(var i=o(t),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}}}},t}(s.Disposable);t.CoreTerminal=E},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var r=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed)for(var r=0;r<e._listeners.length;r++)if(e._listeners[r]===t)return void e._listeners.splice(r,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(e,t){for(var r=[],i=0;i<this._listeners.length;i++)r.push(this._listeners[i]);for(i=0;i<r.length;i++)r[i].call(void 0,e,t)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();t.EventEmitter=r,t.forwardEvent=function(e,t){return e(function(e){return t.fire(e)})}},5435:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;var o,s=r(2584),a=r(7116),c=r(2015),l=r(844),u=r(8273),h=r(482),d=r(8437),f=r(8460),p=r(643),_=r(511),v=r(3734),g=r(2585),y=r(6242),m=r(6351),b=r(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function C(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(o=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));var w=function(){function e(e,t,r,i){this._bufferService=e,this._coreService=t,this._logService=r,this._optionsService=i,this._data=new Uint32Array(0)}return e.prototype.hook=function(e){this._data=new Uint32Array(0)},e.prototype.put=function(e,t,r){this._data=(0,u.concat)(this._data,e.subarray(t,r))},e.prototype.unhook=function(e){if(!e)return this._data=new Uint32Array(0),!0;var t=(0,h.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),t){case'"q':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0"q'+s.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61;1"p'+s.C0.ESC+"\\");break;case"r":var r=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+r+s.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(s.C0.ESC+"P1$r0m"+s.C0.ESC+"\\");break;case" q":var i={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];i-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+i+" q"+s.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",t),this._coreService.triggerDataEvent(s.C0.ESC+"P0$r"+s.C0.ESC+"\\")}return!0},e}(),A=function(e){function t(t,r,i,n,o,l,u,p,v){void 0===v&&(v=new c.EscapeSequenceParser);var g=e.call(this)||this;g._bufferService=t,g._charsetService=r,g._coreService=i,g._dirtyRowService=n,g._logService=o,g._optionsService=l,g._coreMouseService=u,g._unicodeService=p,g._parser=v,g._parseBuffer=new Uint32Array(4096),g._stringDecoder=new h.StringToUtf32,g._utf8Decoder=new h.Utf8ToUtf32,g._workCell=new _.CellData,g._windowTitle="",g._iconName="",g._windowTitleStack=[],g._iconNameStack=[],g._curAttrData=d.DEFAULT_ATTR_DATA.clone(),g._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),g._onRequestBell=new f.EventEmitter,g._onRequestRefreshRows=new f.EventEmitter,g._onRequestReset=new f.EventEmitter,g._onRequestSendFocus=new f.EventEmitter,g._onRequestSyncScrollBar=new f.EventEmitter,g._onRequestWindowsOptionsReport=new f.EventEmitter,g._onA11yChar=new f.EventEmitter,g._onA11yTab=new f.EventEmitter,g._onCursorMove=new f.EventEmitter,g._onLineFeed=new f.EventEmitter,g._onScroll=new f.EventEmitter,g._onTitleChange=new f.EventEmitter,g._onColor=new f.EventEmitter,g._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},g._specialColors=[256,257,258],g.register(g._parser),g._activeBuffer=g._bufferService.buffer,g.register(g._bufferService.buffers.onBufferActivate(function(e){return g._activeBuffer=e.activeBuffer})),g._parser.setCsiHandlerFallback(function(e,t){g._logService.debug("Unknown CSI code: ",{identifier:g._parser.identToString(e),params:t.toArray()})}),g._parser.setEscHandlerFallback(function(e){g._logService.debug("Unknown ESC code: ",{identifier:g._parser.identToString(e)})}),g._parser.setExecuteHandlerFallback(function(e){g._logService.debug("Unknown EXECUTE code: ",{code:e})}),g._parser.setOscHandlerFallback(function(e,t,r){g._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:r})}),g._parser.setDcsHandlerFallback(function(e,t,r){"HOOK"===t&&(r=r.toArray()),g._logService.debug("Unknown DCS code: ",{identifier:g._parser.identToString(e),action:t,payload:r})}),g._parser.setPrintHandler(function(e,t,r){return g.print(e,t,r)}),g._parser.registerCsiHandler({final:"@"},function(e){return g.insertChars(e)}),g._parser.registerCsiHandler({intermediates:" ",final:"@"},function(e){return g.scrollLeft(e)}),g._parser.registerCsiHandler({final:"A"},function(e){return g.cursorUp(e)}),g._parser.registerCsiHandler({intermediates:" ",final:"A"},function(e){return g.scrollRight(e)}),g._parser.registerCsiHandler({final:"B"},function(e){return g.cursorDown(e)}),g._parser.registerCsiHandler({final:"C"},function(e){return g.cursorForward(e)}),g._parser.registerCsiHandler({final:"D"},function(e){return g.cursorBackward(e)}),g._parser.registerCsiHandler({final:"E"},function(e){return g.cursorNextLine(e)}),g._parser.registerCsiHandler({final:"F"},function(e){return g.cursorPrecedingLine(e)}),g._parser.registerCsiHandler({final:"G"},function(e){return g.cursorCharAbsolute(e)}),g._parser.registerCsiHandler({final:"H"},function(e){return g.cursorPosition(e)}),g._parser.registerCsiHandler({final:"I"},function(e){return g.cursorForwardTab(e)}),g._parser.registerCsiHandler({final:"J"},function(e){return g.eraseInDisplay(e)}),g._parser.registerCsiHandler({prefix:"?",final:"J"},function(e){return g.eraseInDisplay(e)}),g._parser.registerCsiHandler({final:"K"},function(e){return g.eraseInLine(e)}),g._parser.registerCsiHandler({prefix:"?",final:"K"},function(e){return g.eraseInLine(e)}),g._parser.registerCsiHandler({final:"L"},function(e){return g.insertLines(e)}),g._parser.registerCsiHandler({final:"M"},function(e){return g.deleteLines(e)}),g._parser.registerCsiHandler({final:"P"},function(e){return g.deleteChars(e)}),g._parser.registerCsiHandler({final:"S"},function(e){return g.scrollUp(e)}),g._parser.registerCsiHandler({final:"T"},function(e){return g.scrollDown(e)}),g._parser.registerCsiHandler({final:"X"},function(e){return g.eraseChars(e)}),g._parser.registerCsiHandler({final:"Z"},function(e){return g.cursorBackwardTab(e)}),g._parser.registerCsiHandler({final:"`"},function(e){return g.charPosAbsolute(e)}),g._parser.registerCsiHandler({final:"a"},function(e){return g.hPositionRelative(e)}),g._parser.registerCsiHandler({final:"b"},function(e){return g.repeatPrecedingCharacter(e)}),g._parser.registerCsiHandler({final:"c"},function(e){return g.sendDeviceAttributesPrimary(e)}),g._parser.registerCsiHandler({prefix:">",final:"c"},function(e){return g.sendDeviceAttributesSecondary(e)}),g._parser.registerCsiHandler({final:"d"},function(e){return g.linePosAbsolute(e)}),g._parser.registerCsiHandler({final:"e"},function(e){return g.vPositionRelative(e)}),g._parser.registerCsiHandler({final:"f"},function(e){return g.hVPosition(e)}),g._parser.registerCsiHandler({final:"g"},function(e){return g.tabClear(e)}),g._parser.registerCsiHandler({final:"h"},function(e){return g.setMode(e)}),g._parser.registerCsiHandler({prefix:"?",final:"h"},function(e){return g.setModePrivate(e)}),g._parser.registerCsiHandler({final:"l"},function(e){return g.resetMode(e)}),g._parser.registerCsiHandler({prefix:"?",final:"l"},function(e){return g.resetModePrivate(e)}),g._parser.registerCsiHandler({final:"m"},function(e){return g.charAttributes(e)}),g._parser.registerCsiHandler({final:"n"},function(e){return g.deviceStatus(e)}),g._parser.registerCsiHandler({prefix:"?",final:"n"},function(e){return g.deviceStatusPrivate(e)}),g._parser.registerCsiHandler({intermediates:"!",final:"p"},function(e){return g.softReset(e)}),g._parser.registerCsiHandler({intermediates:" ",final:"q"},function(e){return g.setCursorStyle(e)}),g._parser.registerCsiHandler({final:"r"},function(e){return g.setScrollRegion(e)}),g._parser.registerCsiHandler({final:"s"},function(e){return g.saveCursor(e)}),g._parser.registerCsiHandler({final:"t"},function(e){return g.windowOptions(e)}),g._parser.registerCsiHandler({final:"u"},function(e){return g.restoreCursor(e)}),g._parser.registerCsiHandler({intermediates:"'",final:"}"},function(e){return g.insertColumns(e)}),g._parser.registerCsiHandler({intermediates:"'",final:"~"},function(e){return g.deleteColumns(e)}),g._parser.setExecuteHandler(s.C0.BEL,function(){return g.bell()}),g._parser.setExecuteHandler(s.C0.LF,function(){return g.lineFeed()}),g._parser.setExecuteHandler(s.C0.VT,function(){return g.lineFeed()}),g._parser.setExecuteHandler(s.C0.FF,function(){return g.lineFeed()}),g._parser.setExecuteHandler(s.C0.CR,function(){return g.carriageReturn()}),g._parser.setExecuteHandler(s.C0.BS,function(){return g.backspace()}),g._parser.setExecuteHandler(s.C0.HT,function(){return g.tab()}),g._parser.setExecuteHandler(s.C0.SO,function(){return g.shiftOut()}),g._parser.setExecuteHandler(s.C0.SI,function(){return g.shiftIn()}),g._parser.setExecuteHandler(s.C1.IND,function(){return g.index()}),g._parser.setExecuteHandler(s.C1.NEL,function(){return g.nextLine()}),g._parser.setExecuteHandler(s.C1.HTS,function(){return g.tabSet()}),g._parser.registerOscHandler(0,new y.OscHandler(function(e){return g.setTitle(e),g.setIconName(e),!0})),g._parser.registerOscHandler(1,new y.OscHandler(function(e){return g.setIconName(e)})),g._parser.registerOscHandler(2,new y.OscHandler(function(e){return g.setTitle(e)})),g._parser.registerOscHandler(4,new y.OscHandler(function(e){return g.setOrReportIndexedColor(e)})),g._parser.registerOscHandler(10,new y.OscHandler(function(e){return g.setOrReportFgColor(e)})),g._parser.registerOscHandler(11,new y.OscHandler(function(e){return g.setOrReportBgColor(e)})),g._parser.registerOscHandler(12,new y.OscHandler(function(e){return g.setOrReportCursorColor(e)})),g._parser.registerOscHandler(104,new y.OscHandler(function(e){return g.restoreIndexedColor(e)})),g._parser.registerOscHandler(110,new y.OscHandler(function(e){return g.restoreFgColor(e)})),g._parser.registerOscHandler(111,new y.OscHandler(function(e){return g.restoreBgColor(e)})),g._parser.registerOscHandler(112,new y.OscHandler(function(e){return g.restoreCursorColor(e)})),g._parser.registerEscHandler({final:"7"},function(){return g.saveCursor()}),g._parser.registerEscHandler({final:"8"},function(){return g.restoreCursor()}),g._parser.registerEscHandler({final:"D"},function(){return g.index()}),g._parser.registerEscHandler({final:"E"},function(){return g.nextLine()}),g._parser.registerEscHandler({final:"H"},function(){return g.tabSet()}),g._parser.registerEscHandler({final:"M"},function(){return g.reverseIndex()}),g._parser.registerEscHandler({final:"="},function(){return g.keypadApplicationMode()}),g._parser.registerEscHandler({final:">"},function(){return g.keypadNumericMode()}),g._parser.registerEscHandler({final:"c"},function(){return g.fullReset()}),g._parser.registerEscHandler({final:"n"},function(){return g.setgLevel(2)}),g._parser.registerEscHandler({final:"o"},function(){return g.setgLevel(3)}),g._parser.registerEscHandler({final:"|"},function(){return g.setgLevel(3)}),g._parser.registerEscHandler({final:"}"},function(){return g.setgLevel(2)}),g._parser.registerEscHandler({final:"~"},function(){return g.setgLevel(1)}),g._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return g.selectDefaultCharset()}),g._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return g.selectDefaultCharset()});var m=function(e){b._parser.registerEscHandler({intermediates:"(",final:e},function(){return g.selectCharset("("+e)}),b._parser.registerEscHandler({intermediates:")",final:e},function(){return g.selectCharset(")"+e)}),b._parser.registerEscHandler({intermediates:"*",final:e},function(){return g.selectCharset("*"+e)}),b._parser.registerEscHandler({intermediates:"+",final:e},function(){return g.selectCharset("+"+e)}),b._parser.registerEscHandler({intermediates:"-",final:e},function(){return g.selectCharset("-"+e)}),b._parser.registerEscHandler({intermediates:".",final:e},function(){return g.selectCharset("."+e)}),b._parser.registerEscHandler({intermediates:"/",final:e},function(){return g.selectCharset("/"+e)})},b=this;for(var S in a.CHARSETS)m(S);return g._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return g.screenAlignmentPattern()}),g._parser.setErrorHandler(function(e){return g._logService.error("Parsing error: ",e),e}),g._parser.registerDcsHandler({intermediates:"$",final:"q"},new w(g._bufferService,g._coreService,g._logService,g._optionsService)),g}return n(t,e),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype._preserveStack=function(e,t,r,i){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=r,this._parseStack.position=i},t.prototype._logSlowResolvingAsync=function(e){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([e,new Promise(function(e,t){return setTimeout(function(){return t("#SLOW_TIMEOUT")},5e3)})]).catch(function(e){if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")})},t.prototype.parse=function(e,t){var r,i=this._activeBuffer.x,n=this._activeBuffer.y,o=0,s=this._parseStack.paused;if(s){if(r=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(r),r;i=this._parseStack.cursorStartX,n=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>E&&(o=this._parseStack.position+E)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?' "'+e+'"':' "'+Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join("")+'"'),"string"==typeof e?e.split("").map(function(e){return e.charCodeAt(0)}):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(e.length,E))),s||this._dirtyRowService.clearRange(),e.length>E)for(var a=o;a<e.length;a+=E){var c=a+E<e.length?a+E:e.length,l="string"==typeof e?this._stringDecoder.decode(e.substring(a,c),this._parseBuffer):this._utf8Decoder.decode(e.subarray(a,c),this._parseBuffer);if(r=this._parser.parse(this._parseBuffer,l))return this._preserveStack(i,n,l,a),this._logSlowResolvingAsync(r),r}else if(!s&&(l="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer),r=this._parser.parse(this._parseBuffer,l)))return this._preserveStack(i,n,l,0),this._logSlowResolvingAsync(r),r;this._activeBuffer.x===i&&this._activeBuffer.y===n||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(e,t,r){var i,n,o=this._charsetService.charset,s=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,c=this._coreService.decPrivateModes.wraparound,l=this._coreService.modes.insertMode,u=this._curAttrData,d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&r-t>0&&2===d.getWidth(this._activeBuffer.x-1)&&d.setCellFromCodePoint(this._activeBuffer.x-1,0,1,u.fg,u.bg,u.extended);for(var f=t;f<r;++f){if(i=e[f],n=this._unicodeService.wcwidth(i),i<127&&o){var _=o[String.fromCharCode(i)];_&&(i=_.charCodeAt(0))}if(s&&this._onA11yChar.fire((0,h.stringFromCodePoint)(i)),n||!this._activeBuffer.x){if(this._activeBuffer.x+n-1>=a)if(c){for(;this._activeBuffer.x<a;)d.setCellFromCodePoint(this._activeBuffer.x++,0,1,u.fg,u.bg,u.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===n)continue;if(l&&(d.insertCells(this._activeBuffer.x,n,this._activeBuffer.getNullCell(u),u),2===d.getWidth(a-1)&&d.setCellFromCodePoint(a-1,p.NULL_CELL_CODE,p.NULL_CELL_WIDTH,u.fg,u.bg,u.extended)),d.setCellFromCodePoint(this._activeBuffer.x++,i,n,u.fg,u.bg,u.extended),n>0)for(;--n;)d.setCellFromCodePoint(this._activeBuffer.x++,0,0,u.fg,u.bg,u.extended)}else d.getWidth(this._activeBuffer.x-1)?d.addCodepointToCell(this._activeBuffer.x-1,i):d.addCodepointToCell(this._activeBuffer.x-2,i)}r-t>0&&(d.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&r-t>0&&0===d.getWidth(this._activeBuffer.x)&&!d.hasContent(this._activeBuffer.x)&&d.setCellFromCodePoint(this._activeBuffer.x,0,1,u.fg,u.bg,u.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype.registerCsiHandler=function(e,t){var r=this;return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,function(e){return!C(e.params[0],r._optionsService.rawOptions.windowOptions)||t(e)})},t.prototype.registerDcsHandler=function(e,t){return this._parser.registerDcsHandler(e,new m.DcsHandler(t))},t.prototype.registerEscHandler=function(e,t){return this._parser.registerEscHandler(e,t)},t.prototype.registerOscHandler=function(e,t){return this._parser.registerOscHandler(e,new y.OscHandler(t))},t.prototype.bell=function(){return this._onRequestBell.fire(),!0},t.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},t.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},t.prototype.backspace=function(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},t.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0},t.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},t.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},t.prototype._restrictCursor=function(e){void 0===e&&(e=this._bufferService.cols-1),this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._setCursor=function(e,t){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._moveCursor=function(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)},t.prototype.cursorUp=function(e){var t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0},t.prototype.cursorDown=function(e){var t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0},t.prototype.cursorForward=function(e){return this._moveCursor(e.params[0]||1,0),!0},t.prototype.cursorBackward=function(e){return this._moveCursor(-(e.params[0]||1),0),!0},t.prototype.cursorNextLine=function(e){return this.cursorDown(e),this._activeBuffer.x=0,!0},t.prototype.cursorPrecedingLine=function(e){return this.cursorUp(e),this._activeBuffer.x=0,!0},t.prototype.cursorCharAbsolute=function(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.cursorPosition=function(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0},t.prototype.charPosAbsolute=function(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.hPositionRelative=function(e){return this._moveCursor(e.params[0]||1,0),!0},t.prototype.linePosAbsolute=function(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0},t.prototype.vPositionRelative=function(e){return this._moveCursor(0,e.params[0]||1),!0},t.prototype.hVPosition=function(e){return this.cursorPosition(e),!0},t.prototype.tabClear=function(e){var t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0},t.prototype.cursorForwardTab=function(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var t=e.params[0]||1;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},t.prototype.cursorBackwardTab=function(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var t=e.params[0]||1;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},t.prototype._eraseInBufferLine=function(e,t,r,i){void 0===i&&(i=!1);var n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,r,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i&&(n.isWrapped=!1)},t.prototype._resetBufferLine=function(e){var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);t.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),t.isWrapped=!1},t.prototype.eraseInDisplay=function(e){var t;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(t=this._activeBuffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._activeBuffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:var r=this._activeBuffer.lines.length-this._bufferService.rows;r>0&&(this._activeBuffer.lines.trimStart(r),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-r,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-r,0),this._onScroll.fire(0))}return!0},t.prototype.eraseInLine=function(e){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},t.prototype.insertLines=function(e){this._restrictCursor();var t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var r=this._activeBuffer.ybase+this._activeBuffer.y,i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,n=this._bufferService.rows-1+this._activeBuffer.ybase-i+1;t--;)this._activeBuffer.lines.splice(n-1,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.deleteLines=function(e){this._restrictCursor();var t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var r,i=this._activeBuffer.ybase+this._activeBuffer.y;for(r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-r;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.insertChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.deleteChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.scrollUp=function(e){for(var t=e.params[0]||1;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollDown=function(e){for(var t=e.params[0]||1;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollLeft=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollRight=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.insertColumns=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.deleteColumns=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,r=this._activeBuffer.scrollTop;r<=this._activeBuffer.scrollBottom;++r){var i=this._activeBuffer.lines.get(this._activeBuffer.ybase+r);i.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.eraseChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.repeatPrecedingCharacter=function(e){if(!this._parser.precedingCodepoint)return!0;for(var t=e.params[0]||1,r=new Uint32Array(t),i=0;i<t;++i)r[i]=this._parser.precedingCodepoint;return this.print(r,0,r.length),!0},t.prototype.sendDeviceAttributesPrimary=function(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c")),!0},t.prototype.sendDeviceAttributesSecondary=function(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c")),!0},t.prototype._is=function(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)},t.prototype.setMode=function(e){for(var t=0;t<e.length;t++)4===e.params[t]&&(this._coreService.modes.insertMode=!0);return!0},t.prototype.setModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),this._charsetService.setgCharset(1,a.DEFAULT_CHARSET),this._charsetService.setgCharset(2,a.DEFAULT_CHARSET),this._charsetService.setgCharset(3,a.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},t.prototype.resetMode=function(e){for(var t=0;t<e.length;t++)4===e.params[t]&&(this._coreService.modes.insertMode=!1);return!0},t.prototype.resetModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},t.prototype._updateAttrColor=function(e,t,r,i,n){return 2===t?(e|=50331648,e&=-16777216,e|=v.AttributeData.fromColorRGB([r,i,n])):5===t&&(e&=-50331904,e|=33554432|255&r),e},t.prototype._extractColor=function(e,t,r){var i=[0,0,-1,0,0,0],n=0,o=0;do{if(i[o+n]=e.params[t+o],e.hasSubParams(t+o)){var s=e.getSubParams(t+o),a=0;do{5===i[1]&&(n=1),i[o+a+1+n]=s[a]}while(++a<s.length&&a+o+1+n<i.length);break}if(5===i[1]&&o+n>=2||2===i[1]&&o+n>=5)break;i[1]&&(n=1)}while(++o+t<e.length&&o+n<i.length);for(a=2;a<i.length;++a)-1===i[a]&&(i[a]=0);switch(i[0]){case 38:r.fg=this._updateAttrColor(r.fg,i[1],i[3],i[4],i[5]);break;case 48:r.bg=this._updateAttrColor(r.bg,i[1],i[3],i[4],i[5]);break;case 58:r.extended=r.extended.clone(),r.extended.underlineColor=this._updateAttrColor(r.extended.underlineColor,i[1],i[3],i[4],i[5])}return o},t.prototype._processUnderline=function(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()},t.prototype.charAttributes=function(e){if(1===e.length&&0===e.params[0])return this._curAttrData.fg=d.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=d.DEFAULT_ATTR_DATA.bg,!0;for(var t,r=e.length,i=this._curAttrData,n=0;n<r;n++)(t=e.params[n])>=30&&t<=37?(i.fg&=-50331904,i.fg|=16777216|t-30):t>=40&&t<=47?(i.bg&=-50331904,i.bg|=16777216|t-40):t>=90&&t<=97?(i.fg&=-50331904,i.fg|=16777224|t-90):t>=100&&t<=107?(i.bg&=-50331904,i.bg|=16777224|t-100):0===t?(i.fg=d.DEFAULT_ATTR_DATA.fg,i.bg=d.DEFAULT_ATTR_DATA.bg):1===t?i.fg|=134217728:3===t?i.bg|=67108864:4===t?(i.fg|=268435456,this._processUnderline(e.hasSubParams(n)?e.getSubParams(n)[0]:1,i)):5===t?i.fg|=536870912:7===t?i.fg|=67108864:8===t?i.fg|=1073741824:9===t?i.fg|=2147483648:2===t?i.bg|=134217728:21===t?this._processUnderline(2,i):22===t?(i.fg&=-134217729,i.bg&=-134217729):23===t?i.bg&=-67108865:24===t?i.fg&=-268435457:25===t?i.fg&=-536870913:27===t?i.fg&=-67108865:28===t?i.fg&=-1073741825:29===t?i.fg&=2147483647:39===t?(i.fg&=-67108864,i.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):49===t?(i.bg&=-67108864,i.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):38===t||48===t||58===t?n+=this._extractColor(e,n,i):59===t?(i.extended=i.extended.clone(),i.extended.underlineColor=-1,i.updateExtended()):100===t?(i.fg&=-67108864,i.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,i.bg&=-67108864,i.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",t);return!0},t.prototype.deviceStatus=function(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+"[0n");break;case 6:var t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"["+t+";"+r+"R")}return!0},t.prototype.deviceStatusPrivate=function(e){if(6===e.params[0]){var t=this._activeBuffer.y+1,r=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"[?"+t+";"+r+"R")}return!0},t.prototype.softReset=function(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},t.prototype.setCursorStyle=function(e){var t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var r=t%2==1;return this._optionsService.options.cursorBlink=r,!0},t.prototype.setScrollRegion=function(e){var t,r=e.params[0]||1;return(e.length<2||(t=e.params[1])>this._bufferService.rows||0===t)&&(t=this._bufferService.rows),t>r&&(this._activeBuffer.scrollTop=r-1,this._activeBuffer.scrollBottom=t-1,this._setCursor(0,0)),!0},t.prototype.windowOptions=function(e){if(!C(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;var t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(o.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(o.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(s.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},t.prototype.saveCursor=function(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},t.prototype.restoreCursor=function(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},t.prototype.setTitle=function(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0},t.prototype.setIconName=function(e){return this._iconName=e,!0},t.prototype.setOrReportIndexedColor=function(e){for(var t=[],r=e.split(";");r.length>1;){var i=r.shift(),n=r.shift();if(/^\d+$/.exec(i)){var o=parseInt(i);if(0<=o&&o<256)if("?"===n)t.push({type:0,index:o});else{var s=(0,b.parseColor)(n);s&&t.push({type:1,index:o,color:s})}}}return t.length&&this._onColor.fire(t),!0},t.prototype._setOrReportSpecialColor=function(e,t){for(var r=e.split(";"),i=0;i<r.length&&!(t>=this._specialColors.length);++i,++t)if("?"===r[i])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{var n=(0,b.parseColor)(r[i]);n&&this._onColor.fire([{type:1,index:this._specialColors[t],color:n}])}return!0},t.prototype.setOrReportFgColor=function(e){return this._setOrReportSpecialColor(e,0)},t.prototype.setOrReportBgColor=function(e){return this._setOrReportSpecialColor(e,1)},t.prototype.setOrReportCursorColor=function(e){return this._setOrReportSpecialColor(e,2)},t.prototype.restoreIndexedColor=function(e){if(!e)return this._onColor.fire([{type:2}]),!0;for(var t=[],r=e.split(";"),i=0;i<r.length;++i)if(/^\d+$/.exec(r[i])){var n=parseInt(r[i]);0<=n&&n<256&&t.push({type:2,index:n})}return t.length&&this._onColor.fire(t),!0},t.prototype.restoreFgColor=function(e){return this._onColor.fire([{type:2,index:256}]),!0},t.prototype.restoreBgColor=function(e){return this._onColor.fire([{type:2,index:257}]),!0},t.prototype.restoreCursorColor=function(e){return this._onColor.fire([{type:2,index:258}]),!0},t.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},t.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},t.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},t.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),!0},t.prototype.selectCharset=function(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(S[e[0]],a.CHARSETS[e[1]]||a.DEFAULT_CHARSET),!0)},t.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},t.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},t.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},t.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},t.prototype.reset=function(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(e){return this._charsetService.setgLevel(e),!0},t.prototype.screenAlignmentPattern=function(){var e=new _.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(var t=0;t<this._bufferService.rows;++t){var r=this._activeBuffer.ybase+this._activeBuffer.y+t,i=this._activeBuffer.lines.get(r);i&&(i.fill(e),i.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},t}(l.Disposable);t.InputHandler=A},844:function(e,t){var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var i=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){var e,t;this._isDisposed=!0;try{for(var i=r(this._disposables),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._disposables.length=0},e.prototype.register=function(e){return this._disposables.push(e),e},e.prototype.unregister=function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)},e}();function n(e){var t,i;try{for(var n=r(e),o=n.next();!o.done;o=n.next())o.value.dispose()}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.length=0}t.Disposable=i,t.disposeArray=n,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return n(e)}}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isLegacyEdge=t.isFirefox=void 0;var r="undefined"==typeof navigator,i=r?"node":navigator.userAgent,n=r?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(n),t.isIpad="iPad"===n,t.isIphone="iPhone"===n,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(n),t.isLinux=n.indexOf("Linux")>=0},6106:function(e,t){var r=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;var i=function(){function e(e){this._getKey=e,this._array=[]}return e.prototype.clear=function(){this._array.length=0},e.prototype.insert=function(e){if(0!==this._array.length){var t=this._search(this._getKey(e),0,this._array.length-1);this._array.splice(t,0,e)}else this._array.push(e)},e.prototype.delete=function(e){if(0===this._array.length)return!1;var t=this._getKey(e),r=this._search(t,0,this._array.length-1);if(this._getKey(this._array[r])!==t)return!1;do{if(this._array[r]===e)return this._array.splice(r,1),!0}while(++r<this._array.length&&this._getKey(this._array[r])===t);return!1},e.prototype.getKeyIterator=function(e){var t;return r(this,function(r){switch(r.label){case 0:if(0===this._array.length)return[2];if((t=this._search(e,0,this._array.length-1))<0||t>=this._array.length)return[2];if(this._getKey(this._array[t])!==e)return[2];r.label=1;case 1:return[4,this._array[t]];case 2:r.sent(),r.label=3;case 3:if(++t<this._array.length&&this._getKey(this._array[t])===e)return[3,1];r.label=4;case 4:return[2]}})},e.prototype.values=function(){return this._array.values()},e.prototype._search=function(e,t,r){if(r<t)return t;var i=Math.floor((t+r)/2);if(this._getKey(this._array[i])>e)return this._search(e,t,i-1);if(this._getKey(this._array[i])<e)return this._search(e,i+1,r);for(;i>0&&this._getKey(this._array[i-1])===e;)i--;return i},e}();t.SortedList=i},8273:(e,t)=>{function r(e,t,r,i){if(void 0===r&&(r=0),void 0===i&&(i=e.length),r>=e.length)return e;r=(e.length+r)%e.length,i=i>=e.length?e.length:(e.length+i)%e.length;for(var n=r;n<i;++n)e[n]=t;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(e,t,i,n){return e.fill?e.fill(t,i,n):r(e,t,i,n)},t.fillFallback=r,t.concat=function(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}},9282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var i=r(643);t.updateWindowsModeWrappedState=function(e){var t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),r=null==t?void 0:t.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&r&&(n.isWrapped=r[i.CHAR_DATA_CODE_INDEX]!==i.NULL_CELL_CODE&&r[i.CHAR_DATA_CODE_INDEX]!==i.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var r=function(){function e(){this.fg=0,this.bg=0,this.extended=new i}return e.toColorRGB=function(e){return[e>>>16&255,e>>>8&255,255&e]},e.fromColorRGB=function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},e.prototype.clone=function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.isStrikethrough=function(){return 2147483648&this.fg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return!(50331648&~this.fg)},e.prototype.isBgRGB=function(){return!(50331648&~this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return!(50331648&this.fg)},e.prototype.isBgDefault=function(){return!(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();t.AttributeData=r;var i=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this.underlineStyle=e,this.underlineColor=t}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();t.ExtendedAttrs=i},9092:function(e,t,r){var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var o=r(6349),s=r(8437),a=r(511),c=r(643),l=r(4634),u=r(4863),h=r(7116),d=r(3734);t.MAX_BUFFER_SIZE=4294967295;var f=function(){function e(e,t,r){this._hasScrollback=e,this._optionsService=t,this._bufferService=r,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=a.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=a.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(e,t){return new s.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.rawOptions.scrollback;return r>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:r},e.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=s.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(e,t){var r=this.getNullCell(s.DEFAULT_ATTR_DATA),i=this._getCorrectBufferLength(t);if(i>this.lines.maxLength&&(this.lines.maxLength=i),this.lines.length>0){if(this._cols<e)for(var n=0;n<this.lines.length;n++)this.lines.get(n).resize(e,r);var o=0;if(this._rows<t)for(var a=this._rows;a<t;a++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new s.BufferLine(e,r)):this.ybase>0&&this.lines.length<=this.ybase+this.y+o+1?(this.ybase--,o++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(e,r)));else for(a=this._rows;a>t;a--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(i<this.lines.maxLength){var c=this.lines.length-i;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=i}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),o&&(this.y+=o),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(n=0;n<this.lines.length;n++)this.lines.get(n).resize(e,r);this._cols=e,this._rows=t},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},e.prototype._reflowLarger=function(e,t){var r=(0,l.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(r.length>0){var i=(0,l.reflowLargerCreateNewLayout)(this.lines,r);(0,l.reflowLargerApplyNewLayout)(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(e,t,r){for(var i=this.getNullCell(s.DEFAULT_ATTR_DATA),n=r;n-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new s.BufferLine(e,i))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-r,0)},e.prototype._reflowSmaller=function(e,t){for(var r=this.getNullCell(s.DEFAULT_ATTR_DATA),o=[],a=0,c=this.lines.length-1;c>=0;c--){var u=this.lines.get(c);if(!(!u||!u.isWrapped&&u.getTrimmedLength()<=e)){for(var h=[u];u.isWrapped&&c>0;)u=this.lines.get(--c),h.unshift(u);var d=this.ybase+this.y;if(!(d>=c&&d<c+h.length)){var f,p=h[h.length-1].getTrimmedLength(),_=(0,l.reflowSmallerGetNewLineLengths)(h,this._cols,e),v=_.length-h.length;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+v):Math.max(0,this.lines.length-this.lines.maxLength+v);for(var g=[],y=0;y<v;y++){var m=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);g.push(m)}g.length>0&&(o.push({start:c+h.length+a,newLines:g}),a+=g.length),h.push.apply(h,n([],i(g),!1));var b=_.length-1,S=_[b];0===S&&(S=_[--b]);for(var E=h.length-v-1,C=p;E>=0;){var w=Math.min(C,S);if(void 0===h[b])break;if(h[b].copyCellsFrom(h[E],C-w,S-w,w,!0),0==(S-=w)&&(S=_[--b]),0==(C-=w)){E--;var A=Math.max(E,0);C=(0,l.getWrappedLineTrimmedLength)(h,A,this._cols)}}for(y=0;y<h.length;y++)_[y]<e&&h[y].setCell(_[y],r);for(var T=v-f;T-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+v,this.ybase+t-1)}}}if(o.length>0){var O=[],L=[];for(y=0;y<this.lines.length;y++)L.push(this.lines.get(y));var R=this.lines.length,D=R-1,M=0,x=o[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);var P=0;for(y=Math.min(this.lines.maxLength-1,R+a-1);y>=0;y--)if(x&&x.start>D+P){for(var I=x.newLines.length-1;I>=0;I--)this.lines.set(y--,x.newLines[I]);y++,O.push({index:D+1,amount:x.newLines.length}),P+=x.newLines.length,x=o[++M]}else this.lines.set(y,L[D--]);var k=0;for(y=O.length-1;y>=0;y--)O[y].index+=k,this.lines.onInsertEmitter.fire(O[y]),k+=O[y].amount;var B=Math.max(0,R+a-this.lines.maxLength);B>0&&this.lines.onTrimEmitter.fire(B)}},e.prototype.stringIndexToBufferIndex=function(e,t,r){for(void 0===r&&(r=!1);t;){var i=this.lines.get(e);if(!i)return[-1,-1];for(var n=r?i.getTrimmedLength():i.length,o=0;o<n;++o)if(i.get(o)[c.CHAR_DATA_WIDTH_INDEX]&&(t-=i.get(o)[c.CHAR_DATA_CHAR_INDEX].length||1),t<0)return[e,o];e++}return[e,0]},e.prototype.translateBufferLineToString=function(e,t,r,i){void 0===r&&(r=0);var n=this.lines.get(e);return n?n.translateToString(t,r,i):""},e.prototype.getWrappedRangeForLine=function(e){for(var t=e,r=e;t>0&&this.lines.get(t).isWrapped;)t--;for(;r+1<this.lines.length&&this.lines.get(r+1).isWrapped;)r++;return{first:t,last:r}},e.prototype.setupTabStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0},e.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.clearMarkers=function(e){this._isClearing=!0;for(var t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1},e.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1},e.prototype.addMarker=function(e){var t=this,r=new u.Marker(e);return this.markers.push(r),r.register(this.lines.onTrim(function(e){r.line-=e,r.line<0&&r.dispose()})),r.register(this.lines.onInsert(function(e){r.line>=e.index&&(r.line+=e.amount)})),r.register(this.lines.onDelete(function(e){r.line>=e.index&&r.line<e.index+e.amount&&r.dispose(),r.line>e.index&&(r.line-=e.amount)})),r.register(r.onDispose(function(){return t._removeMarker(r)})),r},e.prototype._removeMarker=function(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)},e.prototype.iterator=function(e,t,r,i,n){return new p(this,e,t,r,i,n)},e}();t.Buffer=f;var p=function(){function e(e,t,r,i,n,o){void 0===r&&(r=0),void 0===i&&(i=e.lines.length),void 0===n&&(n=0),void 0===o&&(o=0),this._buffer=e,this._trimRight=t,this._startIndex=r,this._endIndex=i,this._startOverscan=n,this._endOverscan=o,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var t="",r=e.first;r<=e.last;++r)t+=this._buffer.translateBufferLineToString(r,this._trimRight);return this._current=e.last+1,{range:e,content:t}},e}();t.BufferStringIterator=p},8437:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var i=r(482),n=r(643),o=r(511),s=r(3734);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var a=function(){function e(e,t,r){void 0===r&&(r=!1),this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);for(var i=t||o.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]),s=0;s<e;++s)this.setCell(s,i);this.length=e}return e.prototype.get=function(e){var t=this._data[3*e+0],r=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:r?(0,i.stringFromCodePoint)(r):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):r]},e.prototype.set=function(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(e){return this._data[3*e+0]>>22},e.prototype.hasWidth=function(e){return 12582912&this._data[3*e+0]},e.prototype.getFg=function(e){return this._data[3*e+1]},e.prototype.getBg=function(e){return this._data[3*e+2]},e.prototype.hasContent=function(e){return 4194303&this._data[3*e+0]},e.prototype.getCodePoint=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t},e.prototype.isCombined=function(e){return 2097152&this._data[3*e+0]},e.prototype.getString=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,i.stringFromCodePoint)(2097151&t):""},e.prototype.loadCell=function(e,t){var r=3*e;return t.content=this._data[r+0],t.fg=this._data[r+1],t.bg=this._data[r+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t},e.prototype.setCell=function(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg},e.prototype.setCellFromCodePoint=function(e,t,r,i,n,o){268435456&n&&(this._extendedAttrs[e]=o),this._data[3*e+0]=t|r<<22,this._data[3*e+1]=i,this._data[3*e+2]=n},e.prototype.addCodepointToCell=function(e,t){var r=this._data[3*e+0];2097152&r?this._combined[e]+=(0,i.stringFromCodePoint)(t):(2097151&r?(this._combined[e]=(0,i.stringFromCodePoint)(2097151&r)+(0,i.stringFromCodePoint)(t),r&=-2097152,r|=2097152):r=t|1<<22,this._data[3*e+0]=r)},e.prototype.insertCells=function(e,t,r,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length-e){for(var n=new o.CellData,a=this.length-e-t-1;a>=0;--a)this.setCell(e+t+a,this.loadCell(e+a,n));for(a=0;a<t;++a)this.setCell(e+a,r)}else for(a=e;a<this.length;++a)this.setCell(a,r);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.deleteCells=function(e,t,r,i){if(e%=this.length,t<this.length-e){for(var n=new o.CellData,a=0;a<this.length-e-t;++a)this.setCell(e+a,this.loadCell(e+t+a,n));for(a=this.length-t;a<this.length;++a)this.setCell(a,r)}else for(a=e;a<this.length;++a)this.setCell(a,r);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs)},e.prototype.replaceCells=function(e,t,r,i){for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==i?void 0:i.fg)||0,(null==i?void 0:i.bg)||0,(null==i?void 0:i.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,r)},e.prototype.resize=function(e,t){if(e!==this.length){if(e>this.length){var r=new Uint32Array(3*e);this.length&&(3*e<this._data.length?r.set(this._data.subarray(0,3*e)):r.set(this._data)),this._data=r;for(var i=this.length;i<e;++i)this.setCell(i,t)}else if(e){(r=new Uint32Array(3*e)).set(this._data.subarray(0,3*e)),this._data=r;var n=Object.keys(this._combined);for(i=0;i<n.length;i++){var o=parseInt(n[i],10);o>=e&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=e}},e.prototype.fill=function(e){this._combined={},this._extendedAttrs={};for(var t=0;t<this.length;++t)this.setCell(t,e)},e.prototype.copyFrom=function(e){for(var t in this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={},e._combined)this._combined[t]=e._combined[t];for(var t in this._extendedAttrs={},e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped},e.prototype.clone=function(){var t=new e(0);for(var r in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[r]=this._combined[r];for(var r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t},e.prototype.getTrimmedLength=function(){for(var e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0},e.prototype.copyCellsFrom=function(e,t,r,i,n){var o=e._data;if(n)for(var s=i-1;s>=0;s--)for(var a=0;a<3;a++)this._data[3*(r+s)+a]=o[3*(t+s)+a];else for(s=0;s<i;s++)for(a=0;a<3;a++)this._data[3*(r+s)+a]=o[3*(t+s)+a];var c=Object.keys(e._combined);for(a=0;a<c.length;a++){var l=parseInt(c[a],10);l>=t&&(this._combined[l-t+r]=e._combined[l])}},e.prototype.translateToString=function(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=0),void 0===r&&(r=this.length),e&&(r=Math.min(r,this.getTrimmedLength()));for(var o="";t<r;){var s=this._data[3*t+0],a=2097151&s;o+=2097152&s?this._combined[t]:a?(0,i.stringFromCodePoint)(a):n.WHITESPACE_CELL_CHAR,t+=s>>22||1}return o},e}();t.BufferLine=a},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error("Buffer range end ("+e.end.x+", "+e.end.y+") cannot be before start ("+e.start.x+", "+e.start.y+")");return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function r(e,t,r){if(t===e.length-1)return e[t].getTrimmedLength();var i=!e[t].hasContent(r-1)&&1===e[t].getWidth(r-1),n=2===e[t+1].getWidth(0);return i&&n?r-1:r}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,i,n,o){for(var s=[],a=0;a<e.length-1;a++){var c=a,l=e.get(++c);if(l.isWrapped){for(var u=[e.get(a)];c<e.length&&l.isWrapped;)u.push(l),l=e.get(++c);if(n>=a&&n<c)a+=u.length-1;else{for(var h=0,d=r(u,h,t),f=1,p=0;f<u.length;){var _=r(u,f,t),v=_-p,g=i-d,y=Math.min(v,g);u[h].copyCellsFrom(u[f],p,d,y,!1),(d+=y)===i&&(h++,d=0),(p+=y)===_&&(f++,p=0),0===d&&0!==h&&2===u[h-1].getWidth(i-1)&&(u[h].copyCellsFrom(u[h-1],i-1,d++,1,!1),u[h-1].setCell(i-1,o))}u[h].replaceCells(d,i,o);for(var m=0,b=u.length-1;b>0&&(b>h||0===u[b].getTrimmedLength());b--)m++;m>0&&(s.push(a+u.length-m),s.push(m)),a+=u.length-1}}}return s},t.reflowLargerCreateNewLayout=function(e,t){for(var r=[],i=0,n=t[i],o=0,s=0;s<e.length;s++)if(n===s){var a=t[++i];e.onDeleteEmitter.fire({index:s-o,amount:a}),s+=a-1,o+=a,n=t[++i]}else r.push(s);return{layout:r,countRemoved:o}},t.reflowLargerApplyNewLayout=function(e,t){for(var r=[],i=0;i<t.length;i++)r.push(e.get(t[i]));for(i=0;i<r.length;i++)e.set(i,r[i]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,i){for(var n=[],o=e.map(function(i,n){return r(e,n,t)}).reduce(function(e,t){return e+t}),s=0,a=0,c=0;c<o;){if(o-c<i){n.push(o-c);break}s+=i;var l=r(e,a,t);s>l&&(s-=l,a++);var u=2===e[a].getWidth(s-1);u&&s--;var h=u?i-1:i;n.push(h),c+=h}return n},t.getWrappedLineTrimmedLength=r},5295:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var o=r(9092),s=r(8460),a=function(e){function t(t,r){var i=e.call(this)||this;return i._optionsService=t,i._bufferService=r,i._onBufferActivate=i.register(new s.EventEmitter),i.reset(),i}return n(t,e),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(e,t){this._normal.resize(e,t),this._alt.resize(e,t)},t.prototype.setupTabStops=function(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)},t}(r(844).Disposable);t.BufferSet=a},511:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var o=r(482),s=r(643),a=r(3734),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.extended=new a.ExtendedAttrs,t.combinedData="",t}return n(t,e),t.fromCharData=function(e){var r=new t;return r.setFromCharData(e),r},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,o.stringFromCodePoint)(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){var r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(r-55296)+i-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.CellData=c},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var o=r(8460),s=function(e){function t(r){var i=e.call(this)||this;return i.line=r,i._id=t._nextId++,i.isDisposed=!1,i._onDispose=new o.EventEmitter,i}return n(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),e.prototype.dispose.call(this))},t._nextId=1,t}(r(844).Disposable);t.Marker=s},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},t.CHARSETS.A={"#":"£"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},t.CHARSETS.C=t.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},t.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},t.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},t.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},t.CHARSETS.E=t.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},t.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},t.CHARSETS.H=t.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(e,t)=>{var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(r=t.C0||(t.C0={})),(i=t.C1||(t.C1={})).PAD="",i.HOP="",i.BPH="",i.NBH="",i.IND="",i.NEL="",i.SSA="",i.ESA="",i.HTS="",i.HTJ="",i.VTS="",i.PLD="",i.PLU="",i.RI="",i.SS2="",i.SS3="",i.DCS="",i.PU1="",i.PU2="",i.STS="",i.CCH="",i.MW="",i.SPA="",i.EPA="",i.SOS="",i.SGCI="",i.SCI="",i.CSI="",i.ST="",i.OSC="",i.PM="",i.APC="",(t.C1_ESCAPED||(t.C1_ESCAPED={})).ST=r.ESC+"\\"},7399:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;var i=r(2584),n={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,r,o){var s={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?s.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?s.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?s.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(s.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B");break;case 8:if(e.shiftKey){s.key=i.C0.BS;break}if(e.altKey){s.key=i.C0.ESC+i.C0.DEL;break}s.key=i.C0.DEL;break;case 9:if(e.shiftKey){s.key=i.C0.ESC+"[Z";break}s.key=i.C0.HT,s.cancel=!0;break;case 13:s.key=e.altKey?i.C0.ESC+i.C0.CR:i.C0.CR,s.cancel=!0;break;case 27:s.key=i.C0.ESC,e.altKey&&(s.key=i.C0.ESC+i.C0.ESC),s.cancel=!0;break;case 37:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"D",s.key===i.C0.ESC+"[1;3D"&&(s.key=i.C0.ESC+(r?"b":"[1;5D"))):s.key=t?i.C0.ESC+"OD":i.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"C",s.key===i.C0.ESC+"[1;3C"&&(s.key=i.C0.ESC+(r?"f":"[1;5C"))):s.key=t?i.C0.ESC+"OC":i.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"A",r||s.key!==i.C0.ESC+"[1;3A"||(s.key=i.C0.ESC+"[1;5A")):s.key=t?i.C0.ESC+"OA":i.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(s.key=i.C0.ESC+"[1;"+(a+1)+"B",r||s.key!==i.C0.ESC+"[1;3B"||(s.key=i.C0.ESC+"[1;5B")):s.key=t?i.C0.ESC+"OB":i.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(s.key=i.C0.ESC+"[2~");break;case 46:s.key=a?i.C0.ESC+"[3;"+(a+1)+"~":i.C0.ESC+"[3~";break;case 36:s.key=a?i.C0.ESC+"[1;"+(a+1)+"H":t?i.C0.ESC+"OH":i.C0.ESC+"[H";break;case 35:s.key=a?i.C0.ESC+"[1;"+(a+1)+"F":t?i.C0.ESC+"OF":i.C0.ESC+"[F";break;case 33:e.shiftKey?s.type=2:e.ctrlKey?s.key=i.C0.ESC+"[5;"+(a+1)+"~":s.key=i.C0.ESC+"[5~";break;case 34:e.shiftKey?s.type=3:e.ctrlKey?s.key=i.C0.ESC+"[6;"+(a+1)+"~":s.key=i.C0.ESC+"[6~";break;case 112:s.key=a?i.C0.ESC+"[1;"+(a+1)+"P":i.C0.ESC+"OP";break;case 113:s.key=a?i.C0.ESC+"[1;"+(a+1)+"Q":i.C0.ESC+"OQ";break;case 114:s.key=a?i.C0.ESC+"[1;"+(a+1)+"R":i.C0.ESC+"OR";break;case 115:s.key=a?i.C0.ESC+"[1;"+(a+1)+"S":i.C0.ESC+"OS";break;case 116:s.key=a?i.C0.ESC+"[15;"+(a+1)+"~":i.C0.ESC+"[15~";break;case 117:s.key=a?i.C0.ESC+"[17;"+(a+1)+"~":i.C0.ESC+"[17~";break;case 118:s.key=a?i.C0.ESC+"[18;"+(a+1)+"~":i.C0.ESC+"[18~";break;case 119:s.key=a?i.C0.ESC+"[19;"+(a+1)+"~":i.C0.ESC+"[19~";break;case 120:s.key=a?i.C0.ESC+"[20;"+(a+1)+"~":i.C0.ESC+"[20~";break;case 121:s.key=a?i.C0.ESC+"[21;"+(a+1)+"~":i.C0.ESC+"[21~";break;case 122:s.key=a?i.C0.ESC+"[23;"+(a+1)+"~":i.C0.ESC+"[23~";break;case 123:s.key=a?i.C0.ESC+"[24;"+(a+1)+"~":i.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(r&&!o||!e.altKey||e.metaKey)!r||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?s.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(s.key=i.C0.US),"@"===e.key&&(s.key=i.C0.NUL)):65===e.keyCode&&(s.type=1);else{var c=n[e.keyCode],l=null==c?void 0:c[e.shiftKey?1:0];if(l)s.key=i.C0.ESC+l;else if(e.keyCode>=65&&e.keyCode<=90){var u=e.ctrlKey?e.keyCode-64:e.keyCode+32,h=String.fromCharCode(u);e.shiftKey&&(h=h.toUpperCase()),s.key=i.C0.ESC+h}else"Dead"===e.key&&e.code.startsWith("Key")&&(h=e.code.slice(3,4),e.shiftKey||(h=h.toLowerCase()),s.key=i.C0.ESC+h,s.cancel=!0)}else e.keyCode>=65&&e.keyCode<=90?s.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?s.key=i.C0.NUL:e.keyCode>=51&&e.keyCode<=55?s.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?s.key=i.C0.DEL:219===e.keyCode?s.key=i.C0.ESC:220===e.keyCode?s.key=i.C0.FS:221===e.keyCode&&(s.key=i.C0.GS)}return s}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length);for(var i="",n=t;n<r;++n){var o=e[n];o>65535?(o-=65536,i+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):i+=String.fromCharCode(o)}return i};var r=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i=0,n=0;this._interim&&(56320<=(a=e.charCodeAt(n++))&&a<=57343?t[i++]=1024*(this._interim-55296)+a-56320+65536:(t[i++]=this._interim,t[i++]=a),this._interim=0);for(var o=n;o<r;++o){var s=e.charCodeAt(o);if(55296<=s&&s<=56319){if(++o>=r)return this._interim=s,i;var a;56320<=(a=e.charCodeAt(o))&&a<=57343?t[i++]=1024*(s-55296)+a-56320+65536:(t[i++]=s,t[i++]=a)}else 65279!==s&&(t[i++]=s)}return i},e}();t.StringToUtf32=r;var i=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(e,t){var r=e.length;if(!r)return 0;var i,n,o,s,a=0,c=0,l=0;if(this.interim[0]){var u=!1,h=this.interim[0];h&=192==(224&h)?31:224==(240&h)?15:7;for(var d=0,f=void 0;(f=63&this.interim[++d])&&d<4;)h<<=6,h|=f;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,_=p-d;l<_;){if(l>=r)return 0;if(128!=(192&(f=e[l++]))){l--,u=!0;break}this.interim[d++]=f,h<<=6,h|=63&f}u||(2===p?h<128?l--:t[a++]=h:3===p?h<2048||h>=55296&&h<=57343||65279===h||(t[a++]=h):h<65536||h>1114111||(t[a++]=h)),this.interim.fill(0)}for(var v=r-4,g=l;g<r;){for(;!(!(g<v)||128&(i=e[g])||128&(n=e[g+1])||128&(o=e[g+2])||128&(s=e[g+3]));)t[a++]=i,t[a++]=n,t[a++]=o,t[a++]=s,g+=4;if((i=e[g++])<128)t[a++]=i;else if(192==(224&i)){if(g>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[g++]))){g--;continue}if((c=(31&i)<<6|63&n)<128){g--;continue}t[a++]=c}else if(224==(240&i)){if(g>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[g++]))){g--;continue}if(g>=r)return this.interim[0]=i,this.interim[1]=n,a;if(128!=(192&(o=e[g++]))){g--;continue}if((c=(15&i)<<12|(63&n)<<6|63&o)<2048||c>=55296&&c<=57343||65279===c)continue;t[a++]=c}else if(240==(248&i)){if(g>=r)return this.interim[0]=i,a;if(128!=(192&(n=e[g++]))){g--;continue}if(g>=r)return this.interim[0]=i,this.interim[1]=n,a;if(128!=(192&(o=e[g++]))){g--;continue}if(g>=r)return this.interim[0]=i,this.interim[1]=n,this.interim[2]=o,a;if(128!=(192&(s=e[g++]))){g--;continue}if((c=(7&i)<<18|(63&n)<<12|(63&o)<<6|63&s)<65536||c>1114111)continue;t[a++]=c}}return a},e}();t.Utf8ToUtf32=i},225:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var i,n=r(8273),o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],a=function(){function e(){if(this.version="6",!i){i=new Uint8Array(65536),(0,n.fill)(i,1),i[0]=0,(0,n.fill)(i,0,1,32),(0,n.fill)(i,0,127,160),(0,n.fill)(i,2,4352,4448),i[9001]=2,i[9002]=2,(0,n.fill)(i,2,11904,42192),i[12351]=1,(0,n.fill)(i,2,44032,55204),(0,n.fill)(i,2,63744,64256),(0,n.fill)(i,2,65040,65050),(0,n.fill)(i,2,65072,65136),(0,n.fill)(i,2,65280,65377),(0,n.fill)(i,2,65504,65511);for(var e=0;e<o.length;++e)(0,n.fill)(i,0,o[e][0],o[e][1]+1)}}return e.prototype.wcwidth=function(e){return e<32?0:e<127?1:e<65536?i[e]:function(e,t){var r,i=0,n=t.length-1;if(e<t[0][0]||e>t[n][1])return!1;for(;n>=i;)if(e>t[r=i+n>>1][1])i=r+1;else{if(!(e<t[r][0]))return!0;n=r-1}return!1}(e,s)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1},e}();t.UnicodeV6=a},5981:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var i=r(8460),n="undefined"==typeof queueMicrotask?function(e){Promise.resolve().then(e)}:queueMicrotask,o=function(){function e(e){this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new i.EventEmitter}return Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),e.prototype.writeSync=function(e,t){if(void 0!==t&&this._syncCalls>t)this._syncCalls=0;else if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var r;for(this._isSyncWriting=!0;r=this._writeBuffer.shift();){this._action(r);var i=this._callbacks.shift();i&&i()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},e.prototype.write=function(e,t){var r=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return r._innerWrite()})),this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)},e.prototype._innerWrite=function(e,t){var r=this;void 0===e&&(e=0),void 0===t&&(t=!0);for(var i=e||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],s=this._action(o,t);if(s)return void s.catch(function(e){return n(function(){throw e}),Promise.resolve(!1)}).then(function(e){return Date.now()-i>=12?setTimeout(function(){return r._innerWrite(0,e)}):r._innerWrite(i,e)});var a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return r._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},e}();t.WriteBuffer=o},5941:function(e,t){var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;var i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,n=/^[\da-f]+$/;function o(e,t){var r=e.toString(16),i=r.length<2?"0"+r:r;switch(t){case 4:return r[0];case 8:return i;case 12:return(i+i).slice(0,3);default:return i+i}}t.parseColor=function(e){if(e){var t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);var r=i.exec(t);if(r){var o=r[1]?15:r[4]?255:r[7]?4095:65535;return[Math.round(parseInt(r[1]||r[4]||r[7]||r[10],16)/o*255),Math.round(parseInt(r[2]||r[5]||r[8]||r[11],16)/o*255),Math.round(parseInt(r[3]||r[6]||r[9]||r[12],16)/o*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),n.exec(t)&&[3,6,9,12].includes(t.length))){for(var s=t.length/3,a=[0,0,0],c=0;c<3;++c){var l=parseInt(t.slice(s*c,s*c+s),16);a[c]=1===s?l<<4:2===s?l:3===s?l>>4:l>>8}return a}}},t.toRgbString=function(e,t){void 0===t&&(t=16);var i=r(e,3),n=i[0],s=i[1],a=i[2];return"rgb:"+o(n,t)+"/"+o(s,t)+"/"+o(a,t)}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var i=r(482),n=r(8742),o=r(5770),s=[],a=function(){function e(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=s},e.prototype.registerHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.reset=function(){if(this._active.length)for(var e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0},e.prototype.hook=function(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||s,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(t);else this._handlerFb(this._ident,"HOOK",t)},e.prototype.put=function(e,t,r){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,r);else this._handlerFb(this._ident,"PUT",(0,i.utf32ToString)(e,t,r))},e.prototype.unhook=function(e,t){if(void 0===t&&(t=!0),this._active.length){var r=!1,i=this._active.length-1,n=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,n=this._stack.fallThrough,this._stack.paused=!1),!n&&!1===r){for(;i>=0&&!0!==(r=this._active[i].unhook(e));i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if((r=this._active[i].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",e);this._active=s,this._ident=0},e}();t.DcsParser=a;var c=new n.Params;c.addParam(0);var l=function(){function e(e){this._handler=e,this._data="",this._params=c,this._hitLimit=!1}return e.prototype.hook=function(e){this._params=e.length>1||e.params[0]?e.clone():c,this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=(0,i.utf32ToString)(e,t,r),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(e){var t=this,r=!1;if(this._hitLimit)r=!1;else if(e&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(e){return t._params=c,t._data="",t._hitLimit=!1,e});return this._params=c,this._data="",this._hitLimit=!1,r},e}();t.DcsHandler=l},2015:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;var o=r(844),s=r(8273),a=r(8742),c=r(6242),l=r(6351),u=function(){function e(e){this.table=new Uint8Array(e)}return e.prototype.setDefault=function(e,t){(0,s.fill)(this.table,e<<4|t)},e.prototype.add=function(e,t,r,i){this.table[t<<8|e]=r<<4|i},e.prototype.addMany=function(e,t,r,i){for(var n=0;n<e.length;n++)this.table[t<<8|e[n]]=r<<4|i},e}();t.TransitionTable=u;var h=160;t.VT500_TRANSITION_TABLE=function(){var e=new u(4095),t=Array.apply(null,Array(256)).map(function(e,t){return t}),r=function(e,r){return t.slice(e,r)},i=r(32,127),n=r(0,24);n.push(25),n.push.apply(n,r(28,32));var o,s=r(0,14);for(o in e.setDefault(1,0),e.addMany(i,0,2,0),s)e.addMany([24,26,153,154],o,3,0),e.addMany(r(128,144),o,3,0),e.addMany(r(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(n,0,3,0),e.addMany(n,1,3,1),e.add(127,1,0,1),e.addMany(n,8,0,8),e.addMany(n,3,3,3),e.add(127,3,0,3),e.addMany(n,4,3,4),e.add(127,4,0,4),e.addMany(n,6,3,6),e.addMany(n,5,3,5),e.add(127,5,0,5),e.addMany(n,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(i,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(r(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(i,7,0,7),e.addMany(n,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(r(64,127),3,7,0),e.addMany(r(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(r(48,60),4,8,4),e.addMany(r(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(r(32,64),6,0,6),e.add(127,6,0,6),e.addMany(r(64,127),6,0,0),e.addMany(r(32,48),3,9,5),e.addMany(r(32,48),5,9,5),e.addMany(r(48,64),5,0,6),e.addMany(r(64,127),5,7,0),e.addMany(r(32,48),4,9,5),e.addMany(r(32,48),1,9,2),e.addMany(r(32,48),2,9,2),e.addMany(r(48,127),2,10,0),e.addMany(r(48,80),1,10,0),e.addMany(r(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(r(96,127),1,10,0),e.add(80,1,11,9),e.addMany(n,9,0,9),e.add(127,9,0,9),e.addMany(r(28,32),9,0,9),e.addMany(r(32,48),9,9,12),e.addMany(r(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(n,11,0,11),e.addMany(r(32,128),11,0,11),e.addMany(r(28,32),11,0,11),e.addMany(n,10,0,10),e.add(127,10,0,10),e.addMany(r(28,32),10,0,10),e.addMany(r(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(r(32,48),10,9,12),e.addMany(n,12,0,12),e.add(127,12,0,12),e.addMany(r(28,32),12,0,12),e.addMany(r(32,48),12,9,12),e.addMany(r(48,64),12,0,11),e.addMany(r(64,127),12,12,13),e.addMany(r(64,127),10,12,13),e.addMany(r(64,127),9,12,13),e.addMany(n,13,13,13),e.addMany(i,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(h,0,2,0),e.add(h,8,5,8),e.add(h,6,0,6),e.add(h,11,0,11),e.add(h,13,13,13),e}();var d=function(e){function r(r){void 0===r&&(r=t.VT500_TRANSITION_TABLE);var i=e.call(this)||this;return i._transitions=r,i._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},i.initialState=0,i.currentState=i.initialState,i._params=new a.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(e,t,r){},i._executeHandlerFb=function(e){},i._csiHandlerFb=function(e,t){},i._escHandlerFb=function(e){},i._errorHandlerFb=function(e){return e},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new c.OscParser,i._dcsParser=new l.DcsParser,i._errorHandler=i._errorHandlerFb,i.registerEscHandler({final:"\\"},function(){return!0}),i}return n(r,e),r.prototype._identifier=function(e,t){void 0===t&&(t=[64,126]);var r=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if((r=e.prefix.charCodeAt(0))&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var i=0;i<e.intermediates.length;++i){var n=e.intermediates.charCodeAt(i);if(32>n||n>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=n}}if(1!==e.final.length)throw new Error("final must be a single byte");var o=e.final.charCodeAt(0);if(t[0]>o||o>t[1])throw new Error("final must be in range "+t[0]+" .. "+t[1]);return(r<<=8)|o},r.prototype.identToString=function(e){for(var t=[];e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")},r.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},r.prototype.setPrintHandler=function(e){this._printHandler=e},r.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},r.prototype.registerEscHandler=function(e,t){var r=this._identifier(e,[48,126]);void 0===this._escHandlers[r]&&(this._escHandlers[r]=[]);var i=this._escHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},r.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},r.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},r.prototype.setExecuteHandler=function(e,t){this._executeHandlers[e.charCodeAt(0)]=t},r.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},r.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},r.prototype.registerCsiHandler=function(e,t){var r=this._identifier(e);void 0===this._csiHandlers[r]&&(this._csiHandlers[r]=[]);var i=this._csiHandlers[r];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},r.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},r.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},r.prototype.registerDcsHandler=function(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)},r.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},r.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},r.prototype.registerOscHandler=function(e,t){return this._oscParser.registerHandler(e,t)},r.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},r.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},r.prototype.setErrorHandler=function(e){this._errorHandler=e},r.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},r.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},r.prototype._preserveStack=function(e,t,r,i,n){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=r,this._parseStack.transition=i,this._parseStack.chunkPos=n},r.prototype.parse=function(e,t,r){var i,n=0,o=0,s=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,s=this._parseStack.chunkPos+1;else{if(void 0===r||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var a=this._parseStack.handlers,c=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===r&&c>-1)for(;c>=0&&!0!==(i=a[c](this._params));c--)if(i instanceof Promise)return this._parseStack.handlerPos=c,i;this._parseStack.handlers=[];break;case 4:if(!1===r&&c>-1)for(;c>=0&&!0!==(i=a[c]());c--)if(i instanceof Promise)return this._parseStack.handlerPos=c,i;this._parseStack.handlers=[];break;case 6:if(n=e[this._parseStack.chunkPos],i=this._dcsParser.unhook(24!==n&&26!==n,r))return i;27===n&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(n=e[this._parseStack.chunkPos],i=this._oscParser.end(24!==n&&26!==n,r))return i;27===n&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,s=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var l=s;l<t;++l){switch(n=e[l],(o=this._transitions.table[this.currentState<<8|(n<160?n:h)])>>4){case 2:for(var u=l+1;;++u){if(u>=t||(n=e[u])<32||n>126&&n<h){this._printHandler(e,l,u),l=u-1;break}if(++u>=t||(n=e[u])<32||n>126&&n<h){this._printHandler(e,l,u),l=u-1;break}if(++u>=t||(n=e[u])<32||n>126&&n<h){this._printHandler(e,l,u),l=u-1;break}if(++u>=t||(n=e[u])<32||n>126&&n<h){this._printHandler(e,l,u),l=u-1;break}}break;case 3:this._executeHandlers[n]?this._executeHandlers[n]():this._executeHandlerFb(n),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:l,code:n,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var d=(a=this._csiHandlers[this._collect<<8|n])?a.length-1:-1;d>=0&&!0!==(i=a[d](this._params));d--)if(i instanceof Promise)return this._preserveStack(3,a,d,o,l),i;d<0&&this._csiHandlerFb(this._collect<<8|n,this._params),this.precedingCodepoint=0;break;case 8:do{switch(n){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(n-48)}}while(++l<t&&(n=e[l])>47&&n<60);l--;break;case 9:this._collect<<=8,this._collect|=n;break;case 10:for(var f=this._escHandlers[this._collect<<8|n],p=f?f.length-1:-1;p>=0&&!0!==(i=f[p]());p--)if(i instanceof Promise)return this._preserveStack(4,f,p,o,l),i;p<0&&this._escHandlerFb(this._collect<<8|n),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|n,this._params);break;case 13:for(var _=l+1;;++_)if(_>=t||24===(n=e[_])||26===n||27===n||n>127&&n<h){this._dcsParser.put(e,l,_),l=_-1;break}break;case 14:if(i=this._dcsParser.unhook(24!==n&&26!==n))return this._preserveStack(6,[],0,o,l),i;27===n&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var v=l+1;;v++)if(v>=t||(n=e[v])<32||n>127&&n<h){this._oscParser.put(e,l,v),l=v-1;break}break;case 6:if(i=this._oscParser.end(24!==n&&26!==n))return this._preserveStack(5,[],0,o,l),i;27===n&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&o}},r}(o.Disposable);t.EscapeSequenceParser=d},6242:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var i=r(5770),n=r(482),o=[],s=function(){function e(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.registerHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var r=this._handlers[e];return r.push(t),{dispose:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=o},e.prototype.reset=function(){if(2===this._state)for(var e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0},e.prototype._start=function(){if(this._active=this._handlers[this._id]||o,this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(e,t,r){if(this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].put(e,t,r);else this._handlerFb(this._id,"PUT",(0,n.utf32ToString)(e,t,r))},e.prototype.start=function(){this.reset(),this._state=1},e.prototype.put=function(e,t,r){if(3!==this._state){if(1===this._state)for(;t<r;){var i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&r-t>0&&this._put(e,t,r)}},e.prototype.end=function(e,t){if(void 0===t&&(t=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var r=!1,i=this._active.length-1,n=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,r=t,n=this._stack.fallThrough,this._stack.paused=!1),!n&&!1===r){for(;i>=0&&!0!==(r=this._active[i].end(e));i--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,r;i--}for(;i>=0;i--)if((r=this._active[i].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,r}else this._handlerFb(this._id,"END",e);this._active=o,this._id=-1,this._state=0}},e}();t.OscParser=s;var a=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,r){this._hitLimit||(this._data+=(0,n.utf32ToString)(e,t,r),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(e){var t=this,r=!1;if(this._hitLimit)r=!1;else if(e&&(r=this._handler(this._data))instanceof Promise)return r.then(function(e){return t._data="",t._hitLimit=!1,e});return this._data="",this._hitLimit=!1,r},e}();t.OscHandler=a},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var r=2147483647,i=function(){function e(e,t){if(void 0===e&&(e=32),void 0===t&&(t=32),this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(t){var r=new e;if(!t.length)return r;for(var i=Array.isArray(t[0])?1:0;i<t.length;++i){var n=t[i];if(Array.isArray(n))for(var o=0;o<n.length;++o)r.addSubParam(n[o]);else r.addParam(n)}return r},e.prototype.clone=function(){var t=new e(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length;++t){e.push(this.params[t]);var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&e.push(Array.prototype.slice.call(this._subParams,r,i))}return e},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>r?r:e}},e.prototype.addSubParam=function(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>r?r:e,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0},e.prototype.getSubParams=function(e){var t=this._subParamsIdx[e]>>8,r=255&this._subParamsIdx[e];return r-t>0?this._subParams.subarray(t,r):null},e.prototype.getSubParamsAll=function(){for(var e={},t=0;t<this.length;++t){var r=this._subParamsIdx[t]>>8,i=255&this._subParamsIdx[t];i-r>0&&(e[t]=this._subParams.slice(r,i))}return e},e.prototype.addDigit=function(e){var t;if(!(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var i=this._digitIsSub?this._subParams:this.params,n=i[t-1];i[t-1]=~n?Math.min(10*n+e,r):e}},e}();t.Params=i},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var r=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()},e.prototype.loadAddon=function(e,t){var r=this,i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=function(){return r._wrappedAddonDispose(i)},t.activate(e)},e.prototype._wrappedAddonDispose=function(e){if(!e.isDisposed){for(var t=-1,r=0;r<this._addons.length;r++)if(this._addons[r]===e){t=r;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},e}();t.AddonManager=r},8771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;var i=r(3785),n=r(511),o=function(){function e(e,t){this._buffer=e,this.type=t}return e.prototype.init=function(e){return this._buffer=e,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(e){var t=this._buffer.lines.get(e);if(t)return new i.BufferLineApiView(t)},e.prototype.getNullCell=function(){return new n.CellData},e}();t.BufferApiView=o},3785:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;var i=r(511),n=function(){function e(e){this._line=e}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new i.CellData)},e.prototype.translateToString=function(e,t,r){return this._line.translateToString(e,t,r)},e}();t.BufferLineApiView=n},8285:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;var i=r(8771),n=r(8460),o=function(){function e(e){var t=this;this._core=e,this._onBufferChange=new n.EventEmitter,this._normal=new i.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new i.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return t._onBufferChange.fire(t.active)})}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),e}();t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0;var r=function(){function e(e){this._core=e}return e.prototype.registerCsiHandler=function(e,t){return this._core.registerCsiHandler(e,function(e){return t(e.toArray())})},e.prototype.addCsiHandler=function(e,t){return this.registerCsiHandler(e,t)},e.prototype.registerDcsHandler=function(e,t){return this._core.registerDcsHandler(e,function(e,r){return t(e,r.toArray())})},e.prototype.addDcsHandler=function(e,t){return this.registerDcsHandler(e,t)},e.prototype.registerEscHandler=function(e,t){return this._core.registerEscHandler(e,t)},e.prototype.addEscHandler=function(e,t){return this.registerEscHandler(e,t)},e.prototype.registerOscHandler=function(e,t){return this._core.registerOscHandler(e,t)},e.prototype.addOscHandler=function(e,t){return this.registerOscHandler(e,t)},e}();t.ParserApi=r},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0;var r=function(){function e(e){this._core=e}return e.prototype.register=function(e){this._core.unicodeService.register(e)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(e){this._core.unicodeService.activeVersion=e},enumerable:!1,configurable:!0}),e}();t.UnicodeApi=r},744:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var a=r(2585),c=r(5295),l=r(8460),u=r(844);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var h=function(e){function r(r){var i=e.call(this)||this;return i._optionsService=r,i.isUserScrolling=!1,i._onResize=new l.EventEmitter,i._onScroll=new l.EventEmitter,i.cols=Math.max(r.rawOptions.cols||0,t.MINIMUM_COLS),i.rows=Math.max(r.rawOptions.rows||0,t.MINIMUM_ROWS),i.buffers=new c.BufferSet(r,i),i}return n(r,e),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){e.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(e,t){void 0===t&&(t=!1);var r,i=this.buffer;(r=this._cachedBlankLine)&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=i.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;var n=i.ybase+i.scrollTop,o=i.ybase+i.scrollBottom;if(0===i.scrollTop){var s=i.lines.isFull;o===i.lines.length-1?s?i.lines.recycle().copyFrom(r):i.lines.push(r.clone()):i.lines.splice(o+1,0,r.clone()),s?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{var a=o-n+1;i.lines.shiftElements(n+1,a-1,-1),i.lines.set(o,r.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)},r.prototype.scrollLines=function(e,t,r){var i=this.buffer;if(e<0){if(0===i.ydisp)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);var n=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),n!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))},r.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;0!==t&&this.scrollLines(t)},o([s(0,a.IOptionsService)],r)}(u.Disposable);t.BufferService=h},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var r=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(e){this.glevel=e,this.charset=this._charsets[e]},e.prototype.setgCharset=function(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)},e}();t.CharsetService=r},1753:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;var s=r(2585),a=r(8460),c={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(e){return 4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)}},VT200:{events:19,restrict:function(e){return 32!==e.action}},DRAG:{events:23,restrict:function(e){return 32!==e.action||3!==e.button}},ANY:{events:31,restrict:function(e){return!0}}};function l(e,t){var r=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(r|=64,r|=e.action):(r|=3&e.button,4&e.button&&(r|=64),8&e.button&&(r|=128),32===e.action?r|=32:0!==e.action||t||(r|=3)),r}var u=String.fromCharCode,h={DEFAULT:function(e){var t=[l(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+u(t[0])+u(t[1])+u(t[2])},SGR:function(e){var t=0===e.action&&4!==e.button?"m":"M";return"[<"+l(e,!0)+";"+e.col+";"+e.row+t}},d=function(){function e(e,t){var r,i,n,s;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new a.EventEmitter,this._lastEvent=null;try{for(var l=o(Object.keys(c)),u=l.next();!u.done;u=l.next()){var d=u.value;this.addProtocol(d,c[d])}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}try{for(var f=o(Object.keys(h)),p=f.next();!p.done;p=f.next()){var _=p.value;this.addEncoding(_,h[_])}}catch(e){n={error:e}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(n)throw n.error}}this.reset()}return e.prototype.addProtocol=function(e,t){this._protocols[e]=t},e.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._compareEvents(this._lastEvent,e))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},e.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},e.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},i([n(0,s.IBufferService),n(1,s.ICoreService)],e)}();t.CoreMouseService=d},6975:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var a=r(2585),c=r(8460),l=r(1439),u=r(844),h=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=function(e){function t(t,r,i,n){var o=e.call(this)||this;return o._bufferService=r,o._logService=i,o._optionsService=n,o.isCursorInitialized=!1,o.isCursorHidden=!1,o._onData=o.register(new c.EventEmitter),o._onUserInput=o.register(new c.EventEmitter),o._onBinary=o.register(new c.EventEmitter),o._scrollToBottom=t,o.register({dispose:function(){return o._scrollToBottom=void 0}}),o.modes=(0,l.clone)(h),o.decPrivateModes=(0,l.clone)(d),o}return n(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=(0,l.clone)(h),this.decPrivateModes=(0,l.clone)(d)},t.prototype.triggerDataEvent=function(e,t){if(void 0===t&&(t=!1),!this._optionsService.rawOptions.disableStdin){var r=this._bufferService.buffer;r.ybase!==r.ydisp&&this._scrollToBottom(),t&&this._onUserInput.fire(),this._logService.debug('sending data "'+e+'"',function(){return e.split("").map(function(e){return e.charCodeAt(0)})}),this._onData.fire(e)}},t.prototype.triggerBinaryEvent=function(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+e+'"',function(){return e.split("").map(function(e){return e.charCodeAt(0)})}),this._onBinary.fire(e))},o([s(1,a.IBufferService),s(2,a.ILogService),s(3,a.IOptionsService)],t)}(u.Disposable);t.CoreService=f},9074:function(e,t,r){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;var a=r(8055),c=r(8460),l=r(844),u=r(6106),h=function(e){function t(){var t=e.call(this)||this;return t._decorations=new u.SortedList(function(e){return e.marker.line}),t._onDecorationRegistered=t.register(new c.EventEmitter),t._onDecorationRemoved=t.register(new c.EventEmitter),t}return n(t,e),Object.defineProperty(t.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),t.prototype.registerDecoration=function(e){var t=this;if(!e.marker.isDisposed){var r=new d(e);if(r){var i=r.marker.onDispose(function(){return r.dispose()});r.onDispose(function(){r&&(t._decorations.delete(r)&&t._onDecorationRemoved.fire(r),i.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}},t.prototype.reset=function(){var e,t;try{for(var r=s(this._decorations.values()),i=r.next();!i.done;i=r.next())i.value.dispose()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._decorations.clear()},t.prototype.getDecorationsAtLine=function(e){return o(this,function(t){return[2,this._decorations.getKeyIterator(e)]})},t.prototype.getDecorationsAtCell=function(e,t,r){var i,n,a,c,l,u,h,d,f,p,_;return o(this,function(o){switch(o.label){case 0:i=0,n=0,o.label=1;case 1:o.trys.push([1,6,7,8]),a=s(this._decorations.getKeyIterator(t)),c=a.next(),o.label=2;case 2:return c.done?[3,5]:(l=c.value,i=null!==(f=l.options.x)&&void 0!==f?f:0,n=i+(null!==(p=l.options.width)&&void 0!==p?p:1),!(e>=i&&e<n)||r&&(null!==(_=l.options.layer)&&void 0!==_?_:"bottom")!==r?[3,4]:[4,l]);case 3:o.sent(),o.label=4;case 4:return c=a.next(),[3,2];case 5:return[3,8];case 6:return u=o.sent(),h={error:u},[3,8];case 7:try{c&&!c.done&&(d=a.return)&&d.call(a)}finally{if(h)throw h.error}return[7];case 8:return[2]}})},t.prototype.dispose=function(){var e,t;try{for(var r=s(this._decorations.values()),i=r.next();!i.done;i=r.next()){var n=i.value;this._onDecorationRemoved.fire(n)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this.reset()},t}(l.Disposable);t.DecorationService=h;var d=function(e){function t(t){var r=e.call(this)||this;return r.options=t,r.isDisposed=!1,r.onRenderEmitter=r.register(new c.EventEmitter),r.onRender=r.onRenderEmitter.event,r._onDispose=r.register(new c.EventEmitter),r.onDispose=r._onDispose.event,r._cachedBg=null,r._cachedFg=null,r.marker=t.marker,r.options.overviewRulerOptions&&!r.options.overviewRulerOptions.position&&(r.options.overviewRulerOptions.position="full"),r}return n(t,e),Object.defineProperty(t.prototype,"backgroundColorRGB",{get:function(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foregroundColorRGB",{get:function(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),e.prototype.dispose.call(this))},t}(l.Disposable)},3730:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var o=r(2585),s=function(){function e(e){this._bufferService=e,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(e){e<this._start?this._start=e:e>this._end&&(this._end=e)},e.prototype.markRangeDirty=function(e,t){if(e>t){var r=e;e=t,t=r}e<this._start&&(this._start=e),t>this._end&&(this._end=t)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},i([n(0,o.IBufferService)],e)}();t.DirtyRowService=s},4348:function(e,t,r){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var s=r(2585),a=r(8343),c=function(){function e(){for(var e,t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];this._entries=new Map;try{for(var s=i(r),a=s.next();!a.done;a=s.next()){var c=n(a.value,2),l=c[0],u=c[1];this.set(l,u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}return e.prototype.set=function(e,t){var r=this._entries.get(e);return this._entries.set(e,t),r},e.prototype.forEach=function(e){this._entries.forEach(function(t,r){return e(r,t)})},e.prototype.has=function(e){return this._entries.has(e)},e.prototype.get=function(e){return this._entries.get(e)},e}();t.ServiceCollection=c;var l=function(){function e(){this._services=new c,this._services.set(s.IInstantiationService,this)}return e.prototype.setService=function(e,t){this._services.set(e,t)},e.prototype.getService=function(e){return this._services.get(e)},e.prototype.createInstance=function(e){for(var t,r,s=[],c=1;c<arguments.length;c++)s[c-1]=arguments[c];var l=(0,a.getServiceDependencies)(e).sort(function(e,t){return e.index-t.index}),u=[];try{for(var h=i(l),d=h.next();!d.done;d=h.next()){var f=d.value,p=this._services.get(f.id);if(!p)throw new Error("[createInstance] "+e.name+" depends on UNKNOWN service "+f.id+".");u.push(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}var _=l.length>0?l[0].index:s.length;if(s.length!==_)throw new Error("[createInstance] First service dependency of "+e.name+" at position "+(_+1)+" conflicts with "+s.length+" static arguments");return new(e.bind.apply(e,o([void 0],n(o(o([],n(s),!1),n(u),!1)),!1)))},e}();t.InstantiationService=l},7866:function(e,t,r){var i=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},n=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var a=r(2585),c={debug:a.LogLevelEnum.DEBUG,info:a.LogLevelEnum.INFO,warn:a.LogLevelEnum.WARN,error:a.LogLevelEnum.ERROR,off:a.LogLevelEnum.OFF},l=function(){function e(e){var t=this;this._optionsService=e,this.logLevel=a.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(e){"logLevel"===e&&t._updateLogLevel()})}return e.prototype._updateLogLevel=function(){this.logLevel=c[this._optionsService.rawOptions.logLevel]},e.prototype._evalLazyOptionalParams=function(e){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())},e.prototype._log=function(e,t,r){this._evalLazyOptionalParams(r),e.call.apply(e,s([console,"xterm.js: "+t],o(r),!1))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.DEBUG&&this._log(console.log,e,t)},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.INFO&&this._log(console.info,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.WARN&&this._log(console.warn,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.logLevel<=a.LogLevelEnum.ERROR&&this._log(console.error,e,t)},i([n(0,a.IOptionsService)],e)}();t.LogService=l},7302:function(e,t,r){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var n=r(8460),o=r(6114);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var s=["normal","bold","100","200","300","400","500","600","700","800","900"],a=function(){function e(e){this._onOptionChange=new n.EventEmitter;var r=i({},t.DEFAULT_OPTIONS);for(var o in e)if(o in r)try{var s=e[o];r[o]=this._sanitizeAndValidateOption(o,s)}catch(e){console.error(e)}this.rawOptions=r,this.options=i({},r),this._setupOptions()}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype._setupOptions=function(){var e=this,r=function(r){if(!(r in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+r+'"');return e.rawOptions[r]},i=function(r,i){if(!(r in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+r+'"');i=e._sanitizeAndValidateOption(r,i),e.rawOptions[r]!==i&&(e.rawOptions[r]=i,e._onOptionChange.fire(r))};for(var n in this.rawOptions){var o={get:r.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this.options,n,o)}},e.prototype.setOption=function(e,t){this.options[e]=t},e.prototype._sanitizeAndValidateOption=function(e,r){switch(e){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":r||(r=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof r&&1<=r&&r<=1e3)break;r=s.includes(r)?r:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(e+" cannot be less than 1, value: "+r);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(e+" cannot be less than 0, value: "+r);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(e+" cannot be less than or equal to 0, value: "+r);case"rows":case"cols":if(!r&&0!==r)throw new Error(e+" must be numeric, value: "+r)}return r},e.prototype.getOption=function(e){return this.options[e]},e}();t.OptionsService=a},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e.di$dependencies||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var r=function(e,t,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,r){t.di$target===t?t.di$dependencies.push({id:e,index:r}):(t.di$dependencies=[{id:e,index:r}],t.di$target=t)}(r,e,i)};return r.toString=function(){return e},t.serviceRegistry.set(e,r),r}},2585:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var i,n=r(8343);t.IBufferService=(0,n.createDecorator)("BufferService"),t.ICoreMouseService=(0,n.createDecorator)("CoreMouseService"),t.ICoreService=(0,n.createDecorator)("CoreService"),t.ICharsetService=(0,n.createDecorator)("CharsetService"),t.IDirtyRowService=(0,n.createDecorator)("DirtyRowService"),t.IInstantiationService=(0,n.createDecorator)("InstantiationService"),(i=t.LogLevelEnum||(t.LogLevelEnum={}))[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i[i.OFF=4]="OFF",t.ILogService=(0,n.createDecorator)("LogService"),t.IOptionsService=(0,n.createDecorator)("OptionsService"),t.IUnicodeService=(0,n.createDecorator)("UnicodeService"),t.IDecorationService=(0,n.createDecorator)("DecorationService")},1480:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var i=r(8460),n=r(225),o=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new i.EventEmitter;var e=new n.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(e){if(!this._providers[e])throw new Error('unknown Unicode version "'+e+'"');this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)},enumerable:!1,configurable:!0}),e.prototype.register=function(e){this._providers[e.version]=e},e.prototype.wcwidth=function(e){return this._activeProvider.wcwidth(e)},e.prototype.getStringCellWidth=function(e){for(var t=0,r=e.length,i=0;i<r;++i){var n=e.charCodeAt(i);if(55296<=n&&n<=56319){if(++i>=r)return t+this.wcwidth(n);var o=e.charCodeAt(i);56320<=o&&o<=57343?n=1024*(n-55296)+o-56320+65536:t+=this.wcwidth(o)}t+=this.wcwidth(n)}return t},e}();t.UnicodeService=o}},t={};return function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}(4389)})()},3086:(e,t,r)=>{var i=r(8941),n=r(2308);i.Segment=function(){},i.Segment.prototype={eql:function(e){return this.start.eql(e.start)&&this.end.eql(e.end)||this.start.eql(e.end)&&this.end.eql(e.start)},dup:function(){return i.Segment.create(this.start,this.end)},length:function(){var e=this.start.elements,t=this.end.elements,r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)},toVector:function(){var e=this.start.elements,t=this.end.elements;return n.create([t[0]-e[0],t[1]-e[1],t[2]-e[2]])},midpoint:function(){var e=this.start.elements,t=this.end.elements;return n.create([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])},bisectingPlane:function(){return Plane.create(this.midpoint(),this.toVector())},translate:function(e){var t=e.elements||e,r=this.start.elements,n=this.end.elements;return i.Segment.create([r[0]+t[0],r[1]+t[1],r[2]+(t[2]||0)],[n[0]+t[0],n[1]+t[1],n[2]+(t[2]||0)])},isParallelTo:function(e){return this.line.isParallelTo(e)},distanceFrom:function(e){var t=this.pointClosestTo(e);return null===t?null:t.distanceFrom(e)},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=(e.elements||e).slice();if(2==t.length&&t.push(0),this.start.eql(t))return!0;var r=this.start.elements,i=n.create([r[0]-t[0],r[1]-t[1],r[2]-(t[2]||0)]),o=this.toVector();return i.isAntiparallelTo(o)&&i.modulus()<=o.modulus()},intersects:function(e){return null!==this.intersectionWith(e)},intersectionWith:function(e){if(!this.line.intersects(e))return null;var t=this.line.intersectionWith(e);return this.contains(t)?t:null},pointClosestTo:function(e){if(e.normal){var t=this.line.intersectionWith(e);return null===t?null:this.pointClosestTo(t)}var r=this.line.pointClosestTo(e);return null===r?null:this.contains(r)?r:(this.line.positionOf(r)<0?this.start:this.end).dup()},setPoints:function(e,t){return e=n.create(e).to3D(),t=n.create(t).to3D(),null===e||null===t?null:(this.line=i.create(e,t.subtract(e)),this.start=e,this.end=t,this)}},i.Segment.create=function(e,t){return(new i.Segment).setPoints(e,t)},e.exports=i.Segment},3109:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBoxElement=void 0;var r=function(){function e(e,t){var r=this;this.title=e,this.optional=t,this.listeners=new Map,this.onEvent=function(e){var t=r.listeners.get(e.type);if(t){var i=e.type;t.forEach(function(e){e(i,r)})}}}return e.prototype.addEventListener=function(e,t,r){var i=this.listeners.get(e)||new Set;i.size||this.getElement().addEventListener(e,this.onEvent,r),i.add(t),this.listeners.set(e,i)},e.prototype.removeEventListener=function(e,t){var r=this.listeners.get(e);r&&(r.delete(t),r.size||(this.listeners.delete(e),this.getElement().removeEventListener(e,this.onEvent)))},e}();t.ToolBoxElement=r},3125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCodeControlMessage=void 0;var i=r(1635),n=r(8287),o=r(831),s=function(e){function t(t,r,i,n){var s=e.call(this,o.ControlMessage.TYPE_KEYCODE)||this;return s.action=t,s.keycode=r,s.repeat=i,s.metaState=n,s}return i.__extends(t,e),t.prototype.toBuffer=function(){var e=n.Buffer.alloc(t.PAYLOAD_LENGTH+1),r=0;return r=e.writeInt8(this.type,r),r=e.writeInt8(this.action,r),r=e.writeInt32BE(this.keycode,r),r=e.writeInt32BE(this.repeat,r),e.writeInt32BE(this.metaState,r),e},t.prototype.toString=function(){return"KeyCodeControlMessage{action=".concat(this.action,", keycode=").concat(this.keycode,", metaState=").concat(this.metaState,"}")},t.prototype.toJSON=function(){return{type:this.type,action:this.action,keycode:this.keycode,metaState:this.metaState,repeat:this.repeat}},t.PAYLOAD_LENGTH=13,t}(o.ControlMessage);t.KeyCodeControlMessage=s},3146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.error(e),console.trace()}},3166:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20,11H7.83l5.59,-5.59L12,4l-8,8 8,8 1.41,-1.41L7.83,13H20v-2z"></path></svg>'},3339:e=>{e.exports='<svg viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>System_Home</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="System_Home" sketch:type="MSArtboardGroup"><g id="Rectangle-119-+-home-12-Copy-11" sketch:type="MSLayerGroup"><rect id="Rectangle-119" sketch:type="MSShapeGroup" x="0" y="0" width="48" height="48"></rect><path d="M24,35.2 L24,35.2 C30.1855892,35.2 35.2,30.1855892 35.2,24 C35.2,17.8144108 30.1855892,12.8 24,12.8 C17.8144108,12.8 12.8,17.8144108 12.8,24 C12.8,30.1855892 17.8144108,35.2 24,35.2 L24,35.2 Z M24,38.4 L24,38.4 C16.0470996,38.4 9.6,31.9529004 9.6,24 C9.6,16.0470996 16.0470996,9.6 24,9.6 C31.9529004,9.6 38.4,16.0470996 38.4,24 C38.4,31.9529004 31.9529004,38.4 24,38.4 L24,38.4 Z" id="Shape" fill="var(--svg-button-fill)" sketch:type="MSShapeGroup"></path></g></g></g></svg>'},3501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.compile=function(e,t){var r;if("x-shader/x-fragment"===t.type)r=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==t.type)throw new Error("Unknown shader type: "+t.type);r=e.createShader(e.VERTEX_SHADER)}if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,t.source),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("An error occurred compiling the shaders: "+e.getShaderInfoLog(r));return r},e}();t.default=r},3602:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65,6.35C16.2,4.9 14.21,4 12,4c-4.42,0 -7.99,3.58 -7.99,8s3.57,8 7.99,8c3.73,0 6.84,-2.55 7.73,-6h-2.08c-0.82,2.33 -3.04,4 -5.65,4 -3.31,0 -6,-2.69 -6,-6s2.69,-6 6,-6c1.66,0 3.14,0.69 4.22,1.78L13,11h7V4l-2.35,2.35z"></path></svg>'},3608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceTracker=void 0;var i,n=r(1635),o=r(9809),s=r(7802),a=n.__importDefault(r(2332)),c=r(2178),l=r(1233),u=r(6804),h=function(e){function t(r,i){var o=e.call(this,n.__assign(n.__assign({},r),{action:t.ACTION}),i)||this;return o.tableId="appl_devices_list",t.instancesByUrl.set(i,o),o.buildDeviceTable(),o.openNewConnection(),o}return n.__extends(t,e),t.start=function(e){var r=this.buildUrlForTracker(e).toString(),i=this.instancesByUrl.get(r);return i||(i=new t(e,r)),i},t.getInstance=function(e){return this.start(e)},t.prototype.onSocketOpen=function(){},t.prototype.buildDeviceRow=function(e,r){var o=this,s="".concat(this.id,"_").concat(a.default.escapeUdid(r.udid)),u=r.state===l.DeviceState.CONNECTED,h="device_services_".concat(s),d=(0,c.html)(i||(i=n.__makeTemplateObject(['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">"','"</div>\n                <div class="device-model">','</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'],['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">"','"</div>\n                <div class="device-model">','</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'])),u?"active":"not-active",r.name,r.model,r.udid,r.version,r.state,h).content,f=d.getElementById(h);f&&(t.tools.forEach(function(e){var t=e.createEntryForDeviceList(r,"desc-block",o.params);t&&(Array.isArray(t)?t.forEach(function(e){e&&f.appendChild(e)}):f.appendChild(t))}),e.appendChild(d))},t.prototype.getChannelCode=function(){return u.ChannelCode.ATRC},t.ACTION=s.ACTION.APPL_DEVICE_LIST,t.tools=new Set,t.instancesByUrl=new Map,t}(o.BaseDeviceTracker);t.DeviceTracker=h},3644:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var n=r(1635),o=n.__importDefault(r(6722)),s=n.__importDefault(r(8089)),a=n.__importDefault(r(2332)),c=function(){function e(t,r){void 0===r&&(r=e.BASE_BUFFER_LENGTH),this.bytesLength=r,this.crop=null,this.bitrate=0,this.bounds=null,this.maxFps=0,this.iFrameInterval=0,this.sendFrameMeta=!1,this.lockedVideoOrientation=-1,this.displayId=0,t&&(this.crop=t.crop,this.bitrate=t.bitrate,this.bounds=t.bounds,this.maxFps=t.maxFps,this.iFrameInterval=t.iFrameInterval,this.sendFrameMeta=t.sendFrameMeta||!1,this.lockedVideoOrientation=t.lockedVideoOrientation||-1,"number"==typeof t.displayId&&!isNaN(t.displayId)&&t.displayId>=0&&(this.displayId=t.displayId),t.codecOptions&&(this.codecOptions=t.codecOptions.trim()),t.encoderName&&(this.encoderName=t.encoderName.trim()))}return e.fromBuffer=function(t){var r=0,i=t.readInt32BE(r);r+=4,r+=4;var n=t.readInt8(r);r+=1;var c=t.readInt16BE(r);r+=2;var l=t.readInt16BE(r);r+=2;var u=t.readInt16BE(r);r+=2;var h=t.readInt16BE(r);r+=2;var d=t.readInt16BE(r);r+=2;var f=t.readInt16BE(r);r+=2;var p=!!t.readInt8(r);r+=1;var _=t.readInt8(r);r+=1;var v=t.readInt32BE(r);r+=4;var g,y,m=null,b=null;0!==c&&0!==l&&(m=new s.default(360,806)),(u||h||d||f)&&(b=new o.default(u,h,d,f)),console.log("VideoSettings:fromBuffer width height",c,l),console.log("VideoSettings:fromBuffer bounds",m);var S=t.readInt32BE(r);if(r+=4,S){var E=t.slice(r,r+S);r+=S,g=a.default.utf8ByteArrayToString(E)}var C=t.readInt32BE(r);if(console.log("encoderNameLength",C),r+=4,C){var w=t.slice(r,r+C);r+=C,y=a.default.utf8ByteArrayToString(w)}return new e({crop:b,bitrate:i,bounds:m,maxFps:24,iFrameInterval:n,lockedVideoOrientation:_,displayId:v,sendFrameMeta:p,codecOptions:g,encoderName:y},r)},e.copy=function(t){return new e({bitrate:t.bitrate,crop:o.default.copy(t.crop),bounds:s.default.copy(t.bounds),maxFps:t.maxFps,iFrameInterval:t.iFrameInterval,lockedVideoOrientation:t.lockedVideoOrientation,displayId:t.displayId,sendFrameMeta:t.sendFrameMeta,codecOptions:t.codecOptions,encoderName:t.encoderName},t.bytesLength)},e.prototype.equals=function(e){return!!e&&this.encoderName===e.encoderName&&this.codecOptions===e.codecOptions&&o.default.equals(this.crop,e.crop)&&this.lockedVideoOrientation===e.lockedVideoOrientation&&this.displayId===e.displayId&&s.default.equals(this.bounds,e.bounds)&&this.bitrate===e.bitrate&&this.maxFps===e.maxFps&&this.iFrameInterval===e.iFrameInterval},e.prototype.toBuffer=function(){var t,r,n=0;this.codecOptions&&(n+=(t=a.default.stringToUtf8ByteArray(this.codecOptions)).length);var o="OMX.google.h264.encoder";o&&(n+=(r=a.default.stringToUtf8ByteArray(o)).length);var s=i.alloc(e.BASE_BUFFER_LENGTH+n),c=this.bounds||{},l=c.width,u=void 0===l?0:l,h=c.height,d=void 0===h?0:h,f=this.crop||{},p=f.left,_=void 0===p?0:p,v=f.top,g=void 0===v?0:v,y=f.right,m=void 0===y?0:y,b=f.bottom,S=void 0===b?0:b,E=0;return E=s.writeInt32BE(this.bitrate,E),E=s.writeInt32BE(this.maxFps,E),E=s.writeInt8(this.iFrameInterval,E),E=s.writeInt16BE(u,E),E=s.writeInt16BE(d,E),E=s.writeInt16BE(_,E),E=s.writeInt16BE(g,E),E=s.writeInt16BE(m,E),E=s.writeInt16BE(S,E),E=s.writeInt8(this.sendFrameMeta?1:0,E),E=s.writeInt8(this.lockedVideoOrientation,E),E=s.writeInt32BE(this.displayId,E),console.log("VideoSettings.width",u),console.log("VideoSettings.height",d),t?(E=s.writeInt32BE(t.length,E),s.fill(t,E),E+=t.length):E=s.writeInt32BE(0,E),r?(E=s.writeInt32BE(r.length,E),s.fill(r,E),E+=r.length):s.writeInt32BE(0,E),s},e.prototype.toString=function(){return"VideoSettings{bitrate=".concat(this.bitrate,", maxFps=").concat(this.maxFps,", iFrameInterval=").concat(this.iFrameInterval,", bounds=").concat(this.bounds,", crop=").concat(this.crop,", metaFrame=").concat(this.sendFrameMeta,", lockedVideoOrientation=").concat(this.lockedVideoOrientation,", displayId=").concat(this.displayId,", codecOptions=").concat(this.codecOptions,", encoderName=").concat(this.encoderName,"}")},e.prototype.toJSON=function(){return{bitrate:this.bitrate,maxFps:this.maxFps,iFrameInterval:this.iFrameInterval,bounds:this.bounds,crop:this.crop,sendFrameMeta:this.sendFrameMeta,lockedVideoOrientation:this.lockedVideoOrientation,displayId:this.displayId,codecOptions:this.codecOptions,encoderName:this.encoderName}},e.BASE_BUFFER_LENGTH=35,e}();t.default=c},3726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyInputHandler=void 0;var i=r(1635),n=r(3125),o=i.__importDefault(r(104)),s=r(6154),a=function(){function e(){}return e.attachListeners=function(){document.body.addEventListener("keydown",this.handler),document.body.addEventListener("keyup",this.handler)},e.detachListeners=function(){document.body.removeEventListener("keydown",this.handler),document.body.removeEventListener("keyup",this.handler)},e.addEventListener=function(e){this.listeners.size||this.attachListeners(),this.listeners.add(e)},e.removeEventListener=function(e){this.listeners.delete(e),this.listeners.size||this.detachListeners()},e.repeatCounter=new Map,e.listeners=new Set,e.handler=function(t){var r=t,i=s.KeyToCodeMap.get(r.code);if(i){var a,c=0;if("keydown"===r.type){if(a=o.default.ACTION_DOWN,r.repeat){var l=e.repeatCounter.get(i);"number"!=typeof l?l=1:l++,c=l,e.repeatCounter.set(i,l)}}else{if("keyup"!==r.type)return;a=o.default.ACTION_UP,e.repeatCounter.delete(i)}var u=(r.getModifierState("Alt")?o.default.META_ALT_ON:0)|(r.getModifierState("Shift")?o.default.META_SHIFT_ON:0)|(r.getModifierState("Control")?o.default.META_CTRL_ON:0)|(r.getModifierState("Meta")?o.default.META_META_ON:0)|(r.getModifierState("CapsLock")?o.default.META_CAPS_LOCK_ON:0)|(r.getModifierState("ScrollLock")?o.default.META_SCROLL_LOCK_ON:0)|(r.getModifierState("NumLock")?o.default.META_NUM_LOCK_ON:0),h=new n.KeyCodeControlMessage(a,i,c,u);e.listeners.forEach(function(e){e.onKeyEvent(h)}),t.preventDefault()}},e}();t.KeyInputHandler=a},3762:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollControlMessage=void 0;var n=r(1635),o=r(831),s=function(e){function t(t,r,i){var n=e.call(this,o.ControlMessage.TYPE_SCROLL)||this;return n.position=t,n.hScroll=r,n.vScroll=i,n}return n.__extends(t,e),t.prototype.toBuffer=function(){var e=i.alloc(t.PAYLOAD_LENGTH+1),r=0;return r=e.writeUInt8(this.type,r),r=e.writeUInt32BE(this.position.point.x,r),r=e.writeUInt32BE(this.position.point.y,r),r=e.writeUInt16BE(this.position.screenSize.width,r),r=e.writeUInt16BE(this.position.screenSize.height,r),r=e.writeInt32BE(this.hScroll,r),e.writeInt32BE(this.vScroll,r),e},t.prototype.toString=function(){return"ScrollControlMessage{hScroll=".concat(this.hScroll,", vScroll=").concat(this.vScroll,", position=").concat(this.position,"}")},t.prototype.toJSON=function(){return{type:this.type,position:this.position.toJSON(),hScroll:this.hScroll,vScroll:this.vScroll}},t.PAYLOAD_LENGTH=20,t}(o.ControlMessage);t.ScrollControlMessage=s},3776:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;const a=r(4956),c=r(6214),l=o(r(4627)),u=r(5942),h=r(7743),d=r(4454),f=(0,s(r(7833)).default)("socket.io-client:manager");class p extends d.Emitter{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,(0,a.installTimerFunctions)(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new h.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||l;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=(0,u.on)(t,"open",function(){r.onopen(),e&&e()}),n=t=>{f("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=(0,u.on)(t,"error",n);if(!1!==this._timeout){const e=this._timeout;f("connect attempt will timeout after %d",e);const r=this.setTimeoutFn(()=>{f("connect attempt timed out after %d",e),i(),n(new Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push((0,u.on)(e,"ping",this.onping.bind(this)),(0,u.on)(e,"data",this.ondata.bind(this)),(0,u.on)(e,"error",this.onerror.bind(this)),(0,u.on)(e,"close",this.onclose.bind(this)),(0,u.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){(0,a.nextTick)(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){f("error",e),this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new c.Socket(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return void f("socket %s is still active, skipping close",e);this._close()}_packet(e){f("writing packet %j",e);const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){f("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;f("closed due to %s",e),this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(f("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(f("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}t.Manager=p},3875:e=>{window,e.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachAddon=void 0;var i=function(){function e(e,t){this._disposables=[],this._socket=e,this._socket.binaryType="arraybuffer",this._bidirectional=!t||!1!==t.bidirectional}return e.prototype.activate=function(e){var t=this;this._disposables.push(n(this._socket,"message",function(t){var r=t.data;e.write("string"==typeof r?r:new Uint8Array(r))})),this._bidirectional&&(this._disposables.push(e.onData(function(e){return t._sendData(e)})),this._disposables.push(e.onBinary(function(e){return t._sendBinary(e)}))),this._disposables.push(n(this._socket,"close",function(){return t.dispose()})),this._disposables.push(n(this._socket,"error",function(){return t.dispose()}))},e.prototype.dispose=function(){this._disposables.forEach(function(e){return e.dispose()})},e.prototype._sendData=function(e){1===this._socket.readyState&&this._socket.send(e)},e.prototype._sendBinary=function(e){if(1===this._socket.readyState){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);this._socket.send(t)}},e}();function n(e,t,r){return e.addEventListener(t,r),{dispose:function(){r&&e.removeEventListener(t,r)}}}t.AttachAddon=i}])},3991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=i.__importDefault(r(2506)),o=i.__importDefault(r(3501)),s=r(1792),a=function(){function e(e,t,r,i){this.gl=e,this.vertexBuffer=t,this.shaderArgs=r,this.program=i}return e.create=function(t){var r=this._initShaders(t),i=this._initShaderArgs(t,r);return new e(t,this._initBuffers(t),i,r)},e._initShaders=function(e){var t=new n.default(e);return t.attach(o.default.compile(e,s.vertexQuad)),t.attach(o.default.compile(e,s.fragmentYUV)),t.link(),t.use(),t},e._initShaderArgs=function(e,t){var r={yTexture:t.getUniformLocation("yTexture"),uTexture:t.getUniformLocation("uTexture"),vTexture:t.getUniformLocation("vTexture"),u_projection:t.getUniformLocation("u_projection"),a_position:t.getAttributeLocation("a_position"),a_texCoord:t.getAttributeLocation("a_texCoord")};return e.enableVertexAttribArray(r.a_position),e.enableVertexAttribArray(r.a_texCoord),r},e._initBuffers=function(e){return e.createBuffer()},e.prototype.setTexture=function(e,t,r){var i=this.gl;i.uniform1i(this.shaderArgs.yTexture,0),i.uniform1i(this.shaderArgs.uTexture,1),i.uniform1i(this.shaderArgs.vTexture,2),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.texture),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,r.texture)},e.prototype.use=function(){this.program.use()},e.prototype.release=function(){this.gl.useProgram(null)},e.prototype.updateShaderData=function(e,t){var r=e.w,i=e.h;this.gl.viewport(0,0,r,i),this.program.setUniformM4(this.shaderArgs.u_projection,[2/r,0,0,0,0,2/-i,0,0,0,0,1,0,-1,1,0,1]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,0,0,r,0,t.maxXTexCoord,0,r,i,t.maxXTexCoord,t.maxYTexCoord,r,i,t.maxXTexCoord,t.maxYTexCoord,0,i,0,t.maxYTexCoord,0,0,0,0]),this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.shaderArgs.a_position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(this.shaderArgs.a_texCoord,2,this.gl.FLOAT,!1,16,8)},e.prototype.draw=function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),e.drawArrays(this.gl.TRIANGLE_STRIP,0,6),e.bindTexture(e.TEXTURE_2D,null)},e}();t.default=a},4003:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReceiver=void 0;var n=r(1635),o=r(2468),s=n.__importDefault(r(5444)),a=n.__importDefault(r(3644)),c=n.__importDefault(r(4196)),l=n.__importDefault(r(2332)),u=r(8880),h=l.default.stringToUtf8ByteArray("scrcpy_initial"),d=function(e){function t(t){var r=e.call(this,t)||this;return r.events=[],r.encodersSet=new Set,r.clientId=-1,r.deviceName="",r.displayInfoMap=new Map,r.connectionCountMap=new Map,r.screenInfoMap=new Map,r.videoSettingsMap=new Map,r.hasInitialInfo=!1,r.openNewConnection(),r.ws&&(r.ws.binaryType="arraybuffer"),r}return n.__extends(t,e),t.prototype.handleInitialInfo=function(e){console.log("handleInitialInfo started");var t=h.length,r=new Uint8Array(e,t,64);t+=64;var n=i.from(new Uint8Array(e,t)),o=n.readInt32BE(0);this.displayInfoMap.clear(),this.connectionCountMap.clear(),this.screenInfoMap.clear(),this.videoSettingsMap.clear(),n=n.slice(4);for(var s=0;s<o;s++){var d=n.slice(0,u.DisplayInfo.BUFFER_LENGTH),f=u.DisplayInfo.fromBuffer(d),p=f.displayId;this.displayInfoMap.set(p,f),n=n.slice(u.DisplayInfo.BUFFER_LENGTH),this.connectionCountMap.set(p,n.readInt32BE(0));var _=(n=n.slice(4)).readInt32BE(0);n=n.slice(4),console.log("if screenInfoBytesCount"),_&&(console.log("screenInfoBytesCount",_),this.screenInfoMap.set(p,c.default.fromBuffer(n.slice(0,_))),n=n.slice(_));var v=n.readInt32BE(0);n=n.slice(4),console.log("if videoSettingsBytesCount"),v&&(console.log("videoSettingsBytesCount",v),this.videoSettingsMap.set(p,a.default.fromBuffer(n.slice(0,v))),console.log("before of .fromBuffer "),n=n.slice(v))}this.encodersSet.clear();var g=n.readInt32BE(0);for(n=n.slice(4),s=0;s<g;s++){var y=n.readInt32BE(0),m=(n=n.slice(4)).slice(0,y);n=n.slice(y);var b=l.default.utf8ByteArrayToString(m);this.encodersSet.add(b)}this.clientId=n.readInt32BE(0),r=l.default.filterTrailingZeroes(r),this.deviceName=l.default.utf8ByteArrayToString(r),this.hasInitialInfo=!0,this.triggerInitialInfoEvents(),console.log("handleInitialInfo ended")},t.EqualArrays=function(e,t){if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},t.prototype.buildDirectWebSocketUrl=function(){var t=e.prototype.buildDirectWebSocketUrl.call(this);return this.supportMultiplexing()||t.searchParams.set("udid",this.params.udid),t},t.prototype.onSocketClose=function(e){console.log("".concat("[StreamReceiver]",". WS closed: ").concat(e.reason)),this.emit("disconnected",e)},t.prototype.onSocketMessage=function(e){if(e.data instanceof ArrayBuffer){if(e.data.byteLength>h.length){var r=new Uint8Array(e.data,0,h.length);if(t.EqualArrays(r,h))return void this.handleInitialInfo(e.data);if(t.EqualArrays(r,s.default.MAGIC_BYTES_MESSAGE)){var i=s.default.fromBuffer(e.data);return void this.emit("deviceMessage",i)}}this.emit("video",new Uint8Array(e.data))}},t.prototype.onSocketOpen=function(){this.emit("connected",void 0);for(var e=this.events.shift();e;)this.sendEvent(e),e=this.events.shift()},t.prototype.sendEvent=function(e){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(e.toBuffer()):this.events.push(e)},t.prototype.stop=function(){this.ws&&this.ws.readyState===this.ws.OPEN&&this.ws.close(),this.events.length=0},t.prototype.getEncoders=function(){return Array.from(this.encodersSet.values())},t.prototype.getDeviceName=function(){return this.deviceName},t.prototype.triggerInitialInfoEvents=function(){var e=this;if(this.hasInitialInfo){var t=this.getEncoders();this.emit("encoders",t);var r=this.clientId,i=this.deviceName;this.emit("clientsStats",{clientId:r,deviceName:i});var n=[];console.log("triggerInitialInfoEvents.hasInitialInfo"),this.displayInfoMap.forEach(function(t,r){var i=e.connectionCountMap.get(r)||0;n.push({displayInfo:t,videoSettings:e.videoSettingsMap.get(r),screenInfo:e.screenInfoMap.get(r),connectionCount:i})}),console.log("triggerInitialInfoEvents.infoArray",n),this.emit("displayInfo",n)}},t.prototype.getDisplayInfo=function(e){return this.displayInfoMap.get(e)},t}(o.ManagerClient);t.StreamReceiver=d},4091:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionHandler=void 0;var n=r(1635),o=n.__importDefault(r(4504)),s=r(7444),a=n.__importDefault(r(8089)),c=n.__importDefault(r(9516)),l=n.__importDefault(r(4455)),u=n.__importDefault(r(8062)),h=n.__importDefault(r(1130)),d=n.__importDefault(r(2332)),f="[TouchHandler]",p=function(){function e(t,r,i){this.player=t,this.touchEventsNames=r,this.keyEventsNames=i,this.multiTouchActive=!1,this.multiTouchShift=!1,this.dirtyPlace=[],this.over=!1,this.tag=t.getTouchableElement(),this.ctx=this.tag.getContext("2d"),e.loadImages(),e.bindGlobalListeners(this)}return e.bindGlobalListeners=function(t){var r=this;t.touchEventsNames.forEach(function(i){var n=e.eventListeners.get(i);n||(n=new Set,document.body.addEventListener(i,r.onInteractionEvent,e.options),r.eventListeners.set(i,n)),n.add(t)}),t.keyEventsNames.forEach(function(i){var n=e.eventListeners.get(i);n||(n=new Set,document.body.addEventListener(i,r.onKeyEvent),r.eventListeners.set(i,n)),n.add(t)})},e.unbindListeners=function(t){var r=this;t.touchEventsNames.forEach(function(i){var n=e.eventListeners.get(i);n&&(n.delete(t),n.size<=0&&(r.eventListeners.delete(i),document.body.removeEventListener(i,r.onInteractionEvent)))}),t.keyEventsNames.forEach(function(i){var n=e.eventListeners.get(i);n&&(n.delete(t),n.size<=0&&(r.eventListeners.delete(i),document.body.removeEventListener(i,r.onKeyEvent)))})},e.loadImages=function(){var e=this;if(!this.pointImagesLoaded){var t=0,r=function(r){2===++t&&(e.pointImagesLoaded=!0),r.target===e.touchPointImage?e.touchPointRadius=e.touchPointImage.width/2:r.target===e.centerPointImage&&(e.centerPointRadius=e.centerPointImage.width/2)},i=this.touchPointImage=new Image;i.src=u.default,i.onload=r;var n=this.centerPointImage=new Image;n.src=h.default,n.onload=r}},e.getPointerId=function(e,t){if(this.idToPointerMap.has(t)){var r=this.idToPointerMap.get(t);return"touchend"!==e&&"touchcancel"!==e||(this.idToPointerMap.delete(t),this.pointerToIdMap.delete(r)),r}for(var i=0;this.pointerToIdMap.has(i);)i++;return this.idToPointerMap.set(t,i),this.pointerToIdMap.set(i,t),i},e.buildTouchOnClient=function(e,t){var r=this.mapTypeToAction(e.type),i=t.videoSize,n=i.width,o=i.height,s=e.target,u=s.getBoundingClientRect(),h=s.clientWidth,d=s.clientHeight,f=e.clientX-u.left,p=e.clientY-u.top,_=!1;(f<0||f>h||p<0||p>d)&&(_=!0);var v=1e5,g=n/o,y=Math.round(v*g),m=Math.round(v*h/d);if(y>m){var b=Math.ceil(h/g),S=(d-b)/2;(p<S||p>S+b)&&(_=!0),p-=S,d=b}else if(y<m){var E=Math.ceil(d*g),C=(h-E)/2;(f<C||f>C+E)&&(_=!0),f-=C,h=E}var w=f*n/h,A=p*o/d,T=new a.default(n,o),O=new c.default(w,A);return(w<0||A<0||w>n||A>o)&&(_=!0),{client:{width:h,height:d},touch:{invalid:_,action:r,position:new l.default(O,T),buttons:e.buttons}}},e.validateMessage=function(t,r,i,n){var s=[],a=r.action,c=r.pointerId,l=i.get(c);if(a===o.default.ACTION_UP)l?(i.delete(c),s.push(r)):console.warn(n,"Received ACTION_UP while there are no DOWN stored");else if(a===o.default.ACTION_DOWN)l?console.warn(n,"Received ACTION_DOWN while already has one stored"):(i.set(c,r),s.push(r));else if(a===o.default.ACTION_MOVE)if(l)s.push(r),i.set(c,r);else if(t instanceof MouseEvent&&t.buttons||window.TouchEvent&&t instanceof TouchEvent){console.warn(n,"Received ACTION_MOVE while there are no DOWN stored");var u=e.createEmulatedMessage(o.default.ACTION_DOWN,r);s.push(u),i.set(c,u)}return s},e.createEmulatedMessage=function(e,t){var r=t.pointerId,i=t.position,n=t.buttons,a=t.pressure;return e===o.default.ACTION_UP&&(a=0),new s.TouchControlMessage(e,r,i,a,n)},e.mapTypeToAction=function(e){return this.EVENT_ACTION_MAP[e]},e.prototype.getTouch=function(t,r,i,n){var o=e.buildTouchOnClient(t,r);if(!o)return null;var s=o.client,a=o.touch,u=[a];if(!i)return this.multiTouchActive=!1,this.multiTouchCenter=void 0,this.multiTouchShift=!1,this.clearCanvas(),u;var h,d=a.position,f=a.action,p=a.buttons,_=d.point,v=d.screenSize,g=v.width,y=v.height,m=_.x,b=_.y;this.multiTouchActive||(n?(this.multiTouchCenter=_,this.multiTouchShift=!0):this.multiTouchCenter=new c.default(s.width/2,s.height/2)),this.multiTouchActive=!0;var S=!1;if(this.multiTouchShift&&this.multiTouchCenter){var E=2*this.multiTouchCenter.x-m,C=2*this.multiTouchCenter.y-b;h=new c.default(E,C),E<=g&&E>=0&&C<=y&&C>=0||(S=!0)}else h=new c.default(s.width-m,s.height-b),S=a.invalid;return h&&u.push({invalid:S,action:f,buttons:p,position:new l.default(h,v)}),u},e.prototype.drawCircle=function(e,t,r){e.beginPath(),e.arc(t.x,t.y,r,0,2*Math.PI,!0),e.stroke()},e.prototype.drawLine=function(t,r){this.ctx&&(this.ctx.save(),this.ctx.strokeStyle=e.STROKE_STYLE,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(r.x,r.y),this.ctx.stroke(),this.ctx.restore())},e.prototype.drawPoint=function(t,r,i){if(this.ctx){var n=this.ctx.lineWidth;e.pointImagesLoaded&&i?(r=i.width/2,n=0,this.ctx.drawImage(i,t.x-r,t.y-r)):this.drawCircle(this.ctx,t,r);var o=new c.default(t.x-r-n,t.y-r-n),s=new c.default(t.x+r+n,t.y+r+n);this.updateDirty(o,s)}},e.prototype.drawPointer=function(t){this.drawPoint(t,e.touchPointRadius,e.touchPointImage),this.multiTouchCenter&&this.drawLine(this.multiTouchCenter,t)},e.prototype.drawCenter=function(t){this.drawPoint(t,e.centerPointRadius,e.centerPointImage)},e.prototype.updateDirty=function(e,t){if(this.dirtyPlace.length){var r=this.dirtyPlace[0],i=this.dirtyPlace[1],n=new c.default(Math.min(r.x,e.x),Math.min(r.y,e.y)),o=new c.default(Math.max(i.x,t.x),Math.max(i.y,t.y));this.dirtyPlace.length=0,this.dirtyPlace.push(n,o)}else this.dirtyPlace.push(e,t)},e.prototype.clearCanvas=function(){var t=this.tag,r=t.clientWidth,i=t.clientHeight,n=this.ctx;if(n&&this.dirtyPlace.length){var o=this.dirtyPlace[0],s=this.dirtyPlace[1];this.dirtyPlace.length=0;var a=Math.max(o.x,0),c=Math.max(o.y,0),l=Math.min(r,s.x-a),u=Math.min(i,s.y-c);n.clearRect(a,c,l,u),n.strokeStyle=e.STROKE_STYLE}},e.prototype.formatTouchEvent=function(t,r,i){var a="".concat(f,"[formatTouchEvent]"),c=[],l=t.changedTouches;if(l&&l.length)for(var u=0,h=l.length;u<h;u++){var d=l[u],p=e.getPointerId(t.type,d.identifier);if(d.target===this.tag){var _=i.get(p),v={clientX:d.clientX,clientY:d.clientY,type:t.type,buttons:o.default.BUTTON_PRIMARY,target:t.target},g=e.buildTouchOnClient(v,r);if(g){var y=g.touch,m=y.action,b=y.buttons,S=y.position,E=y.invalid,C=1;if(m===o.default.ACTION_UP?C=0:"number"==typeof d.force&&(C=d.force),E)_&&(c.push(e.createEmulatedMessage(o.default.ACTION_UP,_)),i.delete(p));else{var w=new s.TouchControlMessage(m,p,S,C,b);c.push.apply(c,n.__spreadArray([],n.__read(e.validateMessage(t,w,i,"".concat(a,"[validate]"))),!1))}}else console.error(a,"Failed to format touch",d)}}else console.error(a,'No "touches"',t);return c},e.prototype.buildTouchEvent=function(t,r,i){var a=this,c="".concat(f,"[buildTouchEvent]"),l=this.getTouch(t,r,t.ctrlKey,t.shiftKey);if(!l)return[];var u=[],h=[];return this.clearCanvas(),l.forEach(function(r,a){var l=r.action,d=r.buttons,f=r.position,p=i.get(a);if(r.invalid)p&&h.push(p.position.point);else{var _=1;l===o.default.ACTION_UP&&(_=0);var v=new s.TouchControlMessage(l,a,f,_,d);u.push.apply(u,n.__spreadArray([],n.__read(e.validateMessage(t,v,i,"".concat(c,"[validate]"))),!1)),h.push(r.position.point)}}),this.multiTouchActive&&(this.multiTouchCenter&&this.drawCenter(this.multiTouchCenter),h.forEach(function(e){a.drawPointer(e)})),u.find(function(e){return e.action===o.default.ACTION_UP})&&i.size&&(console.warn(c,"Looks like one of Multi-touch pointers was not raised up"),i.forEach(function(t){u.push(e.createEmulatedMessage(o.default.ACTION_UP,t))}),i.clear()),u},e.prototype.release=function(){e.unbindListeners(this)},e.SIMULATE_MULTI_TOUCH="SIMULATE_MULTI_TOUCH",e.STROKE_STYLE="#00BEA4",e.EVENT_ACTION_MAP=((i={touchstart:o.default.ACTION_DOWN,touchend:o.default.ACTION_UP,touchmove:o.default.ACTION_MOVE,touchcancel:o.default.ACTION_UP,mousedown:o.default.ACTION_DOWN,mousemove:o.default.ACTION_MOVE,mouseup:o.default.ACTION_UP})[e.SIMULATE_MULTI_TOUCH]=-1,i),e.options=!!d.default.supportsPassive()&&{passive:!1},e.idToPointerMap=new Map,e.pointerToIdMap=new Map,e.touchPointRadius=10,e.centerPointRadius=5,e.pointImagesLoaded=!1,e.eventListeners=new Map,e.onInteractionEvent=function(t){var r=e.eventListeners.get(t.type);r&&r.forEach(function(e){e.onInteraction(t)})},e.onKeyEvent=function(t){var r=e.eventListeners.get(t.type);r&&r.forEach(function(e){e.onKey(t)})},e}();t.InteractionHandler=p},4110:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasCORS=void 0;let r=!1;try{r="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}t.hasCORS=r},4196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=i.__importDefault(r(6722)),o=i.__importDefault(r(8089)),s=function(){function e(e,t,r){this.contentRect=e,this.videoSize=t,this.deviceRotation=r}return e.fromBuffer=function(t){var r=t.readInt32BE(0),i=t.readInt32BE(4),s=t.readInt32BE(8),a=t.readInt32BE(12),c=t.readInt32BE(16),l=t.readInt32BE(20),u=t.readUInt8(24);return new e(new n.default(r,i,s,a),new o.default(c,l),u)},e.prototype.equals=function(e){return!!e&&this.contentRect.equals(e.contentRect)&&this.videoSize.equals(e.videoSize)&&this.deviceRotation===e.deviceRotation},e.prototype.toString=function(){return"ScreenInfo{contentRect=".concat(this.contentRect,", videoSize=").concat(this.videoSize,", deviceRotation=").concat(this.deviceRotation,"}")},e.BUFFER_LENGTH=25,e}();t.default=s},4410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Attribute=void 0,t.Attribute={COMMAND:"data-command",FULL_NAME:"data-full-name",NAME:"data-name",PID:"data-pid",UDID:"data-udid",URL:"data-url",USE_PROXY:"data-use-proxy",SECURE:"data-secure",HOSTNAME:"data-hostname",PORT:"data-port",PATHNAME:"data-pathname",VALUE:"data-value"}},4454:(e,t,r)=>{"use strict";function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}r.r(t),r.d(t,{Emitter:()=>i}),i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<i.length;n++)if((r=i[n])===t||r.fn===t){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){i=0;for(var n=(r=r.slice(0)).length;i<n;++i)r[i].apply(this,t)}return this},i.prototype.emitReserved=i.prototype.emit,i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},4455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635).__importDefault(r(9516)),n=function(){function e(e,t){this.point=e,this.screenSize=t}return e.prototype.equals=function(e){return this===e||null!==e&&this.point.equals(e.point)&&this.screenSize.equals(e.screenSize)},e.prototype.rotate=function(t){switch(t){case 1:return new e(new i.default(this.screenSize.height-this.point.y,this.point.x),this.screenSize.rotate());case 2:return new e(new i.default(this.screenSize.width-this.point.x,this.screenSize.height-this.point.y),this.screenSize);case 3:return new e(new i.default(this.point.y,this.screenSize.width-this.point.x),this.screenSize.rotate());default:return this}},e.prototype.toString=function(){return"Position{point=".concat(this.point,", screenSize=").concat(this.screenSize,"}")},e.prototype.toJSON=function(){return{point:this.point.toJSON(),screenSize:this.screenSize.toJSON()}},e}();t.default=n},4465:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><path style="fill:#000000" d="m 107.72824,97.71032 c 0.45166,-0.19661 1.1065,-0.7575 1.45521,-1.24642 0.63315,-0.88773 0.63411,-0.90038 0.70684,-9.3556 0.0672,-7.80929 0.0348,-8.53857 -0.41645,-9.39271 -0.66011,-1.24936 -2.38149,-2.11667 -4.20105,-2.11667 -1.11664,0 -1.44522,-0.10348 -1.67157,-0.52643 -0.91567,-1.71093 -4.894802,-1.73579 -5.804352,-0.0363 -0.20434,0.3818 -0.66801,0.51919 -2.097482,0.62146 -3.2905,0.23544 -4.270464,1.43324 -4.270464,5.21977 v 2.39439 h -1.45104 c -1.22901,0 -1.58324,0.11805 -2.3151,0.77149 l -0.86407,0.77149 -0.0909,2.98426 c -0.0789,2.59075 -0.0305,3.02843 0.36728,3.3193 0.32191,0.23538 0.60473,0.25662 0.95082,0.0714 0.42921,-0.22971 0.49262,-0.59884 0.49262,-2.86777 0,-1.89632 0.0996,-2.68682 0.36657,-2.90836 0.24933,-0.20692 1.62449,-0.28075 4.299484,-0.23083 l 3.932912,0.0734 0.072,5.12525 c 0.0507,3.60995 -0.0192,5.23514 -0.236522,5.49696 -0.24455,0.29466 -1.10954,0.35658 -4.17302,0.29871 l -3.864514,-0.073 -0.37848,-0.8599 c -0.26905,-0.61126 -0.55447,-0.85989 -0.98715,-0.85989 -1.40385,0 -0.8538,2.50163 0.73014,3.32072 0.66363,0.34318 1.57918,0.40401 5.044954,0.33521 l 4.234182,-0.0841 0.7714,-0.86407 0.7714,-0.86407 v -5.43293 c 0,-7.16685 -0.18863,-7.52331 -3.981192,-7.52331 h -1.83963 v -2.19008 c 0,-2.33513 0.32341,-3.18145 1.31482,-3.44071 0.49288,-0.12889 0.5376,-0.0169 0.54132,1.35608 0.002,0.82312 0.10018,1.64806 0.21768,1.83319 0.16356,0.25771 1.41844,0.31973 5.353754,0.26459 l 5.14013,-0.072 0.0782,-1.78594 c 0.043,-0.98227 0.14016,-1.78594 0.21584,-1.78594 0.31045,0 1.31506,0.64378 1.61574,1.03541 0.23659,0.30814 0.32456,2.55185 0.33073,8.43547 l 0.008,8.01568 -0.64943,0.64943 c -0.60226,0.60225 -0.84015,0.64943 -3.2749,0.64943 -2.90138,0 -3.51754,0.2715 -2.96389,1.306 0.2666,0.49815 0.52946,0.54517 2.99492,0.53573 1.66623,-0.006 3.01759,-0.14745 3.52387,-0.36784 z M 97.036358,78.46006 c -0.0794,-0.9549 -0.0601,-0.97706 0.92383,-1.05834 0.75985,-0.0628 1.02856,-0.21206 1.10177,-0.61217 0.16255,-0.88845 0.58723,-1.19063 1.673272,-1.19063 0.93784,0 1.07726,0.0905 1.42636,0.92604 0.31975,0.76526 0.52413,0.92605 1.17713,0.92605 0.74646,0 0.7902,0.059 0.7902,1.06601 v 1.06601 l -3.50573,-0.0738 -3.505722,-0.0738 z m -1.884862,13.38856 c 0.25238,-0.3041 0.2715,-0.53998 0.0697,-0.8599 -0.2212,-0.35066 -0.70517,-0.44084 -2.36591,-0.44084 -1.999314,0 -2.091624,0.0268 -2.177134,0.63154 -0.12303,0.87013 0.33501,1.0795 2.372014,1.0842 1.2809,0.003 1.84728,-0.1089 2.10132,-0.415 z m -0.009,-3.42919 c 0.64644,-0.77892 -0.009,-1.30129 -1.74594,-1.39213 -2.266064,-0.11848 -2.813404,0.0733 -2.712304,0.95012 0.0811,0.70328 0.12505,0.71999 2.092334,0.79492 1.59683,0.0608 2.08269,-0.0117 2.36591,-0.35291 z" id="path1-6-6"></path></svg>'},4480:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WT=void 0;const n=r(4689),o=r(4624),s=r(6376),a=(0,i(r(7833)).default)("engine.io-client:webtransport");class c extends n.Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{a("transport closed gracefully"),this.onClose()}).catch(e=>{a("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=(0,s.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),i=(0,s.createPacketEncoderStream)();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const n=()=>{r.read().then(({done:e,value:t})=>{e?a("session is closed"):(a("received chunk: %o",t),this.onPacket(t),n())}).catch(e=>{a("an error occurred while reading: %s",e)})};n();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;this._writer.write(r).then(()=>{i&&(0,o.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}t.WT=c},4504:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.ACTION_DOWN=0,e.ACTION_UP=1,e.ACTION_MOVE=2,e.BUTTON_PRIMARY=1,e.BUTTON_SECONDARY=2,e.BUTTON_TERTIARY=4,e}();t.default=r},4528:(e,t,r)=>{"use strict";function i(){return new Worker(r.p+"bundle.worker.js")}r.r(t),r.d(t,{default:()=>i})},4624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBinaryType=t.globalThisShim=t.nextTick=void 0,t.createCookieJar=function(){},t.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),t.globalThisShim="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),t.defaultBinaryType="arraybuffer"},4627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.Encoder=t.PacketType=t.protocol=void 0;const i=r(4454),n=r(4926),o=r(9133),s=(0,r(7833).default)("socket.io-parser"),a=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var c;function l(e){return"[object Object]"===Object.prototype.toString.call(e)}t.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(c=t.PacketType||(t.PacketType={})),t.Encoder=class{constructor(e){this.replacer=e}encode(e){return s("encoding packet %j",e),e.type!==c.EVENT&&e.type!==c.ACK||!(0,o.hasBinary)(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===c.EVENT?c.BINARY_EVENT:c.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==c.BINARY_EVENT&&e.type!==c.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),s("encoded %j as %s",e,t),t}encodeAsBinary(e){const t=(0,n.deconstructPacket)(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}};class u extends i.Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===c.BINARY_EVENT;r||t.type===c.BINARY_ACK?(t.type=r?c.EVENT:c.ACK,this.reconstructor=new h(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!(0,o.isBinary)(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===c[r.type])throw new Error("unknown packet type "+r.type);if(r.type===c.BINARY_EVENT||r.type===c.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const n=e.substring(i,t);if(n!=Number(n)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(n)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(i,t)}else r.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!u.isPayloadValid(r.type,i))throw new Error("invalid payload");r.data=i}return s("decoded %s as %j",e,r),r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case c.CONNECT:return l(t);case c.DISCONNECT:return void 0===t;case c.CONNECT_ERROR:return"string"==typeof t||l(t);case c.EVENT:case c.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===a.indexOf(t[0]));case c.ACK:case c.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}t.Decoder=u;class h{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=(0,n.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},4651:(e,t,r)=>{"use strict";r.r(t)},4689:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=t.TransportError=void 0;const n=r(6376),o=r(4454),s=r(5374),a=r(8661),c=(0,i(r(7833)).default)("engine.io-client:transport");class l extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}t.TransportError=l;class u extends o.Emitter{constructor(e){super(),this.writable=!1,(0,s.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new l(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):c("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=(0,n.decodePacket)(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=(0,a.encode)(e);return t.length?"?"+t:""}}t.Transport=u},4700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePerspective=void 0;var i=r(5003),n=i.Matrix.create;i.Matrix.Translation=function(e){var t;if(2===e.elements.length)return(t=i.Matrix.I(3)).elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t;if(3===e.elements.length)return(t=i.Matrix.I(4)).elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t;throw Error("Invalid length for Translation")},i.Matrix.prototype.flatten=function(){var e=[];if(0===this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var r=0;r<this.elements.length;r++)e.push(this.elements[r][t]);return e},i.Matrix.prototype.ensure4x4=function(){if(4===this.elements.length&&4===this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e===t?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0===e?this.elements.push([1,0,0,0]):1===e?this.elements.push([0,1,0,0]):2===e?this.elements.push([0,0,1,0]):3===e&&this.elements.push([0,0,0,1]);return this},i.Vector.prototype.flatten=function(){return this.elements},t.makePerspective=function(e,t,r,i){var o=r*Math.tan(e*Math.PI/360),s=-o;return function(e,t,r,i,o,s){return n([[2*o/(t-e),0,(t+e)/(t-e),0],[0,2*o/(i-r),(i+r)/(i-r),0],[0,0,-(s+o)/(s-o),-2*s*o/(s-o)],[0,0,-1,0]])}(s*t,o*t,s,o,r,i)}},4735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogMoreBox=void 0;var i=r(1635);r(4651);var n=r(8824),o=r(5600),s=r(5994),a=r(831),c=i.__importDefault(r(8089)),l=i.__importDefault(r(5444)),u=i.__importDefault(r(3644)),h=function(){function e(t,r,l){var h,d,f,p,_=this;this.player=r,this.client=l,this.onViewVideoResize=function(e){_.holder.style.width="".concat(e.width-20,"px")},this.onVideoSettings=function(e){if(_.bitrateInput&&(_.bitrateInput.value=e.bitrate.toString()),_.maxFpsInput&&(_.maxFpsInput.value=e.maxFps.toString()),_.iFrameIntervalInput&&(_.iFrameIntervalInput.value=e.iFrameInterval.toString()),e.bounds){var t=e.bounds,r=t.width,i=t.height;_.maxWidthInput&&(_.maxWidthInput.value=r.toString()),_.maxHeightInput&&(_.maxHeightInput.value=i.toString())}},this.fit=function(){var t=_.client.getMaxSize()||e.defaultSize,r=t.width,i=t.height;_.maxWidthInput&&(_.maxWidthInput.value=r.toString()),_.maxHeightInput&&(_.maxHeightInput.value=i.toString())},this.reset=function(){var e=_.player.getPreferredVideoSetting();_.onVideoSettings(e)};var v=r.getName(),g=r.getVideoSettings(),y=g.displayId,m=r.getPreferredVideoSetting(),b=document.createElement("div");b.className="more-box";var S=document.createElement("p");S.innerText="".concat(t," (").concat(v,")"),S.className="text-with-shadow",b.appendChild(S);var E=this.input=document.createElement("textarea");E.classList.add("text-area");var C=document.createElement("button");C.innerText="Enviar como teclas";var w=e.wrap("p",[E,C],b);C.onclick=function(){E.value&&l.sendMessage(new o.TextControlMessage(E.value))};var A=[],T=s.CommandControlMessage.Commands,O=function(n,h){var d,b,S,C,T,O=document.createElement("button");if(n===a.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS){var R=document.createElement("div"),D=document.createElement("label"),M=document.createElement("input"),x=document.createElement("div"),P="spoiler_video_".concat(t,"_").concat(v,"_").concat(y,"_").concat(n);R.className="spoiler",M.type="checkbox",M.id=P,D.htmlFor=P,D.innerText=h,x.className="box",R.appendChild(M),R.appendChild(D),R.appendChild(x);var I=document.createElement("label");I.innerText="Bitrate:",(d=document.createElement("input")).placeholder="".concat(m.bitrate," bps"),d.value=g.bitrate.toString(),e.wrap("div",[I,d],x),L.bitrateInput=d;var k=document.createElement("label");k.innerText="Max fps:",(b=document.createElement("input")).placeholder="".concat(m.maxFps," fps"),b.value=g.maxFps.toString(),e.wrap("div",[k,b],x),L.maxFpsInput=b;var B=document.createElement("label");B.innerText="I-Frame Interval:",(S=document.createElement("input")).placeholder="".concat(m.iFrameInterval," seconds"),S.value=g.iFrameInterval.toString(),e.wrap("div",[B,S],x),L.iFrameIntervalInput=S;var F=g.bounds||l.getMaxSize()||e.defaultSize,N=F.width,U=F.height,H=(null===(f=m.bounds)||void 0===f?void 0:f.width)||N,K=(null===(p=m.bounds)||void 0===p?void 0:p.height)||U,j=document.createElement("label");j.innerText="Max width:",(C=document.createElement("input")).placeholder="".concat(H," px"),C.value=N.toString(),e.wrap("div",[j,C],x),L.maxWidthInput=C;var Y=document.createElement("label");Y.innerText="Max height:",(T=document.createElement("input")).placeholder="".concat(K," px"),T.value=U.toString(),e.wrap("div",[Y,T],x),L.maxHeightInput=T,x.appendChild(O);var W=document.createElement("button");W.innerText="Fit",W.onclick=L.fit,x.insertBefore(W,x.firstChild);var V=document.createElement("button");V.innerText="Reset",V.onclick=L.reset,x.insertBefore(V,x.firstChild),A.push(R)}else n===s.CommandControlMessage.TYPE_SET_CLIPBOARD||n===s.CommandControlMessage.TYPE_GET_CLIPBOARD?w.appendChild(O):A.push(O);if(O.innerText=h,n===a.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS)O.onclick=function(){var e=parseInt(d.value,10),t=parseInt(b.value,10),i=parseInt(S.value,10);if(!isNaN(e)&&!isNaN(t)){var n=-16&parseInt(C.value,10),o=-16&parseInt(T.value,10),s=new c.default(n,o),a=r.getVideoSettings(),h=a.lockedVideoOrientation,f=a.sendFrameMeta,p=a.displayId,_=a.codecOptions,v=a.encoderName,g=new u.default({bounds:s,bitrate:e,maxFps:t,iFrameInterval:i,lockedVideoOrientation:h,sendFrameMeta:f,displayId:p,codecOptions:_,encoderName:v});l.sendNewVideoSetting(g)}};else if(n===s.CommandControlMessage.TYPE_SET_CLIPBOARD){var q=document.createElement("button");q.className="control-button",q.title="Abrir Portapapeles en Remoto(URL)";var z=document.createElement("img");z.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAABcCAYAAABk3jteAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADq9JREFUeJztXWuwHEd1/k5P98zu6mVZBslYNo9ESTAEOSExIS9bVkwFC4qE2BAnJBSpPIjLZRdUKhijgInjinn+AAq7wsMuU7ZJgnkkLoNxHAtwWbZ4GQowyMaWFCNbkhGSkLW7c2b75MfMSqu90z2zd2f2Afqqbt3d6Z7us/NNnz7dffo0iQh+FtDpdJ4dBMEmAL8N4PkAzgCwAoABcADAHhH5oVLqARH5ojHmAQBz+eNp3klLkmSjiFwJYAMAGuHWHwJ4rzHmYwC4FuFqwjyTtoKZrwfwp2OW8w1r7cVRFG2vQqhJYF5JW8HMdwH4zYrK22OtPSeKoh9UVF6tUNMWYDFg5g+gOsIAYLVS6mYAYYVl1oa5I42Z/wLAX9ZQ9IuZ+UYAy2oou1LMqnoMASzvdrvLAQRKqVUAfgXAywFchHIGRwdAOytryQh1HwBwG4CvEdG3mHlXs9ncixkyVqZOWrfbXaeUugDA2QBeCGAdgOYii4sBvMUYcyPSh99Hq9vtrlVKbQJwBYBnLqLsPQB2E9FOEdkJYKdSansQBPcD+PEi5V0UpkXaMmZ+A4A3Ih1TVQIieqvW+lpfnna7fboxZquInFZVvQC+QUSfjuP4hlartbvCcnMxadLCJEkuE5HNSAe+VWKfMea5AJ4uypj1izdVXD+QqtCPG2M2A3iqhvIBTJA0Zl4P4JNI+6bKQUSbtdbXlMzeYOb9WLwa9kJEnlRKXaS1vreO8idiPcZx/BoA96EmwgAc0Fp/aIT8HRH5Sk2ygIjWiMgXkyQ5p47yayctjuNXE9EtAFo1VvMPAA6OcoNS6lqk1mVdaIrIbUeOHHlW1QXXqh4zlfgAgKjkLT0AQYl8B5Fah7tE5PowDG9ZjHztdnut1vrVSK3W5wFYi3SiuTK1SUSf0lpfVFV5QL2kaWa+H8CLizKKyOeVUv/S6/VOUUp9zpP1Y8aYS5GOweqCSZLkzSLis0K/CWALgJcC+K2C8kREzgrD8NtVCVibesz6MS9hIvKEUmpTGIYXaK3vs9Z+s6DYf0O9hAEAa60/7MsgIu80xrzZGPNSAC8B4JuzJCL6myoFrI20EoLeFYbh+iAI7uhfaDabuwFY1w3W2p9UJV8BvCpaRB7qfzbGbGPm84joR578F2K0ZSMv6iJtKYDfcSWKyOeNMa8EsG8oqYfjZzKOg7W27lYGAGi320t96VEUHRr83mq1dmdrerkgojVxHL+wKvlqIY2Zz0S6YpwLEbkcQNeR7ByUikhvTNFKQWu9qiDLgnlIY8wt8MhORL82rlx91EKaiKzzJO+PouhhT/pE5/HyQETPKMiSN3mcALjTdUPBMxkJtZCmlFrjSX7Ud6+ITJ00a62PNIF7qmyb6yYiqow0XVVBg7DWriRy9rteY4KIfupJIwAr+987nc4KIlJZ2lIiMtnnJoBG9jns9Xr9pZmAiJYPFHfSgMwnITMWiOglHhGfRtr35sn3fc8QarZJI6KVnuQiC9A54au1fpz5mGYKgnwjb/DBiQhcL9BgPs9LdhyIyDnzYq3d5SmnSOWWRl3WY8OTtr/g3iNVClI1RMRJWhiGPtVe2TReXaQ5W7CIOE36LP1w9eJUiic9aT4tMr+kKaW86lEpVbgeNmV8z5OWZH95aKCiAfY0WppX/YnILJNmieizBXlcviSEiiai6zJEtMeKigtu/xIRXTF4wVq7FEOD9czyG3xzNRENe1I1RKToQbWQvrx9tSxEdAAARKQrIk8S0Y9EZLe19oFGo7GzoDyGm5xKnnctpBWU6yXNGPMggAerFWeiqN0VoBb1aK31qceilnYCBRiHNF9r8qXNjP/gvGKxpD2Dmb+aeTUtABEtWj2eQDEWQ9opzPw/AM4CcEMcx3+Wk8dJWhAEJ0gbE6OStpKZvwDgRdn3gIhuiuP4dUP5nOORE33a+BiFtFOY+R4sdCEIiOjGOI4HnVecq884oR7HRlmTv9/C1jvSDxHR4JKLjzTXjMG8YAn8W6KcWqbT6ZzUaDTyZrlHcqMoQ9rKbAOfy0nnAICXGWO+PnDNOVaZ1OrzItGK4/gVRPS7SF/QZwFYhdR9wrkSXxZBEOwcXKUYgkW68v0dEdna6/WuazabuX4nRS50ZQg73xjztcGL2T1/4LjnbGPMV32VTgFB5ja3GcDywtyTQVdE3heG4dsxtH7n69NOZub/hZuw/QDOGyYsg+9NmLUNcYqZbxaRd2N2CAOAiIiuZOY7kbb2o3CRtiLrw85ypB8A8IfGmFw/RfE3X19/N3Ew8+UAXjttOTzYyMzbut3u0ZXvPNKWZ+y69jT3+zCfivMRM0strQXgn6YtRAk8j4i+zMy/DiwkbQkz/zdSr9k8lCEMmBPSmPliDPiczDKIaA2Ae5Ik+b1B0lrMfDuA33fcV5YwwG89zox6JKJN05ZhRCwXkT/qW4/NjLDzPDccRHmfxDVwLK8T0eMVzIpca4z5yJhlEDM/BeDknLT7iOi/MteI/gsYDy7QKqUO4ZhVl4jIcV5kIvJ03u8kopCIlmSfl/d6vaVKqVOJ6FQR+UUAFzhk6uM6DSBi5s/BTxiQbrcde8utiKwdt4xB17fFot1un6a1dj2cbVrrd41bRxlovWCovJqZH4JbbTcUM78bwPm1SjaDMMac6UoTkWnO2uwB4NvuFSkAb5iQMDMFEXm2J3naU21Ou4GIIgXgDleGn2UQ0WpP8lSn2ojI6fFlrW0qY8zfAahsl+K8QER8pE21pVlrnQYfETU0gIPGmPOzZRennkc69hr0rhU49pIR0SoRyTVaRGQrEY3lJmet3THO/Rmce9CUUlNtaUmS/NgY5/x01Ddd9hpjNhQQRwD+0Rjz0aJKmflWOOIwisjrwzD0bXWaCIhoiWe2rUxLC7OQE78hIi9AOsxZjeOHOn03v8MAnkAa2edWrfWXfQW3Wq0DntWAxqC9udcYcx4zb0F+vA8CcH0cx4fDMPxkwQ+amQG0C9balmezhK+lhXEcv42ILkNKShmsBHA6gLNF5I3MfIkx5jpPft84tjE8jbUnSZKXwb2HLCCim7rd7isLhPT96JmYxiIin2+9s6Ux8/uJ6O0oT1ge/r4gvQf3c1pAGprN5v/1er0NAHY4bjJKqU/1er2XF1Q663CGEywYp51bQd1FmzEE7mcY5i7NNBqNXdba8z079kNr7X96wgjNvHqE/8H5XrovjFuxiJQJu5vbqYmIcS6CRlH0SK/X2+AhbomI3JEkyYactHloaT4ff2dLM8ZcBWDrGPVaIvr3Evlcu02N10ckiqKHu93uhiAI7nHER2yJyO1JkrxCa31PUYUZZqJPg3/V3if/YWPMuXEc/wkRbRSR07O50GGHnZ8Q0eFsv91hEXmKiHZZa79UMjK5SwY/acBIxG3SWm/Jrs2DevSRVmTyx2EY3grg1grlGYbrGbrV4yCiKHq41+ttJCJX1NAW0jhRRRUCc9DSpjxh3IezpZV2Vo2i6AdZH7eAOCK6Smv9ryUqnBmQf2f8LJNmR3ILj6Jou7V2o4g80b9GRO/QWr+zZIWzBB9psyC/KxZle+QNGGEYfl9EziWi3VkL++fhPLPkUuCCtd4XdhZaWm7IJhE5sqidoJn18yK43Q9m4U0tgm+TyNTlF5G9eRqciA6Ps33X5y8y9R9dhH6knzxorctoipCZ11trT1VKrR3c722tXaaUijEQtE1EDimldjHz9xqNxmMl5Hs877qIbK9rz/XMkwZ/n+YjLWDm9yBd8T9JqZT74eg/eSsI1loEQSDMfJkxxhsoW0TuIqK/XSA00WfrCknh/NEF3sczAV+fzMyXAHgTFj9hTAD+uihTGIafBnDDoFgAPmKMuaGWlqaU6s0BNz74WtqrKii/TARxa4z5qziO34PUPf/bYRh+F6gvJMXMW48F8Mn/IICNY5Zf+nSMMAwfAvDQ4LW61OM89Gk+ONWEMeZqjDdh3Mm2VC0adbU038rrPOhNX0s7aIw5J9t8eAGAX0K6Kt3v45YhtRpjpD40MVLfmh1E9PUkSf6j0WjsGEe4WkgTkYkEiK4RReqdwzD8DIDPjFpwjkfxyKhLPc50zMYSmOk+ua7A076WNg/qsczRKVNDXS2tzoN3JoGxN8XXibqihc81aUQ006fwTqOlzbx67PV6P38tTUTmuqXh51E9niCtXpwgLQc5YXWngjiOnx/H8Z3MfJCZH2PmS4GaBtdRFO3zbCCYeZQ4a6Z2tNvt04IguJuITs0uLQfwwSRJHqnLEPkpHGd0KqUqPQCuDojIKdOWQWt9zQBhRyEir6nzINfcqNpEtDmO46tqrLcKTLWldbvdXwAwHEMTAEBEJ9dJ2v2uBCJ6RxzHV6PC0/sqxi9Ps3Kl1GVwzMqIyN7aSBMR51liQNrimPkT8J9LMy2cFcfxr06p7hXwBy/4Vp2n7wZZPAzvEVREtNta+wkA25RSTyZJ8kSj0TiAtF+szZWNmffCrwbbRHQ7gO9aa7crpfaJyCEAPRFpD8+vElGUs+dNDzv84Jjxd1waES0FYERkPYCLHTL1jDFraz3nOkmSc0XkblQ3tOgTeRjpVqD+/6eRrlc9AuArWut7UUB4kiRvKTgWeeZARLdprS+slTQASJLkShG5ptZKFmIHgAuHor0uADN/EMClE5FofHSstS+IoujROg0RAEDm43993fUM4TkicnVRJmPM5UR02yQEGhdE9LYoih4FajznegBijLlERCYSa6qPkisNVmv9OgD31i3PmPiA1vr9/S+TIA0AJAzDK0TktXAMuquGtfbmklk7xphXwX8u2rQgIvIuY8ybBi/W3qfl4JnMfCWAPwZwRk11bDHGbMQIbgOdTucMrfVWESnjkzgJ3EdEb82LOTIN0o6i2+2uI6IzlVLrROS5RLRaRFYhDbS8BMfC54VYGI2gi2O+KPsB7COivSJydxagZmQ/lWxs9ueDp/cCUER0NPqQtXbZwFk6EY7fcJ8X7m9BeHgR6RJRX76DADoAdorIY0T0qLV2SxRFj7jk/H9LQr7fNC5OoAAAAABJRU5ErkJggg==",q.appendChild(z),q.addEventListener("mousedown",function(){return i.__awaiter(_,void 0,void 0,function(){var e,t,r,n,s,a;return i.__generator(this,function(i){switch(i.label){case 0:return e=location.hash.replace(/^#!/,""),t=new URLSearchParams(e),r=t.get("udid"),n=null==t.get("ips")?"172.20.50.123:7000":t.get("ips"),console.log("uuid",r),console.log("ips",n),[4,navigator.clipboard.readText()];case 1:return s=i.sent(),E.value=s,console.log("clipboard",s),s.includes("http")?(a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{devices:r,action:"adb",data:{command:"am start -a android.intent.action.VIEW -d "+s}}})},fetch("http://"+n+"/adb",a)):l.sendMessage(new o.TextControlMessage(E.value)),[2]}})})}),setTimeout(function(){document.getElementsByClassName("control-wrapper")[0].appendChild(q)},1e3),O.onclick=function(){var e=E.value;e&&l.sendMessage(s.CommandControlMessage.createSetClipboardCommand(e))}}else{if(n===s.CommandControlMessage.TYPE_GET_CLIPBOARD){var G=document.createElement("button");G.className="control-button",G.title="Abrir Portapapeles en Navegador(URL)";var X=document.createElement("img");X.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAABcCAYAAABk3jteAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADs9JREFUeJztnX/QXFV5x7/P2XPO7ksgBgUk0PKjgpaKQa0FUn8A4Ye1RWwdscqgI0qc2h842qmDlo5UwYA6I+1InemUcdAijiiCmgaGUOtMEK10MPJbUsEkGCNNSCB5d/c+d8/TP+7dN/vuu+fcu7v37t4d+PwDuefec553v/f8fs5zSUQwo1Acx6cDOM85dyoRnQDgpQBeBIAB7AWwFcAjAO6J4/h7c3Nz26ZnbnHQDIpmmflSAH8L4HeGeM4B+D4RXa21/n45pk2GmRKt3W6/Qin1dQCvHjOrm4wxfwng2QLMmjgzI1oURScR0X8BOKKgLH9sjDkPMyicmrYBObFE9O8oTjAAOI2Z/6nA/CbGLIi2nJlvBPDaEvJ+XxRFF5eQb6lUrXk0zWbzpcaYY0RkFYDXAXgHkhFhXvYDiADMAWjkuF8A3AJgA4BHnXO7AHTq9fqzSJrOaJg/YBJMQ7TDOp3Oac65lwM4loiOE5FjAByFZMg+LDsBXOOc+496vb4dwHxP2qFxHF8iItcAMCPa2wTwOIAHAfy3c259vV7fMmJehTAR0ebn54+y1r5fRN4O4DVF5UtE25l59dzc3PbQfXEcf1xEPlNUuQAeBvAlY8yNAJ4rMN9clC3a4cx8NYD3YfQ33YuIXGytvSnHrcuY+UkAhxVswh4iukpr/c9IJvQToTTR4jh+k4h8A6M1eXmYN8a8GEA7pz1/LyJXlWTLIyLy59baB0rKfxGljB7jOD5LRO5EeYJBRDYhp2AAoLW+HsnSVhmcRET3RlH0jpLyX0ThojWbzaNF5JvIN3IblXml1Lohn9kD4GNlGJOyjIhujqLoT0ssA0AJzWMcx7eKyJ8VmGUTycLvdgC/APBAHMe3zs3NPTVKZlEUXUxEHwRwDIAVyDed6ACo5SyiJSKnltlUFioaM78GwP8AoIxbfwTgXgBrAJziNY7o77TW1wGICzNyKQ1m/hcAl/hucM5dUKvVdjvnriCiP8qR533GmNUoye6im8e1CAv2KIBTjTGrjTEfFZErQ5lprb+EcgUDgBaAfw3d4Jy7X2t9j7X2LUqp80Xk1xl5vi6KoguLM3ExRYqmkKxe+NhmjFljjPlJz7VHM/LU45uVjXNudyh5bm5uR/cftVptvbX2FAB3h/IkokuLsq+fwkRj5lUADveli8gnAOzovWatDY7mms3mIcVYF0ZEWoHkZ5D0ab38xhhzvohsCDz3BgDLxjZuAEXWtNAe19PW2psHXA9OSLXWLxnPpHw450JN8C7P9ZaIfCTwnGXm3x3DLC+FiSYiJwaS78DStxXIWIwlIm/NnSA+0VCv1x9DYO4nIieUYVBhoimlQqL9xHN9P5JV9oE456Yumoh4RUv5hS+BiI4s2BwABXb0oZpGRL4BRweJcAd7nvtgFEXdKYEopfb0lLcHqeAi8myaF2q12n4R6dbglog003tYRPal/+8ajcbennK8I14iyloQfsaXICIvznh2JAoTjYgO9835Op3OVq0HF0VEz4rIQNEAnElEZ3b/4cu/9zd3znnv6b2P+UB36rMtZX8okYh2B+wqRbQi+7SDfGn1ev3pwHNV99EIiiYi3poGoF6wLQCKHT3Oea4Lwgu1OwJpU0dExhGt8O0ooDjRFPxvVYzBI8cujxRkQykopYKiKaVCopWyOFCUaA34l6+CczEi+jYSR9JKkqOmzQeSSxGtqExD+QTXDrXWG1ut1suUUqcR0UoROZqIjiSiOgCIyAoceCEORiJw6IcCETWRrCkuICLP9dki6Qi0F1ZK7et77gehshCYaxJRpUULkbmN0Gg0ngTwZOmWlEOoJcm7nTMUs+D3WHVColW6T3ve0jORX4JzLiTayIK+INr4DN2nRVH0Tma+H8BIy1wviDYmtVottOi9ZJ4WRdFFRPQ1ACcz850Ywa3vBdHGRERy+ztGUXQhEd2IAwOUVcx8N4YU7gXRxidU0xZGzqlgN2NpX7aKmTdiCOFG6QwP7b/QarUOqdW8o1sa9EwPETLW9ypOqKYtiEZEP0eyIzBInFOY+W5jzNkA/i+rQK9ozWbzt2q12oeI6HQAJ6eFDayZAcGA5KhSyAejFwawD8nG41MAfiYim6y130PGhHqKhJboFlZ6jDGbmfkcAL5atYqZNxpjzkGGcINc6HQURZ8moo+gpFXqEdhLRJ/WWn8BFVvyYubTkbgDDuKu9LRp7/1dpyCfK8XmLOH6a85LmPkOIroc1REMAF4kIp9n5q+iev2w9yUSkSVpxpjNAM4F4Gt9TmHmuwB49+IWfoBWq3UcM98D4Ozc5k6ei5j5r6dtRB+hZbqBghpj7kfyO/tcGV6djioHCqcAIIqiV2mtNwF4RX5bp8Y/oiTXtBEJieZNM8b8FMA5CAt3FwYM4lQcx28kok0icvRQpk6PFcxcmvfuCIT62OBieQ7hXsvM6wEs8v9U6WGJ5cNYOW2I6I+nbUMPXmGUUpmDphzCrWbmDehxftLIPpK0C8AGItoiIjuccztqtdq+rm+HiOwftGhKRJaIlvVdOwQHphk159zynrRlAOyBf9IKEbkAwB/25y0iZ2XYnAtmXgvg8nHyICLrc+wRkbOZ+X9zZhWaM7+emW83xpwPoJkl2m5jzCuRHEafOMx8JAaIhmSesxJj+pekL8YwoZqWkHHq6CAMFwoqxJooim6z1r415NsBALdjSoIBgIh4d73jOD5pkrZUASI6j5k/q4goVNN+PDGLBuNdbRCRYydpSIV4v3LOeUULeAZPCm9NI6KVkzSkQqwP1rQ0es008YomIqUdwq8wPzPG/IVGoE+z1k5VNKVUJ9DR+1zJc+Oce5KINo6Th4gsI6LVg9KIaG/gAEevlxmQnP0OLdE9lK5J7s0aPfa7mC0hjRfybiQBx1Yi+TGl79l5JAOaXxPRQwDu01r/ANlxp0Lud2Ovilhrb0ESF2tk2u32iem2yxJEZIMx5t1ZeTDzewF8OXDL48aYcwE8DWTP04K7ssz8VwC+6EnuXzc7GTgwRGbmPUR0ndZ6HfzieQciROQ9O1AhQts2AIAoit5ORDfAX8u2xHF8ljFmYXqj4BdNkH1I/UNZRgVYISJXMvPnAveE+rSqiDb0gnGXOI7fnPqL+CbWWzudzrn94TcUDqxCLMkzVGBKEQFevKsboXkaqrVo7MNb0+I4PltEboN/TLHNOXdW6si7iLFEE5GBbfkwiMgdgeRQ81KVmhZioP1xHJ8hIrfD89IT0VPOuTX1en3gKVMF/3GczPaYiL6O8XaS77XWfiqQHnpxfEerqsSS3zCO49eLyHfhbyl2OufODcWU1PCLllnTjDFfabfbP1JKnSkiv01EhwE4mIgOTk939u8FdURkDxFtE5GN1tpbER5Bhl6cquxgh/q0Rfangm1A31ZLDztFZI21Nnj8KzRPy6xpAFCv138OYOxmcgQbskI5TYqQHQv2DyHYw1kFKvhHLrlEK5MMR9BSTqSMQN7R45vgEYyIfuWcOyOPYEAi2sA+SUSmLhpmo6aFWLBfa70udZjqp9uHPZY3UwWPP2F6MG/ahBaMK9+n9b/4WutrieiTPek7ROTMvDWsi0IST3EQ3ogEE2QWalquPq2L1vpTaY3bCeAca+3QOykKnmjXIpLpnlw2ocm1c27W+rQFtNbXGmNeOWwNW3heRLakn7FaBBHl+mxVq9U63hjze865Y1MfkC5155xVSi28FCLynHNuu1JqR+q0GVww1lq7QDCXqtS0EKGWYuQdFJ1GF1gSLTQNHB2EmS+r1WrXOecofWZROhEtuaaU6j77DIAvG2M+Bv8fF5q4V6VPC1HKYE4ZY24A8G9YXM1vsNZ+J8fzH8DofcuhAD7KzKFF50p9U2UQEtjwU0qVIxqAjjFmrYisEpGLROQkY8ylyLc8VYSD6wW+hEG+8DNGKfYvTKyttQ8i+Z7KMOyC//RHLkRkcyh5nLwrQGk1bWRE5AoM8UGDAfzQWhv6KsWs17RSRBsrzoW19pZWq3Wf1vpCEfl9AMch8XWwSHwgLJK1ze4I8hkA2wA8LiLrrbXrkfMkZYUJTa5L+YzX2MFJGo3GEwA+W4Atg5gF0UIDsVJWlao+bJ6F5jH0YoWikI9M1UWbSFz+ssiIUDcylRaNiEoJcjkparXa8695jON4pkXrBr0umkqLNiM1LdSnPf9EQ0kxgCdFxudQRqbqos36QKS8msbMH2bmJ5h5bxRFd0ZRVIkDe31bPVUl9AWPcmpap9M5H8B1SFYzlhPReQDunp+fP6qMAochdcmbWRqNRim7/8o5967+i0S00hhzdRkFDoOITP1bM1kopdZ6knajpEBtKo3GPYj3tNvtl5VR6BBUWrQoiq4kois8yb8sq1xFRL/xpNWUUpeVVXBOqhpBiNKgb58M3FPaeXUF4KeB9EuQ7+u0hRNF0asArJpG2RnMMfNNgRoGIJ+7xqjQ/Pz80VrrrfAP/28mos0AFj5llRrV+3GCuN+BB30+iyIyLyKL9t6IqEFEcwBqRLTcOXe4UurlAE4WkT9B+JDF08aYI/L+oSOgARzSarVWaK1XOueOBHAagPfkOKT/WBp/pZT9NBIRxHF8m4i8rYwCyoKILtdaX5txm47j+I0A3pB+3+1YJKdVDJJjxt3/avh97IfFEdGa9HhyKZCIoN1un6CUehDVivEY4ovGmL8J3cDMfwDgG0imMhODiD6utb6mzDIUANTr9S1E9A9lFlQURPQtY8yHs+4TkaswYcEAXF+2YEBPP6a1/hyA68sucEw2aa0vRo7NUaXURM8iiMi6rNpfFIsGH8aYy0Tk86jmNv/Dxpi3IedusHPuqyXb02WviLzTWvsJTOh3GxR4unsmeB2AgUFNJg0R/SqO49WNRmPrEI8pZv5PAGeUZNYvAdxmjPkMAN9ctxQGital3W6fmB7NPZ6Ijkcy+ppDGtRTRA7qfuesh26Y9n56v+g3j9T1TkT6pwt7caD563499yZr7QPD/WkAgIOYeS0RrRGRI5CssHTjm/TGl+yyH8n5gm7wmn0AdhPRLhHZSURPOOceF5GHQmeiy+b/AdfL6zdXr7IuAAAAAElFTkSuQmCC",G.appendChild(X),G.addEventListener("mousedown",function(){return i.__awaiter(_,void 0,void 0,function(){return i.__generator(this,function(e){return l.sendMessage(new s.CommandControlMessage(n)),[2]})})}),setTimeout(function(){document.getElementsByClassName("control-wrapper")[0].appendChild(G)},1e3)}O.onclick=function(){l.sendMessage(new s.CommandControlMessage(n))}}},L=this;try{for(var R=i.__values(T.entries()),D=R.next();!D.done;D=R.next()){var M=i.__read(D.value,2);O(M[0],M[1])}}catch(e){h={error:e}}finally{try{D&&!D.done&&(d=R.return)&&d.call(R)}finally{if(h)throw h.error}}e.wrap("p",A,b);var x="screen_power_mode_".concat(t,"_").concat(v,"_").concat(y),P=document.createElement("label");P.style.display="none";var I="Mode",k="Ahorro de energía",B=document.createElement("input");B.type="checkbox";var F=(B.checked=!1)?"ON":"OFF";B.id=P.htmlFor=x,P.innerText="".concat(I," ").concat(F),B.onchange=function(){F=B.checked?"ON":"OFF",P.innerText="".concat(I," ").concat(F),N.innerText="".concat(k," ").concat(F)};var N=document.createElement("button");N.innerText="".concat(k," ").concat(F),N.onclick=function(){var e=s.CommandControlMessage.createSetScreenPowerModeCommand(B.checked);l.sendMessage(e)},e.wrap("p",[B,P,N],b,["flex-center"]);var U="show_video_quality_".concat(t,"_").concat(v,"_").concat(y),H=document.createElement("label"),K=document.createElement("input");K.type="checkbox",K.checked=n.BasePlayer.DEFAULT_SHOW_QUALITY_STATS,K.id=U,H.htmlFor=U,H.innerText="Ver stats",e.wrap("p",[K,H],b,["flex-center"]),K.onchange=function(){r.setShowQualityStats(K.checked)};var j=document.createElement("button");j.innerText="Desconectar",j.onclick=function(e){e&&e instanceof Event&&"error"===e.type&&console.error("[GoogMoreBox]",e);var t=b.parentElement;t&&t.removeChild(b),r.off("video-view-resize",_.onViewVideoResize),_.onStop&&(_.onStop(),delete _.onStop)},e.wrap("p",[j],b),r.on("video-view-resize",this.onViewVideoResize),r.on("video-settings",this.onVideoSettings),this.holder=b}return e.prototype.OnDeviceMessage=function(e){e.type===l.default.TYPE_CLIPBOARD&&(this.input.value=e.getText(),this.input.select(),window.open(e.getText(),"_blank"),console.log("OnDeviceMessage.text",e.getText()),document.execCommand("copy"))},e.wrap=function(e,t,r,n){var o,s=document.createElement(e);return n&&(o=s.classList).add.apply(o,i.__spreadArray([],i.__read(n),!1)),t.forEach(function(e){s.appendChild(e)}),r.appendChild(s),s},e.prototype.getHolderElement=function(){return this.holder},e.prototype.setOnStop=function(e){this.onStop=e},e.defaultSize=new c.default(360,806),e}();t.GoogMoreBox=h},4746:e=>{Math.sign=function(e){return e<0?-1:1},e.exports={precision:1e-6,approxPrecision:1e-5}},4799:e=>{e.exports='<svg viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>Artboard 1</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g id="Artboard-1" sketch:type="MSArtboardGroup"><g id="System_Back" sketch:type="MSLayerGroup"><g id="Page-1" sketch:type="MSShapeGroup"><g id="System_Back"><g id="Rectangle-118-+-back-12-Copy-11"><rect id="Rectangle-118" x="0" y="0" width="48" height="48"></rect><path d="M36.7088473,10.9494765 L36.7088478,37.6349688 C36.7088478,39.4039498 35.4820844,40.0949115 33.9646508,39.1757647 L12.1373795,25.9544497 C10.6218013,25.0364267 10.6199459,23.5491414 12.1373794,22.6299946 L33.9646503,9.40868054 C35.4802284,8.49065763 36.7088473,9.16835511 36.7088473,10.9494765 Z M33.5088482,13.4305237 L33.5088482,35.1305245 L15.5088482,24.2805241 L33.5088482,13.4305237 Z" id="Shape" fill="var(--svg-button-fill)"></path></g></g></g></g></g></g></svg>'},4900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635).__importDefault(r(3146));t.default=function(e,t){if(!e)throw(0,i.default)(t),new Error(t)}},4926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reconstructPacket=t.deconstructPacket=void 0;const i=r(9133);function n(e,t){if(!e)return e;if((0,i.isBinary)(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=n(e[i],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=n(e[i],t));return r}return e}function o(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=o(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=o(e[r],t));return e}t.deconstructPacket=function(e){const t=[],r=e.data,i=e;return i.data=n(r,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=o(e.data,t),delete e.attachments,e}},4956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebTransport=t.WebSocket=t.NodeWebSocket=t.XHR=t.NodeXHR=t.Fetch=t.nextTick=t.parse=t.installTimerFunctions=t.transports=t.TransportError=t.Transport=t.protocol=t.SocketWithUpgrade=t.SocketWithoutUpgrade=t.Socket=void 0;const i=r(8223);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i.Socket}});var n=r(8223);Object.defineProperty(t,"SocketWithoutUpgrade",{enumerable:!0,get:function(){return n.SocketWithoutUpgrade}}),Object.defineProperty(t,"SocketWithUpgrade",{enumerable:!0,get:function(){return n.SocketWithUpgrade}}),t.protocol=i.Socket.protocol;var o=r(4689);Object.defineProperty(t,"Transport",{enumerable:!0,get:function(){return o.Transport}}),Object.defineProperty(t,"TransportError",{enumerable:!0,get:function(){return o.TransportError}});var s=r(9419);Object.defineProperty(t,"transports",{enumerable:!0,get:function(){return s.transports}});var a=r(5374);Object.defineProperty(t,"installTimerFunctions",{enumerable:!0,get:function(){return a.installTimerFunctions}});var c=r(1015);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return c.parse}});var l=r(4624);Object.defineProperty(t,"nextTick",{enumerable:!0,get:function(){return l.nextTick}});var u=r(8209);Object.defineProperty(t,"Fetch",{enumerable:!0,get:function(){return u.Fetch}});var h=r(2071);Object.defineProperty(t,"NodeXHR",{enumerable:!0,get:function(){return h.XHR}});var d=r(2071);Object.defineProperty(t,"XHR",{enumerable:!0,get:function(){return d.XHR}});var f=r(8716);Object.defineProperty(t,"NodeWebSocket",{enumerable:!0,get:function(){return f.WS}});var p=r(8716);Object.defineProperty(t,"WebSocket",{enumerable:!0,get:function(){return p.WS}});var _=r(4480);Object.defineProperty(t,"WebTransport",{enumerable:!0,get:function(){return _.WT}})},4968:e=>{"use strict";e.exports=fs},4989:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635).__importDefault(r(4900)),n=function(){function e(e,t,r){this.gl=e,this.size=t,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),this.format=r||e.LUMINANCE,t&&e.texImage2D(e.TEXTURE_2D,0,this.format,t.w,t.h,0,this.format,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),this.textureIDs=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2]}return e.create=function(t,r){return new e(t,void 0,r)},e.prototype.fill=function(e,t,r,n){if(void 0===r||void 0===n){if(!this.size)return;r=this.size.w,n=this.size.h}var o=this.gl;(0,i.default)(e.length>=r*n,"Texture size mismatch, data:"+e.length+", texture: "+r*n),o.bindTexture(o.TEXTURE_2D,this.texture),t?o.texSubImage2D(o.TEXTURE_2D,0,0,0,r,n,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,r,n,0,this.format,o.UNSIGNED_BYTE,e)},e.prototype.image2dBuffer=function(e,t,r){this.fill(e,!1,t,r)},e.prototype.bind=function(e,t,r){var i=this.gl;t.program&&(i.activeTexture(this.textureIDs[e]),i.bindTexture(i.TEXTURE_2D,this.texture),i.uniform1i(i.getUniformLocation(t.program,r),e))},e}();t.default=n},5003:(e,t,r)=>{var i=Function("return this")();t.Vector=r(2308),i.$V=t.Vector.create,t.Matrix=r(2122),i.$M=t.Matrix.create,t.Line=r(8941),i.$L=t.Line.create,t.Plane=r(941),i.$P=t.Plane.create,t.Line.Segment=r(3086),t.Sylvester=r(4746)},5258:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635).__importDefault(r(8806)),n="[DragAndPushLogger]",o=function(){function e(t){var r=this;if(this.ctx=null,this.timeoutMap=new Map,this.dirtyMap=new Map,this.pushLineMap=new Map,this.linePushMap=new Map,this.dirtyLines=[],this.cleanDirtyLine=function(t){if(r.ctx){var i=e.X,n=e.Y,o=e.HEIGHT,s=i,a=n+o*t*2,c=r.dirtyMap.get(t);if(c){var l=e.HEIGHT/2,u=2*l;r.ctx.clearRect(s-l,a-o-l,c+u,o+u)}r.dirtyLines[t]=!1}},t instanceof HTMLCanvasElement){var i=t;this.ctx=i.getContext("2d")}}return e.prototype.logText=function(t,r,i,o){var s=this;if(void 0===i&&(i=!1),void 0===o&&(o=!1),this.ctx){o&&console.error(n,t),this.cleanDirtyLine(r);var a=e.X,c=e.Y,l=e.HEIGHT,u=a,h=c+l*r*2;this.ctx.save(),this.ctx.font="".concat(l,"px monospace");var d=this.ctx.measureText(t),f=Math.abs(d.actualBoundingBoxLeft)+Math.abs(d.actualBoundingBoxRight);this.dirtyMap.set(r,f),this.ctx.fillStyle=e.LOG_BACKGROUND;var p=e.HEIGHT/2-1,_=2*p;if(this.ctx.fillRect(u-p,h-l-p,f+_,l+_),this.ctx.fillStyle=o?e.ERROR_COLOR:e.DEBUG_COLOR,this.ctx.fillText(t,u,h),this.ctx.restore(),i){this.dirtyLines[r]=!0;var v=this.timeoutMap.get(r);v&&clearTimeout(v),v=window.setTimeout(function(){s.cleanDirtyLine(r);var e=s.linePushMap.get(r);"string"==typeof e&&(s.linePushMap.delete(r),s.pushLineMap.delete(e))},5e3),this.timeoutMap.set(r,v)}}else o?console.error(n,t):console.log(n,t)},e.prototype.onDragEnter=function(){return this.logText("Drop APK files here",1),!0},e.prototype.onDragLeave=function(){return this.cleanDirtyLine(1),!0},e.prototype.onDrop=function(){return this.cleanDirtyLine(1),!0},e.prototype.onError=function(e){var t="string"==typeof e?e:e.message;this.logText(t,1,!0)},e.prototype.onFilePushUpdate=function(e){var t=e.pushId,r=e.message,n=e.fileName,o=e.error,s="".concat(t,"/").concat(n),a="".concat(i.default.REQUEST_NEW_PUSH_ID,"/").concat(n),c=this.pushLineMap.get(s),l=!1;if(void 0===c&&s!==a&&void 0!==(c=this.pushLineMap.get(a))&&(this.pushLineMap.delete(a),l=!0),void 0===c){for(c=2;this.dirtyLines[c];)c++;l=!0}l&&(this.pushLineMap.set(s,c),this.linePushMap.set(c,s)),this.logText('Upload "'.concat(n,'": ').concat(r),c,!0,o)},e.X=20,e.Y=40,e.HEIGHT=12,e.LOG_BACKGROUND="rgba(0,0,0, 0.5)",e.DEBUG_COLOR="hsl(136, 85%,50%)",e.ERROR_COLOR="hsl(336,85%,50%)",e}();t.default=o},5374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pick=function(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})},t.installTimerFunctions=function(e,t){t.useNativeTimers?(e.setTimeoutFn=n.bind(i.globalThisShim),e.clearTimeoutFn=o.bind(i.globalThisShim)):(e.setTimeoutFn=i.globalThisShim.setTimeout.bind(i.globalThisShim),e.clearTimeoutFn=i.globalThisShim.clearTimeout.bind(i.globalThisShim))},t.byteLength=function(e){return"string"==typeof e?function(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}(e):Math.ceil((e.byteLength||e.size)*s)},t.randomString=function(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)};const i=r(4624),n=i.globalThisShim.setTimeout,o=i.globalThisShim.clearTimeout,s=1.33},5444:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0});var n=r(1635).__importDefault(r(2332)),o=function(){function e(e,t){this.type=e,this.buffer=t}return e.fromBuffer=function(t){var r=this.MAGIC_BYTES_MESSAGE.length,n=i.from(t,r,t.byteLength-r);return new e(n.readUInt8(0),n)},e.prototype.getText=function(){if(this.type!==e.TYPE_CLIPBOARD)throw TypeError("Wrong message type: ".concat(this.type));if(!this.buffer)throw Error("Empty buffer");var t=1,r=this.buffer.readInt32BE(t);t+=4;var i=this.buffer.slice(t,t+r);return n.default.utf8ByteArrayToString(i)},e.prototype.getPushStats=function(){if(this.type!==e.TYPE_PUSH_RESPONSE)throw TypeError("Wrong message type: ".concat(this.type));if(!this.buffer)throw Error("Empty buffer");return{id:this.buffer.readInt16BE(1),code:this.buffer.readInt8(3)}},e.prototype.toString=function(){var t;return t=this.type===e.TYPE_CLIPBOARD&&this.buffer?", text=[".concat(this.getText(),"]"):this.buffer?", buffer=[".concat(this.buffer.join(","),"]"):"","DeviceMessage{type=".concat(this.type).concat(t,"}")},e.TYPE_CLIPBOARD=0,e.TYPE_PUSH_RESPONSE=101,e.MAGIC_BYTES_MESSAGE=n.default.stringToUtf8ByteArray("scrcpy_message"),e}();t.default=o},5491:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="var(--svg-button-fill)"><path d="M40 10H8c-2.21 0-3.98 1.79-3.98 4L4 34c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V14c0-2.21-1.79-4-4-4zm-18 6h4v4h-4v-4zm0 6h4v4h-4v-4zm-6-6h4v4h-4v-4zm0 6h4v4h-4v-4zm-2 4h-4v-4h4v4zm0-6h-4v-4h4v4zm18 14H16v-4h16v4zm0-8h-4v-4h4v4zm0-6h-4v-4h4v4zm6 6h-4v-4h4v4zm0-6h-4v-4h4v4z"></path><path d="M0 0h48v48H0zm0 0h48v48H0z" fill="none"></path></svg>'},5524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorEventClass=t.ErrorEvent2=void 0;var i=r(1635),n=function(e){function t(t,r){var i=void 0===r?{}:r,n=i.colno,o=i.error,s=i.filename,a=i.lineno,c=i.message,l=e.call(this,t)||this;return l.error=o,l.colno=n||0,l.filename=s||"",l.lineno=a||0,l.message=c||"",l}return i.__extends(t,e),t}(r(9958).Event2);t.ErrorEvent2=n,t.ErrorEventClass="undefined"!=typeof ErrorEvent?ErrorEvent:n},5600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextControlMessage=void 0;var i=r(1635),n=r(8287),o=r(831),s=function(e){function t(t){var r=e.call(this,o.ControlMessage.TYPE_TEXT)||this;return r.text=t,r}return i.__extends(t,e),t.prototype.getText=function(){return this.text},t.prototype.toBuffer=function(){var e=this.text.length,r=n.Buffer.alloc(e+1+t.TEXT_SIZE_FIELD_LENGTH),i=0;return i=r.writeUInt8(this.type,i),i=r.writeUInt32BE(e,i),r.write(this.text,i),r},t.prototype.toString=function(){return"TextControlMessage{text=".concat(this.text,"}")},t.prototype.toJSON=function(){return{type:this.type,text:this.text}},t.TEXT_SIZE_FIELD_LENGTH=4,t}(o.ControlMessage);t.TextControlMessage=s},5630:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" fill="var(--svg-button-fill)"><path d="M0 0h48v48H0z" fill="none"></path><path d="M12 20c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm24 0c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-12 0c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"></path></svg>'},5941:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"avc.wasm"},5942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,r){return e.on(t,r),function(){e.off(t,r)}}},5994:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.CommandControlMessage=t.FilePushState=void 0;var n,o=r(1635),s=r(831),a=o.__importDefault(r(2332));!function(e){e[e.NEW=0]="NEW",e[e.START=1]="START",e[e.APPEND=2]="APPEND",e[e.FINISH=3]="FINISH",e[e.CANCEL=4]="CANCEL"}(n=t.FilePushState||(t.FilePushState={}));var c=function(e){function t(t){var r=e.call(this,t)||this;return r.type=t,r}return o.__extends(t,e),t.createSetVideoSettingsCommand=function(e){var r=e.toBuffer(),n=new t(s.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS),o=t.PAYLOAD_LENGTH+1,a=i.alloc(o+r.length);return a.writeUInt8(n.type,0),r.forEach(function(e,t){a.writeUInt8(e,t+o)}),n.buffer=a,n},t.createSetClipboardCommand=function(e,r){void 0===r&&(r=!1);var n=new t(s.ControlMessage.TYPE_SET_CLIPBOARD),o=e?a.default.stringToUtf8ByteArray(e):null,c=o?o.length:0,l=0,u=i.alloc(6+c);return l=u.writeInt8(n.type,l),l=u.writeInt8(r?1:0,l),l=u.writeInt32BE(c,l),o&&o.forEach(function(e,t){u.writeUInt8(e,t+l)}),n.buffer=u,n},t.createSetScreenPowerModeCommand=function(e){var r=new t(s.ControlMessage.TYPE_SET_SCREEN_POWER_MODE),n=0,o=i.alloc(2);return n=o.writeInt8(r.type,n),o.writeUInt8(e?1:0,n),r.buffer=o,r},t.createPushFileCommand=function(e){var t=e.id,r=e.fileName,i=e.fileSize,o=e.chunk,s=e.state;if(s===n.START)return this.createPushFileStartCommand(t,r,i);if(s===n.APPEND){if(!o)throw TypeError("Invalid type");return this.createPushFileChunkCommand(t,o)}if(s===n.CANCEL||s===n.FINISH||s===n.NEW)return this.createPushFileOtherCommand(t,s);throw TypeError('Unsupported state: "'.concat(s,'"'))},t.createPushFileStartCommand=function(e,r,o){var c=new t(s.ControlMessage.TYPE_PUSH_FILE),l=a.default.stringToUtf8ByteArray(r),u=l.length,h=t.PAYLOAD_LENGTH,d=i.alloc(h+1+2+1+4+2+u);return d.writeUInt8(c.type,h),h+=1,d.writeInt16BE(e,h),h+=2,d.writeInt8(n.START,h),h+=1,d.writeUInt32BE(o,h),h+=4,d.writeUInt16BE(u,h),h+=2,l.forEach(function(e,t){d.writeUInt8(e,t+h)}),c.buffer=d,c},t.createPushFileChunkCommand=function(e,r){var o=new t(s.ControlMessage.TYPE_PUSH_FILE),a=r.byteLength,c=t.PAYLOAD_LENGTH,l=i.alloc(c+1+2+1+4+a);return l.writeUInt8(o.type,c),c+=1,l.writeInt16BE(e,c),c+=2,l.writeInt8(n.APPEND,c),c+=1,l.writeUInt32BE(a,c),c+=4,Array.from(r).forEach(function(e,t){l.writeUInt8(e,t+c)}),o.buffer=l,o},t.createPushFileOtherCommand=function(e,r){var n=new t(s.ControlMessage.TYPE_PUSH_FILE),o=t.PAYLOAD_LENGTH,a=i.alloc(o+1+2+1);return a.writeUInt8(n.type,o),o+=1,a.writeInt16BE(e,o),o+=2,a.writeInt8(r,o),n.buffer=a,n},t.pushFileCommandFromBuffer=function(e){var r=0,i=e.readUInt8(r);if(r+=1,i!==t.TYPE_PUSH_FILE)throw TypeError('Incorrect type: "'.concat(i,'"'));var o=e.readInt16BE(r);r+=2;var s,c,l,u=e.readInt8(r);if(r+=1,u===n.APPEND){var h=e.readUInt32BE(r);r+=4,s=e.slice(r,r+h)}else if(u===n.START){c=e.readUInt32BE(r),r+=4;var d=e.readUInt16BE(r);r+=2,l=a.default.utf8ByteArrayToString(e.slice(r,r+d))}return{id:o,state:u,chunk:s,fileName:l,fileSize:c}},t.prototype.toBuffer=function(){if(!this.buffer){var e=i.alloc(t.PAYLOAD_LENGTH+1);e.writeUInt8(this.type,0),this.buffer=e}return this.buffer},t.prototype.toString=function(){var e=this.buffer?", buffer=[".concat(this.buffer.join(","),"]"):"";return"CommandControlMessage{action=".concat(this.type).concat(e,"}")},t.PAYLOAD_LENGTH=0,t.Commands=new Map([[s.ControlMessage.TYPE_EXPAND_NOTIFICATION_PANEL,"Expandir notificaciones"],[s.ControlMessage.TYPE_EXPAND_SETTINGS_PANEL,"Expandir configuraciones"],[s.ControlMessage.TYPE_COLLAPSE_PANELS,"Contraer paneles"],[s.ControlMessage.TYPE_GET_CLIPBOARD,"Obtener portapapeles"],[s.ControlMessage.TYPE_SET_CLIPBOARD,"Pegar portapapeles"],[s.ControlMessage.TYPE_ROTATE_DEVICE,"Girar dispositivo"],[s.ControlMessage.TYPE_CHANGE_STREAM_PARAMETERS,"Cambiar configuración(video)"]]),t}(s.ControlMessage);t.CommandControlMessage=c},6035:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z" fill="var(--svg-button-fill)" stroke="var(--svg-button-fill)"></path><path d="M0 0h48v48H0z" fill="none"></path></svg>'},6054:function(e,t){var r,i;r=function(){var t;!function(){(t=this)||("undefined"!=typeof window?t=window:"undefined"!=typeof self&&(t=self))}();var r=function(r,i){var n,o=void 0!==o?o:{},s={};for(n in o)o.hasOwnProperty(n)&&(s[n]=o[n]);o.arguments=[],o.thisProgram="./this.program",o.quit=function(e,t){throw t},o.preRun=[],o.postRun=[];var a,c,l=!1,u=!1,h=!1,d=!1;if(o.ENVIRONMENT)if("WEB"===o.ENVIRONMENT)l=!0;else if("WORKER"===o.ENVIRONMENT)u=!0;else if("NODE"===o.ENVIRONMENT)h=!0;else{if("SHELL"!==o.ENVIRONMENT)throw new Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");d=!0}else l="object"==typeof window,u="function"==typeof importScripts,h="object"==typeof process&&!1,d=!l&&!h&&!u;if(h)o.read=function(e,t){var r;return a||(a=null("fs")),c||(c=null("path")),e=c.normalize(e),r=a.readFileSync(e),t?r:r.toString()},o.readBinary=function(e){var t=o.read(e,!0);return t.buffer||(t=new Uint8Array(t)),g(t.buffer),t},process.argv.length>1&&(o.thisProgram=process.argv[1].replace(/\\/g,"/")),o.arguments=process.argv.slice(2),e.exports=o,process.on("uncaughtException",function(e){if(!(e instanceof re))throw e}),process.on("unhandledRejection",function(e,t){process.exit(1)}),o.inspect=function(){return"[Emscripten Module object]"};else if(d)"undefined"!=typeof read&&(o.read=function(e){return read(e)}),o.readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(g("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?o.arguments=scriptArgs:void 0!==arguments&&(o.arguments=arguments),"function"==typeof quit&&(o.quit=function(e,t){quit(e)});else{if(!l&&!u)throw new Error("not compiled for this environment");o.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(o.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),o.readAsync=function(e,t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status||0==i.status&&i.response?t(i.response):r()},i.onerror=r,i.send(null)},o.setWindowTitle=function(e){document.title=e}}for(n in o.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,o.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||o.print,o.print=o.print,o.printErr=o.printErr,s)s.hasOwnProperty(n)&&(o[n]=s[n]);s=void 0;function f(e,t){return t||(t=16),Math.ceil(e/t)*t}var p={"f64-rem":function(e,t){return e%t},debugger:function(){}},_=(new Array(0),1024),v=0;function g(e,t){e||ne("Assertion failed: "+t)}function y(e,t){if(0===t||!e)return"";for(var r,i=0,n=0;i|=r=E[e+n|0],(0!=r||t)&&(n++,!t||n!=t););t||(t=n);var o="";if(i<128){for(var s,a=1024;t>0;)s=String.fromCharCode.apply(String,E.subarray(e,e+Math.min(t,a))),o=o?o+s:s,e+=a,t-=a;return o}return function(e){return b(E,e)}(e)}var m="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e,t){for(var r=t;e[r];)++r;if(r-t>16&&e.subarray&&m)return m.decode(e.subarray(t,r));for(var i,n,o,s,a,c="";;){if(!(i=e[t++]))return c;if(128&i)if(n=63&e[t++],192!=(224&i))if(o=63&e[t++],224==(240&i)?i=(15&i)<<12|n<<6|o:(s=63&e[t++],240==(248&i)?i=(7&i)<<18|n<<12|o<<6|s:(a=63&e[t++],i=248==(252&i)?(3&i)<<24|n<<18|o<<12|s<<6|a:(1&i)<<30|n<<24|o<<18|s<<12|a<<6|63&e[t++])),i<65536)c+=String.fromCharCode(i);else{var l=i-65536;c+=String.fromCharCode(55296|l>>10,56320|1023&l)}else c+=String.fromCharCode((31&i)<<6|n);else c+=String.fromCharCode(i)}}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var S,E,C,w,A,T,O,L,R,D,M,x=65536;function P(){o.HEAP8=new Int8Array(S),o.HEAP16=C=new Int16Array(S),o.HEAP32=w=new Int32Array(S),o.HEAPU8=E=new Uint8Array(S),o.HEAPU16=new Uint16Array(S),o.HEAPU32=new Uint32Array(S),o.HEAPF32=new Float32Array(S),o.HEAPF64=new Float64Array(S)}function I(){ne("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+B+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}T=R=0,O=!1;var k=o.TOTAL_STACK||5242880,B=o.TOTAL_MEMORY||52428800;if(B<k&&o.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+B+"! (TOTAL_STACK="+k+")"),o.buffer?S=o.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(o.wasmMemory=new WebAssembly.Memory({initial:B/x,maximum:B/x}),S=o.wasmMemory.buffer):S=new ArrayBuffer(B),o.buffer=S),P(),w[0]=1668509029,C[1]=25459,115!==E[2]||99!==E[3])throw"Runtime error: expected the system to be little-endian!";function F(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?o.dynCall_v(r):o.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}var N=[],U=[],H=[],K=[],j=[],Y=!1;function W(e){N.unshift(e)}function V(e){j.unshift(e)}Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var q=0,z=null,G=null;o.preloadedImages={},o.preloadedAudios={};var X="data:application/octet-stream;base64,";function J(e){return String.prototype.startsWith?e.startsWith(X):0===e.indexOf(X)}(function(){var e="avc.wast",t="avc.wasm",r="avc.temp.asm.js";"function"==typeof o.locateFile&&(J(e)||(e=o.locateFile(e)),J(t)||(t=o.locateFile(t)),J(r)||(r=o.locateFile(r)));var i={global:null,env:null,asm2wasm:p,parent:o},n=null;function s(e){var t=o.buffer;e.byteLength<t.byteLength&&o.printErr("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r,i=new Int8Array(t);new Int8Array(e).set(i),r=e,o.buffer=S=r,P()}function a(){try{if(o.wasmBinary)return new Uint8Array(o.wasmBinary);if(o.readBinary)return o.readBinary(t);throw"on the web, we need the wasm binary to be preloaded and set on Module['wasmBinary']. emcc.py will do that for you when generating HTML (but not JS)"}catch(e){ne(e)}}function c(e,r,c){if("object"!=typeof WebAssembly)return o.printErr("no native wasm support detected"),!1;if(!(o.wasmMemory instanceof WebAssembly.Memory))return o.printErr("no native wasm Memory in use"),!1;function h(e,t){(n=e.exports).memory&&s(n.memory),o.asm=n,o.usingWasm=!0,function(){if(q--,o.monitorRunDependencies&&o.monitorRunDependencies(q),0==q&&(null!==z&&(clearInterval(z),z=null),G)){var e=G;G=null,e()}}()}if(r.memory=o.wasmMemory,i.global={NaN:NaN,Infinity:1/0},i["global.Math"]=Math,i.env=r,q++,o.monitorRunDependencies&&o.monitorRunDependencies(q),o.instantiateWasm)try{return o.instantiateWasm(i,h)}catch(e){return o.printErr("Module.instantiateWasm callback failed with error: "+e),!1}function d(e){h(e.instance,e.module)}function f(e){(o.wasmBinary||!l&&!u||"function"!=typeof fetch?new Promise(function(e,t){e(a())}):fetch(t,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()}).catch(function(){return a()})).then(function(e){return WebAssembly.instantiate(e,i)}).then(e).catch(function(e){o.printErr("failed to asynchronously prepare wasm: "+e),ne(e)})}return o.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||J(t)||"function"!=typeof fetch?f(d):WebAssembly.instantiateStreaming(fetch(t,{credentials:"same-origin"}),i).then(d).catch(function(e){o.printErr("wasm streaming compile failed: "+e),o.printErr("falling back to ArrayBuffer instantiation"),f(d)}),{}}o.asmPreload=o.asm;var h=o.reallocBuffer;o.reallocBuffer=function(e){return"asmjs"===d?h(e):function(e){var t,r;t=e,r=o.usingWasm?x:16777216,t%r>0&&(t+=r-t%r),e=t;var i=o.buffer.byteLength;if(o.usingWasm)try{return-1!==o.wasmMemory.grow((e-i)/65536)?o.buffer=o.wasmMemory.buffer:null}catch(e){return null}}(e)};var d="";o.asm=function(e,t,r){if(!t.table){var i=o.wasmTableSize;void 0===i&&(i=1024);var n=o.wasmMaxTableSize;"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?t.table=void 0!==n?new WebAssembly.Table({initial:i,maximum:n,element:"anyfunc"}):new WebAssembly.Table({initial:i,element:"anyfunc"}):t.table=new Array(i),o.wasmTable=t.table}var s;return t.memoryBase||(t.memoryBase=o.STATIC_BASE),t.tableBase||(t.tableBase=0),g(s=c(0,t),"no binaryen method succeeded."),s}})(),T=(A=_)+9888,U.push();o.STATIC_BASE=A,o.STATIC_BUMP=9888,T+=16;var Z={varargs:0,get:function(e){return Z.varargs+=4,w[Z.varargs-4>>2]},getStr:function(){return y(Z.get())},get64:function(){var e=Z.get(),t=Z.get();return g(e>=0?0===t:-1===t),e},getZero:function(){g(0===Z.get())}};function Q(){r()}function $(e,t,r){i(e,t,r)}o._broadwayOnHeadersDecoded=Q,o._broadwayOnPictureDecoded=$,M=function(e){g(!O);var t=T;return T=T+e+15&-16,t}(4),L=R=f(T),D=f(L+k),w[M>>2]=D,O=!0,o.wasmTableSize=10,o.wasmMaxTableSize=10,o.asmGlobalArg={},o.asmLibraryArg={abort:ne,enlargeMemory:function(){I()},getTotalMemory:function(){return B},abortOnCannotGrowMemory:I,___setErrNo:function(e){return o.___errno_location&&(w[o.___errno_location()>>2]=e),e},___syscall140:function(e,t){Z.varargs=t;try{var r=Z.getStreamFromFD(),i=(Z.get(),Z.get()),n=Z.get(),o=Z.get(),s=i;return FS.llseek(r,s,o),w[n>>2]=r.position,r.getdents&&0===s&&0===o&&(r.getdents=null),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||ne(e),-e.errno}},___syscall146:function e(t,r){Z.varargs=r;try{var i=Z.get(),n=Z.get(),s=Z.get(),a=0;e.buffers||(e.buffers=[null,[],[]],e.printChar=function(t,r){var i=e.buffers[t];g(i),0===r||10===r?((1===t?o.print:o.printErr)(b(i,0)),i.length=0):i.push(r)});for(var c=0;c<s;c++){for(var l=w[n+8*c>>2],u=w[n+(8*c+4)>>2],h=0;h<u;h++)e.printChar(i,E[l+h]);a+=u}return a}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||ne(e),-e.errno}},___syscall54:function(e,t){Z.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||ne(e),-e.errno}},___syscall6:function(e,t){Z.varargs=t;try{var r=Z.getStreamFromFD();return FS.close(r),0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||ne(e),-e.errno}},_broadwayOnHeadersDecoded:Q,_broadwayOnPictureDecoded:$,_emscripten_memcpy_big:function(e,t,r){return E.set(E.subarray(t,t+r),e),e},DYNAMICTOP_PTR:M,STACKTOP:R};var ee,te=o.asm(o.asmGlobalArg,o.asmLibraryArg,S);function re(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ie(e){function t(){o.calledRun||(o.calledRun=!0,v||(Y||(Y=!0,F(U)),F(H),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)V(o.postRun.shift());F(j)}()))}e=e||o.arguments,q>0||(function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)W(o.preRun.shift());F(N)}(),q>0||o.calledRun||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t()))}function ne(e){throw o.onAbort&&o.onAbort(e),void 0!==e?(o.print(e),o.printErr(e),e=JSON.stringify(e)):e="",v=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(o.asm=te,o._broadwayCreateStream=function(){return o.asm._broadwayCreateStream.apply(null,arguments)},o._broadwayExit=function(){return o.asm._broadwayExit.apply(null,arguments)},o._broadwayGetMajorVersion=function(){return o.asm._broadwayGetMajorVersion.apply(null,arguments)},o._broadwayGetMinorVersion=function(){return o.asm._broadwayGetMinorVersion.apply(null,arguments)},o._broadwayInit=function(){return o.asm._broadwayInit.apply(null,arguments)},o._broadwayPlayStream=function(){return o.asm._broadwayPlayStream.apply(null,arguments)},o.asm=te,re.prototype=new Error,re.prototype.constructor=re,G=function e(){o.calledRun||ie(),o.calledRun||(G=e)},o.run=ie,o.exit=function(e,t){t&&o.noExitRuntime&&0===e||(o.noExitRuntime||(v=!0,R=undefined,F(K),o.onExit&&o.onExit(e)),h&&process.exit(e),o.quit(e,new re(e)))},o.abort=ne,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();o.noExitRuntime=!0,ie(),void 0!==t&&t.Module&&(ee=t.Module),void 0!==o&&(ee=o),ee._broadwayOnHeadersDecoded=r,ee._broadwayOnPictureDecoded=i;var oe,se=!1;return ee.onRuntimeInitialized=function(){se=!0,oe&&oe(ee)},function(e){se?e(ee):oe=e}};return function(){"use strict";var e=function(){return(new Date).getTime()};"undefined"!=typeof performance&&performance.now&&(e=function(){return performance.now()});var i=function(t){var i;this.options=t||{},this.now=e;var n,s,a=function(t,r,s){var a,c=this.pictureBuffers[t];c||(c=this.pictureBuffers[t]=n(t,r*s*3/2));var l=!1;if(this.infoAr.length&&(l=!0,a=this.infoAr),this.infoAr=[],this.options.rgb){i||(i=o(r,s)),i.inp.set(c),i.doit();var u=new Uint8Array(i.outSize);return u.set(i.out),l&&(a[0].finishDecoding=e()),void this.onPictureDecoded(u,r,s,a)}l&&(a[0].finishDecoding=e()),this.onPictureDecoded(c,r,s,a)}.bind(this);this.options.sliceMode&&(a=function(t,r,i,o){var a=this.pictureBuffers[t];a||(a=this.pictureBuffers[t]=n(t,r*i*3/2));var c,l=this.pictureBuffers[o];l||(l=this.pictureBuffers[o]=s(o,18)),this.infoAr.length&&(c=this.infoAr),this.infoAr=[],c[0].finishDecoding=e();for(var u=[],h=0;h<20;++h)u.push(l[h]);c[0].sliceInfoAr=u,this.onPictureDecoded(a,r,i,c)}.bind(this));var c=r.apply({},[function(){},a]),l=1048576,u=this;this.onPictureDecoded=function(e,t,r,i){},this.onDecoderReady=function(){};var h=[];this.decode=function(e,t,r){h.push([e,t,r])},c(function(t){t.HEAP8;var r=t.HEAPU8;t.HEAP16,t.HEAP32,t._broadwayInit(),n=function(e,t){return r.subarray(e,e+t)},s=function(e,t){return new Uint32Array(r.buffer,e,t)},u.streamBuffer=n(t._broadwayCreateStream(l),l),u.pictureBuffers={},u.infoAr=[];var i=0;if(u.options.sliceMode?(i=u.options.sliceNum,u.decode=function(r,n,o){u.infoAr.push(n),n.startDecoding=e();var s,a=n.nals;if(!a){a=[],n.nals=a;var c=r.length,l=!1,h=0,d=0;for(s=0;s<c;++s)if(1===r[s]&&0===r[s-1]&&0===r[s-2]){var f=s-2;0===r[s-3]&&(f=s-3),l&&a.push({offset:h,end:f,type:31&r[d]}),h=f,d=f+3,0===r[s-3]&&(d=f+4),l=!0}l&&a.push({offset:h,end:s,type:31&r[d]})}var p,_=0,v=0;for(s=0;s<a.length;++s)1===a[s].type||5===a[s].type?(_===i&&(p=r.subarray(a[s].offset,a[s].end),u.streamBuffer[v]=0,v+=1,u.streamBuffer.set(p,v),v+=p.length),_+=1):(p=r.subarray(a[s].offset,a[s].end),u.streamBuffer[v]=0,v+=1,u.streamBuffer.set(p,v),v+=p.length,t._broadwayPlayStream(v),v=0);o(),t._broadwayPlayStream(v)}):u.decode=function(r,i){i&&(u.infoAr.push(i),i.startDecoding=e()),u.streamBuffer.set(r),t._broadwayPlayStream(r.length)},h.length){var o=0;for(o=0;o<h.length;++o)u.decode(h[o][0],h[o][1],h[o][2]);h=[]}u.onDecoderReady(u)})};i.prototype={};var n={},o=function(e,r){var i=e+"x"+r;if(n[i])return n[i];for(var o=e*r,s=o>>2,a=o+s+s,c=e*r*4,l=a+c+4*Math.pow(2,24),u=Math.pow(2,24),h=u;h<l;)h+=u;var d=new ArrayBuffer(h),f=function(e,t,r){"use asm";var i=e.Math.imul,n=e.Math.min,o=e.Math.max,s=e.Math.pow,a=new e.Uint8Array(r),c=new e.Uint32Array(r),l=new e.Uint8Array(r),u=new e.Uint8Array(r),h=new e.Uint32Array(r),d=0,f=0,p=0,_=0,v=0,g=0,y=0,m=0,b=0,S=0;function E(e,t){e=e|0;t=t|0;var r=0;var n=0;d=e;b=i(e,4)|0;f=t;p=i(d|0,f|0)|0;_=(p|0)>>2;g=i(i(d,f)|0,4)|0;v=p+_|0+_|0;m=0;y=m+g|0;S=y+v|0;n=~~+s(+2,+24);n=i(n,4)|0;for(r=0|0;(r|0)<(n|0)|0;r=r+4|0){h[(S+r|0)>>2]=0}}function C(){var e=0;var t=0;var r=0;var i=0;var n=0;var o=0;var s=0;var a=0;var c=0;var u=0;var v=0;var g=0;var E=0;var C=0;E=m|0;e=y|0;t=e+p|0|0;r=t+_|0;for(c=0;(c|0)<(f|0);c=c+2|0){v=t;g=r;for(u=0;(u|0)<(d|0);u=u+2|0){i=l[e>>0]|0;n=l[(e+d|0)>>0]|0;o=l[t>>0]|0;s=l[r>>0]|0;C=((i<<16|0)+(o<<8|0)|0)+s|0;a=h[(S+C|0)>>2]|0;if(a){}else{a=w(i,o,s)|0;h[(S+C|0)>>2]=a|0}h[E>>2]=a;C=((n<<16|0)+(o<<8|0)|0)+s|0;a=h[(S+C|0)>>2]|0;if(a){}else{a=w(n,o,s)|0;h[(S+C|0)>>2]=a|0}h[(E+b|0)>>2]=a;E=E+4|0;e=e+1|0;i=l[e>>0]|0;n=l[(e+d|0)>>0]|0;C=((i<<16|0)+(o<<8|0)|0)+s|0;a=h[(S+C|0)>>2]|0;if(a){}else{a=w(i,o,s)|0;h[(S+C|0)>>2]=a|0}h[E>>2]=a;C=((n<<16|0)+(o<<8|0)|0)+s|0;a=h[(S+C|0)>>2]|0;if(a){}else{a=w(n,o,s)|0;h[(S+C|0)>>2]=a|0}h[(E+b|0)>>2]=a;E=E+4|0;e=e+1|0;t=t+1|0;r=r+1|0}E=E+b|0;e=e+d|0}}function w(e,t,r){e=e|0;t=t|0;r=r|0;var s=0;var a=0;var c=0;var l=0;var u=0;var h=0;var d=0;var f=0;var p=0;u=i(1192,e-16|0)|0;h=i(1634,r-128|0)|0;d=i(832,r-128|0)|0;f=i(400,t-128|0)|0;p=i(2066,t-128|0)|0;s=(u+h|0)>>10|0;a=((u-d|0)-f|0)>>10|0;c=(u+p|0)>>10|0;if((s&255|0)!=(s|0)|0){s=n(255,o(0,s|0)|0)|0}if((a&255|0)!=(a|0)|0){a=n(255,o(0,a|0)|0)|0}if((c&255|0)!=(c|0)|0){c=n(255,o(0,c|0)|0)|0}l=255;l=l<<8|0;l=l+c|0;l=l<<8|0;l=l+a|0;l=l<<8|0;l=l+s|0;return l|0}return{init:E,doit:C}}(t,{},d);return f.init(e,r),n[i]=f,f.heap=d,f.out=new Uint8Array(d,0,c),f.inp=new Uint8Array(d,c,a),f.outSize=c,f};if("undefined"!=typeof self){var s,a,c,l,u,h,d=!1,f=!1,p=!1,_=0,v=0,g=0,y=0,m=[],b=[],S=function(e){if(b.length){for(var t=b.shift();t&&t.byteLength!==e;)t=b.shift();if(t)return t}return new ArrayBuffer(e)},E=function(e,t,r,i,n){var o=function(r,n){var o=0;for(o=0;o<16;++o){var s=r+i*o,a=n+i*o;t.set(e.subarray(s,a),s)}},s=function(r,n){var o=0;for(o=0;o<8;++o){var s=r+i/2*o,a=n+i/2*o;t.set(e.subarray(s,a),s)}},a=function(r,i){t.set(e.subarray(r,i),r)},c=r[0],l=r[1];l>0&&(o(c,l),s(r[2],r[3]),s(r[4],r[5])),c=r[6],(l=r[7])>0&&(o(c,l),s(r[8],r[9]),s(r[10],r[11])),c=r[12],(l=r[15])>0&&(a(c,l),a(r[13],r[16]),a(r[14],r[17]))},C=function(e){g=(v=e)-1};self.addEventListener("message",function(t){if(d){if(f&&t.data.reuse&&b.push(t.data.reuse),t.data.buf)return void(p&&0!==y?m.push(t.data):s.decode(new Uint8Array(t.data.buf,t.data.offset||0,t.data.length),t.data.info,function(){p&&_!==g&&postMessage(t.data,[t.data.buf])}));if(t.data.slice){var r=e();if(E(new Uint8Array(t.data.slice),c,t.data.infos[0].sliceInfoAr,t.data.width,t.data.height),t.data.theOne&&(E(c,new Uint8Array(t.data.slice),a,t.data.width,t.data.height),h>t.data.infos[0].timeDecoding&&(t.data.infos[0].timeDecoding=h),t.data.infos[0].timeCopy+=e()-r),postMessage(t.data,[t.data.slice]),0==(y-=1)&&m.length){var n=m.shift();s.decode(new Uint8Array(n.buf,n.offset||0,n.length),n.info,function(){p&&_!==g&&postMessage(n,[n.buf])})}return}if(t.data.setSliceCnt)return void C(t.data.sliceCnt)}else t.data&&"Broadway.js - Worker init"===t.data.type&&(d=!0,s=new i(t.data.options),t.data.options.sliceMode?(f=!0,p=!0,_=t.data.options.sliceNum,C(t.data.options.sliceCnt),s.onPictureDecoded=function(e,t,r,i){var n=new Uint8Array(S(e.length));E(e,n,i[0].sliceInfoAr,t),l=i[0].startDecoding,u=i[0].finishDecoding,h=u-l,i[0].timeDecoding=h,i[0].timeCopy=0,postMessage({slice:n.buffer,sliceNum:_,width:t,height:r,infos:i},[n.buffer]),y=v-1,c=e,a=i[0].sliceInfoAr}):t.data.options.reuseMemory?(f=!0,s.onPictureDecoded=function(e,t,r,i){var n=new Uint8Array(S(e.length));n.set(e,0,e.length),postMessage({buf:n.buffer,length:e.length,width:t,height:r,infos:i},[n.buffer])}):s.onPictureDecoded=function(e,t,r,i){e&&(e=new Uint8Array(e));var n=new Uint8Array(e.length);n.set(e,0,e.length),postMessage({buf:n.buffer,length:e.length,width:t,height:r,infos:i},[n.buffer])},postMessage({consoleLog:"broadway worker initialized"}))},!1)}return i.nowValue=e,i}()},void 0===(i=r.apply(t,[]))||(e.exports=i)},6088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DevtoolsClient=void 0;var i=r(1635);r(9063);var n=r(2468),o=r(7802),s=r(9493),a=r(9809),c=i.__importDefault(r(2332)),l=/^https?:\/\/chrome-devtools-frontend\.appspot\.com\/serve_rev\/(@.*)/,u="[DevtoolsClient]",h=function(e){function t(t){var r=e.call(this,t)||this;return r.requestListUpdate=function(){r.timeout=void 0,r.ws&&r.ws.readyState===r.ws.OPEN&&r.ws.send(JSON.stringify({command:s.RemoteDevtoolsCommand.LIST_DEVTOOLS}))},r.onDevtoolsLinkClick=function(e){var t=e.target.getAttribute("href");t&&(r.hiddenInput.value=t,r.hiddenInput.removeAttribute("hidden"),r.hiddenInput.select(),r.hiddenInput.setSelectionRange(0,t.length),document.execCommand("copy"),r.hiddenInput.setAttribute("hidden","hidden"),r.tooltip.style.left="".concat(e.clientX,"px"),r.tooltip.style.top="".concat(e.clientY,"px"),r.tooltip.style.display="block",r.hideTooltip(),e.preventDefault())},r.udid=r.params.udid,r.openNewConnection(),r.setTitle("Devtools ".concat(r.udid)),r.setBodyClass("devtools"),r.hiddenInput=document.createElement("input"),r.hiddenInput.className="hidden",r.hiddenInput.setAttribute("hidden","hidden"),document.body.appendChild(r.hiddenInput),r.tooltip=document.createElement("span"),r.tooltip.innerText="Copied!",r.tooltip.className="tooltip",r.tooltip.style.display="none",document.body.appendChild(r.tooltip),r}return i.__extends(t,e),t.start=function(e){return new t(e)},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),n=r.action;if(n!==o.ACTION.DEVTOOLS)throw Error("Incorrect action");return i.__assign(i.__assign({},r),{action:n,udid:c.default.parseString(t,"udid",!0)})},t.prototype.buildDirectWebSocketUrl=function(){var t=e.prototype.buildDirectWebSocketUrl.call(this);return"string"==typeof this.params.udid&&t.searchParams.set("udid",this.params.udid),t},t.prototype.onSocketClose=function(e){var t=this;console.error(u,"Socket closed. Code: ".concat(e.code,".").concat(e.reason?" Reason: "+e.reason:"")),setTimeout(function(){t.openNewConnection()},2e3)},t.prototype.onSocketMessage=function(e){var r;try{r=JSON.parse(e.data)}catch(e){return console.error(u,e.message),void console.log(u,e.data)}if(r.type===t.ACTION){var i=r.data;this.buildList(i),this.timeout||(this.timeout=window.setTimeout(this.requestListUpdate,t.TIMEOUT))}else console.log(u,"Unknown message type: ".concat(r.type))},t.prototype.onSocketOpen=function(){this.requestListUpdate()},t.prototype.createDeviceBlock=function(e){var t=document.createElement("div");return t.className="device",t.id="device:".concat(e.deviceSerial),t},t.prototype.createDeviceHeader=function(e){var t=document.createElement("div");t.className="device-header";var r=document.createElement("div");r.className="device-name",r.innerText=e.deviceName;var i=document.createElement("div");i.className="device-serial",i.innerText="#".concat(e.deviceSerial.toUpperCase());var n=document.createElement("div");return n.className="device-ports",t.appendChild(r),t.appendChild(i),t.appendChild(n),t},t.prototype.createBrowsersBlock=function(e){var r=this,i=e.deviceSerial,n=document.createElement("div");return n.className="browsers",e.browsers.sort(t.compareBrowsers).forEach(function(e){var t=r.createBrowserBlock(i,e);n.appendChild(t)}),n},t.prototype.createBrowserBlock=function(e,t){var r=this,i=t.socket,n=document.createElement("div");n.id="".concat(e,":").concat(i),n.className="browser";var o=document.createElement("div");o.className="browser-header",n.appendChild(o);var s=document.createElement("div");s.className="browser-name",o.appendChild(s);var a,c=t.version["Android-Package"],l=t.version.Browser,u=l.split("/");a=u.length>1?u[1]:l;var h=0===i.indexOf("webview")?"WebView in ":"";s.innerText="".concat(h).concat(c,"(").concat(a,")");var d=document.createElement("span");d.setAttribute("tabIndex","1"),d.className="action",d.innerText="trace",d.setAttribute("hidden","hidden"),o.appendChild(d);var f=document.createElement("div");return f.className="list pages",t.targets.forEach(function(e){f.appendChild(r.createPageBlock(e,a))}),n.appendChild(f),n},t.prototype.createPageBlock=function(e,t){var r=document.createElement("div");r.className="row";var i=document.createElement("div");if(i.className="properties-box",r.appendChild(i),e.faviconUrl){var n=document.createElement("img");n.src=e.faviconUrl,i.appendChild(n)}var o=document.createElement("div");o.className="subrow-box",i.appendChild(o);var s=document.createElement("div");s.className="subrow",o.appendChild(s);var a=document.createElement("div");a.className="name",e.title&&(a.innerText=e.title),s.appendChild(a);var c=document.createElement("div");c.className="url",e.url&&(c.innerText=e.url),s.appendChild(c);var u=document.createElement("div");if(u.className="subrow webview",o.appendChild(u),e.description)try{var h=JSON.parse(e.description),d=document.createElement("div");d.className="position",d.innerText="at (".concat(h.screenX,", ").concat(h.screenY,")"),u.appendChild(d);var f=document.createElement("div");f.className="size",f.innerText="size ".concat(h.width," × ").concat(h.height),u.appendChild(f)}catch(e){}var p=e.devtoolsFrontendUrl&&e.devtoolsFrontendUrl.startsWith("http"),_=document.createElement("div");_.className="actions",o.appendChild(_);var v=document.createElement("a");if(v.setAttribute("tabIndex","1"),v.className="action",v.innerText="inspect",_.appendChild(v),e.devtoolsFrontendUrl?(v.setAttribute("href",e.devtoolsFrontendUrl),v.setAttribute("rel","noopener noreferrer"),v.setAttribute("target","_blank")):v.classList.add("disabled"),p||v.classList.add("disabled"),e.webSocketDebuggerUrl){var g=document.createElement("a");g.setAttribute("tabIndex","1"),g.className="action copy",g.innerText="bundled",g.title="Copy link and open manually",_.appendChild(g),g.setAttribute("href","".concat("devtools://devtools/bundled/inspector.html?experiments=true&ws=").concat(e.webSocketDebuggerUrl)),g.setAttribute("rel","noopener noreferrer"),g.setAttribute("target","_blank"),g.onclick=this.onDevtoolsLinkClick}if(e.devtoolsFrontendUrl&&e.webSocketDebuggerUrl&&p){var y=new URL(e.devtoolsFrontendUrl);y.searchParams.delete("ws");var m=y.toString().match(l);if(m){var b=m[1].split("/"),S=b.shift(),E=b.join("/"),C=t?"remoteVersion=".concat(t,"&"):"",w="ws=".concat(e.webSocketDebuggerUrl),A="devtools://devtools/remote/serve_rev/".concat(S,"/").concat(E,"?").concat(C).concat("remoteFrontend=true&dockSide=undocked&").concat(w),T=document.createElement("a");T.setAttribute("tabIndex","1"),T.className="action copy",T.innerText="remote",T.title="Copy link and open manually",_.appendChild(T),T.setAttribute("href",A),T.setAttribute("rel","noopener noreferrer"),T.setAttribute("target","_blank"),T.onclick=this.onDevtoolsLinkClick}}var O=document.createElement("span");return O.setAttribute("hidden","hidden"),O.setAttribute("tabIndex","1"),O.className="action",O.innerText="pause",_.appendChild(O),r},t.prototype.hideTooltip=function(){var e=this;this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=window.setTimeout(function(){e.hideTimeout=void 0,e.tooltip.style.display="none"},1e3)},t.prototype.buildList=function(e){var t,r=this.createDeviceBlock(e),i=this.createDeviceHeader(e),n=this.createBrowsersBlock(e);r.appendChild(i),r.appendChild(n);var o=document.getElementById(r.id);o?null===(t=o.parentElement)||void 0===t||t.replaceChild(r,o):document.body.appendChild(r)},t.createEntryForDeviceList=function(e,t,r){if("device"===e.state){var i=document.createElement("div");return i.classList.add("devtools",t),i.appendChild(a.BaseDeviceTracker.buildLink({action:o.ACTION.DEVTOOLS,udid:e.udid},"devtools",r)),i}},t.ACTION=o.ACTION.DEVTOOLS,t.TIMEOUT=1e3,t.compareBrowsers=function(e,t){var r=e.version.Browser,i=t.version.Browser;return r>i?1:r<i?-1:0},t}(n.ManagerClient);t.DevtoolsClient=h},6154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyToCodeMap=void 0;var i=r(1635),n=i.__importDefault(r(104)),o=i.__importDefault(r(8454));t.KeyToCodeMap=new Map([[o.default.Backquote,n.default.KEYCODE_GRAVE],[o.default.Backslash,n.default.KEYCODE_BACKSLASH],[o.default.BracketLeft,n.default.KEYCODE_LEFT_BRACKET],[o.default.BracketRight,n.default.KEYCODE_RIGHT_BRACKET],[o.default.Comma,n.default.KEYCODE_COMMA],[o.default.Digit0,n.default.KEYCODE_0],[o.default.Digit1,n.default.KEYCODE_1],[o.default.Digit2,n.default.KEYCODE_2],[o.default.Digit3,n.default.KEYCODE_3],[o.default.Digit4,n.default.KEYCODE_4],[o.default.Digit5,n.default.KEYCODE_5],[o.default.Digit6,n.default.KEYCODE_6],[o.default.Digit7,n.default.KEYCODE_7],[o.default.Digit8,n.default.KEYCODE_8],[o.default.Digit9,n.default.KEYCODE_9],[o.default.Equal,n.default.KEYCODE_EQUALS],[o.default.IntlRo,n.default.KEYCODE_RO],[o.default.IntlYen,n.default.KEYCODE_YEN],[o.default.KeyA,n.default.KEYCODE_A],[o.default.KeyB,n.default.KEYCODE_B],[o.default.KeyC,n.default.KEYCODE_C],[o.default.KeyD,n.default.KEYCODE_D],[o.default.KeyE,n.default.KEYCODE_E],[o.default.KeyF,n.default.KEYCODE_F],[o.default.KeyG,n.default.KEYCODE_G],[o.default.KeyH,n.default.KEYCODE_H],[o.default.KeyI,n.default.KEYCODE_I],[o.default.KeyJ,n.default.KEYCODE_J],[o.default.KeyK,n.default.KEYCODE_K],[o.default.KeyL,n.default.KEYCODE_L],[o.default.KeyM,n.default.KEYCODE_M],[o.default.KeyN,n.default.KEYCODE_N],[o.default.KeyO,n.default.KEYCODE_O],[o.default.KeyP,n.default.KEYCODE_P],[o.default.KeyQ,n.default.KEYCODE_Q],[o.default.KeyR,n.default.KEYCODE_R],[o.default.KeyS,n.default.KEYCODE_S],[o.default.KeyT,n.default.KEYCODE_T],[o.default.KeyU,n.default.KEYCODE_U],[o.default.KeyV,n.default.KEYCODE_V],[o.default.KeyW,n.default.KEYCODE_W],[o.default.KeyX,n.default.KEYCODE_X],[o.default.KeyY,n.default.KEYCODE_Y],[o.default.KeyZ,n.default.KEYCODE_Z],[o.default.Minus,n.default.KEYCODE_MINUS],[o.default.Period,n.default.KEYCODE_PERIOD],[o.default.Quote,n.default.KEYCODE_APOSTROPHE],[o.default.Semicolon,n.default.KEYCODE_SEMICOLON],[o.default.Slash,n.default.KEYCODE_SLASH],[o.default.KanaMode,n.default.KEYCODE_KANA],[o.default.Delete,n.default.KEYCODE_FORWARD_DEL],[o.default.End,n.default.KEYCODE_MOVE_END],[o.default.Help,n.default.KEYCODE_HELP],[o.default.Home,n.default.KEYCODE_MOVE_HOME],[o.default.Insert,n.default.KEYCODE_INSERT],[o.default.PageDown,n.default.KEYCODE_PAGE_DOWN],[o.default.PageUp,n.default.KEYCODE_PAGE_UP],[o.default.AltLeft,n.default.KEYCODE_ALT_LEFT],[o.default.AltRight,n.default.KEYCODE_ALT_RIGHT],[o.default.Backspace,n.default.KEYCODE_DEL],[o.default.CapsLock,n.default.KEYCODE_CAPS_LOCK],[o.default.ControlLeft,n.default.KEYCODE_CTRL_LEFT],[o.default.ControlRight,n.default.KEYCODE_CTRL_RIGHT],[o.default.Enter,n.default.KEYCODE_ENTER],[o.default.MetaLeft,n.default.KEYCODE_META_LEFT],[o.default.MetaRight,n.default.KEYCODE_META_RIGHT],[o.default.ShiftLeft,n.default.KEYCODE_SHIFT_LEFT],[o.default.ShiftRight,n.default.KEYCODE_SHIFT_RIGHT],[o.default.Space,n.default.KEYCODE_SPACE],[o.default.Tab,n.default.KEYCODE_TAB],[o.default.ArrowLeft,n.default.KEYCODE_DPAD_LEFT],[o.default.ArrowUp,n.default.KEYCODE_DPAD_UP],[o.default.ArrowRight,n.default.KEYCODE_DPAD_RIGHT],[o.default.ArrowDown,n.default.KEYCODE_DPAD_DOWN],[o.default.NumLock,n.default.KEYCODE_NUM_LOCK],[o.default.Numpad0,n.default.KEYCODE_NUMPAD_0],[o.default.Numpad1,n.default.KEYCODE_NUMPAD_1],[o.default.Numpad2,n.default.KEYCODE_NUMPAD_2],[o.default.Numpad3,n.default.KEYCODE_NUMPAD_3],[o.default.Numpad4,n.default.KEYCODE_NUMPAD_4],[o.default.Numpad5,n.default.KEYCODE_NUMPAD_5],[o.default.Numpad6,n.default.KEYCODE_NUMPAD_6],[o.default.Numpad7,n.default.KEYCODE_NUMPAD_7],[o.default.Numpad8,n.default.KEYCODE_NUMPAD_8],[o.default.Numpad9,n.default.KEYCODE_NUMPAD_9],[o.default.NumpadAdd,n.default.KEYCODE_NUMPAD_ADD],[o.default.NumpadComma,n.default.KEYCODE_NUMPAD_COMMA],[o.default.NumpadDecimal,n.default.KEYCODE_NUMPAD_DOT],[o.default.NumpadDivide,n.default.KEYCODE_NUMPAD_DIVIDE],[o.default.NumpadEnter,n.default.KEYCODE_NUMPAD_ENTER],[o.default.NumpadEqual,n.default.KEYCODE_NUMPAD_EQUALS],[o.default.NumpadMultiply,n.default.KEYCODE_NUMPAD_MULTIPLY],[o.default.NumpadParenLeft,n.default.KEYCODE_NUMPAD_LEFT_PAREN],[o.default.NumpadParenRight,n.default.KEYCODE_NUMPAD_RIGHT_PAREN],[o.default.NumpadSubtract,n.default.KEYCODE_NUMPAD_SUBTRACT],[o.default.Escape,n.default.KEYCODE_ESCAPE],[o.default.F1,n.default.KEYCODE_F1],[o.default.F2,n.default.KEYCODE_F2],[o.default.F3,n.default.KEYCODE_F3],[o.default.F4,n.default.KEYCODE_F4],[o.default.F5,n.default.KEYCODE_F5],[o.default.F6,n.default.KEYCODE_F6],[o.default.F7,n.default.KEYCODE_F7],[o.default.F8,n.default.KEYCODE_F8],[o.default.F9,n.default.KEYCODE_F9],[o.default.F10,n.default.KEYCODE_F10],[o.default.F11,n.default.KEYCODE_F11],[o.default.F12,n.default.KEYCODE_F12],[o.default.Fn,n.default.KEYCODE_FUNCTION],[o.default.PrintScreen,n.default.KEYCODE_SYSRQ],[o.default.Pause,n.default.KEYCODE_BREAK]])},6178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var i,n=r(1635),o=n.__importDefault(r(5491)),s=n.__importDefault(r(5630)),a=n.__importDefault(r(1432)),c=n.__importDefault(r(1284)),l=n.__importDefault(r(6035)),u=n.__importDefault(r(2898)),h=n.__importDefault(r(4799)),d=n.__importDefault(r(3339)),f=n.__importDefault(r(2887)),p=n.__importDefault(r(9407)),_=n.__importDefault(r(2870)),v=n.__importDefault(r(3602)),g=n.__importDefault(r(8298)),y=n.__importDefault(r(724)),m=n.__importDefault(r(3166)),b=n.__importDefault(r(8699)),S=n.__importDefault(r(6247)),E=n.__importDefault(r(4465)),C=n.__importDefault(r(6769)),w=n.__importDefault(r(1232));!function(e){e[e.BACK=0]="BACK",e[e.HOME=1]="HOME",e[e.OVERVIEW=2]="OVERVIEW",e[e.POWER=3]="POWER",e[e.VOLUME_UP=4]="VOLUME_UP",e[e.VOLUME_DOWN=5]="VOLUME_DOWN",e[e.MORE=6]="MORE",e[e.CAMERA=7]="CAMERA",e[e.KEYBOARD=8]="KEYBOARD",e[e.CANCEL=9]="CANCEL",e[e.OFFLINE=10]="OFFLINE",e[e.REFRESH=11]="REFRESH",e[e.SETTINGS=12]="SETTINGS",e[e.MENU=13]="MENU",e[e.ARROW_BACK=14]="ARROW_BACK",e[e.TOGGLE_ON=15]="TOGGLE_ON",e[e.TOGGLE_OFF=16]="TOGGLE_OFF",e[e.PASTE1=17]="PASTE1",e[e.PASTE2=18]="PASTE2",e[e.PASTE3=19]="PASTE3"}(i=t.Icon||(t.Icon={}));var A=function(){function e(){}return e.getSvgString=function(e){switch(e){case i.KEYBOARD:return o.default;case i.MORE:return s.default;case i.CAMERA:return a.default;case i.POWER:return c.default;case i.VOLUME_DOWN:return l.default;case i.VOLUME_UP:return u.default;case i.BACK:return h.default;case i.HOME:return d.default;case i.OVERVIEW:return f.default;case i.CANCEL:return p.default;case i.OFFLINE:return _.default;case i.REFRESH:return v.default;case i.SETTINGS:return g.default;case i.MENU:return y.default;case i.ARROW_BACK:return m.default;case i.TOGGLE_ON:return b.default;case i.TOGGLE_OFF:return S.default;case i.PASTE1:return E.default;case i.PASTE2:return C.default;case i.PASTE3:return w.default;default:return""}},e.create=function(e){var t=document.createElement("div");t.innerHTML=this.getSvgString(e);for(var r=t.children[0],i=r.getElementsByTagName("title"),n=0,o=i.length;n<o;n++)r.removeChild(i[n]);return r},e.Icon=i,e}();t.default=A},6179:(e,t,r)=>{"use strict";r.r(t)},6214:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const n=r(4627),o=r(5942),s=r(4454),a=(0,i(r(7833)).default)("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class l extends s.Emitter{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[(0,o.on)(e,"open",this.onopen.bind(this)),(0,o.on)(e,"packet",this.onpacket.bind(this)),(0,o.on)(e,"error",this.onerror.bind(this)),(0,o.on)(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,i,o;if(c.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:n.PacketType.EVENT,data:t,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++;a("emitting packet with ack id %d",e);const r=t.pop();this._registerAckCallback(e,r),s.id=e}const l=null===(i=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===i?void 0:i.writable,u=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!l?a("discard packet as the transport is not currently writable"):u?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s),this.flags={},this}_registerAckCallback(e,t){var r;const i=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(a("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));a("event with ack id %d has timed out after %d ms",e,i),t.call(this,new Error("operation has timed out"))},i),o=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((r,i)=>{const n=(e,t)=>e?i(e):r(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...i)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(a("packet [%d] is discarded after %d tries",r.id,r.tryCount),this._queue.shift(),t&&t(e)):(a("packet [%d] was successfully sent",r.id),this._queue.shift(),t&&t(null,...i)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(a("draining queue"),!this.connected||0===this._queue.length)return;const t=this._queue[0];!t.pending||e?(t.pending=!0,t.tryCount++,a("sending packet [%d] (try n°%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)):a("packet [%d] has already been sent and is waiting for an ack",t.id)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:n.PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){a("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case n.PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(e);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(e);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];a("emitting event %j",t),null!=e.id&&(a("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,a("sending ack %j",i),t.packet({type:n.PacketType.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t?(delete this.acks[e.id],a("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)):a("bad ack %s",e.id)}onconnect(e,t){a("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}t.Socket=l},6247:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17,7H7c-2.76,0 -5,2.24 -5,5s2.24,5 5,5h10c2.76,0 5,-2.24 5,-5s-2.24,-5 -5,-5zM7,15c-1.66,0 -3,-1.34 -3,-3s1.34,-3 3,-3 3,1.34 3,3 -1.34,3 -3,3z"></path></svg>'},6322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebCodecsPlayer=void 0;var i=r(1635),n=r(1555),o=i.__importDefault(r(3644)),s=i.__importDefault(r(8089)),a=i.__importDefault(r(1709)),c=i.__importDefault(r(8794)),l=i.__importDefault(r(4196)),u=i.__importDefault(r(6722));function h(e){return e.toString(16).padStart(2,"0").toUpperCase()}var d=function(e){function t(r,i,n){void 0===n&&(n=t.playerFullName);var o=e.call(this,r,i,n,t.storageKeyPrefix)||this;o.supportsScreenshot=!0,o.hadIDR=!1,o.bufferedSPS=!1,o.bufferedPPS=!1,o.drawDecoded=function(){if(o.receivedFirstFrame){var e=o.decodedFrames.shift();if(e){var t=e.frame;o.context.drawImage(t,0,0),t.close()}}o.decodedFrames.length?o.animationFrameId=requestAnimationFrame(o.drawDecoded):o.animationFrameId=void 0};var s=o.tag.getContext("2d");if(!s)throw Error("Failed to get 2d context from canvas");return o.context=s,o.decoder=o.createDecoder(),o}return i.__extends(t,e),t.isSupported=function(){return"function"==typeof VideoDecoder&&"function"==typeof VideoDecoder.isConfigSupported},t.parseSPS=function(e){var t=a.default.parseSPS(e),r=t.profile_idc,i=t.constraint_set_flags,n=t.level_idc,o=t.pic_width_in_mbs_minus1,s=t.frame_crop_left_offset,c=t.frame_crop_right_offset,l=t.frame_mbs_only_flag,u=t.pic_height_in_map_units_minus1,d=t.frame_crop_top_offset,f=t.frame_crop_bottom_offset,p=t.sar,_=p[0]/p[1];return{codec:"avc1.".concat([r,i,n].map(h).join("")),width:Math.ceil((16*(o+1)-2*s-2*c)*_),height:(2-l)*(u+1)*16-(l?2:4)*(d+f)}},t.prototype.createDecoder=function(){var e=this;return new VideoDecoder({output:function(t){e.onFrameDecoded(0,0,t)},error:function(t){console.error(t,"code: ".concat(t.code)),e.stop()}})},t.prototype.addToBuffer=function(e){var t;return this.buffer?((t=new Uint8Array(this.buffer.byteLength+e.byteLength)).set(new Uint8Array(this.buffer)),t.set(new Uint8Array(e),this.buffer.byteLength)):t=e,this.buffer=t.buffer,t},t.prototype.scaleCanvas=function(e,t){var r=new s.default(e,t),i=1;this.bounds&&!this.bounds.intersect(r).equals(r)&&(i=Math.min(this.bounds.w/e,this.bounds.h/t));var n=e*i,o=t*i,a=new l.default(new u.default(0,0,e,t),new s.default(n,o),0);this.emit("input-video-resize",a),this.setScreenInfo(a),this.initCanvas(e,t),this.tag.style.transform=1!==i?"scale(".concat(i.toFixed(4),")"):"",this.tag.style.transformOrigin="top left"},t.prototype.decode=function(e){if(e&&!(e.length<4)){var r=31&e[4],i=r===c.default.IDR;if(r===c.default.SPS){var n=t.parseSPS(e.subarray(4)),o=n.codec,s=n.width,a=n.height;this.scaleCanvas(s,a);var l={codec:o,optimizeForLatency:!0};return this.decoder.configure(l),this.bufferedSPS=!0,this.addToBuffer(e),void(this.hadIDR=!1)}if(r===c.default.PPS)return this.bufferedPPS=!0,void this.addToBuffer(e);if(r!==c.default.SEI||this.bufferedSPS&&this.bufferedPPS){var u=this.addToBuffer(e);return this.hadIDR=this.hadIDR||i,u&&"configured"===this.decoder.state&&this.hadIDR?(this.buffer=void 0,this.bufferedPPS=!1,this.bufferedSPS=!1,void this.decoder.decode(new EncodedVideoChunk({type:"key",timestamp:0,data:u.buffer}))):void 0}}},t.prototype.dropFrame=function(e){e.close()},t.prototype.getFitToScreenStatus=function(){return!1},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.prototype.needScreenInfoBeforePlay=function(){return!1},t.prototype.stop=function(){e.prototype.stop.call(this),"configured"===this.decoder.state&&this.decoder.close()},t.storageKeyPrefix="WebCodecsPlayer",t.playerFullName="WebCodecs",t.playerCodeName="webcodecs",t.preferredVideoSettings=new o.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new s.default(360,806),sendFrameMeta:!1}),t}(n.BaseCanvasBasedPlayer);t.WebCodecsPlayer=d},6376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodePayload=t.decodePacket=t.encodePayload=t.encodePacket=t.protocol=void 0,t.createPacketEncoderStream=function(){return new TransformStream({transform(e,t){(0,i.encodePacketToBinary)(e,r=>{const i=r.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const e=new DataView(n.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{n=new Uint8Array(9);const e=new DataView(n.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})},t.createPacketDecoderStream=function(e,t){a||(a=new TextDecoder);const r=[];let i=0,s=-1,u=!1;return new TransformStream({transform(h,d){for(r.push(h);;){if(0===i){if(c(r)<1)break;const e=l(r,1);u=!(128&~e[0]),s=127&e[0],i=s<126?3:126===s?1:2}else if(1===i){if(c(r)<2)break;const e=l(r,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(c(r)<8)break;const e=l(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>Math.pow(2,21)-1){d.enqueue(o.ERROR_PACKET);break}s=n*Math.pow(2,32)+t.getUint32(4),i=3}else{if(c(r)<s)break;const e=l(r,s);d.enqueue((0,n.decodePacket)(u?e:a.decode(e),t)),i=0}if(0===s||s>e){d.enqueue(o.ERROR_PACKET);break}}}})};const i=r(2686);Object.defineProperty(t,"encodePacket",{enumerable:!0,get:function(){return i.encodePacket}});const n=r(2662);Object.defineProperty(t,"decodePacket",{enumerable:!0,get:function(){return n.decodePacket}});const o=r(2046),s=String.fromCharCode(30);let a;function c(e){return e.reduce((e,t)=>e+t.length,0)}function l(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}t.encodePayload=(e,t)=>{const r=e.length,n=new Array(r);let o=0;e.forEach((e,a)=>{(0,i.encodePacket)(e,!1,e=>{n[a]=e,++o===r&&t(n.join(s))})})},t.decodePayload=(e,t)=>{const r=e.split(s),i=[];for(let e=0;e<r.length;e++){const o=(0,n.decodePacket)(r[e],t);if(i.push(o),"error"===o.type)break}return i},t.protocol=4},6402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseEventClass=t.CloseEvent2=void 0;var i=r(1635),n=function(e){function t(t,r){var i=void 0===r?{}:r,n=i.code,o=i.reason,s=e.call(this,t)||this;return s.code=n||0,s.reason=o||"",s.wasClean=0===s.code,s}return i.__extends(t,e),t}(r(9958).Event2);t.CloseEvent2=n,t.CloseEventClass="undefined"!=typeof CloseEvent?CloseEvent:n},6585:e=>{var t=1e3,r=60*t,i=60*r,n=24*i,o=7*n;function s(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*n;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=n?s(c,l,n,"day"):l>=i?s(c,l,i,"hour"):l>=r?s(c,l,r,"minute"):l>=t?s(c,l,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=n?Math.round(e/n)+"d":o>=i?Math.round(e/i)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i,this.left=e,this.top=t,this.right=r,this.bottom=i}return e.equals=function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)},e.copy=function(t){return t?new e(t.left,t.top,t.right,t.bottom):null},e.prototype.equals=function(e){return this===e||!!e&&this.left===e.left&&this.top===e.top&&this.right===e.right&&this.bottom===e.bottom},e.prototype.getWidth=function(){return this.right-this.left},e.prototype.getHeight=function(){return this.bottom-this.top},e.prototype.toString=function(){return"Rect{left=".concat(this.left,", top=").concat(this.top,", right=").concat(this.right,", bottom=").concat(this.bottom,"}")},e.prototype.toJSON=function(){return{left:this.left,right:this.right,top:this.top,bottom:this.bottom}},e}();t.default=r},6769:e=>{e.exports='<svg viewBox="0 0 28.867472 24.303806" version="1.1" id="svg1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs1"></defs><g id="layer1" transform="translate(-82.942225,-107.06003)"><path style="fill:#000000" d="m 90.757418,130.99502 c -0.45166,-0.19661 -1.1065,-0.7575 -1.45521,-1.24642 -0.63315,-0.88773 -0.63411,-0.90038 -0.70684,-9.3556 -0.0672,-7.80929 -0.0348,-8.53857 0.41645,-9.39271 0.66011,-1.24936 2.38149,-2.11667 4.20105,-2.11667 1.11664,0 1.44522,-0.10348 1.67157,-0.52643 0.91567,-1.71093 4.8948,-1.73579 5.804352,-0.0363 0.20434,0.3818 0.66802,0.51919 2.09749,0.62146 3.2905,0.23544 4.27046,1.43324 4.27046,5.21977 v 2.39439 h 1.45104 c 1.22901,0 1.58324,0.11805 2.3151,0.77149 l 0.86407,0.77149 0.0909,2.98426 c 0.0789,2.59075 0.0305,3.02843 -0.36728,3.3193 -0.32191,0.23538 -0.60473,0.25662 -0.95082,0.0714 -0.42921,-0.22971 -0.49262,-0.59884 -0.49262,-2.86777 0,-1.89632 -0.0996,-2.68682 -0.36657,-2.90836 -0.24933,-0.20692 -1.62449,-0.28075 -4.29948,-0.23083 l -3.93291,0.0734 -0.072,5.12525 c -0.0507,3.60995 0.0192,5.23514 0.23652,5.49696 0.24455,0.29466 1.10954,0.35658 4.17302,0.29871 l 3.86451,-0.073 0.37848,-0.8599 c 0.26905,-0.61126 0.55447,-0.85989 0.98715,-0.85989 1.40385,0 0.8538,2.50163 -0.73014,3.32072 -0.66363,0.34318 -1.57918,0.40401 -5.04495,0.33521 l -4.23418,-0.0841 -0.77141,-0.86407 -0.771402,-0.86407 v -5.43293 c 0,-7.16685 0.18863,-7.52331 3.981202,-7.52331 h 1.83963 v -2.19008 c 0,-2.33513 -0.32341,-3.18145 -1.31482,-3.44071 -0.49288,-0.12889 -0.5376,-0.0169 -0.54132,1.35608 -0.002,0.82312 -0.10018,1.64806 -0.21768,1.83319 -0.16356,0.25771 -1.41844,0.31973 -5.353762,0.26459 l -5.14013,-0.072 -0.0782,-1.78594 c -0.043,-0.98227 -0.14016,-1.78594 -0.21584,-1.78594 -0.31045,0 -1.31506,0.64378 -1.61574,1.03541 -0.23659,0.30814 -0.32456,2.55185 -0.33073,8.43547 l -0.008,8.01568 0.64943,0.64943 c 0.60226,0.60225 0.84015,0.64943 3.2749,0.64943 2.90138,0 3.51754,0.2715 2.96389,1.306 -0.2666,0.49815 -0.52946,0.54517 -2.99492,0.53573 -1.66623,-0.006 -3.01759,-0.14745 -3.52387,-0.36784 z m 10.691892,-19.25026 c 0.0794,-0.9549 0.0601,-0.97706 -0.92384,-1.05834 -0.759852,-0.0628 -1.028562,-0.21206 -1.101772,-0.61217 -0.16255,-0.88845 -0.58723,-1.19063 -1.67327,-1.19063 -0.93784,0 -1.07726,0.0905 -1.42636,0.92604 -0.31975,0.76526 -0.52413,0.92605 -1.17713,0.92605 -0.74646,0 -0.7902,0.059 -0.7902,1.06601 v 1.06601 l 3.50573,-0.0738 3.505732,-0.0738 z m 1.88486,13.38856 c -0.25238,-0.3041 -0.2715,-0.53998 -0.0697,-0.8599 0.2212,-0.35066 0.70517,-0.44084 2.36591,-0.44084 1.99931,0 2.09162,0.0268 2.17713,0.63154 0.12303,0.87013 -0.33501,1.0795 -2.37201,1.0842 -1.2809,0.003 -1.84728,-0.1089 -2.10132,-0.415 z m 0.009,-3.42919 c -0.64644,-0.77892 0.009,-1.30129 1.74594,-1.39213 2.26606,-0.11848 2.8134,0.0733 2.7123,0.95012 -0.0811,0.70328 -0.12505,0.71999 -2.09233,0.79492 -1.59683,0.0608 -2.08269,-0.0117 -2.36591,-0.35291 z" id="path1"></path><path style="fill:#000000;stroke-width:0.443785" d="m 84.890728,121.56246 c -1.90681,-1.90753 -1.9485,-1.95458 -1.9485,-2.19876 0,-0.24421 0.0414,-0.29095 1.95018,-2.19896 l 1.95018,-1.94944 0.52831,0.53108 0.52832,0.53107 -1.08992,1.09125 -1.08992,1.09126 h 4.63088 4.63088 v 0.87329 0.87329 h -4.58476 c -2.52162,0 -4.58477,0.0208 -4.58477,0.0461 0,0.0254 0.47733,0.52406 1.06075,1.10818 l 1.06074,1.06205 -0.54693,0.5444 -0.54693,0.5444 z" id="path2"></path></g></svg>'},6804:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCode=void 0,(r=t.ChannelCode||(t.ChannelCode={})).FSLS="FSLS",r.HSTS="HSTS",r.SHEL="SHEL",r.GTRC="GTRC",r.ATRC="ATRC",r.WDAP="WDAP",r.QVHS="QVHS"},6894:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.url=function(e,t="",r){let i=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==r?r.protocol+"//"+e:"https://"+e),o("parse %s",e),i=(0,n.parse)(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const s=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+t,i.href=i.protocol+"://"+s+(r&&r.port===i.port?"":":"+i.port),i};const n=r(4956),o=(0,i(r(7833)).default)("socket.io-client:url")},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(r,i){function n(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}_(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&_(e,"error",t,{once:!0})}(e,n)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){var n,o,s,l;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=c(e))>0&&s.length>n&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=u.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function _(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function n(o){i.once&&e.removeEventListener(t,n),r(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,u=p(c,l);for(r=0;r<l;++r)i(u[r],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7142:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=void 0;var r=function(){function e(e,t,r){this.mode=e,this.size=t,this.mtime=new Date(1e3*r)}return e.prototype.checkModeProperty=function(t){return(this.mode&e.S_IFMT)===t},e.prototype.isBlockDevice=function(){return this.checkModeProperty(e.S_IFBLK)},e.prototype.isCharacterDevice=function(){return this.checkModeProperty(e.S_IFCHR)},e.prototype.isDirectory=function(){return this.checkModeProperty(e.S_IFDIR)},e.prototype.isFIFO=function(){return this.checkModeProperty(e.S_IFIFO)},e.prototype.isisSocket=function(){return this.checkModeProperty(e.S_IFSOCK)},e.prototype.isSymbolicLink=function(){return this.checkModeProperty(e.S_IFLNK)},e.prototype.isFile=function(){return this.checkModeProperty(e.S_IFREG)},e.S_IFMT=61440,e.S_IFSOCK=49152,e.S_IFLNK=40960,e.S_IFREG=32768,e.S_IFBLK=24576,e.S_IFDIR=16384,e.S_IFCHR=8192,e.S_IFIFO=4096,e.S_ISUID=2048,e.S_ISGID=1024,e.S_ISVTX=512,e.S_IRWXU=448,e.S_IRUSR=256,e.S_IWUSR=128,e.S_IXUSR=64,e.S_IRWXG=56,e.S_IRGRP=32,e}();t.Stats=r},7162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(8794),n=function(){function e(){}return e.prototype.clear=function(){this.buffer=void 0},e.prototype.append=function(e){var t,r=[];this.buffer&&1===e[3]&&0===e[2]&&0===e[1]&&0===e[0]&&(r.push(new i.default(this.buffer.subarray(4))),t=Uint8Array.from(e)),null==t&&(t=this.mergeBuffer(e));for(var n=0,o=function(e){var t=3;return function(){for(var r=0;t<e.length;t++)switch(e[t]){case 0:r++;break;case 1:if(3===r)return t-3;default:r=0}}}(t),s=o();null!=s;s=o())r.push(new i.default(t.subarray(n+4,s))),n=s;return this.buffer=t.subarray(n),r},e.prototype.mergeBuffer=function(e){if(null==this.buffer)return Uint8Array.from(e);var t=new Uint8Array(this.buffer.byteLength+e.length);return this.buffer.byteLength>0&&t.set(this.buffer,0),t.set(e,this.buffer.byteLength),t},e}();t.default=n},7164:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsePlayer=void 0;var i=r(1635),n=r(8824),o=i.__importStar(r(9445)),s=i.__importDefault(r(3644)),a=i.__importDefault(r(8089)),c=function(e){function t(r,i,n,s){void 0===n&&(n=t.playerFullName),void 0===s&&(s=t.createElement());var a=e.call(this,r,i,n,t.storageKeyPrefix,s)||this;return a.tag=s,a.videoStats=[],a.noDecodedFramesSince=-1,a.currentTimeNotChangedSince=-1,a.bigBufferSince=-1,a.aheadOfBufferSince=-1,a.fpf=t.DEFAULT_FRAMES_PER_FRAGMENT,a.supportsScreenshot=!0,a.waitUntilSegmentRemoved=!1,a.blocks=[],a.frames=[],a.jumpEnd=-1,a.lastTime=-1,a.canPlay=!1,a.seekingSince=-1,a.isSafari=!!window.safari,a.isChrome=navigator.userAgent.includes("Chrome"),a.isMac=navigator.platform.startsWith("Mac"),a.MAX_TIME_TO_RECOVER=200,a.MAX_BUFFER=a.isSafari?2:a.isChrome&&a.isMac?.9:.2,a.MAX_AHEAD=-.2,a.onVideoError=function(e){console.error("[".concat(a.name,"]"),e)},a.onVideoCanPlay=function(){a.onCanPlayHandler()},a.checkVideoResize=function(){if(a.tag){var e=a.tag,t=e.videoHeight,r=e.videoWidth;a.videoHeight===t&&a.videoWidth===r||a.calculateScreenInfoForBounds(r,t)}},a.cleanSourceBuffer=function(){if(a.sourceBuffer&&!(a.sourceBuffer.updating||a.blocks.length<10))try{a.sourceBuffer.removeEventListener("updateend",a.cleanSourceBuffer),a.waitUntilSegmentRemoved=!1;var e=a.blocks[0].start,t=a.blocks[4].end;a.blocks=a.blocks.slice(5),a.sourceBuffer.remove(e,t);for(var r=a.frames.shift();r;){if(!a.checkForIFrame(r)){a.frames.unshift(r);break}r=a.frames.shift()}}catch(e){console.error("[".concat(a.name,"]"),"Failed to clean source buffer")}},a.jumpToEnd=function(){if(a.sourceBuffer&&!a.sourceBuffer.updating&&a.tag.buffered.length){var e=a.tag.buffered.end(a.tag.seekable.length-1);console.log("[".concat(a.name,"]"),"Jumping to the end (".concat(a.jumpEnd,", ").concat(e-a.jumpEnd,").")),a.tag.currentTime=e,a.jumpEnd=-1,a.sourceBuffer.removeEventListener("updateend",a.jumpToEnd)}},s.oncontextmenu=function(e){return e.preventDefault(),!1},s.addEventListener("error",a.onVideoError),s.addEventListener("canplay",a.onVideoCanPlay),(0,o.setLogger)(function(){},console.error),a}return i.__extends(t,e),t.createElement=function(e){var t=document.createElement("video");return t.muted=!0,t.autoplay=!0,t.setAttribute("muted","muted"),t.setAttribute("autoplay","autoplay"),"string"==typeof e&&(t.id=e),t.className="video-layer",t},t.isSupported=function(){return"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(o.mimeType)},t.createConverter=function(e,r,i){return void 0===r&&(r=t.DEFAULT_FRAMES_PER_SECOND),void 0===i&&(i=t.DEFAULT_FRAMES_PER_FRAGMENT),new o.default(e,r,i)},t.prototype.getVideoPlaybackQuality=function(){var e=this.tag;if(void 0!==e.mozDecodedFrames)return null;var t=Date.now();if("function"==typeof this.tag.getVideoPlaybackQuality){var r=this.tag.getVideoPlaybackQuality();return{timestamp:t,decodedFrames:r.totalVideoFrames,droppedFrames:r.droppedVideoFrames}}return void 0!==e.webkitDecodedFrameCount?{timestamp:t,decodedFrames:e.webkitDecodedFrameCount,droppedFrames:e.webkitDroppedFrameCount}:null},t.prototype.onCanPlayHandler=function(){this.canPlay=!0,this.tag.play(),this.tag.removeEventListener("canplay",this.onVideoCanPlay),this.checkVideoResize()},t.prototype.calculateMomentumStats=function(){var e=this.getVideoPlaybackQuality();if(e){var t=Date.now(),r=t-1e3;for(this.videoStats.push(e);this.videoStats.length&&this.videoStats[0].timestamp<r;)this.videoStats.shift();for(;this.inputBytes.length&&this.inputBytes[0].timestamp<r;)this.inputBytes.shift();var i=0;this.inputBytes.forEach(function(e){i+=e.bytes});var n=this.inputBytes.length;if(this.videoStats.length){var o=this.videoStats[0],s=e.decodedFrames-o.decodedFrames,a=e.droppedFrames-o.droppedFrames;this.momentumQualityStats={decodedFrames:s,droppedFrames:a,inputBytes:i,inputFrames:n,timestamp:t}}}},t.prototype.resetStats=function(){e.prototype.resetStats.call(this),this.videoStats=[]},t.prototype.getImageDataURL=function(){var e=document.createElement("canvas");e.width=this.tag.clientWidth,e.height=this.tag.clientHeight;var t=e.getContext("2d");return t&&t.drawImage(this.tag,0,0,e.width,e.height),e.toDataURL()},t.prototype.play=function(){if(e.prototype.play.call(this),this.getState()===n.BasePlayer.STATE.PLAYING){if(!this.converter){var r=t.DEFAULT_FRAMES_PER_SECOND;this.videoSettings&&(r=this.videoSettings.maxFps),this.converter=t.createConverter(this.tag,r,this.fpf),this.canPlay=!1,this.resetStats()}this.converter.play()}},t.prototype.pause=function(){e.prototype.pause.call(this),this.stopConverter()},t.prototype.stop=function(){e.prototype.stop.call(this),this.stopConverter()},t.prototype.setVideoSettings=function(r,i,o){if(this.videoSettings&&this.videoSettings.maxFps!==r.maxFps){var s=this.getState();this.converter&&(this.stop(),this.converter=t.createConverter(this.tag,r.maxFps,this.fpf),this.canPlay=!1),s===n.BasePlayer.STATE.PLAYING&&this.play()}e.prototype.setVideoSettings.call(this,r,i,o)},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.pushFrame=function(t){e.prototype.pushFrame.call(this,t),this.checkForIFrame(t)?this.checkForBadState():this.frames.push(t)},t.prototype.checkForBadState=function(){var e=this,t=this.tag.currentTime,r=Date.now(),i=!1;if(this.momentumQualityStats&&(0===this.momentumQualityStats.decodedFrames&&this.momentumQualityStats.inputFrames>0?-1===this.noDecodedFramesSince?this.noDecodedFramesSince=r:r-this.noDecodedFramesSince>this.MAX_TIME_TO_RECOVER&&(i=!0):this.noDecodedFramesSince=-1),t===this.lastTime&&-1===this.currentTimeNotChangedSince?this.currentTimeNotChangedSince=r:this.currentTimeNotChangedSince=-1,this.lastTime=t,this.tag.buffered.length){var n=this.tag.buffered.end(0),o=n-t;if((0|n)-t>this.MAX_BUFFER?-1===this.bigBufferSince?this.bigBufferSince=r:r-this.bigBufferSince>this.MAX_TIME_TO_RECOVER&&(i=!0):this.bigBufferSince=-1,o<this.MAX_AHEAD?-1===this.aheadOfBufferSince?this.aheadOfBufferSince=r:r-this.aheadOfBufferSince>this.MAX_TIME_TO_RECOVER&&(i=!0):this.aheadOfBufferSince=-1,-1!==this.currentTimeNotChangedSince&&r-this.currentTimeNotChangedSince>this.MAX_TIME_TO_RECOVER&&(i=!0),!i)return;var s=0;if(-1!==this.seekingSince&&(s=r-this.seekingSince)<1500)return;var a=function(){e.seekingSince=-1,e.tag.removeEventListener("seeked",a),e.tag.play()};-1!==this.seekingSince&&console.warn("[".concat(this.name,"]"),"Attempt to seek while already seeking! ".concat(s)),this.seekingSince=r,this.tag.addEventListener("seeked",a),this.tag.currentTime=this.tag.buffered.end(0)}},t.prototype.checkForIFrame=function(e){if(!this.converter)return!1;if(this.sourceBuffer=this.converter.sourceBuffer,n.BasePlayer.isIFrame(e)){var t=0,r=0;if(this.tag.buffered&&this.tag.buffered.length&&(t=this.tag.buffered.start(0),r=this.tag.buffered.end(0)),0!==r&&t<r){var i={start:t,end:r};if(this.blocks.push(i),this.blocks.length>10)return this.waitUntilSegmentRemoved=!0,this.sourceBuffer.addEventListener("updateend",this.cleanSourceBuffer),this.converter.appendRawData(e),!0}this.sourceBuffer&&(this.sourceBuffer.onupdateend=this.checkVideoResize)}return!this.waitUntilSegmentRemoved&&(this.converter.appendRawData(e),!0)},t.prototype.stopConverter=function(){this.converter&&(this.converter.appendRawData(new Uint8Array([])),this.converter.pause(),delete this.converter)},t.prototype.getFitToScreenStatus=function(){return t.getFitToScreenStatus(this.udid,this.displayInfo)},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.storageKeyPrefix="MseDecoder",t.playerFullName="H264 Converter",t.playerCodeName="mse",t.preferredVideoSettings=new s.default({lockedVideoOrientation:-1,bitrate:7340032,maxFps:60,iFrameInterval:10,bounds:new a.default(720,720),sendFrameMeta:!1}),t.DEFAULT_FRAMES_PER_FRAGMENT=1,t.DEFAULT_FRAMES_PER_SECOND=60,t}(n.BasePlayer);t.MsePlayer=c},7305:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Multiplexer=void 0;var n=r(1635),o=r(462),s=r(9989),a=r(2701),c=r(9958),l=r(6402),u=r(5524),h=r(69),d=n.__importDefault(r(2332)),f=function(e){function t(r,n,o){void 0===n&&(n=0);var c=e.call(this)||this;c.ws=r,c._id=n,c.CONNECTING=0,c.OPEN=1,c.CLOSING=2,c.CLOSED=3,c.binaryType="blob",c.channels=new Map,c.nextId=0,c.maxId=4294967296,c.storage=[],c.emptyTimerScheduled=!1,c.onclose=null,c.onerror=null,c.onmessage=null,c.onopen=null,c.url="",c.readyState=c.CONNECTING,0===c._id&&(r.binaryType="arraybuffer",c.readyState=c.ws.readyState),c.messageEmitter=o||r;var l=function(e){c.readyState=c.ws.readyState,c.dispatchEvent(e)},f=function(e){c.readyState=c.ws.readyState,c.dispatchEvent(e),c.channels.clear()},p=function(e){c.readyState=c.ws.readyState,c.dispatchEvent(e),c.channels.clear()},_=function(e){var t=e.data,r=s.Message.parse(t);switch(r.type){case a.MessageType.CreateChannel:var n=r.channelId,o=r.data;c.nextId<n&&(c.nextId=n);var l=c._createChannel(n,!1);c.emit("channel",{channel:l,data:o});break;case a.MessageType.RawStringData:var f=c.channels.get(r.channelId);if(f){l=f.channel;var p=new h.MessageEventClass("message",{data:d.default.utf8ByteArrayToString(i.from(r.data)),lastEventId:e.lastEventId,origin:e.origin,source:e.source});l.dispatchEvent(p)}else console.error("Channel with id (".concat(r.channelId,") not found"));break;case a.MessageType.RawBinaryData:var _=c.channels.get(r.channelId);_?(l=_.channel,p=new h.MessageEventClass("message",{data:r.data,lastEventId:e.lastEventId,origin:e.origin,source:e.source}),l.dispatchEvent(p)):console.error("Channel with id (".concat(r.channelId,") not found"));break;case a.MessageType.Data:var v=c.channels.get(r.channelId);if(v){var g=v.emitter;p=new h.MessageEventClass("message",{data:r.data,lastEventId:e.lastEventId,origin:e.origin,source:e.source}),g.dispatchEvent(p)}else console.error("Channel with id (".concat(r.channelId,") not found"));break;case a.MessageType.CloseChannel:var y=c.channels.get(r.channelId);if(y){(l=y.channel).readyState=l.CLOSING;try{l.dispatchEvent(r.toCloseEvent())}finally{l.readyState=l.CLOSED}}else console.error("Channel with id (".concat(r.channelId,") not found"));break;default:var m=new Error("Unsupported message type: ".concat(r.type));c.dispatchEvent(new u.ErrorEventClass("error",{error:m}))}},v=function(){if(c.storage.length){var e=c.ws;e instanceof t?c.storage.forEach(function(t){return e.sendData(t)}):c.storage.forEach(function(t){return e.send(t)}),c.storage.length=0}},g=function(){r.removeEventListener("open",l),r.removeEventListener("error",p),r.removeEventListener("close",f),c.messageEmitter.removeEventListener("message",_),c.off("close",g),c.off("open",v)};return r.addEventListener("open",l),r.addEventListener("error",p),r.addEventListener("close",f),c.messageEmitter.addEventListener("message",_),c.on("close",g),c.on("open",v),c.scheduleEmptyEvent(),c}return n.__extends(t,e),t.wrap=function(e){return new t(e)},Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.scheduleEmptyEvent=function(){var e=this;this.emptyTimerScheduled||(this.emptyTimerScheduled=!0,Promise.resolve().then(function(){e.emptyTimerScheduled&&(e.emptyTimerScheduled=!1,e.emit("empty",e))}))},t.prototype.clearEmptyEvent=function(){this.emptyTimerScheduled&&(this.emptyTimerScheduled=!1)},t.prototype.close=function(e,r){if(void 0===e&&(e=1e3),this.readyState!==this.CLOSED&&this.readyState!==this.CLOSING)if(this._id){this.readyState=this.CLOSING;try{var i=s.Message.fromCloseEvent(this._id,e,r).toBuffer();this.ws instanceof t?this.ws.sendData(i):this.ws.send(i),this.emit("close",new l.CloseEventClass("close",{code:e,reason:r}))}finally{this.readyState=this.CLOSED}}else this.ws.close(e,r)},t.prototype.send=function(e){this.ws instanceof t&&(e="string"==typeof e?s.Message.createBuffer(a.MessageType.RawStringData,this._id,i.from(e)):s.Message.createBuffer(a.MessageType.RawBinaryData,this._id,i.from(e))),this._send(e)},t.prototype.sendData=function(e){this.ws instanceof t&&(e=s.Message.createBuffer(a.MessageType.Data,this._id,i.from(e))),this._send(e)},t.prototype._send=function(e){var r=this.readyState;if(r===this.OPEN)this.ws instanceof t?this.ws.sendData(e):this.ws.send(e);else{if(r!==this.ws.CONNECTING)throw Error("Socket is already in CLOSING or CLOSED state.");this.storage.push(e)}},t.prototype._createChannel=function(e,r){var i=this,n=new o.TypedEmitter,s=new t(this,e,n);return this.channels.set(e,{channel:s,emitter:n}),r?this.readyState===this.OPEN&&d.default.setImmediate(function(){s.readyState=i.OPEN,s.dispatchEvent(new c.EventClass("open"))}):s.readyState=this.readyState,s.addEventListener("close",function(){i.channels.delete(e),i.channels.size||i.scheduleEmptyEvent()}),this.clearEmptyEvent(),s},t.prototype.createChannel=function(e){if(this.readyState===this.CLOSING||this.readyState===this.CLOSED)throw Error("Incorrect socket state");var t=this.getNextId(),r=this._createChannel(t,!0);return this.sendData(s.Message.createBuffer(a.MessageType.CreateChannel,t,e)),r},t.prototype.getNextId=function(){for(var e=!1;this.channels.has(++this.nextId);)if(this.nextId===this.maxId){if(e)throw Error("No available id");this.nextId=0,e=!0}return this.nextId},t.prototype.dispatchEvent=function(t){return"close"===t.type&&"function"==typeof this.onclose&&Reflect.apply(this.onclose,this,[t]),"open"===t.type&&"function"==typeof this.onopen&&Reflect.apply(this.onopen,this,[t]),"message"===t.type&&"function"==typeof this.onmessage&&Reflect.apply(this.onmessage,this,[t]),"error"===t.type&&"function"==typeof this.onerror&&Reflect.apply(this.onerror,this,[t]),e.prototype.dispatchEvent.call(this,t)},t}(o.TypedEmitter);t.Multiplexer=f},7380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBoxCheckbox=void 0;var i=r(1635),n=r(3109),o=i.__importDefault(r(6178)),s=function(e){function t(t,r,i,n){var s=e.call(this,t,n)||this,a=document.createElement("input");a.type="checkbox";var c,l,u=document.createElement("label");u.title=t,u.classList.add("control-button"),"number"!=typeof r?(c=r.off,l=r.on):c=r,s.imageOff=o.default.create(c),s.imageOff.classList.add("image","image-off"),u.appendChild(s.imageOff),l&&(s.imageOn=o.default.create(l),s.imageOn.classList.add("image","image-on"),u.appendChild(s.imageOn),a.classList.add("two-images"));var h=i||t.toLowerCase().replace(" ","_");return u.htmlFor=a.id="input_".concat(h),s.input=a,s.label=u,s}return i.__extends(t,e),t.prototype.getElement=function(){return this.input},t.prototype.getAllElements=function(){return[this.input,this.label]},t}(n.ToolBoxElement);t.ToolBoxCheckbox=s},7444:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.TouchControlMessage=void 0;var n=r(1635),o=r(831),s=function(e){function t(t,r,i,n,s){var a=e.call(this,o.ControlMessage.TYPE_TOUCH)||this;return a.action=t,a.pointerId=r,a.position=i,a.pressure=n,a.buttons=s,a}return n.__extends(t,e),t.prototype.toBuffer=function(){var e=i.alloc(t.PAYLOAD_LENGTH+1),r=0;return r=e.writeUInt8(this.type,r),r=e.writeUInt8(this.action,r),r=e.writeUInt32BE(0,r),r=e.writeUInt32BE(this.pointerId,r),r=e.writeUInt32BE(this.position.point.x,r),r=e.writeUInt32BE(this.position.point.y,r),r=e.writeUInt16BE(this.position.screenSize.width,r),r=e.writeUInt16BE(this.position.screenSize.height,r),r=e.writeUInt16BE(this.pressure*t.MAX_PRESSURE_VALUE,r),e.writeUInt32BE(this.buttons,r),e},t.prototype.toString=function(){return"TouchControlMessage{action=".concat(this.action,", pointerId=").concat(this.pointerId,", position=").concat(this.position,", pressure=").concat(this.pressure,", buttons=").concat(this.buttons,"}")},t.prototype.toJSON=function(){return{type:this.type,action:this.action,pointerId:this.pointerId,position:this.position.toJSON(),pressure:this.pressure,buttons:this.buttons}},t.PAYLOAD_LENGTH=28,t.MAX_PRESSURE_VALUE=65535,t}(o.ControlMessage);t.TouchControlMessage=s},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],c=o[1],l=new n(function(e,t,r){return 3*(t+r)/4-r}(0,s,c)),u=0,h=c>0?s-4:s;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===c&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=16383,a=0,c=i-n;a<c;a+=s)o.push(l(e,a,a+s>c?c:a+s));return 1===n?(t=e[i-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function l(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(c(i));return n.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7672:(e,t,r)=>{"use strict";var i,n=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.FileListingClient=void 0;var o=r(1635);r(6179);var s,a=r(2468),c=r(9809),l=r(7802),u=o.__importDefault(r(2332)),h=o.__importDefault(r(1309)),d=r(1945),f=r(2178),p=o.__importStar(r(7975)),_=r(6804),v=r(7305),g=o.__importDefault(r(8806)),y=r(275),m="[FileListing]",b="parentDirLinkBox",S="rootDirLinkBox",E="tempDirLinkBox",C="storageDirLinkBox",w="/data/local/tmp",A="/storage";!function(e){e.Drop="drop-target",e.Connect="connect"}(s||(s={}));var T,O,L=((i={})[s.Drop]="Drop files here",i[s.Connect]="Connection lost",i),R=function(e){function t(r){var i=e.call(this,r)||this;i.enterCount=0,i.entries=[],i.requireClean=!1,i.requestedPath="",i.downloads=new Map,i.uploads=new Map,i.channels=new Set,i.parent=document.body,i.serial=i.params.udid,i.path=i.params.path,i.openNewConnection(),i.setTitle("Listing ".concat(i.serial)),i.setBodyClass("file-listing"),i.name="".concat(m," [").concat(i.serial,"]"),i.tableBodyId="".concat(u.default.escapeUdid(i.serial),"_list"),i.wrapperId="wrapper_".concat(i.tableBodyId);var n=(0,f.html)(T||(T=o.__makeTemplateObject(['<div id="','" class="listing">\n            <h1 id="header">Contents ','</h1>\n            <div id="','" class="quick-link-box">\n                <a class="icon up" href="#!" ','=".."> [parent] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','"> [root] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [storage] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [temp] </a>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Size</th>\n                        <th>MTime</th>\n                    </tr>\n                </thead>\n                <tbody id="','"></tbody>\n            </table>\n        </div>'],['<div id="','" class="listing">\n            <h1 id="header">Contents ','</h1>\n            <div id="','" class="quick-link-box">\n                <a class="icon up" href="#!" ','=".."> [parent] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','"> [root] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [storage] </a>\n            </div>\n            <div id="','" class="quick-link-box">\n                <a class="icon dir" href="#!" ','="','/"> [temp] </a>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Size</th>\n                        <th>MTime</th>\n                    </tr>\n                </thead>\n                <tbody id="','"></tbody>\n            </table>\n        </div>'])),i.wrapperId,i.path,b,t.PROPERTY_NAME,S,t.PROPERTY_NAME,"/",C,t.PROPERTY_NAME,A,E,t.PROPERTY_NAME,w,i.tableBodyId).content;i.tableBody=n.getElementById(i.tableBodyId);var s=n.getElementById(i.wrapperId);return s&&(s.addEventListener("click",function(e){if(e.target&&e.target instanceof HTMLElement){var r=e.target.getAttribute(t.PROPERTY_NAME);if(r){e.preventDefault(),e.cancelBubble=!0;var n=p.resolve(i.path,r);if(n!==i.path){var o=e.target.getAttribute(t.PROPERTY_ENTRY_ID),s=void 0,a=void 0;if(o){var c=parseInt(o,10);!isNaN(c)&&i.entries[c]&&(s=i.entries[c],a=e.target)}i.loadContent(n,s,a)}}}}),i.ws instanceof v.Multiplexer&&(i.filePushHandler=new g.default(i.parent,new y.AdbkitFilePushStream(i.ws,i)),i.filePushHandler.addEventListener(i))),i.parent.appendChild(n),i}return o.__extends(t,e),t.start=function(e){return new t(e)},t.createEntryForDeviceList=function(e,t,r){if("device"===e.state){var i=document.createElement("div");return i.classList.add("file-listing",t),i.appendChild(c.BaseDeviceTracker.buildLink({action:l.ACTION.FILE_LISTING,udid:e.udid,path:"".concat(w,"/")},"list files",r)),i}},t.prototype.onDragEnter=function(){return 0===this.enterCount&&this.addForeground(s.Drop),this.enterCount++,!0},t.prototype.onDragLeave=function(){return this.enterCount--,this.enterCount<0&&(this.enterCount=0),0===this.enterCount&&this.removeForeground(s.Drop),!0},t.prototype.onDrop=function(){return this.enterCount=0,this.removeForeground(s.Drop),!0},t.prototype.findOrCreateEntryRow=function(e){return document.getElementById("entry-".concat(e))||this.addRow(!0,e,"file")},t.prototype.onFilePushUpdate=function(e){var r=this,i=e.fileName,n=e.progress,o=e.error,s=e.message,a=e.finished,c=this.uploads.get(i);if(!c||document.getElementById(c.anchor.id)!==c.anchor){var l=this.findOrCreateEntryRow(i),u=l.getElementsByTagName("a")[0];u.id||(u.id="upload_".concat(i)),c={row:l,progressEl:this.appendProgressElement(u),anchor:u,timeout:null},this.uploads.set(i,c)}var h=c.row,d=c.progressEl,f=c.anchor;o?(this.uploads.delete(i),d.style.width="100%",d.classList.add("error"),f.classList.contains("error")||(f.classList.add("error"),f.innerText="".concat(i,". ").concat(s)),c.timeout||(c.timeout=window.setTimeout(function(){var e=h.parentElement;e&&(e.removeChild(h),r.reload())},t.REMOVE_ROW_TIMEOUT))):(f.innerText="".concat(i,". ").concat(s),d.style.width="".concat(n,"%")),a&&!o&&(this.uploads.delete(i),this.reload())},t.prototype.onError=function(e){console.error(this.name,"FIXME: implement",e)},t.prototype.addForeground=function(e){var t=(0,f.html)(O||(O=o.__makeTemplateObject(['<div class="foreground ','">\n            <div class="foreground-message ','-message">',"</div>\n        </div>"],['<div class="foreground ','">\n            <div class="foreground-message ','-message">',"</div>\n        </div>"])),e,e,L[e]).content;this.parent.appendChild(t)},t.prototype.removeForeground=function(e){var t=this,r=this.parent.getElementsByClassName(e);Array.from(r).forEach(function(e){t.parent.removeChild(e)})},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),i=r.action;if(i!==l.ACTION.FILE_LISTING)throw Error("Incorrect action");var n=t.get("path")||"/data/local/tmp";return o.__assign(o.__assign({},r),{action:i,udid:u.default.parseString(t,"udid",!0),path:n})},t.prototype.buildDirectWebSocketUrl=function(){var t=e.prototype.buildDirectWebSocketUrl.call(this);return t.searchParams.set("action",l.ACTION.MULTIPLEX),t},t.prototype.onSocketClose=function(e){this.filePushHandler&&this.filePushHandler.release(),console.error(this.name,"socket closed",e.reason),this.addForeground(s.Connect)},t.prototype.onSocketMessage=function(e){},t.prototype.onSocketOpen=function(){this.loadContent(this.path)},t.prototype.loadContent=function(e,t,r,i){var o=this;if(void 0===i&&(i=""),this.ws&&this.ws.readyState===this.ws.OPEN&&this.ws instanceof v.Multiplexer&&(t||!this.channels.size&&!this.uploads.size)){var s;this.requireClean=!0,this.requestedPath=e,s=t?t.isFile()?h.default.RECV:h.default.LIST:h.default.STAT;var a=n.byteLength(e,"utf-8"),c=n.alloc(s.length+4+a),l=c.write(s,0);l=c.writeUInt32LE(a,l),c.write(e,l);var u=this.ws.createChannel(c);this.channels.add(u);var d={receivedBytes:0,path:e,entry:t,anchor:r,chunks:[],pathToLoadAfter:i};this.downloads.set(u,d);var f=function(e){o.handleReply(u,e)},p=function(){o.channels.delete(u),o.downloads.delete(u),u.removeEventListener("message",f),u.removeEventListener("close",p)};u.addEventListener("message",f),u.addEventListener("close",p)}},t.prototype.clean=function(){this.tableBody.innerHTML="";var e=document.getElementById("header");e&&(e.innerText="Content ".concat(this.path)),this.toggleQuickLinks(this.path);var t=location.hash.replace(/#!/,""),r=new URLSearchParams(t);r.get("action")===l.ACTION.FILE_LISTING&&(r.set("path",this.path),location.hash="#!".concat(r.toString()))},t.prototype.toggleQuickLinks=function(e){var t="/"===e,r=document.getElementById(b);r&&r.classList.toggle("hidden",t);var i=document.getElementById(S);i&&i.classList.toggle("hidden",t);var n=e===w,o=document.getElementById(E);o&&o.classList.toggle("hidden",n);var s=e===A,a=document.getElementById(C);a&&a.classList.toggle("hidden",s)},t.prototype.handleReply=function(e,t){var r=n.from(t.data),i=r.slice(0,4).toString("ascii");switch(i){case h.default.DENT:var o=r.slice(4),s=o.readUInt32LE(0),a=o.readUInt32LE(4),c=o.readUInt32LE(8),l=o.readUInt32LE(12),f=u.default.utf8ByteArrayToString(o.slice(16,16+l));return void this.addEntry(new d.Entry(f,s,a,c));case h.default.DONE:return void this.finishDownload(e);case h.default.STAT:var _=this.downloads.get(e);if(!_)return;var v=r.slice(4),g=v.readUInt32LE(0),y=v.readUInt32LE(4),b=v.readUInt32LE(8),S=p.basename(_.path);if(0===g)return console.error("FIXME: show error in UI"),console.error('Error: no entity "'.concat(_.path,'"')),this.channels.delete(e),void this.loadContent(w);var E=new d.Entry(S,g,y,b),C=void 0,A="";if(!E.isDirectory()){A=this.requestedPath=p.dirname(_.path);var T=this.addEntry(E);C=T?T.getElementsByTagName("a")[0]:void 0}this.loadContent(_.path,E,C,A);break;case h.default.FAIL:var O=r.readUInt32LE(4),L=u.default.utf8ByteArrayToString(r.slice(8,8+O));return void console.error(m,"FAIL: ".concat(L));case h.default.DATA:var R=this.downloads.get(e);if(!R)return;if(R.chunks.push(r.slice(4)),R.receivedBytes+=r.length-4,R.anchor){var D=R.progressEl;if(D||(D=this.appendProgressElement(R.anchor),R.progressEl=D),R.entry){var M=R.entry.size,x=100*R.receivedBytes/M;D.style.width="".concat(x,"%")}}return;default:console.error('Unexpected "'.concat(i,'"'))}},t.prototype.appendProgressElement=function(e){var t=document.createElement("span");t.className="background-progress";var r=e.parentElement;return r&&r.appendChild(t),t},t.prototype.addEntry=function(e){this.requireClean&&(this.path=this.requestedPath,this.requestedPath="",this.clean(),this.requireClean=!1,this.entries.length=0),this.entries.push(e);var r=(this.entries.length-1).toString();if("."!==e.name){if(e.name!==t.PARENT_DIR){var i=e.isDirectory()?"dir":e.isSymbolicLink()?"link":e.isFile()?"file":"else",n=e.mtime.toLocaleString();return this.addRow(!1,e.name,i,e.size.toString(),n,r)}var o=document.getElementById(b);if(o){var s=o.children[0];s&&s.setAttribute(t.PROPERTY_ENTRY_ID,r)}}},t.prototype.addRow=function(e,r,i,n,o,s){void 0===n&&(n=""),void 0===o&&(o=""),void 0===s&&(s="");var a=document.createElement("tr");a.id="entry-".concat(r),a.classList.add("entry-row");var c=document.createElement("td");c.classList.add("entry-name");var l=document.createElement("a");if(l.classList.add("icon",i),l.setAttribute(t.PROPERTY_NAME,r),s&&l.setAttribute(t.PROPERTY_ENTRY_ID,s),l.innerText=r,c.appendChild(l),a.appendChild(c),e)c.colSpan=3,l.classList.add("push");else{var u=new URL(location.href),h=new URLSearchParams(u.hash.replace(/^#!/,""));h.set("path",p.join(this.path,r)),u.hash="#!".concat(h.toString()),l.href=u.toString();var d=document.createElement("td");d.classList.add("entry-size"),d.innerText=n,a.appendChild(d);var f=document.createElement("td");f.classList.add("entry-time"),f.innerText=o,a.appendChild(f)}return e||!this.tableBody.children.length?this.tableBody.insertBefore(a,this.tableBody.firstChild):this.tableBody.appendChild(a),a},t.prototype.finishDownload=function(e){var t=this.downloads.get(e);if(t){this.downloads.delete(e);var r,i=t.progressEl;i&&this.cleanProgress(i),r=t.entry&&t.entry.isFile()?t.entry.name:p.basename(this.path),t.pathToLoadAfter&&(this.channels.delete(e),this.loadContent(t.pathToLoadAfter));var n=new File(t.chunks,r,{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download="".concat(r),o.click()}},t.prototype.cleanProgress=function(e){e.classList.add("finished"),setTimeout(function(){var t=e.parentElement;t&&t.removeChild(e)})},t.prototype.getPath=function(){return this.path},t.prototype.reload=function(){this.loadContent(this.path)},t.prototype.supportMultiplexing=function(){return!0},t.prototype.getChannelInitData=function(){var e=u.default.stringToUtf8ByteArray(this.serial),t=n.alloc(8+e.byteLength);return t.write(_.ChannelCode.FSLS,"ascii"),t.writeUInt32LE(e.length,4),t.set(e,8),t},t.ACTION=l.ACTION.FILE_LISTING,t.PARENT_DIR="..",t.PROPERTY_NAME="data-name",t.PROPERTY_ENTRY_ID="data-entry-id",t.REMOVE_ROW_TIMEOUT=2e3,t}(a.ManagerClient);t.FileListingClient=R},7690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.canvas=t,i.size=r,i.canvasCtx=i.canvas.getContext("2d"),i.canvasBuffer=i.canvasCtx.createImageData(r.w,r.h),i}return i.__extends(t,e),t.prototype.decode=function(e,t,r){if(e){for(var i=t*r,n=i>>2,o=e.subarray(0,i),s=e.subarray(i,i+n),a=e.subarray(i+n,i+2*n),c=0;c<r;c++)for(var l=0;l<t;l++){var u=l+c*t,h=~~(c/2)*~~(t/2)+~~(l/2),d=~~(c/2)*~~(t/2)+~~(l/2),f=1.164*(o[u]-16)+1.596*(a[d]-128),p=1.164*(o[u]-16)-.813*(a[d]-128)-.391*(s[h]-128),_=1.164*(o[u]-16)+2.018*(s[h]-128),v=4*u;this.canvasBuffer.data[v+0]=f,this.canvasBuffer.data[v+1]=p,this.canvasBuffer.data[v+2]=_,this.canvasBuffer.data[v+3]=255}this.canvasCtx.putImageData(this.canvasBuffer,0,0)}},t}(i.__importDefault(r(9312)).default);t.default=n},7743:(e,t)=>{"use strict";function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Backoff=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+r:e-r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},7766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BroadwayPlayer=void 0;var i=r(1635);r(5941);var n=r(1555),o=i.__importDefault(r(8089)),s=i.__importDefault(r(7690)),a=i.__importDefault(r(8177)),c=i.__importDefault(r(6054)),l=i.__importDefault(r(3644)),u=function(e){function t(r,i,n){void 0===n&&(n=t.playerFullName);var o=e.call(this,r,i,n,t.storageKeyPrefix)||this;return o.supportsScreenshot=!0,o}return i.__extends(t,e),t.isSupported=function(){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate},t.prototype.initCanvas=function(t,r){var i=this;e.prototype.initCanvas.call(this,t,r),n.BaseCanvasBasedPlayer.hasWebGLSupport()?this.canvas=new a.default(this.tag,new o.default(t,r)):this.canvas=new s.default(this.tag,new o.default(t,r)),this.avc||(this.avc=new c.default),this.avc.onPictureDecoded=function(e,t,r){i.onFrameDecoded(t,r,e)}},t.prototype.decode=function(e){this.avc&&this.avc.decode(e)},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.getFitToScreenStatus=function(){return t.getFitToScreenStatus(this.udid,this.displayInfo)},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.storageKeyPrefix="BroadwayDecoder",t.playerFullName="Noded Visor",t.playerCodeName="broadway",t.preferredVideoSettings=new l.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new o.default(360,806),sendFrameMeta:!1}),t}(n.BaseCanvasBasedPlayer);t.BroadwayPlayer=u},7802:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ACTION=void 0,(r=t.ACTION||(t.ACTION={})).LIST_HOSTS="list-hosts",r.APPL_DEVICE_LIST="appl-device-list",r.GOOG_DEVICE_LIST="goog-device-list",r.MULTIPLEX="multiplex",r.SHELL="shell",r.PROXY_WS="proxy-ws",r.PROXY_ADB="proxy-adb",r.DEVTOOLS="devtools",r.STREAM_SCRCPY="stream",r.STREAM_WS_QVH="stream-qvh",r.STREAM_MJPEG="stream-mjpeg",r.PROXY_WDA="proxy-wda",r.FILE_LISTING="list-files"},7821:(e,t,r)=>{"use strict";r.r(t)},7833:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(736)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.data=e,this.index=0,this.bitLength=8*e.byteLength}return Object.defineProperty(e.prototype,"bitsAvailable",{get:function(){return this.bitLength-this.index},enumerable:!0,configurable:!0}),e.prototype.skipBits=function(e){if(this.bitsAvailable<e)throw new Error("no bytes available");this.index+=e},e.prototype.readBits=function(e){return this.getBits(e,this.index)},e.prototype.getBits=function(e,t,r){if(void 0===r&&(r=!0),this.bitsAvailable<e)throw new Error("no bytes available");var i=t%8,n=this.data[t/8|0]&255>>>i,o=8-i;if(o>=e)return r&&(this.index+=e),n>>o-e;r&&(this.index+=o);var s=e-o;return n<<s|this.getBits(s,t+o,r)},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitLength-this.index;++e)if(0!==this.getBits(1,this.index+e,!1))return this.index+=e,e;return e},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e}();t.default=r},7975:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,i="",n=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(i.length<2||2!==n||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var c=i.lastIndexOf("/");if(c!==i.length-1){-1===c?(i="",n=0):n=(i=i.slice(0,c)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",n=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),n=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var e,i="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(i=s+"/"+i,n=47===s.charCodeAt(0))}return i=r(i,!n),n?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!i)).length||i||(e="."),e.length>0&&n&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];t(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":i.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=i.resolve(e))===(r=i.resolve(r)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,s=o-n,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var c=r.length-a,l=s<c?s:c,u=-1,h=0;h<=l;++h){if(h===l){if(c>l){if(47===r.charCodeAt(a+h))return r.slice(a+h+1);if(0===h)return r.slice(a+h)}else s>l&&(47===e.charCodeAt(n+h)?u=h:0===h&&(u=0));break}var d=e.charCodeAt(n+h);if(d!==r.charCodeAt(a+h))break;47===d&&(u=h)}var f="";for(h=n+u+1;h<=o;++h)h!==o&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(a+u):(a+=u,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),i=47===r,n=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(r=e.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"//":e.slice(0,n)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var i,n=0,o=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,c=-1;for(i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(47===l){if(!s){n=i+1;break}}else-1===c&&(s=!1,c=i+1),a>=0&&(l===r.charCodeAt(a)?-1===--a&&(o=i):(a=-1,o=c))}return n===o?o=c:-1===o&&(o=e.length),e.slice(n,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){n=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(n,o)},extname:function(e){t(e);for(var r=-1,i=0,n=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===n&&(o=!1,n=a+1),46===c?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!o){i=a+1;break}}return-1===r||-1===n||0===s||1===s&&r===n-1&&r===i+1?"":e.slice(r,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+i:r+"/"+i:i}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var i,n=e.charCodeAt(0),o=47===n;o?(r.root="/",i=1):i=0;for(var s=-1,a=0,c=-1,l=!0,u=e.length-1,h=0;u>=i;--u)if(47!==(n=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===n?-1===s?s=u:1!==h&&(h=1):-1!==s&&(h=-1);else if(!l){a=u+1;break}return-1===s||-1===c||0===h||1===h&&s===c-1&&s===a+1?-1!==c&&(r.base=r.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(r.name=e.slice(1,s),r.base=e.slice(1,c)):(r.name=e.slice(a,s),r.base=e.slice(a,c)),r.ext=e.slice(s,c)),a>0?r.dir=e.slice(0,a-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i},8007:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebTransport=t.WebSocket=t.NodeWebSocket=t.XHR=t.NodeXHR=t.Fetch=t.Socket=t.Manager=t.protocol=void 0,t.io=l,t.connect=l,t.default=l;const n=r(6894),o=r(3776);Object.defineProperty(t,"Manager",{enumerable:!0,get:function(){return o.Manager}});const s=r(6214);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return s.Socket}});const a=(0,i(r(7833)).default)("socket.io-client"),c={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const r=(0,n.url)(e,t.path||"/socket.io"),i=r.source,s=r.id,l=r.path,u=c[s]&&l in c[s].nsps;let h;return t.forceNew||t["force new connection"]||!1===t.multiplex||u?(a("ignoring socket cache for %s",i),h=new o.Manager(i,t)):(c[s]||(a("new io instance for %s",i),c[s]=new o.Manager(i,t)),h=c[s]),r.query&&!t.query&&(t.query=r.queryKey),h.socket(r.path,t)}Object.assign(l,{Manager:o.Manager,Socket:s.Socket,io:l,connect:l});var u=r(4627);Object.defineProperty(t,"protocol",{enumerable:!0,get:function(){return u.protocol}});var h=r(4956);Object.defineProperty(t,"Fetch",{enumerable:!0,get:function(){return h.Fetch}}),Object.defineProperty(t,"NodeXHR",{enumerable:!0,get:function(){return h.NodeXHR}}),Object.defineProperty(t,"XHR",{enumerable:!0,get:function(){return h.XHR}}),Object.defineProperty(t,"NodeWebSocket",{enumerable:!0,get:function(){return h.NodeWebSocket}}),Object.defineProperty(t,"WebSocket",{enumerable:!0,get:function(){return h.WebSocket}}),Object.defineProperty(t,"WebTransport",{enumerable:!0,get:function(){return h.WebTransport}}),e.exports=l},8013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolBox=void 0;var r=function(){function e(e){var t=this;this.holder=document.createElement("div"),this.holder.classList.add("control-buttons-list","control-wrapper"),e.forEach(function(e){e.getAllElements().forEach(function(e){t.holder.appendChild(e)})})}return e.prototype.getHolderElement=function(){return this.holder},e}();t.ToolBox=r},8022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogToolBox=void 0;var i=r(1635),n=r(8013),o=i.__importDefault(r(104)),s=i.__importDefault(r(6178)),a=r(3125),c=r(2857),l=r(7380),u=[{title:"Subir Vol.",code:o.default.KEYCODE_VOLUME_UP,icon:s.default.Icon.VOLUME_UP},{title:"Bajar Vol.",code:o.default.KEYCODE_VOLUME_DOWN,icon:s.default.Icon.VOLUME_DOWN},{title:"Volver",code:o.default.KEYCODE_BACK,icon:s.default.Icon.BACK},{title:"Home",code:o.default.KEYCODE_HOME,icon:s.default.Icon.HOME},{title:"Switch",code:o.default.KEYCODE_APP_SWITCH,icon:s.default.Icon.OVERVIEW}],h=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.createToolBox=function(e,r,i,n){var h=r.getName(),d=u.slice(),f=function(e,t){var r;if(null===(r=t.optional)||void 0===r?void 0:r.code){var n=t.optional.code,s="mousedown"===e?o.default.ACTION_DOWN:o.default.ACTION_UP,c=new a.KeyCodeControlMessage(s,n,0,0);i.sendMessage(c)}},p=d.map(function(e){var t=new c.ToolBoxButton(e.title,e.icon,{code:e.code});return t.addEventListener("mousedown",f),t.addEventListener("mouseup",f),t});if(r.supportsScreenshot){var _=new c.ToolBoxButton("Capturar pantalla",s.default.Icon.CAMERA);_.addEventListener("click",function(){r.createScreenshot(i.getDeviceName())}),p.push(_)}var v=new l.ToolBoxCheckbox("Capture keyboard",s.default.Icon.KEYBOARD,"capture_keyboard_".concat(e,"_").concat(h));if(v.addEventListener("click",function(e,t){var r=t.getElement();i.setHandleKeyboardEvents(r.checked)}),p.push(v),n){var g=r.getVideoSettings().displayId,y="show_more_".concat(e,"_").concat(h,"_").concat(g),m=new l.ToolBoxCheckbox("Opciones",s.default.Icon.MORE,y);m.addEventListener("click",function(e,t){var r=t.getElement();n.style.display=r.checked?"block":"none"}),p.unshift(m)}return new t(p)},t}(n.ToolBox);t.GoogToolBox=h},8056:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilePushStream=void 0;var i=r(1635),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(r(462).TypedEmitter);t.FilePushStream=n},8062:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});const i=r.p+"0adc36cf9cddfe4b6056c3ca47abaca0.png"},8089:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.width=e,this.height=t,this.w=e,this.h=t}return e.equals=function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)},e.copy=function(t){return t?new e(t.width,t.height):null},e.prototype.length=function(){return this.w*this.h},e.prototype.rotate=function(){return new e(this.height,this.width)},e.prototype.equals=function(e){return this===e||!!e&&this.width===e.width&&this.height===e.height},e.prototype.intersect=function(t){if(!t)return this;var r=Math.min(this.height,t.height);return new e(Math.min(this.width,t.width),r)},e.prototype.getHalfSize=function(){return new e(this.width>>>1,this.height>>>1)},e.prototype.toString=function(){return"Size{width=".concat(this.width,", height=").concat(this.height,"}")},e.prototype.toJSON=function(){return{width:this.width,height:this.height}},e}();t.default=r},8171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureScrcpy=void 0;var i=r(1635);r(7821);var n=i.__importDefault(r(3644)),o=r(368),s=i.__importDefault(r(8089)),a=i.__importDefault(r(2332)),c=r(8880),l=r(2857),u=i.__importDefault(r(6178)),h=r(7380),d=r(4410),f=r(1926),p=function(e){function t(t,r,n){var s=e.call(this,n)||this;return s.tracker=t,s.statusText="",s.connectionCount=0,s.onEncoders=function(e){for(var t,r=s.encoderSelectElement||document.createElement("select");t=r.firstChild;)r.removeChild(t);e.unshift(""),e.forEach(function(e){var t=document.createElement("option");t.setAttribute("value",e),t.innerText=e,r.appendChild(t)}),s.encoderSelectElement=r},s.onDisplayInfo=function(e){var t;s.statusText="Ready",s.updateStatus(),null===(t=s.dialogContainer)||void 0===t||t.classList.add("ready");for(var r,i=s.displayIdSelectElement||document.createElement("select");r=i.firstChild;)i.removeChild(r);var n=-1;if(e.forEach(function(e,t){var r=e.displayInfo,o=r.displayId,a=r.size,l=document.createElement("option");l.setAttribute("value",o.toString()),l.innerText="ID: ".concat(o,"; ").concat(a.width,"x").concat(a.height),i.appendChild(l),(s.displayInfo&&s.displayInfo.displayId===o||!s.displayInfo&&o===c.DisplayInfo.DEFAULT_DISPLAY)&&(n=t)}),n>-1){i.selectedIndex=n;var o=e[n],a=o.videoSettings,l=o.connectionCount,u=o.displayInfo;s.displayInfo=u,l>0&&a?s.fillInputsFromVideoSettings(a,!1):s.updateVideoSettingsForPlayer(),s.connectionCount=l,s.updateStatus()}s.displayIdSelectElement=i,s.dialogBody&&(s.dialogBody.classList.remove("hidden"),s.dialogBody.classList.add("visible"))},s.onConnected=function(){s.statusText="Waiting for info...",s.updateStatus(),s.okButton&&(s.okButton.disabled=!1)},s.onDisconnected=function(){s.statusText="Disconnected",s.updateStatus(),s.okButton&&(s.okButton.disabled=!0),s.dialogBody&&(s.dialogBody.classList.remove("visible"),s.dialogBody.classList.add("hidden"))},s.onPlayerChange=function(){s.updateVideoSettingsForPlayer()},s.onDisplayIdChange=function(){var e=s.displayIdSelectElement;if(e&&s.streamReceiver){var t=e.options[e.selectedIndex].value,r=parseInt(t,10);isNaN(r)||(s.displayInfo=s.streamReceiver.getDisplayInfo(r)),s.updateVideoSettingsForPlayer()}},s.onBackgroundClick=function(e){e.target===e.currentTarget&&s.cancel()},s.cancel=function(){s.streamReceiver&&(s.detachEventsListeners(s.streamReceiver),s.streamReceiver.stop()),s.emit("closed",{dialog:s,result:!1}),s.removeUI()},s.resetSettings=function(){var e=s.getPlayer();e&&s.fillInputsFromVideoSettings(e.getPreferredVideoSetting(),!1)},s.loadSettings=function(){s.updateVideoSettingsForPlayer()},s.saveSettings=function(){var e=s.buildVideoSettings(),t=s.getPlayer();if(e&&t){var r=s.getFitToScreenValue();t.saveVideoSettings(s.udid,e,r,s.displayInfo)}},s.openStream=function(){var e=s.buildVideoSettings();if(e&&s.streamReceiver&&s.playerName){var t=s.getFitToScreenValue();s.detachEventsListeners(s.streamReceiver),s.emit("closed",{dialog:s,result:!0}),s.removeUI();var r=o.StreamClientScrcpy.createPlayer(s.playerName,s.udid,s.displayInfo);if(r){s.setPreviouslyUsedPlayer(s.playerName),r.setVideoSettings(e,t,!1);var n=i.__assign(i.__assign({},s.params),{udid:s.udid,fitToScreen:t});console.log("CONFIGURE"),o.StreamClientScrcpy.start(null,n,s.streamReceiver,r,t,e),s.streamReceiver.triggerInitialInfoEvents()}}},s.udid=r.udid,s.escapedUdid=a.default.escapeUdid(s.udid),s.playerStorageKey="configure_stream::".concat(s.escapedUdid,"::player"),s.deviceName=r["ro.product.model"],s.TAG="ConfigureScrcpy[".concat(s.udid,"]"),s.createStreamReceiver(n),s.setTitle("".concat(s.deviceName,". Configure stream")),s.background=s.createUI(),s}return i.__extends(t,e),t.prototype.getTracker=function(){return this.tracker},t.prototype.createStreamReceiver=function(e){this.streamReceiver&&(this.detachEventsListeners(this.streamReceiver),this.streamReceiver.stop()),this.streamReceiver=new f.StreamReceiverScrcpy(e),this.attachEventsListeners(this.streamReceiver)},t.prototype.attachEventsListeners=function(e){e.on("encoders",this.onEncoders),e.on("displayInfo",this.onDisplayInfo),e.on("connected",this.onConnected),e.on("disconnected",this.onDisconnected)},t.prototype.detachEventsListeners=function(e){e.off("encoders",this.onEncoders),e.off("displayInfo",this.onDisplayInfo),e.off("connected",this.onConnected),e.off("disconnected",this.onDisconnected)},t.prototype.updateStatus=function(){if(this.connectionStatusElement){var e=this.statusText;this.connectionCount&&(e="".concat(e,". Other clients: ").concat(this.connectionCount,".")),this.connectionStatusElement.innerText=e}},t.prototype.getPlayer=function(){if(this.playerSelectElement){var e=this.playerSelectElement.options[this.playerSelectElement.selectedIndex].value;return o.StreamClientScrcpy.getPlayers().find(function(t){return t.playerFullName===e})}},t.prototype.updateVideoSettingsForPlayer=function(){var e=this.getPlayer();if(e){this.playerName=e.playerFullName;var t=e.loadVideoSettings(this.udid,this.displayInfo),r=e.getFitToScreenStatus(this.udid,this.displayInfo);this.fillInputsFromVideoSettings(t,r)}},t.prototype.getBasicInput=function(e){return document.getElementById("".concat(e,"_").concat(this.escapedUdid))||null},t.prototype.fillInputsFromVideoSettings=function(e,t){if(this.displayInfo&&this.displayInfo.displayId!==e.displayId&&console.error(this.TAG,"Display id from VideoSettings and DisplayInfo don't match"),console.log("fillInputsFromVideoSettings",e),this.fillBasicInput({id:"bitrate"},e),this.fillBasicInput({id:"maxFps"},e),this.fillBasicInput({id:"iFrameInterval"},e),this.fillBasicInput({id:"codecOptions"},e),e.bounds){var r=e.bounds,i=r.width,n=r.height,o=this.getBasicInput("maxWidth");o&&(o.value=i.toString(10));var s=this.getBasicInput("maxHeight");s&&(s.value=n.toString(10))}if(this.encoderSelectElement){var a=e.encoderName||"",c=Array.from(this.encoderSelectElement.options).find(function(e){return e.value===a});c&&(this.encoderSelectElement.selectedIndex=c.index)}this.fitToScreenCheckbox&&(this.fitToScreenCheckbox.checked=t,this.onFitToScreenChanged(t))},t.prototype.onFitToScreenChanged=function(e){var t=this.getBasicInput("maxHeight"),r=this.getBasicInput("maxWidth");if(this.fitToScreenCheckbox&&t&&r)if(t.disabled=r.disabled=e,e)t.setAttribute(d.Attribute.VALUE,t.value),t.value="",r.setAttribute(d.Attribute.VALUE,r.value),r.value="";else{var i=t.getAttribute(d.Attribute.VALUE);"string"==typeof i&&(t.value=i,t.removeAttribute(d.Attribute.VALUE));var n=r.getAttribute(d.Attribute.VALUE);"string"==typeof n&&(r.value=n,r.removeAttribute(d.Attribute.VALUE))}},t.prototype.fillBasicInput=function(e,t){var r=this.getBasicInput(e.id),i=t[e.id];r&&(void 0!==i&&"-"!==i&&0!==i&&null!==i?(r.value=i.toString(10),"range"===r.getAttribute("type")&&r.dispatchEvent(new Event("input"))):r.value="")},t.prototype.appendBasicInput=function(e,t){var r=document.createElement("label");r.classList.add("label"),r.innerText="".concat(t.label,":"),r.id="label_".concat(t.id,"_").concat(this.escapedUdid),e.appendChild(r);var i=document.createElement("input");i.classList.add("input"),i.id=r.htmlFor="".concat(t.id,"_").concat(this.escapedUdid);var n=t.range;return n&&(r.setAttribute("title",t.label),i.oninput=function(){var e=n.formatter?n.formatter(parseInt(i.value,10)):i.value;r.innerText="".concat(t.label," (").concat(e,"):")},i.setAttribute("type","range"),i.setAttribute("max",n.max.toString()),i.setAttribute("min",n.min.toString()),i.setAttribute("step",n.step.toString())),e.appendChild(i),i},t.prototype.getNumberValueFromInput=function(e){var t=document.getElementById("".concat(e,"_").concat(this.escapedUdid)).value;return parseInt(t,10)},t.prototype.getStringValueFromInput=function(e){return document.getElementById("".concat(e,"_").concat(this.escapedUdid)).value},t.prototype.getValueFromSelect=function(e){var t=document.getElementById("".concat(e,"_").concat(this.escapedUdid));return t.options[t.selectedIndex].value},t.prototype.buildVideoSettings=function(){try{var e=this.getNumberValueFromInput("bitrate"),t=this.getNumberValueFromInput("maxFps"),r=this.getNumberValueFromInput("iFrameInterval"),i=this.getNumberValueFromInput("maxWidth"),o=this.getNumberValueFromInput("maxHeight"),a=this.getNumberValueFromInput("displayId"),c=this.getStringValueFromInput("codecOptions")||void 0,l=void 0;!isNaN(i)&&!isNaN(o)&&i&&o&&(l=new s.default(i,o));var u=this.getValueFromSelect("encoderName")||void 0;return console.log("bitrate",e),console.log("bounds",l),console.log("maxFps",t),console.log("iFrameInterval",r),console.log("displayId",a),console.log("codecOptions",c),console.log("encoderName",u),new n.default({bitrate:e,bounds:l,maxFps:t,iFrameInterval:r,displayId:a,codecOptions:c,encoderName:u})}catch(e){return console.error(this.TAG,e.message),null}},t.prototype.getFitToScreenValue=function(){return!!this.fitToScreenCheckbox&&this.fitToScreenCheckbox.checked},t.prototype.getPreviouslyUsedPlayer=function(){return window.localStorage&&window.localStorage.getItem(this.playerStorageKey)||""},t.prototype.setPreviouslyUsedPlayer=function(e){window.localStorage&&window.localStorage.setItem(this.playerStorageKey,e)},t.prototype.createUI=function(){var e=this,t="configureDialog",r="dialog-block",i=document.createElement("div");i.classList.add("dialog-background",t);var n=this.dialogContainer=document.createElement("div");n.classList.add("dialog-container",t);var s=document.createElement("div");s.classList.add("dialog-header",t,"control-wrapper");var c=new l.ToolBoxButton("Back",u.default.Icon.ARROW_BACK);c.addEventListener("click",function(){e.cancel()}),c.getAllElements().forEach(function(e){s.appendChild(e)});var d=document.createElement("span");d.classList.add("dialog-title","main-title"),d.innerText=this.deviceName,s.appendChild(d);var f=this.dialogBody=document.createElement("div");f.classList.add("dialog-body",r,t,"hidden");var p=document.createElement("div");p.classList.add("controls");var _=document.createElement("label");_.classList.add("label"),_.innerText="Player:",p.appendChild(_);var v=this.playerSelectElement=document.createElement("select");v.classList.add("input"),v.id=_.htmlFor="player_".concat(this.escapedUdid),p.appendChild(v),f.appendChild(p);var g=this.getPreviouslyUsedPlayer();o.StreamClientScrcpy.getPlayers().forEach(function(e,t){var r=e.playerFullName,i=document.createElement("option");i.setAttribute("value",r),i.innerText=r,v.appendChild(i),r===g&&(v.selectedIndex=t)}),v.onchange=this.onPlayerChange,this.updateVideoSettingsForPlayer();var y=document.createElement("div");y.classList.add("controls","control-wrapper");var m=document.createElement("label");m.classList.add("label"),m.innerText="Display:",y.appendChild(m),this.displayIdSelectElement||(this.displayIdSelectElement=document.createElement("select")),y.appendChild(this.displayIdSelectElement),this.displayIdSelectElement.classList.add("input"),this.displayIdSelectElement.id=m.htmlFor="displayId_".concat(this.escapedUdid),this.displayIdSelectElement.onchange=this.onDisplayIdChange,this.appendBasicInput(y,{label:"Bitrate",id:"bitrate",range:{min:524288,max:8388608,step:524288,formatter:a.default.prettyBytes}}),this.appendBasicInput(y,{label:"Max FPS",id:"maxFps",range:{min:1,max:60,step:1}}),this.appendBasicInput(y,{label:"I-Frame interval",id:"iFrameInterval"});var b=document.createElement("label");b.innerText="Fit to screen",b.classList.add("label"),y.appendChild(b);var S=new h.ToolBoxCheckbox("Fit to screen",{off:u.default.Icon.TOGGLE_OFF,on:u.default.Icon.TOGGLE_ON},"fit_to_screen");S.getAllElements().forEach(function(t){y.appendChild(t),t instanceof HTMLLabelElement&&(b.htmlFor=t.htmlFor,t.classList.add("input")),t instanceof HTMLInputElement&&(e.fitToScreenCheckbox=t)}),S.addEventListener("click",function(t,r){var i=r.getElement();e.onFitToScreenChanged(i.checked)}),this.appendBasicInput(y,{label:"Max width",id:"maxWidth"}),this.appendBasicInput(y,{label:"Max height",id:"maxHeight"}),this.appendBasicInput(y,{label:"Codec options",id:"codecOptions"});var E=document.createElement("label");E.classList.add("label"),E.innerText="Encoder:",y.appendChild(E),this.encoderSelectElement||(this.encoderSelectElement=document.createElement("select")),y.appendChild(this.encoderSelectElement),this.encoderSelectElement.classList.add("input"),this.encoderSelectElement.id=E.htmlFor="encoderName_".concat(this.escapedUdid),f.appendChild(y);var C=document.createElement("div");C.classList.add("controls");var w=this.resetSettingsButton=document.createElement("button");w.classList.add("button"),w.innerText="Reset settings",w.addEventListener("click",this.resetSettings),C.appendChild(w);var A=this.loadSettingsButton=document.createElement("button");A.classList.add("button"),A.innerText="Load settings",A.addEventListener("click",this.loadSettings),C.appendChild(A);var T=this.saveSettingsButton=document.createElement("button");T.classList.add("button"),T.innerText="Save settings",T.addEventListener("click",this.saveSettings),C.appendChild(T),f.appendChild(C);var O=document.createElement("div");O.classList.add("dialog-footer",r,t);var L=document.createElement("span");L.classList.add("subtitle"),this.connectionStatusElement=L,O.appendChild(L),this.statusText="Connecting...",this.updateStatus();var R=this.okButton=document.createElement("button");return R.innerText="Open",R.disabled=!0,R.addEventListener("click",this.openStream),O.appendChild(R),f.appendChild(O),n.appendChild(s),n.appendChild(f),n.appendChild(O),i.appendChild(n),i.addEventListener("click",this.onBackgroundClick),document.body.appendChild(i),i},t.prototype.removeUI=function(){var e,t,r,i;document.body.removeChild(this.background),null===(e=this.okButton)||void 0===e||e.removeEventListener("click",this.openStream),null===(t=this.resetSettingsButton)||void 0===t||t.removeEventListener("click",this.resetSettings),null===(r=this.loadSettingsButton)||void 0===r||r.removeEventListener("click",this.loadSettings),null===(i=this.saveSettingsButton)||void 0===i||i.removeEventListener("click",this.saveSettings),this.background.removeEventListener("click",this.onBackgroundClick)},t}(r(8672).BaseClient);t.ConfigureScrcpy=p},8177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=i.__importDefault(r(9388)),o=i.__importDefault(r(1018)),s=i.__importDefault(r(8257)),a=i.__importDefault(r(8795)),c=i.__importDefault(r(4989)),l=function(e){function t(t,r){var i=e.call(this,t,r,!1)||this;return i.canvas=t,i.size=r,i}return i.__extends(t,e),t.prototype.onInitShaders=function(){this.gl&&(this.program=new o.default(this.gl),this.program.attach(new s.default(this.gl,t.vertexShaderScript)),this.program.attach(new s.default(this.gl,t.fragmentShaderScript)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),this.gl.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),this.gl.enableVertexAttribArray(this.textureCoordAttribute))},t.prototype.onInitTextures=function(){this.gl&&(this.YTexture=new c.default(this.gl,this.size),this.UTexture=new c.default(this.gl,this.size.getHalfSize()),this.VTexture=new c.default(this.gl,this.size.getHalfSize()))},t.prototype.onInitSceneTextures=function(){this.program&&this.YTexture&&this.UTexture&&this.VTexture&&(this.YTexture.bind(0,this.program,"YTexture"),this.UTexture.bind(1,this.program,"UTexture"),this.VTexture.bind(2,this.program,"VTexture"))},t.prototype.fillYUVTextures=function(e,t,r){this.YTexture&&this.UTexture&&this.VTexture&&(this.YTexture.fill(e),this.UTexture.fill(t),this.VTexture.fill(r))},t.prototype.decode=function(e,t,r){if(e&&this.YTexture&&this.UTexture&&this.VTexture){var i=t*r,n=i>>2;this.fillYUVTextures(e.subarray(0,i),e.subarray(i,i+n),e.subarray(i+n,i+2*n)),this.drawScene()}},t.prototype.toString=function(){return"YUVCanvas Size: "+this.size},t.vertexShaderScript=a.default.createFromSource("x-shader/x-vertex","\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n      varying highp vec2 vTextureCoord;\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    "),t.fragmentShaderScript=a.default.createFromSource("x-shader/x-fragment","\n      precision highp float;\n      varying highp vec2 vTextureCoord;\n      uniform sampler2D YTexture;\n      uniform sampler2D UTexture;\n      uniform sampler2D VTexture;\n      const mat4 YUV2RGB = mat4\n      (\n       1.1643828125, 0, 1.59602734375, -.87078515625,\n       1.1643828125, -.39176171875, -.81296875, .52959375,\n       1.1643828125, 2.017234375, 0, -1.081390625,\n       0, 0, 0, 1\n      );\n\n      void main(void) {\n       gl_FragColor = vec4(\n         texture2D(YTexture,  vTextureCoord).x,\n         texture2D(UTexture, vTextureCoord).x,\n         texture2D(VTexture, vTextureCoord).x,\n         1\n       ) * YUV2RGB;\n      }"),t}(n.default);t.default=l},8209:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fetch=void 0;const i=r(528);class n extends i.Polling{doPoll(){this._fetch().then(e=>{if(!e.ok)return this.onError("fetch read error",e.status,e);e.text().then(e=>this.onData(e))}).catch(e=>{this.onError("fetch read error",e)})}doWrite(e,t){this._fetch(e).then(e=>{if(!e.ok)return this.onError("fetch write error",e.status,e);t()}).catch(e=>{this.onError("fetch write error",e)})}_fetch(e){var t;const r=void 0!==e,i=new Headers(this.opts.extraHeaders);return r&&i.set("content-type","text/plain;charset=UTF-8"),null===(t=this.socket._cookieJar)||void 0===t||t.appendCookies(i),fetch(this.uri(),{method:r?"POST":"GET",body:r?e:null,headers:i,credentials:this.opts.withCredentials?"include":"omit"}).then(e=>{var t;return null===(t=this.socket._cookieJar)||void 0===t||t.parseCookies(e.headers.getSetCookie()),e})}}t.Fetch=n},8223:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.SocketWithUpgrade=t.SocketWithoutUpgrade=void 0;const n=r(9419),o=r(5374),s=r(8661),a=r(1015),c=r(4454),l=r(6376),u=r(4624),h=(0,i(r(7833)).default)("engine.io-client:socket"),d="function"==typeof addEventListener&&"function"==typeof removeEventListener,f=[];d&&addEventListener("offline",()=>{h("closing %d connection(s) because the network was lost",f.length),f.forEach(e=>e())},!1);class p extends c.Emitter{constructor(e,t){if(super(),this.binaryType=u.defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const r=(0,a.parse)(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=(0,a.parse)(t.host).host);(0,o.installTimerFunctions)(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=(0,s.decode)(this.opts.query)),d&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(h("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},f.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=(0,u.createCookieJar)()),this._open()}createTransport(e){h('creating transport "%s"',e);const t=Object.assign({},this.opts.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return h("options: %j",r),new this._transportsByName[e](r)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&p.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){h("setting transport %s",e.name),this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){h("socket open"),this.readyState="open",p.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(h('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else h('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();h("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const r=this.writeBuffer[t].data;if(r&&(e+=(0,o.byteLength)(r)),t>0&&e>this._maxPayload)return h("only send %d out of %d packets",t,this.writeBuffer.length),this.writeBuffer.slice(0,t);e+=2}return h("payload size is %d (max: %d)",e,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(h("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,(0,u.nextTick)(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof r&&(i=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),h("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(h("socket error %j",e),p.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return h("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(h('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),d&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=f.indexOf(this._offlineEventListener);-1!==e&&(h("removing listener for the 'offline' event"),f.splice(e,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}t.SocketWithoutUpgrade=p,p.protocol=l.protocol;class _ extends p{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade){h("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){h('probing transport "%s"',e);let t=this.createTransport(e),r=!1;p.priorWebsocketSuccess=!1;const i=()=>{r||(h('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",i=>{if(!r)if("pong"===i.type&&"probe"===i.data){if(h('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;p.priorWebsocketSuccess="websocket"===t.name,h('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{r||"closed"!==this.readyState&&(h("changing transport and sending upgrade packet"),l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{h('probe transport "%s" failed',e);const r=new Error("probe error");r.transport=t.name,this.emitReserved("upgradeError",r)}}))};function n(){r||(r=!0,l(),t.close(),t=null)}const o=r=>{const i=new Error("probe error: "+r);i.transport=t.name,n(),h('probe transport "%s" failed because of error: %s',e,r),this.emitReserved("upgradeError",i)};function s(){o("transport closed")}function a(){o("socket closed")}function c(e){t&&e.name!==t.name&&(h('"%s" works - aborting "%s"',e.name,t.name),n())}const l=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",c)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}t.SocketWithUpgrade=_,t.Socket=class extends _{constructor(e,t={}){const r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>n.transports[e]).filter(e=>!!e)),super(e,r)}}},8257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635).__importDefault(r(3146));t.default=function(e,t){if(this.gl=e,this.script=t,"x-shader/x-fragment"===t.type)this.shader=e.createShader(e.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==t.type)return void(0,i.default)("Unknown shader type: ".concat(t.type));this.shader=e.createShader(e.VERTEX_SHADER)}this.shader?(e.shaderSource(this.shader,t.source),e.compileShader(this.shader),e.getShaderParameter(this.shader,e.COMPILE_STATUS)||(0,i.default)("An error occurred compiling the shaders: "+e.getShaderInfoLog(this.shader))):(0,i.default)("Shader is ".concat(typeof this.shader))}},8287:(e,t,r)=>{"use strict";const i=r(7526),n=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|_(e,t);let i=a(r);const n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return c.from(i,t,r);const n=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||J(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,c.prototype),i}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function _(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return i?-1:q(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:m(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,i,n){let o,s=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){let i=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===c)return i*s}else-1!==i&&(o-=o-i),i=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let i=0;i<c;i++)if(l(e,o+i)!==l(t,i)){r=!1;break}if(r)return o}return-1}function b(e,t,r,i){r=Number(r)||0;const n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;const o=t.length;let s;for(i>o/2&&(i=o/2),s=0;s<i;++s){const i=parseInt(t.substr(2*s,2),16);if(J(i))return s;e[r+s]=i}return s}function S(e,t,r,i){return G(q(t,e.length-r),e,r,i)}function E(e,t,r,i){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function C(e,t,r,i){return G(z(t),e,r,i)}function w(e,t,r,i){return G(function(e,t){let r,i,n;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function A(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;for(;n<r;){const t=e[n];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(n+s<=r){let r,i,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[n+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(c=(15&t)<<12|(63&r)<<6|63&i,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=O));return r}(i)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(X(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const i=c.allocUnsafe(t);let n=0;for(r=0;r<e.length;++r){let t=e[r];if(X(t,Uint8Array))n+t.length>i.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,i,n){if(X(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),l=this.slice(i,n),u=e.slice(t,r);for(let e=0;e<a;++e)if(l[e]!==u[e]){o=l[e],s=u[e];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}const n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function L(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function R(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function D(e,t,r){const i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=Z[e[i]];return n}function M(e,t,r){const i=e.slice(t,r);let n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}function x(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,i,n,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function I(e,t,r,i,n){j(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function k(e,t,r,i,n){j(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function B(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,i,o){return t=+t,r>>>=0,o||B(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function N(e,t,r,i,o){return t=+t,r>>>=0,o||B(e,0,r,8),n.write(e,t,r,i,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,c.prototype),i},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Q(function(e){Y(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))}),c.prototype.readBigUInt64BE=Q(function(e){Y(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Q(function(e){Y(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),c.prototype.readBigInt64BE=Q(function(e){Y(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||P(this,e,t,r,Math.pow(2,8*r)-1,0);let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||P(this,e,t,r,Math.pow(2,8*r)-1,0);let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Q(function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Q(function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}let n=0,o=1,s=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o|0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o|0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Q(function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Q(function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);const n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},c.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{const o=c.isBuffer(e)?e:c.from(e,i),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%s]}return this};const U={};function H(e,t,r){U[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function K(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function j(e,t,r,i,n,o){if(e>r||e<t){const i="bigint"==typeof t?"n":"";let n;throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new U.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){Y(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(i,n,o)}function Y(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw Y(e,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}H("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),H("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=K(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=K(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i},RangeError);const V=/[^+/0-9A-Za-z-_]/g;function q(e,t){let r;t=t||1/0;const i=e.length;let n=null;const o=[];for(let s=0;s<i;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function Q(e){return"undefined"==typeof BigInt?$:e}function $(){throw new Error("BigInt not supported")}},8298:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.43,12.98c0.04,-0.32 0.07,-0.64 0.07,-0.98 0,-0.34 -0.03,-0.66 -0.07,-0.98l2.11,-1.65c0.19,-0.15 0.24,-0.42 0.12,-0.64l-2,-3.46c-0.09,-0.16 -0.26,-0.25 -0.44,-0.25 -0.06,0 -0.12,0.01 -0.17,0.03l-2.49,1c-0.52,-0.4 -1.08,-0.73 -1.69,-0.98l-0.38,-2.65C14.46,2.18 14.25,2 14,2h-4c-0.25,0 -0.46,0.18 -0.49,0.42l-0.38,2.65c-0.61,0.25 -1.17,0.59 -1.69,0.98l-2.49,-1c-0.06,-0.02 -0.12,-0.03 -0.18,-0.03 -0.17,0 -0.34,0.09 -0.43,0.25l-2,3.46c-0.13,0.22 -0.07,0.49 0.12,0.64l2.11,1.65c-0.04,0.32 -0.07,0.65 -0.07,0.98 0,0.33 0.03,0.66 0.07,0.98l-2.11,1.65c-0.19,0.15 -0.24,0.42 -0.12,0.64l2,3.46c0.09,0.16 0.26,0.25 0.44,0.25 0.06,0 0.12,-0.01 0.17,-0.03l2.49,-1c0.52,0.4 1.08,0.73 1.69,0.98l0.38,2.65c0.03,0.24 0.24,0.42 0.49,0.42h4c0.25,0 0.46,-0.18 0.49,-0.42l0.38,-2.65c0.61,-0.25 1.17,-0.59 1.69,-0.98l2.49,1c0.06,0.02 0.12,0.03 0.18,0.03 0.17,0 0.34,-0.09 0.43,-0.25l2,-3.46c0.12,-0.22 0.07,-0.49 -0.12,-0.64l-2.11,-1.65zM17.45,11.27c0.04,0.31 0.05,0.52 0.05,0.73 0,0.21 -0.02,0.43 -0.05,0.73l-0.14,1.13 0.89,0.7 1.08,0.84 -0.7,1.21 -1.27,-0.51 -1.04,-0.42 -0.9,0.68c-0.43,0.32 -0.84,0.56 -1.25,0.73l-1.06,0.43 -0.16,1.13 -0.2,1.35h-1.4l-0.19,-1.35 -0.16,-1.13 -1.06,-0.43c-0.43,-0.18 -0.83,-0.41 -1.23,-0.71l-0.91,-0.7 -1.06,0.43 -1.27,0.51 -0.7,-1.21 1.08,-0.84 0.89,-0.7 -0.14,-1.13c-0.03,-0.31 -0.05,-0.54 -0.05,-0.74s0.02,-0.43 0.05,-0.73l0.14,-1.13 -0.89,-0.7 -1.08,-0.84 0.7,-1.21 1.27,0.51 1.04,0.42 0.9,-0.68c0.43,-0.32 0.84,-0.56 1.25,-0.73l1.06,-0.43 0.16,-1.13 0.2,-1.35h1.39l0.19,1.35 0.16,1.13 1.06,0.43c0.43,0.18 0.83,0.41 1.23,0.71l0.91,0.7 1.06,-0.43 1.27,-0.51 0.7,1.21 -1.07,0.85 -0.89,0.7 0.14,1.13zM12,8c-2.21,0 -4,1.79 -4,4s1.79,4 4,4 4,-1.79 4,-4 -1.79,-4 -4,-4zM12,14c-1.1,0 -2,-0.9 -2,-2s0.9,-2 2,-2 2,0.9 2,2 -0.9,2 -2,2z"></path></svg>'},8376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=i.__importDefault(r(3991)),o=i.__importDefault(r(4989)),s=function(e){function t(t){var r=e.call(this,t)||this,i=t.getContext("experimental-webgl",{preserveDrawingBuffer:!0});if(!i)throw new Error("Unable to initialize WebGL. Your browser may not support it.");return r.yuvSurfaceShader=n.default.create(i),r.yTexture=o.default.create(i,i.LUMINANCE),r.uTexture=o.default.create(i,i.LUMINANCE),r.vTexture=o.default.create(i,i.LUMINANCE),r}return i.__extends(t,e),t.prototype.decode=function(e,t,r){this.canvas.width=t,this.canvas.height=r;var i=t,n=t/i,o=r/r,s=i*r,a=s>>2,c=e.subarray(0,s),l=e.subarray(s,s+a),u=e.subarray(s+a,s+2*a),h=r>>1,d=i>>1;this.yTexture.image2dBuffer(c,i,r),this.uTexture.image2dBuffer(l,d,h),this.vTexture.image2dBuffer(u,d,h),this.yuvSurfaceShader.setTexture(this.yTexture,this.uTexture,this.vTexture),this.yuvSurfaceShader.updateShaderData({w:t,h:r},{maxXTexCoord:n,maxYTexCoord:o}),this.yuvSurfaceShader.draw()},t}(i.__importDefault(r(2185)).default);t.default=s},8444:(e,t,r)=>{"use strict";r.r(t)},8446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1709),n=r(1161),o=r(8794),s=1,a=function(){function e(t,r,n){this.fps=t,this.framePerFragment=r,this.timescale=n,this.readyToDecode=!1,this.totalDTS=0,this.stepDTS=Math.round(this.timescale/this.fps),this.frameCount=0,this.seq=1,this.mp4track={id:e.getTrackID(),type:"video",len:0,codec:"",sps:[],pps:[],seiBuffering:!1,width:0,height:0,timescale:n,duration:n,samples:[],isKeyFrame:!0},this.unitSamples=[[]],this.parser=new i.default(this)}return e.getTrackID=function(){return s++},Object.defineProperty(e.prototype,"seqNum",{get:function(){return this.seq},enumerable:!0,configurable:!0}),e.prototype.remux=function(e){return this.mp4track.seiBuffering&&e.type()===o.default.SEI?this.createNextFrame():(this.parser.parseNAL(e)&&(this.unitSamples[this.unitSamples.length-1].push(e),this.mp4track.len+=e.getSize(),this.mp4track.isKeyFrame=e.isKeyframe()),this.mp4track.seiBuffering||e.type()!==o.default.IDR&&e.type()!==o.default.NDR?void 0:this.createNextFrame())},e.prototype.createNextFrame=function(){if(this.mp4track.len>0){if(this.frameCount++,this.frameCount%this.framePerFragment===0){var e=this.getFragment();if(e){var t=this.totalDTS;return this.totalDTS=this.stepDTS*this.frameCount,[t,e]}n.log("No mp4 sample data.")}this.unitSamples.push([])}},e.prototype.flush=function(){this.seq++,this.mp4track.len=0,this.mp4track.samples=[],this.mp4track.isKeyFrame=!1,this.unitSamples=[[]]},e.prototype.getFragment=function(){if(this.checkReadyToDecode()){var e=new Uint8Array(this.mp4track.len);this.mp4track.samples=[];for(var t=0,r=0,i=this.unitSamples.length;r<i;r++){var n=this.unitSamples[r];if(0!==n.length){for(var o={size:0,cts:this.stepDTS*r},s=0,a=n;s<a.length;s++){var c=a[s];o.size+=c.getSize(),e.set(c.getData(),t),t+=c.getSize()}this.mp4track.samples.push(o)}}if(0!==t)return e}},e.prototype.checkReadyToDecode=function(){return!(!this.readyToDecode||0===this.unitSamples.filter(function(e){return e.length>0}).length)||(n.log("Not ready to decode! readyToDecode("+this.readyToDecode+") is false or units is empty."),!1)},e}();t.default=a},8454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.Backquote="Backquote",e.Backslash="Backslash",e.BracketLeft="BracketLeft",e.BracketRight="BracketRight",e.Comma="Comma",e.Digit0="Digit0",e.Digit1="Digit1",e.Digit2="Digit2",e.Digit3="Digit3",e.Digit4="Digit4",e.Digit5="Digit5",e.Digit6="Digit6",e.Digit7="Digit7",e.Digit8="Digit8",e.Digit9="Digit9",e.Equal="Equal",e.IntlBackslash="IntlBackslash",e.IntlRo="IntlRo",e.IntlYen="IntlYen",e.KeyA="KeyA",e.KeyB="KeyB",e.KeyC="KeyC",e.KeyD="KeyD",e.KeyE="KeyE",e.KeyF="KeyF",e.KeyG="KeyG",e.KeyH="KeyH",e.KeyI="KeyI",e.KeyJ="KeyJ",e.KeyK="KeyK",e.KeyL="KeyL",e.KeyM="KeyM",e.KeyN="KeyN",e.KeyO="KeyO",e.KeyP="KeyP",e.KeyQ="KeyQ",e.KeyR="KeyR",e.KeyS="KeyS",e.KeyT="KeyT",e.KeyU="KeyU",e.KeyV="KeyV",e.KeyW="KeyW",e.KeyX="KeyX",e.KeyY="KeyY",e.KeyZ="KeyZ",e.Minus="Minus",e.Period="Period",e.Quote="Quote",e.Semicolon="Semicolon",e.Slash="Slash",e.AltLeft="AltLeft",e.AltRight="AltRight",e.Backspace="Backspace",e.CapsLock="CapsLock",e.ContextMenu="ContextMenu",e.ControlLeft="ControlLeft",e.ControlRight="ControlRight",e.Enter="Enter",e.MetaLeft="MetaLeft",e.MetaRight="MetaRight",e.ShiftLeft="ShiftLeft",e.ShiftRight="ShiftRight",e.Space="Space",e.Tab="Tab",e.Convert="Convert",e.KanaMode="KanaMode",e.Lang1="Lang1",e.Lang2="Lang2",e.Lang3="Lang3",e.Lang4="Lang4",e.Lang5="Lang5",e.NonConvert="NonConvert",e.Delete="Delete",e.End="End",e.Help="Help",e.Home="Home",e.Insert="Insert",e.PageDown="PageDown",e.PageUp="PageUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.NumLock="NumLock",e.Numpad0="Numpad0",e.Numpad1="Numpad1",e.Numpad2="Numpad2",e.Numpad3="Numpad3",e.Numpad4="Numpad4",e.Numpad5="Numpad5",e.Numpad6="Numpad6",e.Numpad7="Numpad7",e.Numpad8="Numpad8",e.Numpad9="Numpad9",e.NumpadAdd="NumpadAdd",e.NumpadBackspace="NumpadBackspace",e.NumpadClear="NumpadClear",e.NumpadClearEntry="NumpadClearEntry",e.NumpadComma="NumpadComma",e.NumpadDecimal="NumpadDecimal",e.NumpadDivide="NumpadDivide",e.NumpadEnter="NumpadEnter",e.NumpadEqual="NumpadEqual",e.NumpadHash="NumpadHash",e.NumpadMemoryAdd="NumpadMemoryAdd",e.NumpadMemoryClear="NumpadMemoryClear",e.NumpadMemoryRecall="NumpadMemoryRecall",e.NumpadMemoryStore="NumpadMemoryStore",e.NumpadMemorySubtract="NumpadMemorySubtract",e.NumpadMultiply="NumpadMultiply",e.NumpadParenLeft="NumpadParenLeft",e.NumpadParenRight="NumpadParenRight",e.NumpadStar="NumpadStar",e.NumpadSubtract="NumpadSubtract",e.Escape="Escape",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.Fn="Fn",e.FnLock="FnLock",e.PrintScreen="PrintScreen",e.ScrollLock="ScrollLock",e.Pause="Pause",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Eject="Eject",e.LaunchApp1="LaunchApp1",e.LaunchApp2="LaunchApp2",e.LaunchMail="LaunchMail",e.MediaPlayPause="MediaPlayPause",e.MediaSelect="MediaSelect",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.Power="Power",e.Sleep="Sleep",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.WakeUp="WakeUp",e.Hyper="Hyper",e.Super="Super",e.Turbo="Turbo",e.Abort="Abort",e.Resume="Resume",e.Suspend="Suspend",e.Again="Again",e.Copy="Copy",e.Cut="Cut",e.Find="Find",e.Open="Open",e.Paste="Paste",e.Props="Props",e.Select="Select",e.Undo="Undo",e.Hiragana="Hiragana",e.Katakana="Katakana",e.Unidentified="Unidentified",e}();t.default=r},8461:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FilePushResponseStatus=void 0,(r=t.FilePushResponseStatus||(t.FilePushResponseStatus={}))[r.NEW_PUSH_ID=1]="NEW_PUSH_ID",r[r.NO_ERROR=0]="NO_ERROR",r[r.ERROR_INVALID_NAME=-1]="ERROR_INVALID_NAME",r[r.ERROR_NO_SPACE=-2]="ERROR_NO_SPACE",r[r.ERROR_FAILED_TO_DELETE=-3]="ERROR_FAILED_TO_DELETE",r[r.ERROR_FAILED_TO_CREATE=-4]="ERROR_FAILED_TO_CREATE",r[r.ERROR_FILE_NOT_FOUND=-5]="ERROR_FILE_NOT_FOUND",r[r.ERROR_FAILED_TO_WRITE=-6]="ERROR_FAILED_TO_WRITE",r[r.ERROR_FILE_IS_BUSY=-7]="ERROR_FILE_IS_BUSY",r[r.ERROR_INVALID_STATE=-8]="ERROR_INVALID_STATE",r[r.ERROR_UNKNOWN_ID=-9]="ERROR_UNKNOWN_ID",r[r.ERROR_NO_FREE_ID=-10]="ERROR_NO_FREE_ID",r[r.ERROR_INCORRECT_SIZE=-11]="ERROR_INCORRECT_SIZE",r[r.ERROR_OTHER=-12]="ERROR_OTHER"},8494:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.init=function(){for(var t in e.initalized=!0,e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trep:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=n,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),e.FTYP=e.box(e.types.ftyp,new Uint8Array([105,115,111,53,0,0,0,1,97,118,99,49,105,115,111,53,100,97,115,104])),e.STYP=e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120])),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i)),e.HDLR=e.box(e.types.hdlr,r)},e.box=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=8,n=0,o=t;n<o.length;n++)i+=o[n].byteLength;var s=new Uint8Array(i);s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=255&i,s.set(e,4),i=8;for(var a=0,c=t;a<c.length;a++){var l=c[a];s.set(l,i),i+=l.byteLength}return s},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t){return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale),e.HDLR,e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,r))},e.moov=function(t,r,i){for(var n=[],o=0,s=t;o<s.length;o++){var a=s[o];n.push(e.trak(a))}return e.box.apply(e,[e.types.moov,e.mvhd(i,r),e.mvex(t)].concat(n))},e.mvhd=function(t,r){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2]);return e.box(e.types.mvhd,i)},e.mvex=function(t){for(var r=[],i=0,n=t;i<n.length;i++){var o=n[i];r.push(e.trex(o))}return e.box.apply(e,[e.types.mvex].concat(r,[e.trep()]))},e.trep=function(){return e.box(e.types.trep,new Uint8Array([0,0,0,0,0,0,0,1]))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){for(var r=[],i=[],n=0,o=t.sps;n<o.length;n++){var s=(l=o[n]).byteLength;r.push(s>>>8&255),r.push(255&s),r=r.concat(Array.prototype.slice.call(l))}for(var a=0,c=t.pps;a<c.length;a++){var l;s=(l=c[a]).byteLength,i.push(s>>>8&255),i.push(255&s),i=i.concat(Array.prototype.slice.call(l))}var u=e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(i))),h=t.width,d=t.height;return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,255&h,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,e.box(e.types.btrt,new Uint8Array([0,0,0,0,0,45,198,192,0,45,198,192])))},e.stsd=function(t){return e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.width,n=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,1,0,0,0,1,0,0,0,2,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"audio"===t.type?1:0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,n>>8&255,255&n,0,0]))},e.traf=function(t,r){var i=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,2,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.trun(t,72))},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,60,0,0,0,0,0,1,0,0]))},e.trun=function(t,r){var i=t.samples||[],n=i.length,o=t.isKeyFrame?4:0,s=12+o+4*n,a=new Uint8Array(s);r+=8+s,a.set([0,0,2,t.isKeyFrame?5:1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),t.isKeyFrame&&a.set([0,0,0,0],12);for(var c=0;c<n;c++){var l=i[c].size;a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+o+4*c)}return e.box(e.types.trun,a)},e.initSegment=function(t,r,i){e.initalized||e.init();var n=e.moov(t,r,i),o=new Uint8Array(e.FTYP.byteLength+n.byteLength);return o.set(e.FTYP),o.set(n,e.FTYP.byteLength),o},e.fragmentSegment=function(t,r,i,n){var o=e.moof(t,r,i),s=e.mdat(n),a=new Uint8Array(e.STYP.byteLength+o.byteLength+s.byteLength);return a.set(e.STYP),a.set(o,e.STYP.byteLength),a.set(s,e.STYP.byteLength+o.byteLength),a},e.types={},e.initalized=!1,e}();t.default=r},8551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceTracker=void 0;var i=r(1635);r(9779);var n,o=r(9809),s=r(471),a=r(7802),c=r(1453),l=r(368),u=i.__importDefault(r(6178)),h=r(2178),d=i.__importDefault(r(2332)),f=r(4410),p=r(1233),_=r(6804),v=[{title:"Net Interface",field:"interfaces"},{title:"Server PID",field:"pid"}],g=function(e){function t(r,n){var o=e.call(this,i.__assign(i.__assign({},r),{action:t.ACTION}),n)||this;return o.tableId="goog_device_list",o.onInterfaceSelected=function(e){var t=e.currentTarget,r=t.selectedOptions[0],i=decodeURI(r.getAttribute(f.Attribute.URL)||""),n=r.getAttribute(f.Attribute.NAME)||"",s=decodeURIComponent(t.getAttribute(f.Attribute.FULL_NAME)||""),a=t.getAttribute(f.Attribute.UDID)||"";o.updateLink({url:i,name:n,fullName:s,udid:a,store:!0})},o.onActionButtonClick=function(e){var t=e.currentTarget,r=t.getAttribute(f.Attribute.UDID),i=t.getAttribute(f.Attribute.PID)||"",n=t.getAttribute(f.Attribute.COMMAND),s=parseInt(i,10),a={id:o.getNextId(),type:n,data:{udid:"string"==typeof r?r:void 0,pid:isNaN(s)?void 0:s}};o.ws&&o.ws.readyState===o.ws.OPEN&&o.ws.send(JSON.stringify(a))},t.instancesByUrl.set(n,o),o.buildDeviceTable(),o.openNewConnection(),o}return i.__extends(t,e),t.start=function(e){var r=this.buildUrlForTracker(e).toString(),i=this.instancesByUrl.get(r);return i||(i=new t(e,r)),i},t.getInstance=function(e){return this.start(e)},t.prototype.onSocketOpen=function(){},t.prototype.setIdAndHostName=function(r,n){var o,s;e.prototype.setIdAndHostName.call(this,r,n);try{for(var a=i.__values(t.instancesByUrl.values()),c=a.next();!c.done;c=a.next()){var l=c.value;l.id===r&&l!==this&&(console.warn('Tracker with url: "'.concat(this.url,'" has the same id(').concat(this.id,') as tracker with url "').concat(l.url,'"')),console.warn("This tracker will shut down"),this.destroy())}}catch(e){o={error:e}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}},t.prototype.updateLink=function(e){var r=this,i=e.url,n=e.name,o=e.fullName,s=e.udid,c=e.store,l=document.getElementsByName(encodeURIComponent("".concat(t.AttributePrefixPlayerFor).concat(o)));if("string"==typeof s){if(c){var u=t.getLocalStorageKey(o||"");localStorage&&n&&localStorage.setItem(u,n)}var h=a.ACTION.STREAM_SCRCPY;l.forEach(function(e){e.innerHTML="";var n=e.getAttribute(t.AttributePlayerFullName),o=e.getAttribute(t.AttributePlayerCodeName);if(n&&o){var a=t.buildLink({action:h,udid:s,player:decodeURIComponent(o),ws:i},decodeURIComponent(n),r.params);e.appendChild(a)}})}},t.getLocalStorageKey=function(e){return"device_list::".concat(e,"::interface")},t.createUrl=function(e,t){void 0===t&&(t="");var r=!!e.secure,n=e.hostname||location.hostname,o="number"==typeof e.port?e.port:r?443:80,c=e.pathname||location.pathname,l=this.buildUrl(i.__assign(i.__assign({},e),{secure:r,hostname:n,port:o,pathname:c}));return t&&(l.searchParams.set("action",a.ACTION.PROXY_ADB),l.searchParams.set("remote","tcp:".concat(s.SERVER_PORT.toString(10))),l.searchParams.set("udid",t)),l},t.createInterfaceOption=function(e,t){var r=document.createElement("option");return r.setAttribute(f.Attribute.URL,t),r.setAttribute(f.Attribute.NAME,e),r.innerText="proxy over adb",r},t.titleToClassName=function(e){return e.toLowerCase().replace(/\s/g,"_")},t.prototype.buildDeviceRow=function(e,r){var o=this,a="",_="",g="desc-block",y="".concat(this.id,"_").concat(d.default.escapeUdid(r.udid)),m=r.state===p.DeviceState.DEVICE,b=!1,S="device_services_".concat(y),E=(0,h.html)(n||(n=i.__makeTemplateObject(['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">'," ",'</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                    <div class="sdk-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'],['<div class="device ','">\n            <div class="device-header">\n                <div class="device-name">'," ",'</div>\n                <div class="device-serial">','</div>\n                <div class="device-version">\n                    <div class="release-version">','</div>\n                    <div class="sdk-version">','</div>\n                </div>\n                <div class="device-state" title="State: ','"></div>\n            </div>\n            <div id="','" class="services"></div>\n        </div>'])),m?"active":"not-active",r["ro.product.manufacturer"],r["ro.product.model"],r.udid,r["ro.build.version.release"],r["ro.build.version.sdk"],r.state,S).content,C=E.getElementById(S);if(C){t.tools.forEach(function(e){var t=e.createEntryForDeviceList(r,g,o.params);t&&(Array.isArray(t)?t.forEach(function(e){e&&C.appendChild(e)}):C.appendChild(t))});var w=l.StreamClientScrcpy.createEntryForDeviceList(r,g,y,this.params);if(w&&C.appendChild(w),v.forEach(function(e){var n,l=e.title,h=e.field;n="string"==typeof e.field?""+r[e.field]:e.field(r);var d=document.createElement("div");if(d.classList.add(t.titleToClassName(l),g),C.appendChild(d),"pid"===h){b="-1"!==n,(R=document.createElement("button")).className="action-button kill-server-button",R.setAttribute(f.Attribute.UDID,r.udid),R.setAttribute(f.Attribute.PID,n);var p=void 0;if(m)R.classList.add("active"),R.onclick=o.onActionButtonClick,b?(p=c.ControlCenterCommand.KILL_SERVER,R.title="Kill server",R.appendChild(u.default.create(u.default.Icon.CANCEL))):(p=c.ControlCenterCommand.START_SERVER,R.title="Start server",R.appendChild(u.default.create(u.default.Icon.REFRESH))),R.setAttribute(f.Attribute.COMMAND,p);else{var v=r["last.update.timestamp"];if(v){var S=new Date(v);R.title="Last update on ".concat(S.toLocaleDateString()," at ").concat(S.toLocaleTimeString())}else R.title="Not active";R.appendChild(u.default.create(u.default.Icon.OFFLINE))}var E=document.createElement("span");E.innerText=n,R.appendChild(E),d.appendChild(R)}else if("interfaces"===h){var w=t.createUrl(o.params,r.udid).toString(),A="proxy",T=t.getLocalStorageKey(y),O=localStorage&&localStorage.getItem(T),L=document.createElement("select");if(L.setAttribute(f.Attribute.UDID,r.udid),L.setAttribute(f.Attribute.FULL_NAME,y),L.setAttribute("name",encodeURIComponent("".concat(t.AttributePrefixInterfaceSelectFor).concat(y))),r.interfaces.forEach(function(e){var n=i.__assign(i.__assign({},o.params),{secure:!1,hostname:e.ipv4,port:s.SERVER_PORT}),c=t.createUrl(n).toString(),l=t.createInterfaceOption(e.name,c);l.innerText="".concat(e.name,": ").concat(e.ipv4),L.appendChild(l),O?O!==e.name&&_||(l.selected=!0,a=c,_=e.name):r["wifi.interface"]===e.name&&(l.selected=!0)}),m){var R,D=t.createInterfaceOption(A,w);O!==A&&_||(D.selected=!0,a=w,_=A),L.appendChild(D),(R=document.createElement("button")).className="action-button update-interfaces-button active",R.title="Update information",R.appendChild(u.default.create(u.default.Icon.REFRESH)),R.setAttribute(f.Attribute.UDID,r.udid),R.setAttribute(f.Attribute.COMMAND,c.ControlCenterCommand.UPDATE_INTERFACES),R.onclick=o.onActionButtonClick,d.appendChild(R)}L.onchange=o.onInterfaceSelected,d.appendChild(L)}else d.innerText=n}),t.CREATE_DIRECT_LINKS){var A="".concat(t.AttributePrefixPlayerFor).concat(y);l.StreamClientScrcpy.getPlayers().forEach(function(e){var r=e.playerCodeName,i=e.playerFullName,n=document.createElement("div");n.classList.add(g),n.setAttribute("name",encodeURIComponent(A)),n.setAttribute(t.AttributePlayerFullName,encodeURIComponent(i)),n.setAttribute(t.AttributePlayerCodeName,encodeURIComponent(r)),C.appendChild(n)})}e.appendChild(E),t.CREATE_DIRECT_LINKS&&b&&a&&this.updateLink({url:a,name:_,fullName:y,udid:r.udid,store:!1})}},t.prototype.getChannelCode=function(){return _.ChannelCode.GTRC},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),t.instancesByUrl.delete(this.url.toString()),!t.instancesByUrl.size){var r=document.getElementById(o.BaseDeviceTracker.HOLDER_ELEMENT_ID);r&&r.parentElement&&r.parentElement.removeChild(r)}},t.ACTION=a.ACTION.GOOG_DEVICE_LIST,t.CREATE_DIRECT_LINKS=!0,t.instancesByUrl=new Map,t.tools=new Set,t}(o.BaseDeviceTracker);t.DeviceTracker=g},8661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){let t={},r=e.split("&");for(let e=0,i=r.length;e<i;e++){let i=r[e].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},8672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseClient=void 0;var i=r(1635),n=r(462),o=i.__importDefault(r(2332)),s=function(e){function t(t){var r=e.call(this)||this;return r.title="BaseClient",r.params=t,r}return i.__extends(t,e),t.parseParameters=function(e){var t=o.default.parseStringEnv(e.get("action"));if(!t)throw TypeError("Invalid action");return{action:t,useProxy:o.default.parseBooleanEnv(e.get("useProxy")),secure:o.default.parseBooleanEnv(e.get("secure")),hostname:o.default.parseStringEnv(e.get("hostname")),port:o.default.parseIntEnv(e.get("port")),pathname:o.default.parseStringEnv(e.get("pathname"))}},t.prototype.setTitle=function(e){void 0===e&&(e=this.title);var t=document.querySelector("head > title");t||(t=document.createElement("title")),t.innerText=e},t.prototype.setBodyClass=function(e){document.body.className=e},t}(n.TypedEmitter);t.BaseClient=s},8687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropHandler=void 0;var r=function(){function e(){}return e.attachListeners=function(e){e.addEventListener("drop",this.dropHandler),e.addEventListener("dragover",this.dragOverHandler),e.addEventListener("dragleave",this.dragLeaveHandler),e.addEventListener("dragenter",this.dragEnterHandler)},e.detachListeners=function(e){e.removeEventListener("drop",this.dropHandler),e.removeEventListener("dragover",this.dragOverHandler),e.removeEventListener("dragleave",this.dragLeaveHandler),e.removeEventListener("dragenter",this.dragEnterHandler)},e.addEventListener=function(e){this.listeners.has(e)||(this.attachListeners(e.getElement()),this.listeners.add(e))},e.removeEventListener=function(e){this.listeners.has(e)&&(this.detachListeners(e.getElement()),this.listeners.delete(e))},e.listeners=new Set,e.dropHandler=function(t){if(!t.dataTransfer)return!1;var r=[];if(t.dataTransfer.items){for(var i=0;i<t.dataTransfer.items.length;i++)if("file"===t.dataTransfer.items[i].kind){var n=t.dataTransfer.items[i].getAsFile();n&&r.push(n)}}else for(i=0;i<t.dataTransfer.files.length;i++)r.push(t.dataTransfer.files[i]);var o=!1;return e.listeners.forEach(function(e){e.getElement()===t.currentTarget&&(o=o||e.onFilesDrop(r))}),!!o&&(t.preventDefault(),!0)},e.dragOverHandler=function(e){e.preventDefault()},e.dragLeaveHandler=function(t){var r=!1;return e.listeners.forEach(function(e){e.getElement()===t.currentTarget&&(r=r||e.onDragLeave())}),!!r&&(t.preventDefault(),!0)},e.dragEnterHandler=function(t){var r=!1;return e.listeners.forEach(function(e){e.getElement()===t.currentTarget&&(r=r||e.onDragEnter())}),!!r&&(t.preventDefault(),!0)},e}();t.DragAndDropHandler=r},8699:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17,7L7,7c-2.76,0 -5,2.24 -5,5s2.24,5 5,5h10c2.76,0 5,-2.24 5,-5s-2.24,-5 -5,-5zM17,15c-1.66,0 -3,-1.34 -3,-3s1.34,-3 3,-3 3,1.34 3,3 -1.34,3 -3,3z"></path></svg>'},8716:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WS=t.BaseWS=void 0;const n=r(4689),o=r(5374),s=r(6376),a=r(4624),c=(0,i(r(7833)).default)("engine.io-client:websocket"),l="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class u extends n.Transport{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=l?{}:(0,o.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;(0,s.encodePacket)(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(e){c("websocket closed before onclose event")}i&&(0,a.nextTick)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.randomString)()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}t.BaseWS=u;const h=a.globalThisShim.WebSocket||a.globalThisShim.MozWebSocket;t.WS=class extends u{createSocket(e,t,r){return l?new h(e,t,r):t?new h(e,t):new h(e)}doWrite(e,t){this.ws.send(t)}}},8794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.data=e,this.nri=(96&e[0])>>5,this.ntype=31&e[0]}return Object.defineProperty(e,"NDR",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IDR",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SEI",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SPS",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(e,"PPS",{get:function(){return 8},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TYPES",{get:function(){var t;return(t={})[e.IDR]="IDR",t[e.SEI]="SEI",t[e.SPS]="SPS",t[e.PPS]="PPS",t[e.NDR]="NDR",t},enumerable:!0,configurable:!0}),e.type=function(t){return t.ntype in e.TYPES?e.TYPES[t.ntype]:"UNKNOWN"},e.prototype.type=function(){return this.ntype},e.prototype.isKeyframe=function(){return this.ntype===e.IDR},e.prototype.getSize=function(){return 4+this.data.byteLength},e.prototype.getData=function(){var e=new Uint8Array(this.getSize());return new DataView(e.buffer).setUint32(0,this.getSize()-4),e.set(this.data,4),e},e}();t.default=r},8795:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.type=e,this.source=t}return e.createFromElementId=function(t){var r=document.getElementById(t);if(!r)throw Error("Could not find shader with ID: "+t);for(var i="",n=r.firstChild;n;)3===n.nodeType&&(i+=n.textContent),n=n.nextSibling;return new e(r.type,i)},e.createFromSource=function(t,r){return new e(t,r)},e}();t.default=r},8806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=r(8687),o=r(8461),s="[FilePushHandler]",a=function(){function e(t,r){var i=this;this.element=t,this.filePushStream=r,this.responseWaiter=new Map,this.listeners=new Set,this.pushIdFileNameMap=new Map,this.onStreamError=function(e){var t=e.id,r=e.error,n=i.pushIdFileNameMap.get(t)||"Unknown file";i.sendUpdate({pushId:t,fileName:n,message:r.message,progress:-1,error:!0,finished:!0})},this.onStreamResponse=function(t){var r,n=t.code,a=t.id,c=n===o.FilePushResponseStatus.NEW_PUSH_ID?e.REQUEST_NEW_PUSH_ID:t.id,l=i.responseWaiter.get(c);l?(Array.isArray(l)?(r=l.shift(),l.length||i.responseWaiter.delete(c)):(r=l,i.responseWaiter.delete(c)),r(n===o.FilePushResponseStatus.NEW_PUSH_ID?{id:c,code:a}:{id:c,code:n})):console.warn(s,'Unexpected push id: "'.concat(c,'", ').concat(JSON.stringify(t)))},n.DragAndDropHandler.addEventListener(this),r.on("response",this.onStreamResponse),r.on("error",this.onStreamError)}return e.prototype.sendUpdate=function(e){e.error&&this.pushIdFileNameMap.delete(e.pushId),this.listeners.forEach(function(t){t.onFilePushUpdate(e)})},e.prototype.logError=function(e,t,r){var i=c.get(r)||"Unknown error (".concat(r,")");this.sendUpdate({pushId:e,fileName:t,message:'error: "'.concat(i,'"'),progress:-1,error:!0,finished:!0})},e.getStreamReader=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,r,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,new Response(e).blob()];case 1:return t=i.sent(),[4,(r=t.stream().getReader()).read()];case 2:return n=i.sent(),[2,{reader:r,result:n}]}})})},e.prototype.pushFile=function(t){return i.__awaiter(this,void 0,void 0,function(){var r,n,a,c,l,u,h,d,f,p,_,v,g,y=this;return i.__generator(this,function(m){switch(m.label){case 0:return r=Date.now(),n=t.name,a=t.size,this.filePushStream.hasConnection()?(c=e.REQUEST_NEW_PUSH_ID,this.sendUpdate({pushId:c,fileName:n,message:"begins...",progress:0,error:!1,finished:!1}),this.filePushStream.sendEventNew({id:c}),[4,this.waitForResponse(c)]):(this.listeners.forEach(function(e){e.onError("WebSocket is not ready")}),[2]);case 1:return(l=m.sent().code)<=0?[2,this.logError(l,n,l)]:(this.pushIdFileNameMap.set(l,n),u=this.waitForResponse(l),this.filePushStream.sendEventStart({id:l,fileName:n,fileSize:a}),[4,Promise.all([u,e.getStreamReader(t)])]);case 2:return h=i.__read.apply(void 0,[m.sent(),2]),d=h[0].code,f=h[1],p=f.reader,_=f.result,d!==o.FilePushResponseStatus.NO_ERROR?(this.logError(l,n,d),[2]):(v=0,g=function(e){var t=e.done,o=e.value;return i.__awaiter(y,void 0,void 0,function(){var e,c,u,h,d,f;return i.__generator(this,function(_){switch(_.label){case 0:return!t&&o?[3,2]:(this.filePushStream.sendEventFinish({id:l}),[4,this.waitForResponse(l)]);case 1:return 0!==(e=_.sent().code)?this.logError(l,n,e):this.sendUpdate({pushId:l,fileName:n,message:"success!",progress:100,error:!1,finished:!0}),console.log(s,'File "'.concat(n,'" uploaded in ').concat(Date.now()-r,"ms")),[2];case 2:return v+=o.length,this.filePushStream.sendEventAppend({id:l,chunk:o}),[4,Promise.all([this.waitForResponse(l),p.read()])];case 3:return c=i.__read.apply(void 0,[_.sent(),2]),u=c[0].code,h=c[1],0!==u?(this.logError(l,n,u),[2]):(f="".concat((d=100*v/a).toFixed(2),"%"),this.sendUpdate({pushId:l,fileName:n,message:f,progress:d,error:!1,finished:!1}),[2,g(h)])}})})},[2,g(_)])}})})},e.prototype.waitForResponse=function(e){var t=this;return new Promise(function(r){var i=t.responseWaiter.get(e);if(Array.isArray(i))i.push(r);else if(i){var n=[i];n.push(r),t.responseWaiter.set(e,n)}else t.responseWaiter.set(e,r)})},e.prototype.onFilesDrop=function(t){var r=this;return this.listeners.forEach(function(e){e.onDrop()}),t.forEach(function(t){var i=t.type,n=t.name;if(r.filePushStream.isAllowedFile(t))r.pushFile(t);else{var o={pushId:e.REQUEST_NEW_PUSH_ID,fileName:n,message:'Unsupported type "'.concat(i,'"'),progress:-1,error:!0,finished:!0};r.sendUpdate(o)}}),!0},e.getErrorMessage=function(e,t){return t||c.get(e)||"Unknown error"},e.prototype.onDragEnter=function(){var e=!1;return this.listeners.forEach(function(t){e=e||t.onDragEnter()}),e},e.prototype.onDragLeave=function(){var e=!1;return this.listeners.forEach(function(t){e=e||t.onDragLeave()}),e},e.prototype.getElement=function(){return this.element},e.prototype.release=function(){this.filePushStream.off("response",this.onStreamResponse),this.filePushStream.off("error",this.onStreamError),this.filePushStream.release(),n.DragAndDropHandler.removeEventListener(this),this.listeners.clear()},e.prototype.addEventListener=function(e){this.listeners.add(e)},e.prototype.removeEventListener=function(e){this.listeners.delete(e)},e.REQUEST_NEW_PUSH_ID=0,e}();t.default=a;var c=new Map([[o.FilePushResponseStatus.NEW_PUSH_ID,"New push id"],[o.FilePushResponseStatus.NO_ERROR,"No error"],[o.FilePushResponseStatus.ERROR_INVALID_NAME,"Invalid name"],[o.FilePushResponseStatus.ERROR_NO_SPACE,"No space"],[o.FilePushResponseStatus.ERROR_FAILED_TO_DELETE,"Failed to delete existing"],[o.FilePushResponseStatus.ERROR_FAILED_TO_CREATE,"Failed to create new file"],[o.FilePushResponseStatus.ERROR_FILE_NOT_FOUND,"File not found"],[o.FilePushResponseStatus.ERROR_FAILED_TO_WRITE,"Failed to write to file"],[o.FilePushResponseStatus.ERROR_FILE_IS_BUSY,"File is busy"],[o.FilePushResponseStatus.ERROR_INVALID_STATE,"Invalid state"],[o.FilePushResponseStatus.ERROR_UNKNOWN_ID,"Unknown id"],[o.FilePushResponseStatus.ERROR_NO_FREE_ID,"No free id"],[o.FilePushResponseStatus.ERROR_INCORRECT_SIZE,"Incorrect size"]])},8824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePlayer=void 0;var i=r(1635),n=i.__importDefault(r(3644)),o=i.__importDefault(r(4196)),s=i.__importDefault(r(6722)),a=i.__importDefault(r(8089)),c=i.__importDefault(r(2332)),l=r(462),u=r(8880),h=function(e){function t(r,i,n,o,s){void 0===n&&(n="BasePlayer"),void 0===o&&(o="Dummy"),void 0===s&&(s=document.createElement("div"));var a=e.call(this)||this;a.udid=r,a.displayInfo=i,a.name=n,a.storageKeyPrefix=o,a.tag=s,a.inputBytes=[],a.bounds=null,a.totalStats={decodedFrames:0,droppedFrames:0,inputFrames:0,inputBytes:0,timestamp:0},a.totalStatsCounter=0,a.dirtyStatsWidth=0,a.state=t.STATE.STOPPED,a.showQualityStats=t.DEFAULT_SHOW_QUALITY_STATS,a.receivedFirstFrame=!1,a.statLines=[],a.supportsScreenshot=!1,a.resizeVideoToBounds=!1,a.videoHeight=-1,a.videoWidth=-1,a.updateQualityStats=function(){var e=Date.now(),r=e-1e3;a.calculateMomentumStats(),a.momentumQualityStats&&(a.totalStats.timestamp<r&&(a.totalStats={timestamp:e,decodedFrames:a.totalStats.decodedFrames+a.momentumQualityStats.decodedFrames,droppedFrames:a.totalStats.droppedFrames+a.momentumQualityStats.droppedFrames,inputFrames:a.totalStats.inputFrames+a.momentumQualityStats.inputFrames,inputBytes:a.totalStats.inputBytes+a.momentumQualityStats.inputBytes},0!==a.totalStatsCounter&&(a.perSecondQualityStats={avgDecoded:a.totalStats.decodedFrames/a.totalStatsCounter,avgDropped:a.totalStats.droppedFrames/a.totalStatsCounter,avgInput:a.totalStats.inputFrames/a.totalStatsCounter,avgSize:a.totalStats.inputBytes/a.totalStatsCounter}),a.totalStatsCounter++),a.drawStats(),a.state!==t.STATE.STOPPED&&(a.qualityAnimationId=requestAnimationFrame(a.updateQualityStats)))},a.touchableCanvas=document.createElement("canvas"),a.touchableCanvas.className="touch-layer",a.touchableCanvas.oncontextmenu=function(e){e.preventDefault()};var c=a.getPreferredVideoSetting();return a.videoSettings=t.getVideoSettingFromStorage(c,a.storageKeyPrefix,r,i),a}return i.__extends(t,e),t.isSupported=function(){return!1},t.prototype.calculateScreenInfoForBounds=function(e,t){if(this.videoWidth=e,this.videoHeight=t,this.resizeVideoToBounds){var r=e,i=t;if(this.bounds){var n=this.bounds,c=n.w,l=n.h;if(r>c||i>l){var u,h;l>(u=c>r?i:c*i/r)&&(l=u),c>(h=l==i?r:l*r/i)&&(c=h),r=0|c,i=0|l,this.tag.style.maxWidth="".concat(r,"px"),this.tag.style.maxHeight="".concat(i,"px")}}var d=new o.default(new s.default(0,0,e,t),new a.default(r,i),0);this.emit("input-video-resize",d),this.setScreenInfo(new o.default(new s.default(0,0,r,i),new a.default(r,i),0))}},t.isIFrame=function(e){return e&&e.length>4&&5==(31&e[4])},t.getStorageKey=function(e,t){var r=window.innerHeight,i=window.innerWidth;return"".concat(e,":").concat(t,":").concat(i,"x").concat(r)},t.getFullStorageKey=function(e,t,r){var i=window.innerHeight,n=window.innerWidth,o="".concat(e,":").concat(t,":").concat(n,"x").concat(i);if(r){var s=r.displayId,a=r.size;o="".concat(o,":").concat(s,":").concat(a.width,"x").concat(a.height)}return o},t.getFromStorageCompat=function(e,t,r){var i=this.getStorageKey(e,t),n=window.localStorage.getItem(i);if(!r)return n;var o=r.displayId===u.DisplayInfo.DEFAULT_DISPLAY,s=this.getFullStorageKey(e,t,r),a=window.localStorage.getItem(s);return a?(n&&o&&window.localStorage.removeItem(i),a):o?n:null},t.getFitToScreenFromStorage=function(e,t,r){if(!window.localStorage)return!1;var i=!1,n="".concat(this.getFullStorageKey(e,t,r),":fit"),o=window.localStorage.getItem(n);if(!o)return!1;try{i=JSON.parse(o)}catch(e){console.error("[".concat(this.name,"]"),"Failed to parse",o)}return i},t.getVideoSettingFromStorage=function(e,t,r,i){if(!window.localStorage)return e;var o=this.getFromStorageCompat(t,r,i);if(!o)return e;var c=JSON.parse(o),l=c.displayId,u=c.crop,h=c.bitrate,d=c.iFrameInterval,f=c.sendFrameMeta,p=c.lockedVideoOrientation,_=c.codecOptions,v=c.encoderName,g=isNaN(c.maxFps)?c.frameRate:c.maxFps,y=null;return"object"!=typeof c.bounds||isNaN(c.bounds.width)||isNaN(c.bounds.height)?isNaN(c.maxSize)||(y=new a.default(c.maxSize,c.maxSize)):y=new a.default(c.bounds.width,c.bounds.height),new n.default({displayId:"number"==typeof l?l:0,crop:u?new s.default(u.left,u.top,u.right,u.bottom):e.crop,bitrate:isNaN(h)?e.bitrate:h,bounds:null!==y?y:e.bounds,maxFps:isNaN(g)?e.maxFps:g,iFrameInterval:isNaN(d)?e.iFrameInterval:d,sendFrameMeta:"boolean"==typeof f?f:e.sendFrameMeta,lockedVideoOrientation:isNaN(p)?e.lockedVideoOrientation:p,codecOptions:_,encoderName:v})},t.putVideoSettingsToStorage=function(e,t,r,i,n){if(window.localStorage){var o=this.getFullStorageKey(e,t,n);window.localStorage.setItem(o,JSON.stringify(r));var s="".concat(o,":fit");window.localStorage.setItem(s,JSON.stringify(i))}},t.prototype.createScreenshot=function(e){var t=document.createElement("a");t.href=this.getImageDataURL(),t.download="".concat(e," ").concat((new Date).toLocaleString(),".png"),t.click()},t.prototype.play=function(){this.needScreenInfoBeforePlay()&&!this.screenInfo||(this.state=t.STATE.PLAYING)},t.prototype.pause=function(){this.state=t.STATE.PAUSED},t.prototype.stop=function(){this.state=t.STATE.STOPPED},t.prototype.getState=function(){return this.state},t.prototype.pushFrame=function(e){this.receivedFirstFrame||(this.receivedFirstFrame=!0,"number"!=typeof this.qualityAnimationId&&(this.qualityAnimationId=requestAnimationFrame(this.updateQualityStats))),this.inputBytes.push({timestamp:Date.now(),bytes:e.byteLength})},t.prototype.getTouchableElement=function(){return this.touchableCanvas},t.prototype.setParent=function(e){this.parentElement=e,e.appendChild(this.tag),e.appendChild(this.touchableCanvas)},t.prototype.needScreenInfoBeforePlay=function(){return!0},t.prototype.getVideoSettings=function(){return this.videoSettings},t.prototype.setVideoSettings=function(e,r,i){this.videoSettings=e,i&&t.putVideoSettingsToStorage(this.storageKeyPrefix,this.udid,e,r,this.displayInfo),this.resetStats(),this.emit("video-settings",n.default.copy(e))},t.prototype.getScreenInfo=function(){return this.screenInfo},t.prototype.setScreenInfo=function(e){this.needScreenInfoBeforePlay()&&this.pause(),this.receivedFirstFrame=!1,this.screenInfo=e;var t=e.videoSize,r=t.width,i=t.height;this.touchableCanvas.width=r,this.touchableCanvas.height=i,this.parentElement&&(this.parentElement.style.height="".concat(i,"px"),this.parentElement.style.width="".concat(r,"px"));var n=new a.default(r,i);this.emit("video-view-resize",n)},t.prototype.getName=function(){return this.name},t.prototype.resetStats=function(){this.receivedFirstFrame=!1,this.totalStatsCounter=0,this.totalStats={droppedFrames:0,decodedFrames:0,inputFrames:0,inputBytes:0,timestamp:0},this.perSecondQualityStats={avgDecoded:0,avgDropped:0,avgInput:0,avgSize:0}},t.prototype.drawStats=function(){if(this.showQualityStats&&this.touchableCanvas.getContext("2d")){var e=[];if(this.perSecondQualityStats&&this.momentumQualityStats){var t=this.momentumQualityStats,r=t.decodedFrames,i=t.droppedFrames,n=t.inputBytes,o=t.inputFrames,s=this.perSecondQualityStats,a=s.avgDecoded,l=s.avgDropped,u=s.avgSize,h=s.avgInput,d=o.toString().padStart(3," "),f=r.toString().padStart(3," "),p=i.toString().padStart(3," "),_=a.toFixed(1).padStart(5," "),v=l.toFixed(1).padStart(5," "),g=h.toFixed(1).padStart(5," "),y=c.default.prettyBytes(n).padStart(8," "),m=c.default.prettyBytes(u).padStart(8," ");e.push("Input bytes: ".concat(y," (avg: ").concat(m,"/s)")),e.push("Input   FPS: ".concat(d," (avg: ").concat(g,")")),e.push("Dropped FPS: ".concat(p," (avg: ").concat(v,")")),e.push("Decoded FPS: ".concat(f," (avg: ").concat(_,")"))}else e.push("Not supported");for(var b=this.statLines.length!==e.length,S=0;!b&&S++<e.length;)e[S]!==this.statLines[S]&&(b=!0);b&&(this.statLines=e,this.updateCanvas(!1))}},t.prototype.updateCanvas=function(e){var r=this,i=this.touchableCanvas.getContext("2d");if(i){var n=this.touchableCanvas.height,o=t.STATS_HEIGHT,s=this.statLines.length,a=o/2,c=2*a,l=o*s+a*(s+1);i.clearRect(0,n-l,this.dirtyStatsWidth+c,l),this.dirtyStatsWidth=0,e||(i.save(),i.font="".concat(o,"px monospace"),this.statLines.forEach(function(e){var t=i.measureText(e),n=Math.abs(t.actualBoundingBoxLeft)+Math.abs(t.actualBoundingBoxRight);r.dirtyStatsWidth=Math.max(n,r.dirtyStatsWidth)}),i.fillStyle=t.STAT_BACKGROUND,i.fillRect(0,n-l,this.dirtyStatsWidth+c,l),i.fillStyle=t.STAT_TEXT_COLOR,this.statLines.forEach(function(e,t){i.fillText(e,a,n-a-t*(o+a))}),i.restore())}},t.prototype.setShowQualityStats=function(e){this.showQualityStats=e,e?this.drawStats():this.updateCanvas(!0)},t.prototype.getShowQualityStats=function(){return this.showQualityStats},t.prototype.setBounds=function(e){this.bounds=a.default.copy(e)},t.prototype.getDisplayInfo=function(){return this.displayInfo},t.prototype.setDisplayInfo=function(e){this.displayInfo=e},t.loadVideoSettings=function(e,t){return this.getVideoSettingFromStorage(this.preferredVideoSettings,this.storageKeyPrefix,e,t)},t.getFitToScreenStatus=function(e,t){return this.getFitToScreenFromStorage(this.storageKeyPrefix,e,t)},t.getPreferredVideoSetting=function(){return this.preferredVideoSettings},t.saveVideoSettings=function(e,t,r,i){this.putVideoSettingsToStorage(this.storageKeyPrefix,e,t,r,i)},t.STAT_BACKGROUND="rgba(0, 0, 0, 0.5)",t.STAT_TEXT_COLOR="hsl(24, 85%, 50%)",t.DEFAULT_SHOW_QUALITY_STATS=!1,t.STATE={PLAYING:1,PAUSED:2,STOPPED:3},t.STATS_HEIGHT=12,t.storageKeyPrefix="BaseDecoder",t.playerFullName="BasePlayer",t.playerCodeName="baseplayer",t.preferredVideoSettings=new n.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new a.default(360,806),sendFrameMeta:!1}),t}(l.TypedEmitter);t.BasePlayer=h},8880:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayInfo=void 0;var n=r(1635).__importDefault(r(8089)),o=function(){function e(e,t,r,i,n){this.displayId=e,this.size=t,this.rotation=r,this.layerStack=i,this.flags=n}return e.prototype.toBuffer=function(){var t=i.alloc(e.BUFFER_LENGTH),r=0;return r=t.writeInt32BE(this.displayId,r),r=t.writeInt32BE(this.size.width,r),r=t.writeInt32BE(this.size.height,r),r=t.writeInt32BE(this.rotation,r),r=t.writeInt32BE(this.layerStack,r),console.log("toBuffer.this.size",this.size),t.writeInt32BE(this.flags,r),t},e.prototype.toString=function(){return"DisplayInfo{displayId=".concat(this.displayId,", size=").concat(this.size,", rotation=").concat(this.rotation,", layerStack=").concat(this.layerStack,", flags=").concat(this.flags,"}")},e.fromBuffer=function(t){if(t.length!==e.BUFFER_LENGTH)throw Error("Incorrect buffer length. Expected: ".concat(e.BUFFER_LENGTH,", received: ").concat(t.length));var r=0,i=t.readInt32BE(r);r+=4;var o=t.readInt32BE(r);r+=4;var s=t.readInt32BE(r);r+=4;var a=t.readInt32BE(r);r+=4;var c=t.readInt32BE(r);r+=4;var l=t.readInt32BE(r);return console.log("fromBuffer.width",o),console.log("fromBuffer.height",s),new e(i,new n.default(o,s),a,c,l)},e.DEFAULT_DISPLAY=0,e.FLAG_ROUND=16,e.FLAG_PRESENTATION=8,e.FLAG_PRIVATE=4,e.FLAG_SECURE=2,e.FLAG_SUPPORTS_PROTECTED_BUFFERS=1,e.INVALID_DISPLAY=-1,e.BUFFER_LENGTH=24,e}();t.DisplayInfo=o},8941:(e,t,r)=>{var i=r(2308),n=r(2122),o=r(941),s=r(4746);function a(){}a.prototype={eql:function(e){return this.isParallelTo(e)&&this.contains(e.anchor)},dup:function(){return a.create(this.anchor,this.direction)},translate:function(e){var t=e.elements||e;return a.create([this.anchor.elements[0]+t[0],this.anchor.elements[1]+t[1],this.anchor.elements[2]+(t[2]||0)],this.direction)},isParallelTo:function(e){if(e.normal||e.start&&e.end)return e.isParallelTo(this);var t=this.direction.angleFrom(e.direction);return Math.abs(t)<=s.precision||Math.abs(t-Math.PI)<=s.precision},distanceFrom:function(e){if(e.normal||e.start&&e.end)return e.distanceFrom(this);if(e.direction){if(this.isParallelTo(e))return this.distanceFrom(e.anchor);var t=this.direction.cross(e.direction).toUnitVector().elements,r=this.anchor.elements,i=e.anchor.elements;return Math.abs((r[0]-i[0])*t[0]+(r[1]-i[1])*t[1]+(r[2]-i[2])*t[2])}var n=e.elements||e,o=(r=this.anchor.elements,this.direction.elements),s=n[0]-r[0],a=n[1]-r[1],c=(n[2]||0)-r[2],l=Math.sqrt(s*s+a*a+c*c);if(0===l)return 0;var u=(s*o[0]+a*o[1]+c*o[2])/l,h=1-u*u;return Math.abs(l*Math.sqrt(h<0?0:h))},contains:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=this.distanceFrom(e);return null!==t&&t<=s.precision},positionOf:function(e){if(!this.contains(e))return null;var t=e.elements||e,r=this.anchor.elements,i=this.direction.elements;return(t[0]-r[0])*i[0]+(t[1]-r[1])*i[1]+((t[2]||0)-r[2])*i[2]},liesIn:function(e){return e.contains(this)},intersects:function(e){return e.normal?e.intersects(this):!this.isParallelTo(e)&&this.distanceFrom(e)<=s.precision},intersectionWith:function(e){if(e.normal||e.start&&e.end)return e.intersectionWith(this);if(!this.intersects(e))return null;var t=this.anchor.elements,r=this.direction.elements,n=e.anchor.elements,o=e.direction.elements,s=r[0],a=r[1],c=r[2],l=o[0],u=o[1],h=o[2],d=t[0]-n[0],f=t[1]-n[1],p=t[2]-n[2],_=l*l+u*u+h*h,v=s*l+a*u+c*h,g=((-s*d-a*f-c*p)*_/(s*s+a*a+c*c)+v*(l*d+u*f+h*p))/(_-v*v);return i.create([t[0]+g*s,t[1]+g*a,t[2]+g*c])},pointClosestTo:function(e){if(e.start&&e.end)return null===(d=e.pointClosestTo(this))?null:this.pointClosestTo(d);if(e.direction){if(this.intersects(e))return this.intersectionWith(e);if(this.isParallelTo(e))return null;var t=this.direction.elements,r=e.direction.elements,n=t[0],s=t[1],a=t[2],c=r[0],l=r[1],u=r[2],h=[(g=a*c-n*u)*u-(y=n*l-s*c)*l,y*c-(m=s*u-a*l)*u,m*l-g*c];return(d=o.create(e.anchor,h)).intersectionWith(this)}var d=e.elements||e;if(this.contains(d))return i.create(d);var f=this.anchor.elements,p=(n=(t=this.direction.elements)[0],s=t[1],a=t[2],f[0]),_=f[1],v=f[2],g=n*(d[1]-_)-s*(d[0]-p),y=s*((d[2]||0)-v)-a*(d[1]-_),m=a*(d[0]-p)-n*((d[2]||0)-v),b=i.create([s*g-a*m,a*y-n*g,n*m-s*y]),S=this.distanceFrom(d)/b.modulus();return i.create([d[0]+b.elements[0]*S,d[1]+b.elements[1]*S,(d[2]||0)+b.elements[2]*S])},rotate:function(e,t){void 0===t.direction&&(t=a.create(t.to3D(),i.k));var r=n.Rotation(e,t.direction).elements,o=t.pointClosestTo(this.anchor).elements,s=this.anchor.elements,c=this.direction.elements,l=o[0],u=o[1],h=o[2],d=s[0]-l,f=s[1]-u,p=s[2]-h;return a.create([l+r[0][0]*d+r[0][1]*f+r[0][2]*p,u+r[1][0]*d+r[1][1]*f+r[1][2]*p,h+r[2][0]*d+r[2][1]*f+r[2][2]*p],[r[0][0]*c[0]+r[0][1]*c[1]+r[0][2]*c[2],r[1][0]*c[0]+r[1][1]*c[1]+r[1][2]*c[2],r[2][0]*c[0]+r[2][1]*c[1]+r[2][2]*c[2]])},reverse:function(){return a.create(this.anchor,this.direction.x(-1))},reflectionIn:function(e){if(e.normal){var t=this.anchor.elements,r=this.direction.elements,i=t[0],n=t[1],o=t[2],s=r[0],c=r[1],l=r[2],u=this.anchor.reflectionIn(e).elements,h=i+s,d=n+c,f=o+l,p=e.pointClosestTo([h,d,f]).elements,_=[p[0]+(p[0]-h)-u[0],p[1]+(p[1]-d)-u[1],p[2]+(p[2]-f)-u[2]];return a.create(u,_)}if(e.direction)return this.rotate(Math.PI,e);var v=e.elements||e;return a.create(this.anchor.reflectionIn([v[0],v[1],v[2]||0]),this.direction)},setVectors:function(e,t){if(e=i.create(e),t=i.create(t),2==e.elements.length&&e.elements.push(0),2==t.elements.length&&t.elements.push(0),e.elements.length>3||t.elements.length>3)return null;var r=t.modulus();return 0===r?null:(this.anchor=e,this.direction=i.create([t.elements[0]/r,t.elements[1]/r,t.elements[2]/r]),this)}},a.create=function(e,t){return(new a).setVectors(e,t)},a.X=a.create(i.Zero(3),i.i),a.Y=a.create(i.Zero(3),i.j),a.Z=a.create(i.Zero(3),i.k),e.exports=a},9063:(e,t,r)=>{"use strict";r.r(t)},9133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBinary=t.isBinary=void 0;const r="function"==typeof ArrayBuffer,i=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);function s(e){return r&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||n&&e instanceof Blob||o&&e instanceof File}t.isBinary=s,t.hasBinary=function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(e(t[r]))return!0;return!1}if(s(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return!0;return!1}},9195:e=>{self,e.exports=(()=>{"use strict";var e={775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var r=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core;if(0!==e._renderService.dimensions.actualCellWidth&&0!==e._renderService.dimensions.actualCellHeight){var t=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(t.getPropertyValue("height")),i=Math.max(0,parseInt(t.getPropertyValue("width"))),n=window.getComputedStyle(this._terminal.element),o=r-(parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom"))),s=i-(parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(s/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(o/e._renderService.dimensions.actualCellHeight))}}}},e}();t.FitAddon=r}},t={};return function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}(775)})()},9196:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ShellClient=void 0;var n=r(1635);r(8444);var o=r(2468),s=r(2975),a=r(3875),c=r(9195),l=r(7802),u=r(9809),h=n.__importDefault(r(2332)),d=r(6804),f=function(e){function t(r){var i=e.call(this,r)||this;if(i.onSocketOpen=function(){i.startShell(i.udid)},i.udid=r.udid,i.openNewConnection(),i.setTitle("Shell ".concat(i.udid)),i.setBodyClass("shell"),!i.ws)throw Error("No WebSocket");return i.term=new s.Terminal,i.term.loadAddon(new a.AttachAddon(i.ws)),i.fitAddon=new c.FitAddon,i.term.loadAddon(i.fitAddon),i.escapedUdid=h.default.escapeUdid(i.udid),i.term.open(t.getOrCreateContainer(i.escapedUdid)),i.updateTerminalSize(),i.term.focus(),i}return n.__extends(t,e),t.start=function(e){return new t(e)},t.prototype.supportMultiplexing=function(){return!0},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),i=r.action;if(i!==l.ACTION.SHELL)throw Error("Incorrect action");return n.__assign(n.__assign({},r),{action:i,udid:h.default.parseString(t,"udid",!0)})},t.prototype.onSocketClose=function(e){console.log("[ShellClient]","Connection closed: ".concat(e.reason)),this.term.dispose()},t.prototype.onSocketMessage=function(){},t.prototype.startShell=function(e){if(e&&this.ws&&this.ws.readyState===this.ws.OPEN){var t=this.fitAddon.proposeDimensions(),r={id:1,type:"shell",data:{type:"start",rows:t.rows,cols:t.cols,udid:e}};this.ws.send(JSON.stringify(r))}},t.getOrCreateContainer=function(e){var t=document.getElementById(e);return t||((t=document.createElement("div")).className="terminal-container",t.id=e,document.body.appendChild(t)),t},t.prototype.updateTerminalSize=function(){var e=this.term,r=t.getOrCreateContainer(this.escapedUdid),i=this.fitAddon.proposeDimensions(),n=i.rows,o=(i.cols*e._core._renderService.dimensions.actualCellWidth+e._core.viewport.scrollBarWidth).toFixed(2)+"px",s=(n*e._core._renderService.dimensions.actualCellHeight).toFixed(2)+"px";r.style.width=o,r.style.height=s,this.fitAddon.fit()},t.createEntryForDeviceList=function(e,t,r){if("device"===e.state){var i=document.createElement("div");return i.classList.add("shell",t),i.appendChild(u.BaseDeviceTracker.buildLink({action:l.ACTION.SHELL,udid:e.udid},"shell",r)),i}},t.prototype.getChannelInitData=function(){var e=i.alloc(4);return e.write(d.ChannelCode.SHEL,"ascii"),e},t.ACTION=l.ACTION.SHELL,t}(o.ManagerClient);t.ShellClient=f},9204:(e,t,r)=>{"use strict";r.r(t)},9312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){this.canvas=e,this.size=t}},9388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=i.__importDefault(r(4989)),o=i.__importDefault(r(3146)),s=r(5003),a=i.__importDefault(r(1018)),c=i.__importDefault(r(8257)),l=r(4700),u=i.__importDefault(r(8795)),h=function(e){function t(t,r,i){var n=e.call(this,t,r)||this;return n.canvas=t,n.size=r,n.canvas.width=r.w,n.canvas.height=r.h,n.onInitWebGL(),n.onInitShaders(),n.initBuffers(),i&&n.initFramebuffer(),n.onInitTextures(),n.initScene(),n}return i.__extends(t,e),t.prototype.initFramebuffer=function(){var e=this.gl;if(e){this.framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.framebufferTexture=new n.default(e,this.size,e.RGBA);var t=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,t),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.size.w,this.size.h),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.framebufferTexture.texture,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else(0,o.default)("gl type is ".concat(typeof e))},t.prototype.initBuffers=function(){var e,t=this.gl;t?(this.quadVPBuffer=t.createBuffer(),this.quadVPBuffer?(t.bindBuffer(t.ARRAY_BUFFER,this.quadVPBuffer),e=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),this.quadVTCBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVTCBuffer),e=[1,0,0,0,1,1,0,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)):(0,o.default)("quadVPBuffer type is ".concat(typeof t))):(0,o.default)("gl type is ".concat(typeof t))},t.prototype.mvIdentity=function(){this.mvMatrix=s.Matrix.I(4)},t.prototype.mvMultiply=function(e){this.mvMatrix=this.mvMatrix.x(e)},t.prototype.mvTranslate=function(e){var t=s.Vector.create;this.mvMultiply(s.Matrix.Translation(t([e[0],e[1],e[2]])).ensure4x4())},t.prototype.setMatrixUniforms=function(){this.program?(this.program.setMatrixUniform("uPMatrix",new Float32Array(this.perspectiveMatrix.flatten())),this.program.setMatrixUniform("uMVMatrix",new Float32Array(this.mvMatrix.flatten()))):(0,o.default)("Program type is ".concat(typeof this.program))},t.prototype.initScene=function(){var e=this.gl;e?(this.perspectiveMatrix=(0,l.makePerspective)(45,1,.1,100),this.mvIdentity(),this.mvTranslate([0,0,-2.4]),e.bindBuffer(e.ARRAY_BUFFER,this.quadVPBuffer),e.vertexAttribPointer(this.vertexPositionAttribute,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.quadVTCBuffer),e.vertexAttribPointer(this.textureCoordAttribute,2,e.FLOAT,!1,0,0),this.onInitSceneTextures(),this.setMatrixUniforms(),this.framebuffer&&(console.log("Bound Frame Buffer"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer))):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.toString=function(){return"WebGLCanvas Size: "+this.size},t.prototype.checkLastError=function(e){if(this.gl&&this.glNames){var t=this.gl.getError();if(t!==this.gl.NO_ERROR){var r=this.glNames[t];r=void 0!==r?r+"("+t+")":"Unknown WebGL ENUM (0x"+t.toString(16)+")",e?console.log("WebGL Error: %s, %s",e,r):console.log("WebGL Error: %s",r),console.trace()}}},t.prototype.onInitWebGL=function(){try{this.gl=this.canvas.getContext("experimental-webgl",{preserveDrawingBuffer:!0})}catch(e){}if(this.gl){if(!this.glNames)for(var e in this.glNames={},this.gl)if(this.gl.hasOwnProperty(e)){var t=this.gl[e];"number"==typeof t&&(this.glNames[t]=e)}}else(0,o.default)("Unable to initialize WebGL. Your browser may not support it.")},t.prototype.onInitShaders=function(){var e=this.gl;e?(this.program=new a.default(e),this.program.attach(new c.default(e,t.vertexShaderScript)),this.program.attach(new c.default(e,t.fragmentShaderScript)),this.program.link(),this.program.use(),this.vertexPositionAttribute=this.program.getAttributeLocation("aVertexPosition"),e.enableVertexAttribArray(this.vertexPositionAttribute),this.textureCoordAttribute=this.program.getAttributeLocation("aTextureCoord"),e.enableVertexAttribArray(this.textureCoordAttribute)):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.onInitTextures=function(){var e=this.gl;e?this.texture=new n.default(e,this.size,e.RGBA):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.onInitSceneTextures=function(){this.texture?this.program?this.texture.bind(0,this.program,"texture"):(0,o.default)("program type is ".concat(typeof this.texture)):(0,o.default)("texture type is ".concat(typeof this.texture))},t.prototype.drawScene=function(){var e=this.gl;e?e.drawArrays(e.TRIANGLE_STRIP,0,4):(0,o.default)("gl type is ".concat(typeof e))},t.prototype.readPixels=function(e){var t=this.gl;t?t.readPixels(0,0,this.size.w,this.size.h,t.RGBA,t.UNSIGNED_BYTE,e):(0,o.default)("gl type is ".concat(typeof t))},t.vertexShaderScript=u.default.createFromSource("x-shader/x-vertex","\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n      varying highp vec2 vTextureCoord;\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    "),t.fragmentShaderScript=u.default.createFromSource("x-shader/x-fragment","\n      precision highp float;\n      varying highp vec2 vTextureCoord;\n      uniform sampler2D texture;\n      void main(void) {\n        gl_FragColor = texture2D(texture, vTextureCoord);\n      }\n    "),t}(i.__importDefault(r(9312)).default);t.default=h},9407:e=>{e.exports='<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,2C6.47,2 2,6.47 2,12s4.47,10 10,10 10,-4.47 10,-10S17.53,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8zM15.59,7L12,10.59 8.41,7 7,8.41 10.59,12 7,15.59 8.41,17 12,13.41 15.59,17 17,15.59 13.41,12 17,8.41z"></path></svg>'},9419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transports=void 0;const i=r(2071),n=r(8716),o=r(4480);t.transports={websocket:n.WS,webtransport:o.WT,polling:i.XHR}},9445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(8446),n=r(8494),o=r(1161),s=r(7162);t.mimeType='video/mp4; codecs="avc1.42E01E"';var a=r(1161);t.setLogger=a.setLogger;var c=function(){function e(e,r,i){if(void 0===r&&(r=60),void 0===i&&(i=r),this.element=e,this.fps=r,this.fpf=i,this.receiveBuffer=new s.default,this.queue=[],!MediaSource||!MediaSource.isTypeSupported(t.mimeType))throw new Error("Your browser is not supported: "+t.mimeType);this.reset()}return Object.defineProperty(e,"errorNotes",{get:function(){var e;return(e={})[MediaError.MEDIA_ERR_ABORTED]="fetching process aborted by user",e[MediaError.MEDIA_ERR_NETWORK]="error occurred when downloading",e[MediaError.MEDIA_ERR_DECODE]="error occurred when decoding",e[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]="audio/video not supported",e},enumerable:!0,configurable:!0}),e.prototype.setup=function(){var e=this;return this.mediaReadyPromise=new Promise(function(r,i){e.mediaSource.addEventListener("sourceopen",function(){o.log("Media Source opened."),e.sourceBuffer=e.mediaSource.addSourceBuffer(t.mimeType),e.sourceBuffer.addEventListener("updateend",function(){o.log("  SourceBuffer updateend"),o.log("    sourceBuffer.buffered.length="+e.sourceBuffer.buffered.length);for(var t=0,r=e.sourceBuffer.buffered.length;t<r;t++)o.log("    sourceBuffer.buffered ["+t+"]: "+e.sourceBuffer.buffered.start(t)+", "+e.sourceBuffer.buffered.end(t));if(o.log("  mediasource.duration="+e.mediaSource.duration),o.log("  mediasource.readyState="+e.mediaSource.readyState),o.log("  video.duration="+e.element.duration),o.log("    video.buffered.length="+e.element.buffered.length),o.isEnable())for(t=0,r=e.element.buffered.length;t<r;t++)o.log("    video.buffered ["+t+"]: "+e.element.buffered.start(t)+", "+e.element.buffered.end(t));if(o.log("  video.currentTime="+e.element.currentTime),o.log("  video.readyState="+e.element.readyState),!e.sourceBuffer.updating){var i=e.queue.shift();i&&e.doAppend(i)}}),e.sourceBuffer.addEventListener("error",function(){o.error("  SourceBuffer errored!")}),e.mediaReady=!0,r()},!1),e.mediaSource.addEventListener("sourceclose",function(){o.log("Media Source closed."),e.mediaReady=!1},!1),e.element.src=URL.createObjectURL(e.mediaSource)}),this.mediaReadyPromise},e.prototype.play=function(){var e=this;if(this.element.paused)if(this.mediaReady&&this.element.readyState>=2)this.element.play();else{var t=function(){e.play(),e.element.removeEventListener("canplaythrough",t)};this.element.addEventListener("canplaythrough",t)}},e.prototype.pause=function(){this.element.paused||this.element.pause()},e.prototype.reset=function(){if(this.receiveBuffer.clear(),this.mediaSource&&"open"===this.mediaSource.readyState&&this.sourceBuffer.updating){var e=this.mediaSource;this.sourceBuffer.addEventListener("updateend",function(){e.endOfStream()})}this.mediaSource=new MediaSource,this.remuxer=new i.default(this.fps,this.fpf,60*this.fps),this.mediaReady=!1,this.mediaReadyPromise=void 0,this.queue=[],this.setup()},e.prototype.appendRawData=function(e){for(var t=0,r=this.receiveBuffer.append(e);t<r.length;t++){var i=r[t],n=this.remuxer.remux(i);n&&this.writeFragment(n[0],n[1])}},e.prototype.writeFragment=function(e,t){var r=this.remuxer;if(r.mp4track.isKeyFrame&&this.writeBuffer(n.default.initSegment([r.mp4track],1/0,r.timescale)),t&&t.byteLength){o.log(" Put fragment: "+r.seqNum+", frames="+r.mp4track.samples.length+", size="+t.byteLength);var i=n.default.fragmentSegment(r.seqNum,e,r.mp4track,t);this.writeBuffer(i),r.flush()}else o.error("Nothing payload!")},e.prototype.writeBuffer=function(e){var t=this;this.mediaReady?this.sourceBuffer.updating||this.queue.length?this.queue.push(e):this.doAppend(e):(this.queue.push(e),this.mediaReadyPromise&&(this.mediaReadyPromise.then(function(){if(!t.sourceBuffer.updating){var e=t.queue.shift();e&&t.doAppend(e)}}),this.mediaReadyPromise=void 0))},e.prototype.doAppend=function(t){var r=this.element.error;if(r)o.error("MSE Error Occured: "+e.errorNotes[r.code]),this.element.pause(),"open"===this.mediaSource.readyState&&this.mediaSource.endOfStream();else try{this.sourceBuffer.appendBuffer(t),o.log("  appended buffer: size="+t.byteLength)}catch(e){o.error("MSE Error occured while appending buffer. "+e.name+": "+e.message)}},e}();t.default=c},9477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1635),n=function(e){function t(t){var r=e.call(this,t)||this;return r.canvasBuffer=null,r.canvasCtx=r.canvas.getContext("2d"),r}return i.__extends(t,e),t.prototype.decode=function(e,t,r){if(e){this.canvasBuffer||(this.canvasBuffer=this.canvasCtx.createImageData(t,r));for(var i=t*r,n=i>>2,o=e.subarray(0,i),s=e.subarray(i,i+n),a=e.subarray(i+n,i+2*n),c=0;c<r;c++)for(var l=0;l<t;l++){var u=l+c*t,h=~~(c/2)*~~(t/2)+~~(l/2),d=~~(c/2)*~~(t/2)+~~(l/2),f=1.164*(o[u]-16)+1.596*(a[d]-128),p=1.164*(o[u]-16)-.813*(a[d]-128)-.391*(s[h]-128),_=1.164*(o[u]-16)+2.018*(s[h]-128),v=4*u;this.canvasBuffer.data[v+0]=f,this.canvasBuffer.data[v+1]=p,this.canvasBuffer.data[v+2]=_,this.canvasBuffer.data[v+3]=255}this.canvasCtx.putImageData(this.canvasBuffer,0,0)}},t}(i.__importDefault(r(2185)).default);t.default=n},9493:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteDevtoolsCommand=void 0,(t.RemoteDevtoolsCommand||(t.RemoteDevtoolsCommand={})).LIST_DEVTOOLS="list_devtools"},9511:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TinyH264Player=void 0;var i=r(1635),n=r(1555),o=i.__importDefault(r(4528)),s=i.__importDefault(r(3644)),a=i.__importDefault(r(8376)),c=i.__importDefault(r(9477)),l=i.__importDefault(r(8089)),u=function(e){function t(r,i,n){void 0===n&&(n=t.playerFullName);var o=e.call(this,r,i,n,t.storageKeyPrefix)||this;return o.isDecoderReady=!1,o.supportsScreenshot=!0,o.onWorkerMessage=function(e){var t=e.data;switch(t.type){case"pictureReady":var r=t.width,i=t.height,n=t.data;o.onFrameDecoded(r,i,new Uint8Array(n));break;case"decoderReady":o.isDecoderReady=!0;break;default:console.error("[".concat(o.name,"]"),Error('Wrong message type "'.concat(t.type,'"')))}},o}return i.__extends(t,e),t.isSupported=function(){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate},t.prototype.initWorker=function(){this.worker=new o.default,this.worker.addEventListener("message",this.onWorkerMessage)},t.prototype.initCanvas=function(t,r){e.prototype.initCanvas.call(this,t,r),n.BaseCanvasBasedPlayer.hasWebGLSupport()?this.canvas=new a.default(this.tag):this.canvas=new c.default(this.tag)},t.prototype.decode=function(e){this.worker&&this.isDecoderReady&&this.worker.postMessage({type:"decode",data:e.buffer,offset:e.byteOffset,length:e.byteLength,renderStateId:t.videoStreamId},[e.buffer])},t.prototype.play=function(){e.prototype.play.call(this),this.worker||this.initWorker()},t.prototype.stop=function(){e.prototype.stop.call(this),this.worker&&(this.worker.removeEventListener("message",this.onWorkerMessage),this.worker.postMessage({type:"release",renderStateId:t.videoStreamId}),delete this.worker)},t.prototype.getPreferredVideoSetting=function(){return t.preferredVideoSettings},t.prototype.clearState=function(){e.prototype.clearState.call(this),this.worker&&(this.worker.postMessage({type:"release",renderStateId:t.videoStreamId}),t.videoStreamId++)},t.prototype.getFitToScreenStatus=function(){return t.getFitToScreenStatus(this.udid,this.displayInfo)},t.prototype.loadVideoSettings=function(){return t.loadVideoSettings(this.udid,this.displayInfo)},t.storageKeyPrefix="Tinyh264Decoder",t.playerFullName="Tiny H264",t.playerCodeName="tinyh264",t.videoStreamId=1,t.preferredVideoSettings=new s.default({lockedVideoOrientation:-1,bitrate:524288,maxFps:24,iFrameInterval:5,bounds:new l.default(480,480),sendFrameMeta:!1}),t}(n.BaseCanvasBasedPlayer);t.TinyH264Player=u},9516:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=Math.round(e),this.y=Math.round(t)}return e.prototype.equals=function(e){return this===e||null!==e&&this.x===e.x&&this.y===e.y},e.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},e.prototype.toString=function(){return"Point{x=".concat(this.x,", y=").concat(this.y,"}")},e.prototype.toJSON=function(){return{x:this.x,y:this.y}},e}();t.default=r},9779:(e,t,r)=>{"use strict";r.r(t)},9809:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDeviceTracker=void 0;var n,o=r(1635),s=r(2468),a=r(2178),c=o.__importDefault(r(2332)),l="[BaseDeviceTracker]",u=function(e){function t(r,i){var n=e.call(this,r)||this;return n.directUrl=i,n.title="Device list",n.tableId="base_device_list",n.descriptors=[],n.trackerName="",n.id="",n.created=!1,n.messageId=0,n.elementId="tracker_instance".concat(++t.instanceId),n.trackerName="Unavailable. Host: ".concat(r.hostname,", type: ").concat(r.type),n.setBodyClass("list"),n.setTitle(),n}return o.__extends(t,e),t.registerTool=function(e){this.tools.add(e)},t.buildUrl=function(e){var t,r=e.secure,i=e.port,n=e.hostname,o=null!==(t=e.pathname)&&void 0!==t?t:"/",s=new URL("".concat(r?"wss:":"ws:","//").concat(n).concat(o));return i&&(s.port=i.toString()),s},t.buildUrlForTracker=function(e){var t=this.buildUrl(e);return t.searchParams.set("action",this.ACTION),t},t.buildLink=function(e,t,r){var i,n=r.hostname,o=r.port,s=null!==(i=r.pathname)&&void 0!==i?i:location.pathname,a=r.secure?"https:":"http:";r.useProxy&&(e.hostname=n,e.port=o,e.pathname=s,e.secure=r.secure,e.useProxy=!0,a=location.protocol,n=location.hostname,o=location.port,s=location.pathname);var c="#!".concat(new URLSearchParams(e).toString()),l=document.createElement("a");return l.setAttribute("href","".concat(a,"//").concat(n,":").concat(o).concat(s).concat(c)),l.setAttribute("rel","noopener noreferrer"),l.setAttribute("target","_blank"),l.classList.add("link-".concat(e.action)),l.innerText=t,l},t.parseParameters=function(t){var r=e.parseParameters.call(this,t),i=c.default.parseString(t,"type",!0);if("android"!==i&&"ios"!==i)throw Error("Incorrect type");return o.__assign(o.__assign({},r),{type:i})},t.prototype.getNextId=function(){return++this.messageId},t.prototype.buildDeviceTable=function(){var e=this,t=this.descriptors,r=this.getOrCreateTableHolder(),i=this.getOrBuildTableBody(r),n=this.getOrCreateTrackerBlock(i,this.trackerName);t.forEach(function(t){e.buildDeviceRow(n,t)})},t.prototype.setNameValue=function(e,t){if(e){var r="".concat(this.elementId,"_name"),i=document.getElementById(r);i||((i=document.createElement("div")).id=r,i.className="tracker-name"),i.innerText=t,e.insertBefore(i,e.firstChild)}},t.prototype.getOrCreateTrackerBlock=function(e,t){var r=document.getElementById(this.elementId);if(r)for(;r.children.length;)r.removeChild(r.children[0]);else(r=document.createElement("div")).id=this.elementId,e.appendChild(r),this.created=!0;return this.setNameValue(r,t),r},t.prototype.onSocketClose=function(e){var t=this;this.destroyed||(console.log(l,"Connection closed: ".concat(e.reason)),setTimeout(function(){t.openNewConnection()},2e3))},t.prototype.onSocketMessage=function(e){var r;try{r=JSON.parse(e.data)}catch(e){return console.error(l,e.message),void console.log(l,e.data)}switch(r.type){case t.ACTION_LIST:var i=r.data;this.descriptors=i.list,this.setIdAndHostName(i.id,i.name),this.buildDeviceTable();break;case t.ACTION_DEVICE:var n=r.data;this.setIdAndHostName(n.id,n.name),this.updateDescriptor(n.device),this.buildDeviceTable();break;default:console.log(l,"Unknown message type: ".concat(r.type))}},t.prototype.setIdAndHostName=function(e,t){this.id===e&&this.trackerName===t||(this.id=e,this.trackerName=t,this.setNameValue(document.getElementById(this.elementId),t))},t.prototype.getOrCreateTableHolder=function(){var e=t.HOLDER_ELEMENT_ID,r=document.getElementById(e);return r||((r=document.createElement("div")).id=e,r.className="table-wrapper",document.body.appendChild(r)),r},t.prototype.updateDescriptor=function(e){var t=this.descriptors.findIndex(function(t){return t.udid===e.udid});-1!==t?this.descriptors[t]=e:this.descriptors.push(e)},t.prototype.getOrBuildTableBody=function(e){var r="device-list",i=document.querySelector("#".concat(t.HOLDER_ELEMENT_ID," #").concat(this.tableId,".").concat(r));if(!i){var s=(0,a.html)(n||(n=o.__makeTemplateObject(['<div id="','" class="','"></div>'],['<div id="','" class="','"></div>'])),this.tableId,r).content;e.appendChild(s);var c=e.children.item(e.children.length-1);c&&(i=c)}return i},t.prototype.getDescriptorByUdid=function(e){if(this.descriptors.length)return this.descriptors.find(function(t){return t.udid===e})},t.prototype.destroy=function(){if(e.prototype.destroy.call(this),this.created){var r=document.getElementById(this.elementId);if(r){var i=r.parentElement;r.remove(),i&&!i.children.length&&i.remove()}}var n=document.getElementById(t.HOLDER_ELEMENT_ID);n&&!n.children.length&&n.remove()},t.prototype.supportMultiplexing=function(){return!0},t.prototype.getChannelCode=function(){throw Error("Not implemented. Must override")},t.prototype.getChannelInitData=function(){var e=this.getChannelCode(),t=i.alloc(e.length);return t.write(e,"ascii"),t},t.ACTION_LIST="devicelist",t.ACTION_DEVICE="device",t.HOLDER_ELEMENT_ID="devices",t.AttributePrefixInterfaceSelectFor="interface_select_for_",t.AttributePlayerFullName="data-player-full-name",t.AttributePlayerCodeName="data-player-code-name",t.AttributePrefixPlayerFor="player_for_",t.tools=new Set,t.instanceId=0,t}(s.ManagerClient);t.BaseDeviceTracker=u},9958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventClass=t.Event2=void 0;var i=r(1635),n=function(){function e(e,t){void 0===t&&(t={cancelable:!0,bubbles:!0,composed:!1}),this.isTrusted=!0,this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0;var r=i.__assign({},t),n=r.cancelable,o=r.bubbles,s=r.composed;this.cancelable=!!n,this.bubbles=!!o,this.composed=!!s,this.type="".concat(e),this.defaultPrevented=!1,this.timeStamp=Date.now(),this.target=null}return e.prototype.stopImmediatePropagation=function(){},e.prototype.preventDefault=function(){this.defaultPrevented=!0},Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcElement",{get:function(){return this.target},enumerable:!1,configurable:!0}),e.prototype.composedPath=function(){return this.target?[this.target]:[]},Object.defineProperty(e.prototype,"returnValue",{get:function(){return!this.defaultPrevented},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventPhase",{get:function(){return this.target?Event.AT_TARGET:Event.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cancelBubble",{get:function(){return!1},set:function(e){e&&this.stopPropagation()},enumerable:!1,configurable:!0}),e.prototype.stopPropagation=function(){},e.prototype.initEvent=function(e,t,r){this.type=e,arguments.length>1&&(this.bubbles=!!t),arguments.length>2&&(this.cancelable=!!r)},e.NONE=0,e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,e}();t.Event2=n,t.EventClass="undefined"!=typeof Event?Event:n},9989:(e,t,r)=>{"use strict";var i=r(8287).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var n=r(1635),o=r(2701),s=n.__importDefault(r(2332)),a=r(6402),c=function(){function e(e,t,r){this.type=e,this.channelId=t,this.data=r}return e.parse=function(t){var r=i.from(t);return new e(r.readUInt8(0),r.readUInt32LE(1),t.slice(5))},e.fromCloseEvent=function(t,r,n){var a=n?s.default.stringToUtf8ByteArray(n):i.alloc(0),c=i.alloc(6+a.byteLength);return c.writeUInt16LE(r,0),a.byteLength&&(c.writeUInt32LE(a.byteLength,2),c.set(a,6)),new e(o.MessageType.CloseChannel,t,c)},e.createBuffer=function(e,t,r){var n=i.alloc(5+(r?r.byteLength:0));return n.writeUInt8(e,0),n.writeUInt32LE(t,1),(null==r?void 0:r.byteLength)&&n.set(i.from(r),5),n},e.prototype.toCloseEvent=function(){var e,t;if(this.data&&this.data.byteLength){var r=i.from(this.data);if(e=r.readUInt16LE(0),r.byteLength>6){var n=r.readUInt32LE(2);t=s.default.utf8ByteArrayToString(r.slice(6,6+n))}}return new a.CloseEventClass("close",{code:e,reason:t,wasClean:1e3===e})},e.prototype.toBuffer=function(){return e.createBuffer(this.type,this.channelId,this.data)},e}();t.Message=c}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{"use strict";var e=r(1635);r(9204);var t=r(368),i=r(8007),n=r(102);window.onload=function(){return e.__awaiter(this,void 0,void 0,function(){var o,s,a,c,l,u,h,d,f,p,_,v,g,y,m,b,S,E,C,w,A,T;return e.__generator(this,function(O){switch(O.label){case 0:return o=location.hash.replace(/^#!/,""),s=new URLSearchParams(o),a=s.get("action"),c=s.get("number"),l=null==s.get("ips")?"172.20.50.59:7000":s.get("ips"),console.log("ips",l),[4,Promise.resolve().then(function(){return e.__importStar(r(7766))})];case 1:return u=O.sent().BroadwayPlayer,t.StreamClientScrcpy.registerPlayer(u),[4,Promise.resolve().then(function(){return e.__importStar(r(7164))})];case 2:return h=O.sent().MsePlayer,t.StreamClientScrcpy.registerPlayer(h),[4,Promise.resolve().then(function(){return e.__importStar(r(9511))})];case 3:return d=O.sent().TinyH264Player,t.StreamClientScrcpy.registerPlayer(d),[4,Promise.resolve().then(function(){return e.__importStar(r(6322))})];case 4:return f=O.sent().WebCodecsPlayer,t.StreamClientScrcpy.registerPlayer(f),a===t.StreamClientScrcpy.ACTION&&"string"==typeof s.get("udid")?(p=function(e,t,r){var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3);var n="expires="+i.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"},_=function(e){for(var t=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var n=r[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},v=s.get("udid"),g=s.get("parentUid"),y=(0,i.io)("ws://"+l),m="",console.log("parentUid",g),y.on("uuid",function(e){m=e,console.log("clientUuid",m);var t={};try{t=JSON.parse(_("token"))}catch(e){t={user:"admin",pass:"admin"}}y.emit("auth.login",t)}),b={socket:y,uuid:m,parentUid:g,clientUuid:m,deviceUuid:v,type:"REMOTE"},y.on("auth",function(e){p("token",JSON.stringify(e),24),y.emit("feature.capture.off",{}),y.emit("client.type.remote",{}),y.emit("window.open",{uuid:m,parentUid:g,clientUuid:m,deviceUuid:v,type:"REMOTE"}),y.emit("client.subscribe.devices",[v])}),y.on("connect",function(){var e=document.createElement("button");e.className="control-button",e.title="Pegar en dispositivo";var t=document.createElement("img");t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABcCAYAAADqBHIiAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADE1JREFUeJztXXusHFUZ/31n58zupaUvEPsAWoGmSgWB8giKpkAM4WERMAgoAREUjYJiiEQQEAxEkpJoAhGBoAlJFeSp8jAKyqN/aHjYBoogDylQlD5o6b17d87M+fnH7r3dbuec2b07s7s39pfc9Ha+OWe++d1vvvPNOd/5RkhisiKKogOVUscDOILkIgBzAMwAQADvA3hbRF4GsNJa+2gYhi/0WkeZhARLFEVniMj3AXyiw7bPkbwhDMO7ANgCdNsBk43gOcaYOwEc02U/TyRJcnalUnkzD6V8mEwEzzbGPAlgv5z6W2utXVoul1/Lqb9UqCI7zxESRdFtyI9cANhLKbUCQJBjnztgMhBcMcbcKCInFtD34VEUXVdAv+MYNBcRjIyM7KG1ngfgQACHADgNwIc76KMKYBRAGcAubbb5K4AVIvKitfY9klG5XB4GsKXR34TRD4JnxHF8BMmPApgvInuTnE9yTxHZA50/VR+IyHJr7b1hGL4OYGuTbEoURSeLyE2oh28TQQTgTRFZBeB5kg9rrZ9BPRTMRK8I3iOO43NIfgHAYQAkp363AjhKa/0P30lRFJ0iIvfmdE2QXAfgjiRJbh4aGnrbd27RBM8wxlwN4ELUH9lcISI/DILgx+2ca4x5BnWXkycMgF9ora8EsDHthMIINsYcCuAeAHsXcgEASZLMbzeWjaLoVBG5pyBVNpA8PwzD+1sFhRBsjDkcwJ8A7Jp759vwstZ6UQfnK2PMKgCLC9KHJK8Pw/AKNPnnIsK03UXkPhRLbkLyRx22sSLybdQf6yIgIvKD1rAvdws2xvwSwDk5dlkD8Fbj5zURWZMkyf3lcvmViXQWx/Gx1tpLRWQfALujHl1kDboJgFIHlzlPa30HkDPBtVptoVJqTRvKPA/gCQBLAHzKc95yrfUVqMe1RaEUx/ElJG9wnSAiV1tr7xKR7wD4KrLvb3Mcx4uHhobeztVFiMj5GRd/Q0SO1lofrLW+WEQu9fVnrb0VxZILAEkQBDfDE9daa1eFYbhGa/11kgcDeC6jz+lBEFwO5OyDReR0j3i9tfbYIAj+MnYgCIKXMvrr5LHsBsPw/CFF5K2x38MwXK21PhLATRl9ng2gnBvBtVptXwALPKdcmzJztcXXp4hM61avDuAk2Fq7oeVQTWv9LZK+eYypcRwflRvBInKQRzyitb4t5XjS+EmFUmq3rhVrH7FLUC6X16cdD8PwKgD/dbUjeWBuBCulFnou9BiAEYc4crWz1n6oW71yQATgA4csJvmsp+3C3Agm6SRYKfV3T9OtLoGI9J1gkhvhGQBFxDlhLyKz85xsdhJsrfUNZlsApBJJ8otRFI27CaXU+2jcLMktaLgXksNoPAmlUqlKcsyfRg0ZACTW2nGfXy6Xx/uC20IhIk5Z49qbRNLDaJKz8iTYaW0i4psv8A10S0Rkydh/XDF78w1a617LVGrbA2tM2y90wz6hUmqT511iZp5hmnNy21r7nqedN5IYAHgJJrnJI67kSfCQS9B4HF14N0cdckeTi3HJU6cpG9A9IRj1+YRUiMiLOeqQO5RSmS7CIw56RbDT4ZF8EJ5Qrd9ow4Jd4SdEpJTXICfwz0E4g3it9fMAFkRR9EkRmUdyrojMFZEKAFhrpzW9Mu+C+uu9M7QDAJJRq+U1RxpNxzZj+wwfq5Ta3NKddzkKfuMJCs0JaL5WhnxdGIZFrTYUCpKRK0xDzi7i/xIkffFeaSfBXYKkb/zYacHdolKp7CS4YOwkuGD4fLDsJLh7+CyYEwnTZqYcy1qVnQl3RnkMz2zWJIDPgq1zVXlkZGRuEATfEJEjAXwc9SXuotfIxsh+H8A7AFYDWKm1fhBA6wvAoECMMS7jidIILkVRdI2IXAKgUqxubWOU5I1hGF6L4leZO0aD4LSneLSV4FnGmF8D+GxPNOscj2mtT0KXObt5wxgTI/3pro4PcqOjowuMMU9jcMkFgGOMMW1lUw4I6j44iqIDlFIPkdyz3xq1gSRJkv0qlcob/VZkDMaYCIBOEW1VcRx/WkSemiTkAkBJKfWVfivRAtcgR0XyFAC9TPDoGiJyQr91aIFrttAGyI4UNgF4SEReIfmutXZdqVT6oLGqC5LDjgkPrZSa2nxARKZi26OkrLXTm2RDzbqIyAxr7VIROT6l70MATMfghG5OC84ieLPWejGAdfnrlI04jhOSaQSrOI4XB0GwsudKpcPtIuDfO/Eg+kQuAJB0roSQ3L+XumTA6SLU2NKMA38rQpsO4MxbI1nY3o8JwE2wtdZJsIh400t7AKcFi8icXiqSAbeL8Fkwyda0zV7D5yJm91KRDEzMBydJ0m+CnS6iEZEMClJdBEl/mFapVHwZOQCAOI6PJPklAIeiXnFkbHdRc0JGFcB7AN4RkZdE5JlSqfQ4sucUnBYMYEqWbj1EKsFKqcwwzZshZ4w5F8AdDnHavDFIgiSstVsB3KK1vgqO/C+SiWdJvN2N3n0DyUTBT7DPggDgm11cfyqA7xljbp/g9QeJYHcUASD0NMwi2Jcu1S6OnuD1B4lgFxIfwTEyMnJE5J85KPGIR+Yc5DBYPtgFL8G+mwMAWGt/0855HqzWWjv3ypVKJZ8F5/H0FI0kQPo8JpDtHhCG4d21Wu1ZpdRSkvMbeyqmiMhUkrtix22qFo16ZgAe11r/Fu7NMSDp++MN0oq4dzZtwhYMAOVy+VUAr05Eqzbg0yGvoh55wKVLouC24G4e/byQtZFiUKzYZcGJgvs1bxAIztJhUhDs8oGDsHKbNQ4MCsEuWAU3kb6dQT1BxiAHDI4f9vrg1LQlkqn7c3uMyWLBThcRkPyXiOzbKhGRte30PDo6Ol9rvb+1dr6ITG8ShdbailJqfB9cY/3uLRF5t1GKK8sNZVVIHQiCSdIxZ5IEjXpix6U0ejSrY2PMBaVS6efWWtVos51cRFKPNdpuBbBCa30RHOlQJK1nsgcYEII9sEprfTuAW7G9mf8qDMN2Crmdh4nf5FQAF0RRdIXnnIGq+zgBJApAorX+GskDSJ5FcrHW+ly0F6bN61YDEVnmEfekiHJRIJmM5wc3ym93WoJ7A4C9utTDV/9msliwNw6eMKy1V6K7eHmV1voyj3yyEOyC7WojYrlc/l21Wl2ktT6d5GGo1+yZjvr8xkzUX8OHsG1H/RYAawG8SvLhMAwfgCfft41BbqChlIq63uk5NDS0FsDyHPRJw6S2YJLVgQ9z+q1AO1BKuQxhsAkWkV7tpe4K1lqXHxtsguGeSh0ouCx44F2EiEwKgj0YbIIxSSzYBaXUYBM82S2Y5OhAE4yCPyKSI/xRhDHmImPM68aYzcaYP0ZRNBDJzUmSFFlFO0+4CU6S5CQAP0X9LWwa6vvk/lytVvu+60gptXu/degGSqn1ylp7RqtARGYHQXB9P5Rq0aPvtSuzUKvVlpFM/VJNkiRrFUnXF1LOqtVqnVT5zx0DUn3ViVqttkwpdTfSox2GYfimEpH/ONorpdTFBeqXCaVUX//APkRRdGqDXFfizhoAmxXqBetdOAfArLyVawfVanUeSV/mZb8gcRxfJiI+cgHgUQCQ4eHhuVrrtXAv/dwlIs+iXox4fAWa5FZsy7xJWhY3m2Vjx5rLztY1FQlFZAoAJSLTrbWzlFILSX4MwOeQsQNVaz0NxRXzEAAzqtXqlCAI5lhrZ5dKpQNInol6/QwfakmSLKpUKv8Wkojj+D6Sny9I0aJwi9b6woxzxBizRESObRSQno/6PLVCfd567F/BxL/WteNFRS4PguA6oPEdjVqttq9S6gUU8EGnIiAiDwRBcBo864ajo6MLSqXSvQAO7p1mAMnfh2F4MhpTrQqoZ0iKyOW9VKQLrAyC4ExkLMqWSqVL0GNyATwdhuFZaJrHHve7QRAsB/CzHivUKV7SWi9DG+uAJHuaW0fyEa31cWgZE7Yb2LTW3yX5EwzgUg3JdUmSHI/6SnY7uLNIfZoQk7wmDMOTkLJbqjVysGEYXiYinwHwVE/Uaw9bROSETqqchGG4GoBvB1O32AhgBcmDGt/TSHVZ3o9FNQa/pST3EZGPoD5fUUF95AXJXUSkdWB01UFrrtU79mFTkNyuZm8jFBxL+quRHFFK/SEIgie9t5uOkjHmyyJyIsl5AHZDvTzZ2Pa11n0eo9jmfragbpEbRGQjyfUi8rq19hUReVlrvRptJOf8D7J58LvWM9TYAAAAAElFTkSuQmCC",e.appendChild(t),console.log(y.id)}),y.on("window.update",function(e){if(console.log(e),e.uuid==m){var t=e.url;console.log("window.update currentUrl1",t),location.replace(t),location.reload(),window.focus()}}),y.on("remote.url",function(e){console.log("remote.url",e)}),y.on("clusters",function(e){console.log("clusters",e)}),y.on("disconnect",function(){console.log(y.id)}),(S=document.createElement("div")).className="div-float",S.innerHTML=null!=c?c:"N/A",document.body.appendChild(S),document.title="".concat(c," [").concat(s.get("udid"),"]"),t.StreamClientScrcpy.start(b,s),[2]):(E=[],[4,Promise.resolve().then(function(){return e.__importStar(r(9196))})]);case 5:return C=O.sent().ShellClient,a===C.ACTION&&"string"==typeof s.get("udid")?(C.start(C.parseParameters(s)),[2]):(E.push(C),[4,Promise.resolve().then(function(){return e.__importStar(r(6088))})]);case 6:return w=O.sent().DevtoolsClient,a===w.ACTION?(w.start(w.parseParameters(s)),[2]):(E.push(w),[4,Promise.resolve().then(function(){return e.__importStar(r(7672))})]);case 7:return A=O.sent().FileListingClient,a===A.ACTION?(A.start(A.parseParameters(s)),[2]):(E.push(A),E.length?[4,Promise.resolve().then(function(){return e.__importStar(r(8551))})]:[3,9]);case 8:T=O.sent().DeviceTracker,E.forEach(function(e){T.registerTool(e)}),O.label=9;case 9:return n.HostTracker.start(),[2]}})})}})()})();